"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/dashboard"}).when("/dashboard",{controller:"DashboardController",templateUrl:"views/dashboard.html"}).when("/usercreate",{controller:"UserCreateController",templateUrl:"views/usercreate.html"}).when("/userpassword",{controller:"UserPasswordController",templateUrl:"views/userpassword.html"}).when("/userlist",{controller:"UserListController",templateUrl:"views/userlist.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/app/:appStoreId/install",{controller:"AppInstallController",templateUrl:"views/appinstall.html"}).when("/app/:appId/configure",{controller:"AppConfigureController",templateUrl:"views/appconfigure.html"}).when("/app/:appId/details",{controller:"AppDetailsController",templateUrl:"views/appdetails.html"}).when("/settings",{controller:"SettingsController",templateUrl:"views/settings.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).when("/security",{controller:"SecurityController",templateUrl:"views/security.html"}).otherwise({redirectTo:"/"})}]),app.filter("installationActive",function(){return function(e){return"error"===e?!1:"installed"===e?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){return"error"===e?"Error":"subdomain_error"===e?"Error":"installed"===e?"Installed":"downloading_image"===e?"Downloading":"pending_install"===e?"Installing":"pending_uninstall"===e?"Uninstalling":"creating_container"===e?"Container":"downloading_manifest"===e?"Manifest":"creating_volume"===e?"Volume":"registering_subdomain"===e?"Subdomain":"allocated_oauth_credentials"===e?"OAuth":e}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,t,n,o){n.$set("name",n.laterName);var r=o[0],i=o[1];r&&i&&(r.$name=n.name,i.$addControl(r),e.$on("$destroy",function(){i.$removeControl(r)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,t){function n(e,t){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof t?t:JSON.stringify(t)}function o(e){return function(t,o){return 401===o?i.logout():void e(new n(o,t))}}function r(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:null,isDev:!1,progress:{}},this._installedApps=[],this.setToken(localStorage.token)}var i=null;return r.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},r.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},r.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},r.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+t.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm"},r.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress;var t=this;this._configListener.forEach(function(e){e(t._config)})},r.prototype.getInstalledApps=function(){return this._installedApps},r.prototype.getUserInfo=function(){return this._userInfo},r.prototype.getConfig=function(){return this._config},r.prototype.setToken=function(t){e.defaults.headers.common.Authorization="Bearer "+t,t?localStorage.token=t:localStorage.removeItem("token"),this._token=t},r.prototype.config=function(t){e.get("/api/v1/cloudron/config").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.userInfo=function(t){e.get("/api/v1/profile").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.installApp=function(t,r,i,a,s,l){var c=this,p={appStoreId:t,version:r,password:i,location:s.location,portBindings:s.portBindings,accessRestriction:s.accessRestriction};e.post("/api/v1/apps/install",p).success(function(e,t){return 202!==t||"object"!=typeof e?l(new n(t,e)):(e.manifest={title:a},c._installedApps.push(e),void l(null,e.id))}).error(o(l))},r.prototype.uninstallApp=function(t,r,i){var a={password:r};e.post("/api/v1/apps/"+t+"/uninstall",a).success(function(e,t){return 202!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.configureApp=function(t,r,i,a){var s={appId:t,password:r,location:i.location,portBindings:i.portBindings,accessRestriction:i.accessRestriction};e.post("/api/v1/apps/"+t+"/configure",s).success(function(e,t){return 202!==t?a(new n(t,e)):void a(null)}).error(o(a))},r.prototype.updateApp=function(t,r,i){e.post("/api/v1/apps/"+t+"/update",{version:r}).success(function(e,t){return 202!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.startApp=function(t,r){var i={};e.post("/api/v1/apps/"+t+"/start",i).success(function(e,t){return 202!==t?r(new n(t,e)):void r(null)}).error(o(r))},r.prototype.stopApp=function(t,r){var i={};e.post("/api/v1/apps/"+t+"/stop",i).success(function(e,t){return 202!==t?r(new n(t,e)):void r(null)}).error(o(r))},r.prototype.version=function(t){e.get("/api/v1/cloudron/status").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.isServerFirstTime=function(t){e.get("/api/v1/cloudron/status").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,!e.activated)}).error(o(t))},r.prototype.getNakedDomain=function(t){e.get("/api/v1/settings/naked_domain").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.appid)}).error(o(t))},r.prototype.setNakedDomain=function(t,r){e.post("/api/v1/settings/naked_domain",{appid:t}).success(function(e,t){return 204!==t?r(new n(t)):void r(null)}).error(o(r))},r.prototype.getApps=function(t){e.get("/api/v1/apps").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.apps)}).error(o(t))},r.prototype.getApp=function(e,t){var n=null;return this._installedApps.some(function(t){return t.id===e?(n=t,!0):!1}),n?t(null,n):t(new Error("App not found"))},r.prototype.getAppLogStream=function(e){var t=new EventSource("/api/v1/apps/"+e+"/logstream");return t},r.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},r.prototype.setAdmin=function(t,r,i){var a={username:t,admin:r};e.post("/api/v1/users/"+t+"/admin",a).success(function(e,t){return 204!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.createAdmin=function(t,r,i,a){var s={username:t,password:r,email:i},l=this;e.post("/api/v1/cloudron/activate",s).success(function(e,o){return 201!==o||"object"!=typeof e?a(new n(o,e)):(l.setToken(e.token),l.setUserInfo({username:t,email:i,admin:!0}),void a(null,e.activated))}).error(o(a))},r.prototype.listUsers=function(t){e.get("/api/v1/users").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.stats=function(t){e.get("/api/v1/cloudron/stats").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.getOAuthClients=function(t){e.get("/api/v1/oauth/clients").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.clients)}).error(o(t))},r.prototype.delTokensByClientId=function(t,r){e["delete"]("/api/v1/oauth/clients/"+t+"/tokens").success(function(e,t){return 204!==t?r(new n(t,e)):void r(null)}).error(o(r))},r.prototype.update=function(t){e.get("/api/v1/cloudron/update").success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.reboot=function(t){e.get("/api/v1/cloudron/reboot").success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.backup=function(t){e.post("/api/v1/cloudron/backups").success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.setCertificate=function(t,r,i){console.log("will set certificate");var a=new FormData;a.append("certificate",t),a.append("key",r),e.post("/api/v1/cloudron/certificate",a,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,t){return 202!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.graphs=function(t,r,i){var a={params:{target:t,format:"json",from:r}};e.get("/api/v1/cloudron/graphs",a).success(function(e,t){return 200!==t||"object"!=typeof e?i(new n(t,e)):void i(null,e)}).error(o(i))},r.prototype.createUser=function(t,r,i){var a={username:t,email:r};e.post("/api/v1/users",a).success(function(e,t){return 201!==t||"object"!=typeof e?i(new n(t,e)):void i(null,e)}).error(o(i))},r.prototype.removeUser=function(t,r,i){var a={username:t,password:r};e({method:"DELETE",url:"/api/v1/users/"+t,data:a,headers:{"Content-Type":"application/json"}}).success(function(e,t){return 204!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.changePassword=function(t,r,i){var a={password:t,newPassword:r};e.post("/api/v1/users/"+this._userInfo.username+"/password",a).success(function(e,t){return 204!==t||"object"!=typeof e?i(new n(t,e)):void i(null,e)}).error(o(i))},r.prototype.refreshConfig=function(e){var t=this;e="function"==typeof e?e:function(){},this.config(function(n,o){return n?e(n):(t.setConfig(o),void e(null))})},r.prototype.refreshInstalledApps=function(e){var t=this;e="function"==typeof e?e:function(){},this.getApps(function(n,o){if(n)return e(n);o.forEach(function(e){for(var n=!1,o=0;o<t._installedApps.length;++o)if(t._installedApps[o].id===e.id){n=o;break}n!==!1?angular.copy(e,t._installedApps[n]):t._installedApps.push(e)});for(var r=t._installedApps.length-1;r>=0;--r)o.some(function(e){return e.id===t._installedApps[r].id})||t._installedApps.splice(r,1);e(null)})},r.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},r.prototype.exchangeCodeForToken=function(t,r){var i={grant_type:"authorization_code",code:t,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,i).success(function(e,t){return 200!==t||"object"!=typeof e?r(new n(t,e)):void r(null,e.access_token)}).error(o(r))},i=new r}]),angular.module("Application").service("AppStore",function(e,t){function n(e,t){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof t?t:JSON.stringify(t)}function o(){this._appsCache={}}return o.prototype.getApps=function(o){if(null===t.getConfig().apiServerOrigin)return o(new n(500,"Not yet initialized"));var r=this;e.get(t.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:t.getConfig().version}}).success(function(e,t){return 200!==t?o(new n(t,e)):(e.apps.forEach(function(e){r._appsCache[e.id]||(r._appsCache[e.id]=e)}),o(null,r._appsCache))}).error(function(e,t){return o(new n(t,e))})},o.prototype.getAppById=function(e,t){if(e in this._appsCache)return t(null,this._appsCache[e]);var o=this;this.getApps(function(r){return r?t(r):e in o._appsCache?t(null,o._appsCache[e]):void t(new n(404,"Not found"))})},o.prototype.getManifest=function(o,r){if(null===t.getConfig().apiServerOrigin)return r(new n(500,"Not yet initialized"));var i=t.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+o+"/manifest";console.log("Getting the manifest of ",o,i),e.get(i).success(function(e){return r(null,e)}).error(function(e,t){return r(new n(t,e))})},new o}),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,t,n,o){e.initialized=!1,e.userInfo=o.getUserInfo(),e.installedApps=o.getInstalledApps(),e.isActive=function(e){return t.current?0===t.current.$$route.originalPath.indexOf(e):!1},e.logout=function(t){t.stopPropagation(),e.initialized=!1,o.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",t="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+o._clientId+"&redirect_uri="+e+"&scope="+t},e.setup=function(){window.location.href="/setup.html"},e.error=function(e){console.error(e),window.location.href="/error.html"},o.isServerFirstTime(function(t,r){return t?e.error(t):r?e.setup():void(localStorage.token?o.refreshConfig(function(t){return t&&401===t.statusCode?e.login():t?e.error(t):(o.getConfig().progress.update&&(window.location.href="/update.html"),void o.userInfo(function(t,r){return t?e.error(t):(o.setUserInfo(r),void o.refreshInstalledApps(function(t){if(t)return e.error(t);var r=n(o.refreshInstalledApps.bind(o),2e3),i=n(o.refreshConfig.bind(o),5e3);e.$on("$destroy",function(){n.cancel(r),n.cancel(i)}),o.setReady(),e.initialized=!0}))}))}):e.login())}),o.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,t,n){e.user=n.getUserInfo(),e.config=n.getConfig(),e.changePassword=function(){t.path("/userpassword")}}]),angular.module("Application").controller("AppConfigureController",["$scope","$routeParams","$location","Client",function(e,t,n,o){o.getUserInfo().admin||n.path("/"),e.app=null,e.password="",e.location="",e.accessRestriction="",e.disabled=!1,e.error={},e.domain="",e.portBindings={},e.configureApp=function(){e.error.name=null,e.error.password=null;var n={};for(var r in e.portBindings)n[r]=e.portBindings[r].hostPort;o.configureApp(t.appId,e.password,{location:e.location,portBindings:n,accessRestriction:e.accessRestriction},function(n){return n?(403===n.statusCode?(e.error.password="Wrong password provided.",e.password=""):e.error.name="App with the name "+e.app.name+" cannot be configured.",void(e.disabled=!1)):void window.location.replace("#/app/"+t.appId+"/details")})},e.cancel=function(){window.history.back()},o.onReady(function(){e.domain=o.getConfig().fqdn,o.getApp(t.appId,function(t,n){if(e.error=t||{},!t){e.app=n,e.location=n.location,e.portBindings=n.manifest.tcpPorts,e.accessRestriction=n.accessRestriction;for(var o in e.portBindings)e.portBindings[o].hostPort=n.portBindings[o]}})}),document.getElementById("inputLocation").focus()}]),angular.module("Application").controller("AppDetailsController",["$scope","$http","$routeParams","$location","Client",function(e,t,n,o,r){function i(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:n||[],name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n).toFixed(2)+"%<br>";return r}})}o.render()}function a(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"MemoryChart"),renderer:"area",width:580,height:250,min:0,max:2147483648,series:[{color:"steelblue",data:n||[],name:"memory"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"MemoryYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1048576).toFixed(2)+"MB<br>";return r}})}o.render()}function s(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:n||[],name:"apps"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1048576).toFixed(2)+"MB<br>";return r}}),new Rickshaw.Graph.Legend({graph:o,element:document.getElementById(e+"DiskLegend")})}o.render()}r.getUserInfo().admin||o.path("/"),e.app={},e.initialized=!1,e.updateAvailable=!1,e.activeTab="day",e.updateVersion=null,e.password="",e.startApp=function(){r.startApp(n.appId,function(e){e&&console.error(e)})},e.stopApp=function(){r.stopApp(n.appId,function(e){e&&console.error(e)})},e.updateApp=function(){r.updateApp(n.appId,e.updateVersion,function(e){e&&console.error(e)})},e.uninstallApp=function(){$("#uninstallAppModal").modal("hide"),r.uninstallApp(n.appId,e.password,function(e){e&&console.error(e),window.location.href="#/"})},e.updateGraphs=function(){var t="nonNegativeDerivative(sumSeries(collectd.localhost.table-"+e.app.id+"-cpu.gauge-user,collectd.localhost.table-"+e.app.id+"-cpu.gauge-system))",n="collectd.localhost.table-"+e.app.id+"-memory.gauge-max_usage_in_bytes",o="collectd.localhost.filecount-"+e.app.id+"-appdata.bytes",l=e.activeTab,c="-24hours";switch(l){case"day":c="-24hours";break;case"month":c="-1month";break;case"year":c="-1year";break;default:console.log("internal errror")}r.graphs([t,n,o],c,function(e,t){return e?console.log(e):(i(l,t[0]),a(l,t[1]),void s(l,t[2]))})},r.onReady(function(){r.getApp(n.appId,function(t,n){if(t)return console.error(t),void(window.location.href="#/");if(e.app=n,e.appLogUrl=r.getAppLogUrl(n.id),r.getConfig().update&&r.getConfig().update.apps)for(var o=r.getConfig().update.apps,i=0;i<o.length;i++)o[i].appId===e.app.appStoreId&&o[i].version!==e.app.version&&(e.updateAvailable=!0,e.updateVersion=o[i].version);e.updateGraphs(),e.initialized=!0})})}]),angular.module("Application").controller("AppInstallController",["$scope","$routeParams","$location","Client","AppStore","$timeout",function(e,t,n,o,r,i){o.getUserInfo().admin||n.path("/"),e.app=null,e.password="",e.location="",e.accessRestriction="",e.disabled=!1,e.error={},e.domain="",e.version=null,e.portBindings={},e.hostPortMin=1025,e.hostPortMax=9999,o.onReady(function(){e.domain=o.getConfig().fqdn,r.getAppById(t.appStoreId,function(t,n){e.error=t||{},t||(e.app=n)}),r.getManifest(t.appStoreId,function(t,n){if(e.error=t||{},!t){e.version=n.version,e.portBindings=n.tcpPorts,e.accessRestriction=n.accessRestriction||"";for(var o in e.portBindings)e.portBindings[o].hostPort=parseInt(o)}})}),e.installApp=function(){e.error.name=null,e.error.password=null;var n={};for(var r in e.portBindings)n[r]=e.portBindings[r].hostPort;o.installApp(t.appStoreId,e.version,e.password,e.app.title,{location:e.location,portBindings:n,accessRestriction:e.accessRestriction},function(t,n){return t?(409===t.statusCode?e.error.name="Application already exists.":403===t.statusCode?(e.error.password="Wrong password provided.",e.password=""):e.error.name="App with the name "+e.app.name+" cannot be installed.",void(e.disabled=!1)):void window.location.replace("#/app/"+n+"/details")})},e.cancel=function(){window.history.back()},e.$on("$viewContentLoaded",function(){i(function(){$("input[autofocus]:visible:first").focus()},1e3)})}]),angular.module("Application").controller("AppStoreController",["$scope","$location","Client","AppStore",function(e,t,n,o){n.getUserInfo().admin||t.path("/"),e.LOADING=1,e.ERROR=2,e.LOADED=3,e.loadStatus=e.LOADING,e.loadError="",e.apps=[],e.refresh=function(){n.refreshInstalledApps(function(t){return t?(e.loadStatus=e.ERROR,void(e.loadError=t.message)):void o.getApps(function(t,o){if(t)return e.loadStatus=e.ERROR,void(e.loadError=t.message);for(var r in o){for(var i=!1,a=0;a<e.apps.length;++a)if(o[r].id===e.apps[a].id){i=!0;break}i||e.apps.push(o[r])}e.apps.forEach(function(t,r){n._installedApps&&(t.installed=n._installedApps.some(function(e){return e.appStoreId===t.id})),o[t.id]||e.apps.splice(r,1)}),e.loadStatus=e.LOADED})})},e.installApp=function(e){t.path("/app/"+e.id+"/install")},e.openApp=function(e){for(var t=0;t<n._installedApps.length;t++)if(n._installedApps[t].appStoreId===e.id){window.open("https://"+n._installedApps[t].fqdn);break}},n.onConfig(function(t){t.apiServerOrigin&&e.refresh()})}]),angular.module("Application").controller("DashboardController",function(){}),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,t,n){function o(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:n,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n).toFixed(2)+"%<br>";return r}})}o.render()}function r(e,t,n){var o=[],r=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var i=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:o,name:"tx"},{color:"green",data:r,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:i}),new Rickshaw.Graph.Axis.Y({graph:i,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1024).toFixed(2)+"KB<br>";return r}})}i.render()}function i(e,t,n){var o=[],r=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var i=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:o,name:"apps"},{color:"green",data:r,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:i}),new Rickshaw.Graph.Axis.Y({graph:i,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1073741824).toFixed(2)+"GB<br>";return r}}),new Rickshaw.Graph.Legend({graph:i,element:document.getElementById(e+"DiskLegend")})}i.render()}n.getUserInfo().admin||t.path("/"),e.activeTab="day";var a="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",s="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",l="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",c="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",p="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var t=e.activeTab,u="-24hours";switch(t){case"day":u="-24hours";break;case"month":u="-1month";break;case"year":u="-1year";break;default:console.log("internal errror")}n.graphs([a,s,l,c,p],u,function(e,n){return e?console.log(e):(o(t,n[0]),r(t,n[1],n[2]),void i(t,n[3],n[4]))})},n.onReady(e.updateGraphs)}]),angular.module("Application").controller("SecurityController",["$scope","Client",function(e,t){e.activeClients=[],e.tokenInUse=null,e.removeAccessTokens=function(e,n){e._busy=!0,t.delTokensByClientId(e.id,function(t){return t?console.error(t):($(n.target).addClass("disabled"),void(e._busy=!1))})},t.onReady(function(){e.tokenInUse=t._token,t.getOAuthClients(function(t,n){return t?console.error(t):void(e.activeClients=n)})})}]),angular.module("Application").controller("SettingsController",["$scope","$location","Client",function(e,t,n){n.getUserInfo().admin||t.path("/"),e.user=n.getUserInfo(),e.config=n.getConfig(),e.nakedDomainApp=null,e.drives=[],e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var t=e.nakedDomainApp?e.nakedDomainApp.id:"admin";n.setNakedDomain(t,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,n.backup(function(t){function o(){n.version(function(t){return t?window.setTimeout(o,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}t&&console.error(t),window.setTimeout(o,5e3)})},e.reboot=function(){$("#rebootModal").modal("hide"),$("#rebootProgressModal").modal("show"),e.$parent.initialized=!1,n.reboot(function(e){function t(){n.version(function(e){return e?window.setTimeout(t,1e3):($("#rebootProgressModal").modal("hide"),void window.setTimeout(window.location.reload.bind(window.location,!0),1e3))})}e&&console.error(e),window.setTimeout(t,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,n.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(t){e.$apply(function(){e.certificateFile=t.target.files[0],e.certificateFileName=t.target.files[0].name})},document.getElementById("idKey").onchange=function(t){e.$apply(function(){e.keyFile=t.target.files[0],e.keyFileName=t.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void n.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},n.onConfig(function(){e.tokenInUse=n._token,n.getApps(function(t,o){t&&console.error("Error loading app list"),e.apps=o,n.getNakedDomain(function(t,n){if(t)return console.error(t);e.nakedDomainApp=null;for(var o=0;o<e.apps.length;o++)if(e.apps[o].id===n){e.nakedDomainApp=e.apps[o];break}}),n.stats(function(t,n){return t?console.error(t):void(e.drives=n.drives)})})})}]),angular.module("Application").controller("UserCreateController",["$scope","$routeParams","$location","Client",function(e,t,n,o){o.getUserInfo().admin||n.path("/"),e.disabled=!1,e.username="",e.email="",e.alreadyTaken="",e.submit=function(){e.alreadyTaken="",e.disabled=!0,o.createUser(e.username,e.email,function(t){return t&&409===t.statusCode?(e.alreadyTaken=e.username,console.error("Username already taken")):(t&&console.error("Unable to create user.",t),void(window.location.href="#/userlist"))})},e.cancel=function(){window.history.back()}}]),angular.module("Application").controller("UserListController",["$scope","$location","Client",function(e,t,n){function o(){n.listUsers(function(t,n){return t?console.error("Unable to get user listing.",t):(e.users=n.users,void(e.ready=!0))})}n.getUserInfo().admin||t.path("/"),e.ready=!1,e.users=[],e.userInfo=n.getUserInfo(),e.userDeleteForm={username:"",password:""},e.isMe=function(e){return e.username===n.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){n.setAdmin(e.username,!e.admin,function(t){return t?console.error(t):void(e.admin=!e.admin)})},e.deleteUser=function(t){return e.userDeleteForm.username!==t.username?console.error("Username does not match"):void n.removeUser(t.username,e.userDeleteForm.password,function(e){return e&&401===e.statusCode?console.error("Wrong password"):e?console.error("Unable to delete user.",e):($("#userDeleteModal-"+t.username).modal("hide"),void o())})},e.addUser=function(){window.location.href="#/usercreate"},o()}]),angular.module("Application").controller("UserPasswordController",["$scope","$routeParams","$location","Client",function(e,t,n,o){o.getUserInfo().admin||n.path("/"),e.active=!1,e.currentPassword="",e.newPassword="",e.repeatPassword="",e.validationClass={},e.submit=function(){return e.validationClass.currentPassword="",e.validationClass.newPassword="",e.validationClass.repeatPassword="",e.newPassword!==e.repeatPassword?(document.getElementById("inputRepeatPassword").focus(),e.validationClass.repeatPassword="has-error",void(e.repeatPassword="")):(e.active=!0,void o.changePassword(e.currentPassword,e.newPassword,function(t){t&&403===t.statusCode?(document.getElementById("inputCurrentPassword").focus(),e.validationClass.currentPassword="has-error",e.currentPassword="",e.newPassword="",e.repeatPassword=""):t?console.error("Unable to change password.",t):window.history.back(),e.active=!1}))},e.cancel=function(){window.history.back()},document.getElementById("inputCurrentPassword").focus()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcGNvbmZpZ3VyZS5qcyIsImFwcGRldGFpbHMuanMiLCJhcHBpbnN0YWxsLmpzIiwiZGFzaGJvYXJkLmpzIiwiZ3JhcGhzLmpzIiwic2VjdXJpdHkuanMiLCJzZXR0aW5ncy5qcyIsInVzZXJjcmVhdGUuanMiLCJ1c2VybGlzdC5qcyIsInVzZXJwYXNzd29yZC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwicmVkaXJlY3RUbyIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsImZpbHRlciIsImlucHV0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbSIsImF0dHJzIiwiY3RybHMiLCIkc2V0IiwibGF0ZXJOYW1lIiwibW9kZWxDdHJsIiwiZm9ybUN0cmwiLCIkbmFtZSIsIm5hbWUiLCIkYWRkQ29udHJvbCIsIiRvbiIsIiRyZW1vdmVDb250cm9sIiwic2VydmljZSIsIiRodHRwIiwibWQ1IiwiQ2xpZW50RXJyb3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsIkVycm9yIiwiY2FsbCIsInRoaXMiLCJjb25zdHJ1Y3RvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWZhdWx0RXJyb3JIYW5kbGVyIiwiY2FsbGJhY2siLCJkYXRhIiwic3RhdHVzIiwiY2xpZW50IiwibG9nb3V0IiwiQ2xpZW50IiwiX3JlYWR5IiwiX2NvbmZpZ0xpc3RlbmVyIiwiX3JlYWR5TGlzdGVuZXIiLCJfdXNlckluZm8iLCJ1c2VybmFtZSIsImVtYWlsIiwiYWRtaW4iLCJfdG9rZW4iLCJfY2xpZW50SWQiLCJfY2xpZW50U2VjcmV0IiwiX2NvbmZpZyIsImFwaVNlcnZlck9yaWdpbiIsIndlYlNlcnZlck9yaWdpbiIsImZxZG4iLCJpcCIsInJldmlzaW9uIiwidXBkYXRlIiwiaXNEZXYiLCJwcm9ncmVzcyIsIl9pbnN0YWxsZWRBcHBzIiwic2V0VG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsInByb3RvdHlwZSIsInNldFJlYWR5IiwiZm9yRWFjaCIsIm9uUmVhZHkiLCJwdXNoIiwib25Db25maWciLCJzZXRVc2VySW5mbyIsInVzZXJJbmZvIiwiZ3JhdmF0YXIiLCJjcmVhdGVIYXNoIiwidG9Mb3dlckNhc2UiLCJzZXRDb25maWciLCJ2ZXJzaW9uIiwidGhhdCIsImdldEluc3RhbGxlZEFwcHMiLCJnZXRVc2VySW5mbyIsImdldENvbmZpZyIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsIkF1dGhvcml6YXRpb24iLCJyZW1vdmVJdGVtIiwiZ2V0Iiwic3VjY2VzcyIsImVycm9yIiwiaW5zdGFsbEFwcCIsImlkIiwicGFzc3dvcmQiLCJ0aXRsZSIsImFwcFN0b3JlSWQiLCJsb2NhdGlvbiIsInBvcnRCaW5kaW5ncyIsImFjY2Vzc1Jlc3RyaWN0aW9uIiwicG9zdCIsIm1hbmlmZXN0IiwidW5pbnN0YWxsQXBwIiwiYXBwSWQiLCJjb25maWd1cmVBcHAiLCJ1cGRhdGVBcHAiLCJzdGFydEFwcCIsInN0b3BBcHAiLCJpc1NlcnZlckZpcnN0VGltZSIsImFjdGl2YXRlZCIsImdldE5ha2VkRG9tYWluIiwiYXBwaWQiLCJzZXROYWtlZERvbWFpbiIsImdldEFwcHMiLCJhcHBzIiwiZ2V0QXBwIiwiYXBwRm91bmQiLCJzb21lIiwiZ2V0QXBwTG9nU3RyZWFtIiwic291cmNlIiwiRXZlbnRTb3VyY2UiLCJnZXRBcHBMb2dVcmwiLCJzZXRBZG1pbiIsInBheWxvYWQiLCJjcmVhdGVBZG1pbiIsImxpc3RVc2VycyIsInN0YXRzIiwiZ2V0T0F1dGhDbGllbnRzIiwiY2xpZW50cyIsImRlbFRva2Vuc0J5Q2xpZW50SWQiLCJyZWJvb3QiLCJiYWNrdXAiLCJzZXRDZXJ0aWZpY2F0ZSIsImNlcnRpZmljYXRlRmlsZSIsImtleUZpbGUiLCJjb25zb2xlIiwibG9nIiwiZmQiLCJGb3JtRGF0YSIsImFwcGVuZCIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInRyYW5zZm9ybVJlcXVlc3QiLCJpZGVudGl0eSIsImdyYXBocyIsInRhcmdldHMiLCJmcm9tIiwicGFyYW1zIiwidGFyZ2V0IiwiZm9ybWF0IiwiY3JlYXRlVXNlciIsInJlbW92ZVVzZXIiLCJtZXRob2QiLCJ1cmwiLCJjaGFuZ2VQYXNzd29yZCIsImN1cnJlbnRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwicmVmcmVzaENvbmZpZyIsInJlc3VsdCIsInJlZnJlc2hJbnN0YWxsZWRBcHBzIiwiZm91bmQiLCJpIiwibGVuZ3RoIiwiY29weSIsInNwbGljZSIsIndpbmRvdyIsImhyZWYiLCJleGNoYW5nZUNvZGVGb3JUb2tlbiIsImF1dGhDb2RlIiwiZ3JhbnRfdHlwZSIsImNvZGUiLCJyZWRpcmVjdF91cmkiLCJvcmlnaW4iLCJjbGllbnRfaWQiLCJjbGllbnRfc2VjcmV0IiwiYWNjZXNzX3Rva2VuIiwiQXBwU3RvcmVFcnJvciIsIkFwcFN0b3JlIiwiX2FwcHNDYWNoZSIsImJveFZlcnNpb24iLCJnZXRBcHBCeUlkIiwiZ2V0TWFuaWZlc3QiLCJtYW5pZmVzdFVybCIsIiRzY29wZSIsIiRyb3V0ZSIsIiRpbnRlcnZhbCIsImluaXRpYWxpemVkIiwiaW5zdGFsbGVkQXBwcyIsImlzQWN0aXZlIiwiY3VycmVudCIsIiQkcm91dGUiLCJvcmlnaW5hbFBhdGgiLCJpbmRleE9mIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJsb2dpbiIsImNhbGxiYWNrVVJMIiwic2V0dXAiLCJpc0ZpcnN0VGltZSIsInJlZnJlc2hBcHBzVGltZXIiLCJiaW5kIiwicmVmcmVzaENvbmZpZ1RpbWVyIiwiY2FuY2VsIiwiJGxvY2F0aW9uIiwidXNlciIsInBhdGgiLCIkcm91dGVQYXJhbXMiLCJkaXNhYmxlZCIsImRvbWFpbiIsImNvbnRhaW5lclBvcnQiLCJob3N0UG9ydCIsInJlcGxhY2UiLCJoaXN0b3J5IiwiYmFjayIsInRjcFBvcnRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZvY3VzIiwicmVuZGVyQ3B1IiwiYWN0aXZlVGFiIiwiY3B1RGF0YSIsInRyYW5zZm9ybWVkQ3B1IiwiZGF0YXBvaW50cyIsIm1hcCIsInBvaW50IiwieSIsIngiLCJjcHVHcmFwaCIsIlJpY2tzaGF3IiwiR3JhcGgiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbmRlcmVyIiwid2lkdGgiLCJoZWlnaHQiLCJtaW4iLCJtYXgiLCJzZXJpZXMiLCJjb2xvciIsIkF4aXMiLCJUaW1lIiwiZ3JhcGgiLCJZIiwib3JpZW50YXRpb24iLCJ0aWNrRm9ybWF0IiwiRml4dHVyZXMiLCJOdW1iZXIiLCJmb3JtYXRLTUJUIiwiSG92ZXJEZXRhaWwiLCJmb3JtYXR0ZXIiLCJzd2F0Y2giLCJjb250ZW50IiwidG9GaXhlZCIsInJlbmRlciIsInJlbmRlck1lbW9yeSIsIm1lbW9yeURhdGEiLCJ0cmFuc2Zvcm1lZE1lbW9yeSIsIm1lbW9yeUdyYXBoIiwicmVuZGVyRGlzayIsImRpc2tEYXRhIiwidHJhbnNmb3JtZWREaXNrIiwiZGlza0dyYXBoIiwiTGVnZW5kIiwidXBkYXRlQXZhaWxhYmxlIiwidXBkYXRlVmVyc2lvbiIsIiQiLCJtb2RhbCIsInVwZGF0ZUdyYXBocyIsImNwdVVzYWdlVGFyZ2V0IiwibWVtb3J5VXNhZ2VUYXJnZXQiLCJkaXNrVXNhZ2VUYXJnZXQiLCJhcHBMb2dVcmwiLCJhcHBVcGRhdGVzIiwiJHRpbWVvdXQiLCJob3N0UG9ydE1pbiIsImhvc3RQb3J0TWF4IiwicG9ydCIsInBhcnNlSW50IiwiTE9BRElORyIsIkVSUk9SIiwiTE9BREVEIiwibG9hZFN0YXR1cyIsImxvYWRFcnJvciIsInJlZnJlc2giLCJpbmRleCIsImluc3RhbGxlZCIsImEiLCJvcGVuQXBwIiwib3BlbiIsInJlbmRlck5ldHdvcmsiLCJ0eERhdGEiLCJyeERhdGEiLCJ0cmFuc2Zvcm1lZFR4IiwidHJhbnNmb3JtZWRSeCIsIm5ldHdvcmtHcmFwaCIsImFwcHNVc2VkRGF0YSIsImRhdGFVc2VkRGF0YSIsInRyYW5zZm9ybWVkQXBwc1VzZWQiLCJ0cmFuc2Zvcm1lZERhdGFVc2VkIiwibmV0d29ya1VzYWdlVHhUYXJnZXQiLCJuZXR3b3JrVXNhZ2VSeFRhcmdldCIsImRpc2tVc2FnZUFwcHNVc2VkVGFyZ2V0IiwiZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQiLCJhY3RpdmVDbGllbnRzIiwidG9rZW5JblVzZSIsInJlbW92ZUFjY2Vzc1Rva2VucyIsIl9idXN5IiwiYWRkQ2xhc3MiLCJuYWtlZERvbWFpbkFwcCIsImRyaXZlcyIsImNlcnRpZmljYXRlRmlsZU5hbWUiLCJrZXlGaWxlTmFtZSIsIiRwYXJlbnQiLCJjaGVja0lmRG9uZSIsInNldFRpbWVvdXQiLCJyZWxvYWQiLCJvbmNoYW5nZSIsIiRhcHBseSIsImZpbGVzIiwiYWxyZWFkeVRha2VuIiwic3VibWl0IiwidXNlcnMiLCJyZWFkeSIsInVzZXJEZWxldGVGb3JtIiwiaXNNZSIsImlzQWRtaW4iLCJ0b2dnbGVBZG1pbiIsImRlbGV0ZVVzZXIiLCJhZGRVc2VyIiwiYWN0aXZlIiwicmVwZWF0UGFzc3dvcmQiLCJ2YWxpZGF0aW9uQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBLFlBS0EsSUFBQUEsS0FBQUMsUUFBQUMsT0FBQSxlQUFBLFVBQUEsWUFBQSxlQUdBRixLQUFBRyxRQUFBLGlCQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLEtBQUEsS0FDQUMsV0FBQSxlQUNBRCxLQUFBLGNBQ0FFLFdBQUEsc0JBQ0FDLFlBQUEseUJBQ0FILEtBQUEsZUFDQUUsV0FBQSx1QkFDQUMsWUFBQSwwQkFDQUgsS0FBQSxpQkFDQUUsV0FBQSx5QkFDQUMsWUFBQSw0QkFDQUgsS0FBQSxhQUNBRSxXQUFBLHFCQUNBQyxZQUFBLHdCQUNBSCxLQUFBLGFBQ0FFLFdBQUEscUJBQ0FDLFlBQUEsd0JBQ0FILEtBQUEsNEJBQ0FFLFdBQUEsdUJBQ0FDLFlBQUEsMEJBQ0FILEtBQUEseUJB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QUFBQyxRQUNBbEMsRUFBQW9KLGdCQUFBRCxlQUFBLGlCQUNBbkosRUFBQW1KLGVBQUEsTUFJQW5KLEVBQUFrSixRQUFBLE1BQ0E5UixHQUFBK0csZUFBQTZCLEVBQUE1QixnQkFBQTRCLEVBQUEzQixZQUFBLFNBQUFqRSxHQUNBQSxHQUFBLE1BQUFBLEVBQUE5RCxZQUNBMEwsU0FBQUMsZUFBQSx3QkFBQUMsUUFDQWxDLEVBQUFvSixnQkFBQWhMLGdCQUFBLFlBQ0E0QixFQUFBNUIsZ0JBQUEsR0FDQTRCLEVBQUEzQixZQUFBLEdBQ0EyQixFQUFBbUosZUFBQSxJQUNBL08sRUFDQTRDLFFBQUE1QyxNQUFBLDZCQUFBQSxHQUVBMEUsT0FBQStDLFFBQUFDLE9BR0E5QixFQUFBa0osUUFBQSxNQUlBbEosRUFBQW1CLE9BQUEsV0FDQXJDLE9BQUErQyxRQUFBQyxRQUdBRSxTQUFBQyxlQUFBLHdCQUFBQyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIGFuZ3VsYXI6ZmFsc2UgKi9cblxuLy8gY3JlYXRlIG1haW4gYXBwbGljYXRpb24gbW9kdWxlXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICdhbmd1bGFyLW1kNSddKTtcblxuLy8gc2V0dXAgYWxsIG1ham9yIGFwcGxpY2F0aW9uIHJvdXRlc1xuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsIHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy9kYXNoYm9hcmQnXG4gICAgfSkud2hlbignL2Rhc2hib2FyZCcsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Rhc2hib2FyZC5odG1sJ1xuICAgIH0pLndoZW4oJy91c2VyY3JlYXRlJywge1xuICAgICAgICBjb250cm9sbGVyOiAnVXNlckNyZWF0ZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJjcmVhdGUuaHRtbCdcbiAgICB9KS53aGVuKCcvdXNlcnBhc3N3b3JkJywge1xuICAgICAgICBjb250cm9sbGVyOiAnVXNlclBhc3N3b3JkQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlcnBhc3N3b3JkLmh0bWwnXG4gICAgfSkud2hlbignL3VzZXJsaXN0Jywge1xuICAgICAgICBjb250cm9sbGVyOiAnVXNlckxpc3RDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VybGlzdC5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHBzdG9yZScsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcFN0b3JlQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwc3RvcmUuaHRtbCdcbiAgICB9KS53aGVuKCcvYXBwLzphcHBTdG9yZUlkL2luc3RhbGwnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBJbnN0YWxsQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwaW5zdGFsbC5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHAvOmFwcElkL2NvbmZpZ3VyZScsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcENvbmZpZ3VyZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FwcGNvbmZpZ3VyZS5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHAvOmFwcElkL2RldGFpbHMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBEZXRhaWxzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwZGV0YWlscy5odG1sJ1xuICAgIH0pLndoZW4oJy9zZXR0aW5ncycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ1NldHRpbmdzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc2V0dGluZ3MuaHRtbCdcbiAgICB9KS53aGVuKCcvYWNjb3VudCcsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FjY291bnRDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hY2NvdW50Lmh0bWwnXG4gICAgfSkud2hlbignL2dyYXBocycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0dyYXBoc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2dyYXBocy5odG1sJ1xuICAgIH0pLndoZW4oJy9zZWN1cml0eScsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ1NlY3VyaXR5Q29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc2VjdXJpdHkuaHRtbCdcbiAgICB9KS5vdGhlcndpc2UoeyByZWRpcmVjdFRvOiAnLyd9KTtcbn1dKTtcblxuYXBwLmZpbHRlcignaW5zdGFsbGF0aW9uQWN0aXZlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2Vycm9yJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdpbnN0YWxsZWQnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59KTtcblxuYXBwLmZpbHRlcignaW5zdGFsbGF0aW9uU3RhdGVMYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdlcnJvcicpIHJldHVybiAnRXJyb3InO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdzdWJkb21haW5fZXJyb3InKSByZXR1cm4gJ0Vycm9yJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnaW5zdGFsbGVkJykgcmV0dXJuICdJbnN0YWxsZWQnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdkb3dubG9hZGluZ19pbWFnZScpIHJldHVybiAnRG93bmxvYWRpbmcnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdwZW5kaW5nX2luc3RhbGwnKSByZXR1cm4gJ0luc3RhbGxpbmcnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdwZW5kaW5nX3VuaW5zdGFsbCcpIHJldHVybiAnVW5pbnN0YWxsaW5nJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnY3JlYXRpbmdfY29udGFpbmVyJykgcmV0dXJuICdDb250YWluZXInO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdkb3dubG9hZGluZ19tYW5pZmVzdCcpIHJldHVybiAnTWFuaWZlc3QnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdjcmVhdGluZ192b2x1bWUnKSByZXR1cm4gJ1ZvbHVtZSc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3JlZ2lzdGVyaW5nX3N1YmRvbWFpbicpIHJldHVybiAnU3ViZG9tYWluJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnYWxsb2NhdGVkX29hdXRoX2NyZWRlbnRpYWxzJykgcmV0dXJuICdPQXV0aCc7XG5cbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH07XG59KTtcblxuYXBwLmZpbHRlcignYWNjZXNzUmVzdHJpY3Rpb25MYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT09ICcnKSByZXR1cm4gJ3B1YmxpYyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3JvbGVVc2VyJykgcmV0dXJuICdwcml2YXRlJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncm9sZUFkbWluJykgcmV0dXJuICdwcml2YXRlIChBZG1pbnMgb25seSknO1xuXG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9O1xufSk7XG5cbi8vIGN1c3RvbSBkaXJlY3RpdmUgZm9yIGR5bmFtaWMgbmFtZXMgaW4gZm9ybXNcbi8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIzNjE2NTc4L2lzc3VlLXJlZ2lzdGVyaW5nLWZvcm0tY29udHJvbC13aXRoLWludGVycG9sYXRlZC1uYW1lI2Fuc3dlci0yMzYxNzQwMVxuYXBwLmRpcmVjdGl2ZSgnbGF0ZXJOYW1lJywgZnVuY3Rpb24gKCkgeyAgICAgICAgICAgICAgICAgICAvLyAoMilcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICByZXF1aXJlOiBbJz9uZ01vZGVsJywgJ14/Zm9ybSddLCAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW0sIGF0dHJzLCBjdHJscykge1xuICAgICAgICAgICAgYXR0cnMuJHNldCgnbmFtZScsIGF0dHJzLmxhdGVyTmFtZSk7XG5cbiAgICAgICAgICAgIHZhciBtb2RlbEN0cmwgPSBjdHJsc1swXTsgICAgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgICAgICB2YXIgZm9ybUN0cmwgID0gY3RybHNbMV07ICAgICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICAgICAgaWYgKG1vZGVsQ3RybCAmJiBmb3JtQ3RybCkge1xuICAgICAgICAgICAgICAgIG1vZGVsQ3RybC4kbmFtZSA9IGF0dHJzLm5hbWU7ICAgICAgICAgICAgICAvLyAoNClcbiAgICAgICAgICAgICAgICBmb3JtQ3RybC4kYWRkQ29udHJvbChtb2RlbEN0cmwpOyAgICAgICAgICAgLy8gKDIpXG4gICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybUN0cmwuJHJlbW92ZUNvbnRyb2wobW9kZWxDdHJsKTsgICAgLy8gKDUpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xuLyogZ2xvYmFsIEV2ZW50U291cmNlICovXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLnNlcnZpY2UoJ0NsaWVudCcsIFsnJGh0dHAnLCAnbWQ1JywgZnVuY3Rpb24gKCRodHRwLCBtZDUpIHtcbiAgICB2YXIgY2xpZW50ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIENsaWVudEVycm9yKHN0YXR1c0NvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMSkgcmV0dXJuIGNsaWVudC5sb2dvdXQoKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDbGllbnQoKSB7XG4gICAgICAgIHRoaXMuX3JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyID0gW107XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIgPSBbXTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogbnVsbCxcbiAgICAgICAgICAgIGVtYWlsOiBudWxsLFxuICAgICAgICAgICAgYWRtaW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3Rva2VuID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2xpZW50SWQgPSAnY2lkLXdlYmFkbWluJztcbiAgICAgICAgdGhpcy5fY2xpZW50U2VjcmV0ID0gJ3VudXNlZCc7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaVNlcnZlck9yaWdpbjogbnVsbCxcbiAgICAgICAgICAgIHdlYlNlcnZlck9yaWdpbjogbnVsbCxcbiAgICAgICAgICAgIGZxZG46IG51bGwsXG4gICAgICAgICAgICBpcDogbnVsbCxcbiAgICAgICAgICAgIHJldmlzaW9uOiBudWxsLFxuICAgICAgICAgICAgdXBkYXRlOiBudWxsLFxuICAgICAgICAgICAgaXNEZXY6IGZhbHNlLFxuICAgICAgICAgICAgcHJvZ3Jlc3M6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2luc3RhbGxlZEFwcHMgPSBbXTtcblxuICAgICAgICB0aGlzLnNldFRva2VuKGxvY2FsU3RvcmFnZS50b2tlbik7XG4gICAgfVxuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlYWR5KSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5fcmVhZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yZWFkeUxpc3RlbmVyLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5vblJlYWR5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWFkeSkgY2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lci5wdXNoKGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5vbkNvbmZpZyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9jb25maWdMaXN0ZW5lci5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5fY29uZmlnKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRVc2VySW5mbyA9IGZ1bmN0aW9uICh1c2VySW5mbykge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBrZWVwIHRoZSBhbmd1bGFyIGJpbmRpbmdzIGFsaXZlLCBzZXQgZWFjaCBwcm9wZXJ0eSBpbmRpdmlkdWFsbHlcbiAgICAgICAgdGhpcy5fdXNlckluZm8udXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZW1haWwgPSB1c2VySW5mby5lbWFpbDtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uYWRtaW4gPSAhIXVzZXJJbmZvLmFkbWluO1xuICAgICAgICB0aGlzLl91c2VySW5mby5ncmF2YXRhciA9ICdodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLycgKyBtZDUuY3JlYXRlSGFzaCh1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpKSArICcuanBnP3M9MjQmZD1tbSc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBrZWVwIHRoZSBhbmd1bGFyIGJpbmRpbmdzIGFsaXZlLCBzZXQgZWFjaCBwcm9wZXJ0eSBpbmRpdmlkdWFsbHkgKFRPRE86IGp1c3QgdXNlIGFuZ3VsYXIuY29weSA/KVxuICAgICAgICB0aGlzLl9jb25maWcuYXBpU2VydmVyT3JpZ2luID0gY29uZmlnLmFwaVNlcnZlck9yaWdpbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLndlYlNlcnZlck9yaWdpbiA9IGNvbmZpZy53ZWJTZXJ2ZXJPcmlnaW47XG4gICAgICAgIHRoaXMuX2NvbmZpZy52ZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG4gICAgICAgIHRoaXMuX2NvbmZpZy5mcWRuID0gY29uZmlnLmZxZG47XG4gICAgICAgIHRoaXMuX2NvbmZpZy5pcCA9IGNvbmZpZy5pcDtcbiAgICAgICAgdGhpcy5fY29uZmlnLnJldmlzaW9uID0gY29uZmlnLnJldmlzaW9uO1xuICAgICAgICB0aGlzLl9jb25maWcudXBkYXRlID0gY29uZmlnLnVwZGF0ZTtcbiAgICAgICAgdGhpcy5fY29uZmlnLmlzRGV2ID0gY29uZmlnLmlzRGV2O1xuICAgICAgICB0aGlzLl9jb25maWcucHJvZ3Jlc3MgPSBjb25maWcucHJvZ3Jlc3M7XG5cbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGF0Ll9jb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5zdGFsbGVkQXBwcztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgdG9rZW47XG4gICAgICAgIGlmICghdG9rZW4pIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpO1xuICAgICAgICBlbHNlIGxvY2FsU3RvcmFnZS50b2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLl90b2tlbiA9IHRva2VuO1xuICAgIH07XG5cbiAgICAvKlxuICAgICAqIFJlc3QgQVBJIHdyYXBwZXJzXG4gICAgICovXG4gICAgQ2xpZW50LnByb3RvdHlwZS5jb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL2NvbmZpZycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51c2VySW5mbyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvcHJvZmlsZScpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGlkLCB2ZXJzaW9uLCBwYXNzd29yZCwgdGl0bGUsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwU3RvcmVJZDogaWQsIHZlcnNpb246IHZlcnNpb24sIHBhc3N3b3JkOiBwYXNzd29yZCwgbG9jYXRpb246IGNvbmZpZy5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiBjb25maWcucG9ydEJpbmRpbmdzLCBhY2Nlc3NSZXN0cmljdGlvbjogY29uZmlnLmFjY2Vzc1Jlc3RyaWN0aW9uIH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy9pbnN0YWxsJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuXG4gICAgICAgICAgICAvLyBwdXQgbmV3IGFwcCB3aXRoIGFtZW5kZWQgdGl0bGUgaW4gY2FjaGVcbiAgICAgICAgICAgIGRhdGEubWFuaWZlc3QgPSB7IHRpdGxlOiB0aXRsZSB9O1xuICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5wdXNoKGRhdGEpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmlkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVuaW5zdGFsbEFwcCA9IGZ1bmN0aW9uIChhcHBJZCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0geyBwYXNzd29yZDogcGFzc3dvcmQgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvdW5pbnN0YWxsJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNvbmZpZ3VyZUFwcCA9IGZ1bmN0aW9uIChpZCwgcGFzc3dvcmQsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IGFwcElkOiBpZCwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvY29uZmlndXJlJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVwZGF0ZUFwcCA9IGZ1bmN0aW9uIChpZCwgdmVyc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvdXBkYXRlJywgeyB2ZXJzaW9uOiB2ZXJzaW9uIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0YXJ0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0b3BBcHAgPSBmdW5jdGlvbiAoaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0geyB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9zdG9wJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnZlcnNpb24gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL3N0YXR1cycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5pc1NlcnZlckZpcnN0VGltZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCAhZGF0YS5hY3RpdmF0ZWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL3NldHRpbmdzL25ha2VkX2RvbWFpbicpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcGlkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldE5ha2VkRG9tYWluID0gZnVuY3Rpb24gKGFwcGlkLCBjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3NldHRpbmdzL25ha2VkX2RvbWFpbicsIHsgYXBwaWQ6IGFwcGlkIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cykpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9hcHBzJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YS5hcHBzKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcCA9IGZ1bmN0aW9uIChhcHBJZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGFwcEZvdW5kID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW5zdGFsbGVkQXBwcy5zb21lKGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgICAgIGlmIChhcHAuaWQgPT09IGFwcElkKSB7XG4gICAgICAgICAgICAgICAgYXBwRm91bmQgPSBhcHA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGFwcEZvdW5kKSByZXR1cm4gY2FsbGJhY2sobnVsbCwgYXBwRm91bmQpO1xuICAgICAgICBlbHNlIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ0FwcCBub3QgZm91bmQnKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nU3RyZWFtID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9hcGkvdjEvYXBwcy8nICsgYXBwSWQgKyAnL2xvZ3N0cmVhbScpO1xuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcExvZ1VybCA9IGZ1bmN0aW9uIChhcHBJZCkge1xuICAgICAgICByZXR1cm4gJy9hcGkvdjEvYXBwcy8nICsgYXBwSWQgKyAnL2xvZ3M/YWNjZXNzX3Rva2VuPScgKyB0aGlzLl90b2tlbjtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRBZG1pbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgYWRtaW4sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBwYXlsb2FkID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgYWRtaW46IGFkbWluXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2Vycy8nICsgdXNlcm5hbWUgKyAnL2FkbWluJywgcGF5bG9hZCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNyZWF0ZUFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCwgZW1haWwsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBwYXlsb2FkID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vYWN0aXZhdGUnLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgICAgICAgIHRoYXQuc2V0VXNlckluZm8oeyB1c2VybmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCwgYWRtaW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWN0aXZhdGVkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxpc3RVc2VycyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvdXNlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RhdHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL3N0YXRzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldE9BdXRoQ2xpZW50cyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvb2F1dGgvY2xpZW50cycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YS5jbGllbnRzKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmRlbFRva2Vuc0J5Q2xpZW50SWQgPSBmdW5jdGlvbiAoaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2FwaS92MS9vYXV0aC9jbGllbnRzLycgKyBpZCArICcvdG9rZW5zJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi91cGRhdGUnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUucmVib290ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9yZWJvb3QnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuYmFja3VwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vYmFja3VwcycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRDZXJ0aWZpY2F0ZSA9IGZ1bmN0aW9uIChjZXJ0aWZpY2F0ZUZpbGUsIGtleUZpbGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd3aWxsIHNldCBjZXJ0aWZpY2F0ZScpO1xuXG4gICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmZC5hcHBlbmQoJ2NlcnRpZmljYXRlJywgY2VydGlmaWNhdGVGaWxlKTtcbiAgICAgICAgZmQuYXBwZW5kKCdrZXknLCBrZXlGaWxlKTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2Nsb3Vkcm9uL2NlcnRpZmljYXRlJywgZmQsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5ncmFwaHMgPSBmdW5jdGlvbiAodGFyZ2V0cywgZnJvbSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0cyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBmcm9tOiBmcm9tXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL2dyYXBocycsIGNvbmZpZykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5jcmVhdGVVc2VyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBlbWFpbCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlbW92ZVVzZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwKHsgbWV0aG9kOiAnREVMRVRFJywgdXJsOiAnL2FwaS92MS91c2Vycy8nICsgdXNlcm5hbWUsIGRhdGE6IGRhdGEsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9fSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBwYXNzd29yZDogY3VycmVudFBhc3N3b3JkLFxuICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld1Bhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2Vycy8nICsgdGhpcy5fdXNlckluZm8udXNlcm5hbWUgKyAnL3Bhc3N3b3JkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hDb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGNhbGxiYWNrID0gdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICB0aGlzLmNvbmZpZyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICB0aGF0LnNldENvbmZpZyhyZXN1bHQpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBpbnNlcnQgb3IgdXBkYXRlIG5ldyBhcHBzXG4gICAgICAgICAgICBhcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Ll9pbnN0YWxsZWRBcHBzW2ldLmlkID09PSBhcHAuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYXBwLCB0aGF0Ll9pbnN0YWxsZWRBcHBzW2ZvdW5kXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5wdXNoKGFwcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgb2xkIGVudHJpZXMsIGdvaW5nIGJhY2t3YXJkcyB0byBhbGxvdyBzcGxpY2luZ1xuICAgICAgICAgICAgZm9yKHZhciBpID0gdGhhdC5faW5zdGFsbGVkQXBwcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGlmICghYXBwcy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7IHJldHVybiAoZWxlbS5pZCA9PT0gdGhhdC5faW5zdGFsbGVkQXBwc1tpXS5pZCk7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2luc3RhbGxlZEFwcHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRva2VuKG51bGwpO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9O1xuXG4gICAgICAgIC8vIGxvZ291dCBmcm9tIE9BdXRoIHNlc3Npb25cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9zZXNzaW9uL2xvZ291dCc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZXhjaGFuZ2VDb2RlRm9yVG9rZW4gPSBmdW5jdGlvbiAoYXV0aENvZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXG4gICAgICAgICAgICBjb2RlOiBhdXRoQ29kZSxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5fY2xpZW50SWQsXG4gICAgICAgICAgICBjbGllbnRfc2VjcmV0OiB0aGlzLl9jbGllbnRTZWNyZXRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL29hdXRoL3Rva2VuP3Jlc3BvbnNlX3R5cGU9dG9rZW4mY2xpZW50X2lkPScgKyB0aGlzLl9jbGllbnRJZCwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBjbGllbnQgPSBuZXcgQ2xpZW50KCk7XG4gICAgcmV0dXJuIGNsaWVudDtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwU3RvcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsICdBcHBTdG9yZScsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50LCBBcHBTdG9yZSkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUuTE9BRElORyA9IDE7XG4gICAgJHNjb3BlLkVSUk9SID0gMjtcbiAgICAkc2NvcGUuTE9BREVEID0gMztcblxuICAgICRzY29wZS5sb2FkU3RhdHVzID0gJHNjb3BlLkxPQURJTkc7XG4gICAgJHNjb3BlLmxvYWRFcnJvciA9ICcnO1xuXG4gICAgJHNjb3BlLmFwcHMgPSBbXTtcblxuICAgICRzY29wZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBDbGllbnQucmVmcmVzaEluc3RhbGxlZEFwcHMoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFN0YXR1cyA9ICRzY29wZS5FUlJPUjtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZEVycm9yID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEFwcFN0b3JlLmdldEFwcHMoZnVuY3Rpb24gKGVycm9yLCBhcHBzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkU3RhdHVzID0gJHNjb3BlLkVSUk9SO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZEVycm9yID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGFwcCBpbiBhcHBzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5hcHBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwc1thcHBdLmlkID09PSAkc2NvcGUuYXBwc1tpXS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQpICRzY29wZS5hcHBzLnB1c2goYXBwc1thcHBdKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwcy5mb3JFYWNoKGZ1bmN0aW9uIChhcHAsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChDbGllbnQuX2luc3RhbGxlZEFwcHMpIGFwcC5pbnN0YWxsZWQgPSBDbGllbnQuX2luc3RhbGxlZEFwcHMuc29tZShmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5hcHBTdG9yZUlkID09PSBhcHAuaWQ7IH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcHNbYXBwLmlkXSkgJHNjb3BlLmFwcHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkU3RhdHVzID0gJHNjb3BlLkxPQURFRDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYXBwLycgKyBhcHAuaWQgKyAnL2luc3RhbGwnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLm9wZW5BcHAgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2xpZW50Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoQ2xpZW50Ll9pbnN0YWxsZWRBcHBzW2ldLmFwcFN0b3JlSWQgPT09IGFwcC5pZCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovLycgKyBDbGllbnQuX2luc3RhbGxlZEFwcHNbaV0uZnFkbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uQ29uZmlnKGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgaWYgKCFjb25maWcuYXBpU2VydmVyT3JpZ2luKSByZXR1cm47XG4gICAgICAgICRzY29wZS5yZWZyZXNoKCk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJHJvdXRlJywgJyRpbnRlcnZhbCcsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm91dGUsICRpbnRlcnZhbCwgQ2xpZW50KSB7XG4gICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgJHNjb3BlLnVzZXJJbmZvID0gQ2xpZW50LmdldFVzZXJJbmZvKCk7XG4gICAgJHNjb3BlLmluc3RhbGxlZEFwcHMgPSBDbGllbnQuZ2V0SW5zdGFsbGVkQXBwcygpO1xuXG4gICAgJHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICBpZiAoISRyb3V0ZS5jdXJyZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudC4kJHJvdXRlLm9yaWdpbmFsUGF0aC5pbmRleE9mKHVybCkgPT09IDA7XG4gICAgfTtcblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICBDbGllbnQubG9nb3V0KCk7XG4gICAgfTtcblxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrVVJMID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbG9naW5fY2FsbGJhY2suaHRtbCc7XG4gICAgICAgIHZhciBzY29wZSA9ICdyb290LHByb2ZpbGUsYXBwcyxyb2xlQWRtaW4nO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYXBpL3YxL29hdXRoL2RpYWxvZy9hdXRob3JpemU/cmVzcG9uc2VfdHlwZT1jb2RlJmNsaWVudF9pZD0nICsgQ2xpZW50Ll9jbGllbnRJZCArICcmcmVkaXJlY3RfdXJpPScgKyBjYWxsYmFja1VSTCArICcmc2NvcGU9JyArIHNjb3BlO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0dXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9zZXR1cC5odG1sJztcbiAgICB9O1xuXG4gICAgJHNjb3BlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZXJyb3IuaHRtbCc7XG4gICAgfTtcblxuICAgIENsaWVudC5pc1NlcnZlckZpcnN0VGltZShmdW5jdGlvbiAoZXJyb3IsIGlzRmlyc3RUaW1lKSB7XG4gICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG4gICAgICAgIGlmIChpc0ZpcnN0VGltZSkgcmV0dXJuICRzY29wZS5zZXR1cCgpO1xuXG4gICAgICAgIC8vIHdlIHVzZSB0aGUgY29uZmlnIHJlcXVlc3QgYXMgYW4gaW5kaWNhdG9yIGlmIHRoZSB0b2tlbiBpcyBzdGlsbCB2YWxpZFxuICAgICAgICAvLyBUT0RPIHdlIHNob3VsZCBwcm9iYWJseSBhdHRhY2ggc3VjaCBhIGhhbmRsZXIgZm9yIGVhY2ggcmVxdWVzdCwgYXMgdGhlIHRva2VuIGNhbiBnZXQgaW52YWxpZFxuICAgICAgICAvLyBhdCBhbnkgdGltZSFcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS50b2tlbikge1xuICAgICAgICAgICAgQ2xpZW50LnJlZnJlc2hDb25maWcoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMSkgcmV0dXJuICRzY29wZS5sb2dpbigpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgYWN0dWFsbHkgdXBkYXRlaW5nXG4gICAgICAgICAgICAgICAgaWYgKENsaWVudC5nZXRDb25maWcoKS5wcm9ncmVzcy51cGRhdGUpIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG5cbiAgICAgICAgICAgICAgICBDbGllbnQudXNlckluZm8oZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICAgICBDbGllbnQuc2V0VXNlckluZm8ocmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICBDbGllbnQucmVmcmVzaEluc3RhbGxlZEFwcHMoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBraWNrIG9mZiBpbnN0YWxsZWQgYXBwcyBhbmQgY29uZmlnIHBvbGxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWZyZXNoQXBwc1RpbWVyID0gJGludGVydmFsKENsaWVudC5yZWZyZXNoSW5zdGFsbGVkQXBwcy5iaW5kKENsaWVudCksIDIwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZnJlc2hDb25maWdUaW1lciA9ICRpbnRlcnZhbChDbGllbnQucmVmcmVzaENvbmZpZy5iaW5kKENsaWVudCksIDUwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHJlZnJlc2hBcHBzVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocmVmcmVzaENvbmZpZ1RpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3cgbWFyayB0aGUgQ2xpZW50IHRvIGJlIHJlYWR5XG4gICAgICAgICAgICAgICAgICAgICAgICBDbGllbnQuc2V0UmVhZHkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbigpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB3YWl0IHRpbGwgdGhlIHZpZXcgaGFzIGxvYWRlZCB1bnRpbCBzaG93aW5nIGEgbW9kYWwgZGlhbG9nXG4gICAgQ2xpZW50Lm9uQ29uZmlnKGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5wcm9ncmVzcy51cGRhdGUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH1cbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQWNjb3VudENvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICAkc2NvcGUudXNlciA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAkc2NvcGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdXNlcnBhc3N3b3JkJyk7XG4gICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvdXNlcnBhc3N3b3JkJztcbiAgICB9O1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdBcHBDb25maWd1cmVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5hcHAgPSBudWxsO1xuICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xuICAgICRzY29wZS5sb2NhdGlvbiA9ICcnO1xuICAgICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiA9ICcnO1xuICAgICRzY29wZS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICRzY29wZS5lcnJvciA9IHt9O1xuICAgICRzY29wZS5kb21haW4gPSAnJztcbiAgICAkc2NvcGUucG9ydEJpbmRpbmdzID0geyB9O1xuXG4gICAgJHNjb3BlLmNvbmZpZ3VyZUFwcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmVycm9yLm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIHZhciBwb3J0QmluZGluZ3MgPSB7IH07XG4gICAgICAgIGZvciAodmFyIGNvbnRhaW5lclBvcnQgaW4gJHNjb3BlLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgcG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdID0gJHNjb3BlLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XS5ob3N0UG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5jb25maWd1cmVBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCAkc2NvcGUucGFzc3dvcmQsIHsgbG9jYXRpb246ICRzY29wZS5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiBwb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiAkc2NvcGUuYWNjZXNzUmVzdHJpY3Rpb24gfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9ICdBcHAgd2l0aCB0aGUgbmFtZSAnICsgJHNjb3BlLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgY29uZmlndXJlZC4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoJyMvYXBwLycgKyAkcm91dGVQYXJhbXMuYXBwSWQgKyAnL2RldGFpbHMnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZG9tYWluID0gQ2xpZW50LmdldENvbmZpZygpLmZxZG47XG5cbiAgICAgICAgQ2xpZW50LmdldEFwcCgkcm91dGVQYXJhbXMuYXBwSWQsIGZ1bmN0aW9uIChlcnJvciwgYXBwKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvciB8fCB7IH07XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybjtcblxuICAgICAgICAgICAgJHNjb3BlLmFwcCA9IGFwcDtcbiAgICAgICAgICAgICRzY29wZS5sb2NhdGlvbiA9IGFwcC5sb2NhdGlvbjtcbiAgICAgICAgICAgICRzY29wZS5wb3J0QmluZGluZ3MgPSBhcHAubWFuaWZlc3QudGNwUG9ydHM7XG4gICAgICAgICAgICAkc2NvcGUuYWNjZXNzUmVzdHJpY3Rpb24gPSBhcHAuYWNjZXNzUmVzdHJpY3Rpb247XG4gICAgICAgICAgICBmb3IgKHZhciBjb250YWluZXJQb3J0IGluICRzY29wZS5wb3J0QmluZGluZ3MpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdLmhvc3RQb3J0ID0gYXBwLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRMb2NhdGlvbicpLmZvY3VzKCk7XG59XSk7XG4iLCIvKiBnbG9iYWwgJDp0cnVlICovXG4vKiBnbG9iYWwgUmlja3NoYXc6dHJ1ZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcERldGFpbHNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJHJvdXRlUGFyYW1zLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUuYXBwID0ge307XG4gICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgJHNjb3BlLnVwZGF0ZUF2YWlsYWJsZSA9IGZhbHNlO1xuICAgICRzY29wZS5hY3RpdmVUYWIgPSAnZGF5JztcbiAgICAkc2NvcGUudXBkYXRlVmVyc2lvbiA9IG51bGw7XG4gICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG5cbiAgICAkc2NvcGUuc3RhcnRBcHAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIENsaWVudC5zdGFydEFwcCgkcm91dGVQYXJhbXMuYXBwSWQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zdG9wQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBDbGllbnQuc3RvcEFwcCgkcm91dGVQYXJhbXMuYXBwSWQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS51cGRhdGVBcHAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIENsaWVudC51cGRhdGVBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCAkc2NvcGUudXBkYXRlVmVyc2lvbiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVuaW5zdGFsbEFwcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI3VuaW5zdGFsbEFwcE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICBDbGllbnQudW5pbnN0YWxsQXBwKCRyb3V0ZVBhcmFtcy5hcHBJZCwgJHNjb3BlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjLyc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZW5kZXJDcHUoYWN0aXZlVGFiLCBjcHVEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZENwdSA9IFsgXTtcblxuICAgICAgICBpZiAoY3B1RGF0YSAmJiBjcHVEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkQ3B1ID0gY3B1RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIGNwdUdyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ0NwdUNoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAxMDAsXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkQ3B1IHx8IFsgXSxcbiAgICAgICAgICAgICAgICBuYW1lOiAnY3B1J1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdVhBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBjcHVHcmFwaCB9KTtcbiAgICAgICAgdmFyIGNwdVlBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnQ3B1WUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdUhvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBjcHVHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeSkudG9GaXhlZCgyKSArICclPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNwdUdyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlck1lbW9yeShhY3RpdmVUYWIsIG1lbW9yeURhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkTWVtb3J5ID0gWyBdO1xuXG4gICAgICAgIGlmIChtZW1vcnlEYXRhICYmIG1lbW9yeURhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRNZW1vcnkgPSBtZW1vcnlEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcblxuICAgICAgICB2YXIgbWVtb3J5R3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnTWVtb3J5Q2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDIgKiAxMDI0ICogMTAyNCAqIDEwMjQsIC8vIDJnYlxuICAgICAgICAgICAgc2VyaWVzOiBbIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRNZW1vcnkgfHwgWyBdLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtZW1vcnknXG4gICAgICAgICAgICB9IF1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIHZhciBtZW1vcnlYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogbWVtb3J5R3JhcGggfSk7XG4gICAgICAgIHZhciBtZW1vcnlZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IG1lbW9yeUdyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ01lbW9yeVlBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBtZW1vcnlIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogbWVtb3J5R3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvKDEwMjQqMTAyNCkpLnRvRml4ZWQoMikgKyAnTUI8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWVtb3J5R3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyRGlzayhhY3RpdmVUYWIsIGRpc2tEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZERpc2sgPSBbIF07XG5cbiAgICAgICAgaWYgKGRpc2tEYXRhICYmIGRpc2tEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkRGlzayA9IGRpc2tEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcblxuICAgICAgICB2YXIgZGlza0dyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ0Rpc2tDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMzAgKiAxMDI0ICogMTAyNCAqIDEwMjQsIC8vIDMwZ2JcbiAgICAgICAgICAgIHNlcmllczogW3tcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWREaXNrIHx8IFsgXSxcbiAgICAgICAgICAgICAgICBuYW1lOiAnYXBwcydcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgZGlza1hBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBkaXNrR3JhcGggfSk7XG4gICAgICAgIHZhciBkaXNrWUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnRGlza1lBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaXNrSG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeS8oMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpICsgJ01CPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaXNrTGVnZW5kID0gbmV3IFJpY2tzaGF3LkdyYXBoLkxlZ2VuZCh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tMZWdlbmQnKVxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNrR3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnVwZGF0ZUdyYXBocyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNwdVVzYWdlVGFyZ2V0ID1cbiAgICAgICAgICAgICdub25OZWdhdGl2ZURlcml2YXRpdmUoJyArXG4gICAgICAgICAgICAgICAgJ3N1bVNlcmllcyhjb2xsZWN0ZC5sb2NhbGhvc3QudGFibGUtJyArICRzY29wZS5hcHAuaWQgKyAnLWNwdS5nYXVnZS11c2VyLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnY29sbGVjdGQubG9jYWxob3N0LnRhYmxlLScgKyAkc2NvcGUuYXBwLmlkICsgJy1jcHUuZ2F1Z2Utc3lzdGVtKSknOyAvLyBhc3N1bWVzIDEwMCBqaWZmaWVzIHBlciBzZWMgKFVTRVJfSFopXG5cbiAgICAgICAgdmFyIG1lbW9yeVVzYWdlVGFyZ2V0ID0gJ2NvbGxlY3RkLmxvY2FsaG9zdC50YWJsZS0nICsgJHNjb3BlLmFwcC5pZCArICctbWVtb3J5LmdhdWdlLW1heF91c2FnZV9pbl9ieXRlcyc7XG5cbiAgICAgICAgdmFyIGRpc2tVc2FnZVRhcmdldCA9ICdjb2xsZWN0ZC5sb2NhbGhvc3QuZmlsZWNvdW50LScgKyAkc2NvcGUuYXBwLmlkICsgJy1hcHBkYXRhLmJ5dGVzJztcblxuICAgICAgICB2YXIgYWN0aXZlVGFiID0gJHNjb3BlLmFjdGl2ZVRhYjtcbiAgICAgICAgdmFyIGZyb20gPSAnLTI0aG91cnMnO1xuICAgICAgICBzd2l0Y2ggKGFjdGl2ZVRhYikge1xuICAgICAgICBjYXNlICdkYXknOiBmcm9tID0gJy0yNGhvdXJzJzsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vbnRoJzogZnJvbSA9ICctMW1vbnRoJzsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3llYXInOiBmcm9tID0gJy0xeWVhcic7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiBjb25zb2xlLmxvZygnaW50ZXJuYWwgZXJycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQuZ3JhcGhzKFsgY3B1VXNhZ2VUYXJnZXQsIG1lbW9yeVVzYWdlVGFyZ2V0LCBkaXNrVXNhZ2VUYXJnZXQgXSwgZnJvbSwgZnVuY3Rpb24gKGVycm9yLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgIHJlbmRlckNwdShhY3RpdmVUYWIsIGRhdGFbMF0pO1xuXG4gICAgICAgICAgICByZW5kZXJNZW1vcnkoYWN0aXZlVGFiLCBkYXRhWzFdKTtcblxuICAgICAgICAgICAgcmVuZGVyRGlzayhhY3RpdmVUYWIsIGRhdGFbMl0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIENsaWVudC5nZXRBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCBmdW5jdGlvbiAoZXJyb3IsIGFwcCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy8nO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcCA9IGFwcDtcbiAgICAgICAgICAgICRzY29wZS5hcHBMb2dVcmwgPSBDbGllbnQuZ2V0QXBwTG9nVXJsKGFwcC5pZCk7XG5cbiAgICAgICAgICAgIGlmIChDbGllbnQuZ2V0Q29uZmlnKCkudXBkYXRlICYmIENsaWVudC5nZXRDb25maWcoKS51cGRhdGUuYXBwcykge1xuICAgICAgICAgICAgICAgIHZhciBhcHBVcGRhdGVzID0gQ2xpZW50LmdldENvbmZpZygpLnVwZGF0ZS5hcHBzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXBwVXBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwVXBkYXRlc1tpXS5hcHBJZCA9PT0gJHNjb3BlLmFwcC5hcHBTdG9yZUlkICYmIGFwcFVwZGF0ZXNbaV0udmVyc2lvbiAhPT0gICRzY29wZS5hcHAudmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUF2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlVmVyc2lvbiA9IGFwcFVwZGF0ZXNbaV0udmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUdyYXBocygpO1xuXG4gICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwSW5zdGFsbENvbnRyb2xsZXInLCBbJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsICdBcHBTdG9yZScsICckdGltZW91dCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBDbGllbnQsIEFwcFN0b3JlLCAkdGltZW91dCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUuYXBwID0gbnVsbDtcbiAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAkc2NvcGUubG9jYXRpb24gPSAnJztcbiAgICAkc2NvcGUuYWNjZXNzUmVzdHJpY3Rpb24gPSAnJztcbiAgICAkc2NvcGUuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAkc2NvcGUuZXJyb3IgPSB7IH07XG4gICAgJHNjb3BlLmRvbWFpbiA9ICcnO1xuICAgICRzY29wZS52ZXJzaW9uID0gbnVsbDtcbiAgICAkc2NvcGUucG9ydEJpbmRpbmdzID0geyB9O1xuICAgICRzY29wZS5ob3N0UG9ydE1pbiA9IDEwMjU7XG4gICAgJHNjb3BlLmhvc3RQb3J0TWF4ID0gOTk5OTtcblxuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmRvbWFpbiA9IENsaWVudC5nZXRDb25maWcoKS5mcWRuO1xuXG4gICAgICAgIEFwcFN0b3JlLmdldEFwcEJ5SWQoJHJvdXRlUGFyYW1zLmFwcFN0b3JlSWQsIGZ1bmN0aW9uIChlcnJvciwgYXBwKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvciB8fCB7IH07XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybjtcbiAgICAgICAgICAgICRzY29wZS5hcHAgPSBhcHA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIGJhc2VkIG9uIGJveFZlcnNpb25cbiAgICAgICAgQXBwU3RvcmUuZ2V0TWFuaWZlc3QoJHJvdXRlUGFyYW1zLmFwcFN0b3JlSWQsIGZ1bmN0aW9uIChlcnJvciwgbWFuaWZlc3QpIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yIHx8IHsgfTtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuO1xuICAgICAgICAgICAgJHNjb3BlLnZlcnNpb24gPSBtYW5pZmVzdC52ZXJzaW9uO1xuICAgICAgICAgICAgJHNjb3BlLnBvcnRCaW5kaW5ncyA9IG1hbmlmZXN0LnRjcFBvcnRzO1xuICAgICAgICAgICAgJHNjb3BlLmFjY2Vzc1Jlc3RyaWN0aW9uID0gbWFuaWZlc3QuYWNjZXNzUmVzdHJpY3Rpb24gfHwgJyc7XG4gICAgICAgICAgICAvLyBkZWZhdWx0IHNldHRpbmcgaXMgdG8gbWFwIHBvcnRzIGFzIHRoZXkgYXJlIGluIG1hbmlmZXN0XG4gICAgICAgICAgICBmb3IgKHZhciBwb3J0IGluICRzY29wZS5wb3J0QmluZGluZ3MpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9ydEJpbmRpbmdzW3BvcnRdLmhvc3RQb3J0ID0gcGFyc2VJbnQocG9ydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5lcnJvci5uYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICB2YXIgcG9ydEJpbmRpbmdzID0geyB9O1xuICAgICAgICBmb3IgKHZhciBwb3J0IGluICRzY29wZS5wb3J0QmluZGluZ3MpIHtcbiAgICAgICAgICAgIHBvcnRCaW5kaW5nc1twb3J0XSA9ICRzY29wZS5wb3J0QmluZGluZ3NbcG9ydF0uaG9zdFBvcnQ7XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQuaW5zdGFsbEFwcCgkcm91dGVQYXJhbXMuYXBwU3RvcmVJZCwgJHNjb3BlLnZlcnNpb24sICRzY29wZS5wYXNzd29yZCwgJHNjb3BlLmFwcC50aXRsZSwgeyBsb2NhdGlvbjogJHNjb3BlLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IHBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246ICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IsIGFwcElkKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5uYW1lID0gJ0FwcGxpY2F0aW9uIGFscmVhZHkgZXhpc3RzLic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yLnBhc3N3b3JkID0gJ1dyb25nIHBhc3N3b3JkIHByb3ZpZGVkLic7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwLm5hbWUgKyAnIGNhbm5vdCBiZSBpbnN0YWxsZWQuJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCcjL2FwcC8nICsgYXBwSWQgKyAnL2RldGFpbHMnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICB9O1xuXG4gICAgLy8gaGFjayBmb3IgYXV0b2ZvY3VzIHdpdGggYW5ndWxhclxuICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgeyAkKCdpbnB1dFthdXRvZm9jdXNdOnZpc2libGU6Zmlyc3QnKS5mb2N1cygpOyB9LCAxMDAwKTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIGZ1bmN0aW9uICgpIHtcblxufSk7XG4iLCIvKiBnbG9iYWw6Umlja3NoYXc6dHJ1ZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0dyYXBoc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFjdGl2ZVRhYiA9ICdkYXknO1xuXG4gICAgdmFyIGNwdVVzYWdlVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoJyArXG4gICAgJ3NjYWxlKGRpdmlkZVNlcmllcygnICtcbiAgICAgICAgJ3N1bVNlcmllcyhjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXN5c3RlbSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LW5pY2UsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS11c2VyKSwnICtcbiAgICAgICAgJ3N1bVNlcmllcyhjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LWlkbGUsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1zeXN0ZW0sY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1uaWNlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtdXNlcixjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXdhaXQpKSwgMTAwKSwgMCknO1xuXG4gICAgdmFyIG5ldHdvcmtVc2FnZVR4VGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmludGVyZmFjZS1ldGgwLmlmX29jdGV0cy50eCwgMCknO1xuICAgIHZhciBuZXR3b3JrVXNhZ2VSeFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5pbnRlcmZhY2UtZXRoMC5pZl9vY3RldHMucngsIDApJztcblxuICAgIHZhciBkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5kZi1sb29wMC5kZl9jb21wbGV4LXVzZWQsIDApJztcbiAgICB2YXIgZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuZGYtbG9vcDEuZGZfY29tcGxleC11c2VkLCAwKSc7XG5cbiAgICBmdW5jdGlvbiByZW5kZXJDcHUoYWN0aXZlVGFiLCBjcHVEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZENwdSA9IFsgXTtcblxuICAgICAgICBpZiAoY3B1RGF0YSAmJiBjcHVEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkQ3B1ID0gY3B1RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIGNwdUdyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ0NwdUNoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAxMDAsXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkQ3B1LFxuICAgICAgICAgICAgICAgIG5hbWU6ICdjcHUnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY3B1WEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IGNwdUdyYXBoIH0pO1xuICAgICAgICB2YXIgY3B1WUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBjcHVHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdDcHVZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY3B1SG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IGNwdUdyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5KS50b0ZpeGVkKDIpICsgJyU8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3B1R3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyTmV0d29yayhhY3RpdmVUYWIsIHR4RGF0YSwgcnhEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZFR4ID0gWyBdLCB0cmFuc2Zvcm1lZFJ4ID0gWyBdO1xuXG4gICAgICAgIGlmICh0eERhdGEgJiYgdHhEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkVHggPSB0eERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuICAgICAgICBpZiAocnhEYXRhICYmIHJ4RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZFJ4ID0gcnhEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcblxuICAgICAgICB2YXIgbmV0d29ya0dyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ05ldHdvcmtDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIHNlcmllczogWyB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkVHgsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3R4J1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZ3JlZW4nLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkUngsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3J4J1xuICAgICAgICAgICAgfSBdXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgbmV0d29ya1hBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBuZXR3b3JrR3JhcGggfSk7XG4gICAgICAgIHZhciBuZXR3b3JrWUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBuZXR3b3JrR3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnTmV0d29ya1lBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBuZXR3b3JrSG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IG5ldHdvcmtHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeS8xMDI0KS50b0ZpeGVkKDIpICsgJ0tCPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldHdvcmtHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJEaXNrKGFjdGl2ZVRhYiwgYXBwc1VzZWREYXRhLCBkYXRhVXNlZERhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkQXBwc1VzZWQgPSBbIF0sIHRyYW5zZm9ybWVkRGF0YVVzZWQgPSBbIF07XG5cbiAgICAgICAgaWYgKGFwcHNVc2VkRGF0YSAmJiBhcHBzVXNlZERhdGEuZGF0YXBvaW50cykge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWRBcHBzVXNlZCA9IGFwcHNVc2VkRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH07IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFVc2VkRGF0YSAmJiBkYXRhVXNlZERhdGEuZGF0YXBvaW50cykge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWREYXRhVXNlZCA9IGRhdGFVc2VkRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH07IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpc2tHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdEaXNrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDMwICogMTAyNCAqIDEwMjQgKiAxMDI0LCAvLyAzMGdiXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkQXBwc1VzZWQsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2FwcHMnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWREYXRhVXNlZCxcbiAgICAgICAgICAgICAgICBuYW1lOiAnZGF0YSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgZGlza1hBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBkaXNrR3JhcGggfSk7XG4gICAgICAgIHZhciBkaXNrWUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnRGlza1lBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaXNrSG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeS8oMTAyNCAqIDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICdHQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0xlZ2VuZCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5MZWdlbmQoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdEaXNrTGVnZW5kJylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlza0dyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVHcmFwaHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhY3RpdmVUYWIgPSAkc2NvcGUuYWN0aXZlVGFiO1xuICAgICAgIHZhciBmcm9tID0gJy0yNGhvdXJzJztcbiAgICAgICAgc3dpdGNoIChhY3RpdmVUYWIpIHtcbiAgICAgICAgY2FzZSAnZGF5JzogZnJvbSA9ICctMjRob3Vycyc7IGJyZWFrO1xuICAgICAgICBjYXNlICdtb250aCc6IGZyb20gPSAnLTFtb250aCc7IGJyZWFrO1xuICAgICAgICBjYXNlICd5ZWFyJzogZnJvbSA9ICctMXllYXInOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogY29uc29sZS5sb2coJ2ludGVybmFsIGVycnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LmdyYXBocyhbIGNwdVVzYWdlVGFyZ2V0LCBuZXR3b3JrVXNhZ2VUeFRhcmdldCwgbmV0d29ya1VzYWdlUnhUYXJnZXQsIGRpc2tVc2FnZUFwcHNVc2VkVGFyZ2V0LCBkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCBdLCBmcm9tLCBmdW5jdGlvbiAoZXJyb3IsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgZGF0YVswXSk7XG5cbiAgICAgICAgICAgIHJlbmRlck5ldHdvcmsoYWN0aXZlVGFiLCBkYXRhWzFdLCBkYXRhWzJdKTtcblxuICAgICAgICAgICAgcmVuZGVyRGlzayhhY3RpdmVUYWIsIGRhdGFbM10sIGRhdGFbNF0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoJHNjb3BlLnVwZGF0ZUdyYXBocyk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ1NlY3VyaXR5Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsIENsaWVudCkge1xuICAgICRzY29wZS5hY3RpdmVDbGllbnRzID0gW107XG4gICAgJHNjb3BlLnRva2VuSW5Vc2UgPSBudWxsO1xuXG4gICAgJHNjb3BlLnJlbW92ZUFjY2Vzc1Rva2VucyA9IGZ1bmN0aW9uIChjbGllbnQsIGV2ZW50KSB7XG4gICAgICAgIGNsaWVudC5fYnVzeSA9IHRydWU7XG5cbiAgICAgICAgQ2xpZW50LmRlbFRva2Vuc0J5Q2xpZW50SWQoY2xpZW50LmlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgY2xpZW50Ll9idXN5ID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS50b2tlbkluVXNlID0gQ2xpZW50Ll90b2tlbjtcblxuICAgICAgICBDbGllbnQuZ2V0T0F1dGhDbGllbnRzKGZ1bmN0aW9uIChlcnJvciwgYWN0aXZlQ2xpZW50cykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICRzY29wZS5hY3RpdmVDbGllbnRzID0gYWN0aXZlQ2xpZW50cztcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUudXNlciA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG4gICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gbnVsbDtcbiAgICAkc2NvcGUuZHJpdmVzID0gW107XG4gICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZSA9IG51bGw7XG4gICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZU5hbWUgPSAnJztcbiAgICAkc2NvcGUua2V5RmlsZSA9IG51bGw7XG4gICAgJHNjb3BlLmtleUZpbGVOYW1lID0gJyc7XG5cbiAgICAkc2NvcGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcHBpZCA9ICRzY29wZS5uYWtlZERvbWFpbkFwcCA/ICRzY29wZS5uYWtlZERvbWFpbkFwcC5pZCA6ICdhZG1pbic7XG5cbiAgICAgICAgQ2xpZW50LnNldE5ha2VkRG9tYWluKGFwcGlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgbmFrZWQgZG9tYWluJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC5iYWNrdXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBub3cgc3RhcnQgcXVlcnlcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIENsaWVudC52ZXJzaW9uKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrSWZEb25lLCA1MDAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5yZWJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNyZWJvb3RNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICQoJyNyZWJvb3RQcm9ncmVzc01vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgICAgICBDbGllbnQucmVib290KGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gbm93IHN0YXJ0IHF1ZXJ5XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0lmRG9uZSgpIHtcbiAgICAgICAgICAgICAgICBDbGllbnQudmVyc2lvbihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNyZWJvb3RQcm9ncmVzc01vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh3aW5kb3cubG9jYXRpb24ucmVsb2FkLmJpbmQod2luZG93LmxvY2F0aW9uLCB0cnVlKSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrSWZEb25lLCA1MDAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyN1cGRhdGVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgICAgICBDbGllbnQudXBkYXRlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZENlcnRpZmljYXRlJykub25jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZU5hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZEtleScpLm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmtleUZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAkc2NvcGUua2V5RmlsZU5hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRDZXJ0aWZpY2F0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1dpbGwgc2V0IHRoZSBjZXJ0aWZpY2F0ZScpO1xuXG4gICAgICAgIGlmICghJHNjb3BlLmNlcnRpZmljYXRlRmlsZSkgcmV0dXJuIGNvbnNvbGUubG9nKCdDZXJ0aWZpY2F0ZSBub3Qgc2V0Jyk7XG4gICAgICAgIGlmICghJHNjb3BlLmtleUZpbGUpIHJldHVybiBjb25zb2xlLmxvZygnS2V5IG5vdCBzZXQnKTtcblxuICAgICAgICBDbGllbnQuc2V0Q2VydGlmaWNhdGUoJHNjb3BlLmNlcnRpZmljYXRlRmlsZSwgJHNjb3BlLmtleUZpbGUsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh3aW5kb3cubG9jYXRpb24ucmVsb2FkLmJpbmQod2luZG93LmxvY2F0aW9uLCB0cnVlKSwgMzAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQub25Db25maWcoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldEFwcHMoZnVuY3Rpb24gKGVycm9yLCBhcHBzKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgYXBwIGxpc3QnKTtcbiAgICAgICAgICAgICRzY29wZS5hcHBzID0gYXBwcztcblxuICAgICAgICAgICAgQ2xpZW50LmdldE5ha2VkRG9tYWluKGZ1bmN0aW9uIChlcnJvciwgYXBwaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuYXBwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFwcHNbaV0uaWQgPT09IGFwcGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSAkc2NvcGUuYXBwc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIENsaWVudC5zdGF0cyhmdW5jdGlvbiAoZXJyb3IsIHN0YXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZHJpdmVzID0gc3RhdHMuZHJpdmVzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdVc2VyQ3JlYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUuZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgICRzY29wZS51c2VybmFtZSA9ICcnO1xuICAgICRzY29wZS5lbWFpbCA9ICcnO1xuICAgICRzY29wZS5hbHJlYWR5VGFrZW4gPSAnJztcblxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5hbHJlYWR5VGFrZW4gPSAnJztcblxuICAgICAgICAkc2NvcGUuZGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIENsaWVudC5jcmVhdGVVc2VyKCRzY29wZS51c2VybmFtZSwgJHNjb3BlLmVtYWlsLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxyZWFkeVRha2VuID0gJHNjb3BlLnVzZXJuYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdVc2VybmFtZSBhbHJlYWR5IHRha2VuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgdXNlci4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvdXNlcmxpc3QnO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH07XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ1VzZXJMaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUucmVhZHkgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlcnMgPSBbXTtcbiAgICAkc2NvcGUudXNlckluZm8gPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUudXNlckRlbGV0ZUZvcm0gPSB7XG4gICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5pc01lID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXIudXNlcm5hbWUgPT09IENsaWVudC5nZXRVc2VySW5mbygpLnVzZXJuYW1lO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBZG1pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiAhIXVzZXIuYWRtaW47XG4gICAgfTtcblxuICAgICRzY29wZS50b2dnbGVBZG1pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIENsaWVudC5zZXRBZG1pbih1c2VyLnVzZXJuYW1lLCAhdXNlci5hZG1pbiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgdXNlci5hZG1pbiA9ICF1c2VyLmFkbWluO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRlbGV0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICAvLyBUT0RPIGFkZCBidXN5IGluZGljYXRvciBhbmQgYmxvY2sgZm9ybVxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJEZWxldGVGb3JtLnVzZXJuYW1lICE9PSB1c2VyLnVzZXJuYW1lKSByZXR1cm4gY29uc29sZS5lcnJvcignVXNlcm5hbWUgZG9lcyBub3QgbWF0Y2gnKTtcblxuICAgICAgICBDbGllbnQucmVtb3ZlVXNlcih1c2VyLnVzZXJuYW1lLCAkc2NvcGUudXNlckRlbGV0ZUZvcm0ucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMSkgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1dyb25nIHBhc3N3b3JkJyk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZGVsZXRlIHVzZXIuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICAkKCcjdXNlckRlbGV0ZU1vZGFsLScgKyB1c2VyLnVzZXJuYW1lKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICAgICByZWZyZXNoKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgICBDbGllbnQubGlzdFVzZXJzKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZ2V0IHVzZXIgbGlzdGluZy4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgICRzY29wZS51c2VycyA9IHJlc3VsdC51c2VycztcbiAgICAgICAgICAgICRzY29wZS5yZWFkeSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5hZGRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL3VzZXJjcmVhdGUnO1xuICAgIH07XG5cbiAgICByZWZyZXNoKCk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ1VzZXJQYXNzd29yZENvbnRyb2xsZXInLCBbJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICRzY29wZS5jdXJyZW50UGFzc3dvcmQgPSAnJztcbiAgICAkc2NvcGUubmV3UGFzc3dvcmQgPSAnJztcbiAgICAkc2NvcGUucmVwZWF0UGFzc3dvcmQgPSAnJztcbiAgICAkc2NvcGUudmFsaWRhdGlvbkNsYXNzID0ge307XG5cbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudmFsaWRhdGlvbkNsYXNzLmN1cnJlbnRQYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUudmFsaWRhdGlvbkNsYXNzLm5ld1Bhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS52YWxpZGF0aW9uQ2xhc3MucmVwZWF0UGFzc3dvcmQgPSAnJztcblxuICAgICAgICBpZiAoJHNjb3BlLm5ld1Bhc3N3b3JkICE9PSAkc2NvcGUucmVwZWF0UGFzc3dvcmQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dFJlcGVhdFBhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgICAgICAgICRzY29wZS52YWxpZGF0aW9uQ2xhc3MucmVwZWF0UGFzc3dvcmQgPSAnaGFzLWVycm9yJztcbiAgICAgICAgICAgICRzY29wZS5yZXBlYXRQYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIENsaWVudC5jaGFuZ2VQYXNzd29yZCgkc2NvcGUuY3VycmVudFBhc3N3b3JkLCAkc2NvcGUubmV3UGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dEN1cnJlbnRQYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbGlkYXRpb25DbGFzcy5jdXJyZW50UGFzc3dvcmQgPSAnaGFzLWVycm9yJztcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1Bhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlcGVhdFBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNoYW5nZSBwYXNzd29yZC4nLCBlcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRDdXJyZW50UGFzc3dvcmQnKS5mb2N1cygpO1xufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9