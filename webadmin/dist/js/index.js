"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/dashboard"}).when("/dashboard",{controller:"DashboardController",templateUrl:"views/dashboard.html"}).when("/usercreate",{controller:"UserCreateController",templateUrl:"views/usercreate.html"}).when("/userpassword",{controller:"UserPasswordController",templateUrl:"views/userpassword.html"}).when("/userlist",{controller:"UserListController",templateUrl:"views/userlist.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/app/:appStoreId/install",{controller:"AppInstallController",templateUrl:"views/appinstall.html"}).when("/app/:appId/configure",{controller:"AppConfigureController",templateUrl:"views/appconfigure.html"}).when("/app/:appId/details",{controller:"AppDetailsController",templateUrl:"views/appdetails.html"}).when("/settings",{controller:"SettingsController",templateUrl:"views/settings.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).when("/security",{controller:"SecurityController",templateUrl:"views/security.html"}).otherwise({redirectTo:"/"})}]),app.filter("installationActive",function(){return function(e){return"error"===e?!1:"installed"===e?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){return"error"===e?"Error":"subdomain_error"===e?"Error":"installed"===e?"Installed":"downloading_image"===e?"Downloading":"pending_install"===e?"Installing":"pending_uninstall"===e?"Uninstalling":"creating_container"===e?"Container":"downloading_manifest"===e?"Manifest":"creating_volume"===e?"Volume":"registering_subdomain"===e?"Subdomain":"allocated_oauth_credentials"===e?"OAuth":e}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,t,o,n){o.$set("name",o.laterName);var r=n[0],i=n[1];r&&i&&(r.$name=o.name,i.$addControl(r),e.$on("$destroy",function(){i.$removeControl(r)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,t){function o(e,t){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof t?t:JSON.stringify(t)}function n(e){return function(t,n){return 401===n?i.logout():void e(new o(n,t))}}function r(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:null,isDev:!1,progress:{}},this._installedApps=[],this.setToken(localStorage.token)}var i=null;return r.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},r.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},r.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},r.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+t.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm"},r.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress;var t=this;this._configListener.forEach(function(e){e(t._config)})},r.prototype.getInstalledApps=function(){return this._installedApps},r.prototype.getUserInfo=function(){return this._userInfo},r.prototype.getConfig=function(){return this._config},r.prototype.setToken=function(t){e.defaults.headers.common.Authorization="Bearer "+t,t?localStorage.token=t:localStorage.removeItem("token"),this._token=t},r.prototype.config=function(t){e.get("/api/v1/cloudron/config").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.userInfo=function(t){e.get("/api/v1/profile").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.installApp=function(t,r,i,a,s,l){var c=this,p={appStoreId:t,version:r,password:i,location:s.location,portBindings:s.portBindings,accessRestriction:s.accessRestriction};e.post("/api/v1/apps/install",p).success(function(e,t){return 202!==t||"object"!=typeof e?l(new o(t,e)):(e.manifest={title:a},c._installedApps.push(e),void l(null,e.id))}).error(n(l))},r.prototype.uninstallApp=function(t,r,i){var a={password:r};e.post("/api/v1/apps/"+t+"/uninstall",a).success(function(e,t){return 202!==t?i(new o(t,e)):void i(null)}).error(n(i))},r.prototype.configureApp=function(t,r,i,a){var s={appId:t,password:r,location:i.location,portBindings:i.portBindings,accessRestriction:i.accessRestriction};e.post("/api/v1/apps/"+t+"/configure",s).success(function(e,t){return 202!==t?a(new o(t,e)):void a(null)}).error(n(a))},r.prototype.updateApp=function(t,r,i,a){e.post("/api/v1/apps/"+t+"/update",{version:r,password:i}).success(function(e,t){return 202!==t?a(new o(t,e)):void a(null)}).error(n(a))},r.prototype.startApp=function(t,r){var i={};e.post("/api/v1/apps/"+t+"/start",i).success(function(e,t){return 202!==t?r(new o(t,e)):void r(null)}).error(n(r))},r.prototype.stopApp=function(t,r){var i={};e.post("/api/v1/apps/"+t+"/stop",i).success(function(e,t){return 202!==t?r(new o(t,e)):void r(null)}).error(n(r))},r.prototype.version=function(t){e.get("/api/v1/cloudron/status").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.isServerFirstTime=function(t){e.get("/api/v1/cloudron/status").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,!e.activated)}).error(n(t))},r.prototype.getNakedDomain=function(t){e.get("/api/v1/settings/naked_domain").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e.appid)}).error(n(t))},r.prototype.setNakedDomain=function(t,r){e.post("/api/v1/settings/naked_domain",{appid:t}).success(function(e,t){return 204!==t?r(new o(t)):void r(null)}).error(n(r))},r.prototype.getApps=function(t){e.get("/api/v1/apps").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e.apps)}).error(n(t))},r.prototype.getApp=function(e,t){var o=null;return this._installedApps.some(function(t){return t.id===e?(o=t,!0):!1}),o?t(null,o):t(new Error("App not found"))},r.prototype.getAppLogStream=function(e){var t=new EventSource("/api/v1/apps/"+e+"/logstream");return t},r.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},r.prototype.setAdmin=function(t,r,i){var a={username:t,admin:r};e.post("/api/v1/users/"+t+"/admin",a).success(function(e,t){return 204!==t?i(new o(t,e)):void i(null)}).error(n(i))},r.prototype.createAdmin=function(t,r,i,a,s){var l={username:t,password:r,email:i},c=this;e.post("/api/v1/cloudron/activate?setupToken="+a,l).success(function(e,n){return 201!==n||"object"!=typeof e?s(new o(n,e)):(c.setToken(e.token),c.setUserInfo({username:t,email:i,admin:!0}),void s(null,e.activated))}).error(n(s))},r.prototype.listUsers=function(t){e.get("/api/v1/users").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.stats=function(t){e.get("/api/v1/cloudron/stats").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.getOAuthClients=function(t){e.get("/api/v1/oauth/clients").success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e.clients)}).error(n(t))},r.prototype.delTokensByClientId=function(t,r){e["delete"]("/api/v1/oauth/clients/"+t+"/tokens").success(function(e,t){return 204!==t?r(new o(t,e)):void r(null)}).error(n(r))},r.prototype.update=function(t){e.get("/api/v1/cloudron/update").success(function(e,n){return 202!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.reboot=function(t){e.get("/api/v1/cloudron/reboot").success(function(e,n){return 202!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.backup=function(t){e.post("/api/v1/cloudron/backups").success(function(e,n){return 202!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(n(t))},r.prototype.setCertificate=function(t,r,i){console.log("will set certificate");var a=new FormData;a.append("certificate",t),a.append("key",r),e.post("/api/v1/cloudron/certificate",a,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,t){return 202!==t?i(new o(t,e)):void i(null)}).error(n(i))},r.prototype.graphs=function(t,r,i){var a={params:{target:t,format:"json",from:r}};e.get("/api/v1/cloudron/graphs",a).success(function(e,t){return 200!==t||"object"!=typeof e?i(new o(t,e)):void i(null,e)}).error(n(i))},r.prototype.createUser=function(t,r,i){var a={username:t,email:r};e.post("/api/v1/users",a).success(function(e,t){return 201!==t||"object"!=typeof e?i(new o(t,e)):void i(null,e)}).error(n(i))},r.prototype.removeUser=function(t,r,i){var a={username:t,password:r};e({method:"DELETE",url:"/api/v1/users/"+t,data:a,headers:{"Content-Type":"application/json"}}).success(function(e,t){return 204!==t?i(new o(t,e)):void i(null)}).error(n(i))},r.prototype.changePassword=function(t,r,i){var a={password:t,newPassword:r};e.post("/api/v1/users/"+this._userInfo.username+"/password",a).success(function(e,t){return 204!==t||"object"!=typeof e?i(new o(t,e)):void i(null,e)}).error(n(i))},r.prototype.refreshConfig=function(e){var t=this;e="function"==typeof e?e:function(){},this.config(function(o,n){return o?e(o):(t.setConfig(n),void e(null))})},r.prototype.refreshInstalledApps=function(e){var t=this;e="function"==typeof e?e:function(){},this.getApps(function(o,n){if(o)return e(o);n.forEach(function(e){for(var o=!1,n=0;n<t._installedApps.length;++n)if(t._installedApps[n].id===e.id){o=n;break}o!==!1?angular.copy(e,t._installedApps[o]):t._installedApps.push(e)});for(var r=t._installedApps.length-1;r>=0;--r)n.some(function(e){return e.id===t._installedApps[r].id})||t._installedApps.splice(r,1);e(null)})},r.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},r.prototype.exchangeCodeForToken=function(t,r){var i={grant_type:"authorization_code",code:t,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,i).success(function(e,t){return 200!==t||"object"!=typeof e?r(new o(t,e)):void r(null,e.access_token)}).error(n(r))},i=new r}]),angular.module("Application").service("AppStore",["$http","Client",function(e,t){function o(e,t){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof t?t:JSON.stringify(t)}function n(){this._appsCache={}}return n.prototype.getApps=function(n){if(null===t.getConfig().apiServerOrigin)return n(new o(420,"Enhance Your Calm"));var r=this;e.get(t.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:t.getConfig().version}}).success(function(e,t){return 200!==t?n(new o(t,e)):(e.apps.forEach(function(e){r._appsCache[e.id]||(r._appsCache[e.id]=e)}),n(null,r._appsCache))}).error(function(e,t){return n(new o(t,e))})},n.prototype.getAppById=function(e,t){if(e in this._appsCache)return t(null,this._appsCache[e]);var n=this;this.getApps(function(r){return r?t(r):e in n._appsCache?t(null,n._appsCache[e]):void t(new o(404,"Not found"))})},n.prototype.getManifest=function(n,r){if(null===t.getConfig().apiServerOrigin)return r(new o(420,"Enhance Your Calm"));var i=t.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+n+"/manifest";console.log("Getting the manifest of ",n,i),e.get(i).success(function(e,t){return 200!==t?r(new o(t,e)):r(null,e)}).error(function(e,t){return r(new o(t,e))})},new n}]),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,t,o,n){e.initialized=!1,e.userInfo=n.getUserInfo(),e.installedApps=n.getInstalledApps(),e.isActive=function(e){return t.current?0===t.current.$$route.originalPath.indexOf(e):!1},e.logout=function(t){t.stopPropagation(),e.initialized=!1,n.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",t="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+n._clientId+"&redirect_uri="+e+"&scope="+t},e.setup=function(){window.location.href="/error.html?errorCode=1"},e.error=function(e){console.error(e),window.location.href="/error.html"},n.isServerFirstTime(function(t,r){return t?e.error(t):r?e.setup():void(localStorage.token?n.refreshConfig(function(t){return t&&401===t.statusCode?e.login():t?e.error(t):(n.getConfig().progress.update&&(window.location.href="/update.html"),void n.userInfo(function(t,r){return t?e.error(t):(n.setUserInfo(r),void n.refreshInstalledApps(function(t){if(t)return e.error(t);var r=o(n.refreshInstalledApps.bind(n),2e3),i=o(n.refreshConfig.bind(n),5e3);e.$on("$destroy",function(){o.cancel(r),o.cancel(i)}),n.setReady(),e.initialized=!0}))}))}):e.login())}),n.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,t,o){e.user=o.getUserInfo(),e.config=o.getConfig(),e.changePassword=function(){t.path("/userpassword")}}]),angular.module("Application").controller("AppConfigureController",["$scope","$routeParams","$location","Client",function(e,t,o,n){n.getUserInfo().admin||o.path("/"),e.app=null,e.password="",e.location="",e.accessRestriction="",e.disabled=!1,e.error={},e.domain="",e.portBindings={},e.configureApp=function(){e.error.name=null,e.error.password=null;var o={};for(var r in e.portBindings)o[r]=e.portBindings[r].hostPort;n.configureApp(t.appId,e.password,{location:e.location,portBindings:o,accessRestriction:e.accessRestriction},function(o){return o?(403===o.statusCode?(e.error.password="Wrong password provided.",e.password=""):e.error.name="App with the name "+e.app.name+" cannot be configured.",void(e.disabled=!1)):void window.location.replace("#/app/"+t.appId+"/details")})},e.cancel=function(){window.history.back()},n.onReady(function(){e.domain=n.getConfig().fqdn,n.getApp(t.appId,function(t,o){if(e.error=t||{},!t){e.app=o,e.location=o.location,e.portBindings=o.manifest.tcpPorts,e.accessRestriction=o.accessRestriction;for(var n in e.portBindings)e.portBindings[n].hostPort=o.portBindings[n]}})}),document.getElementById("inputLocation").focus()}]),angular.module("Application").controller("AppDetailsController",["$scope","$http","$routeParams","$location","Client",function(e,t,o,n,r){function i(e,t){var o=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var n=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:o||[],name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:n}),new Rickshaw.Graph.Axis.Y({graph:n,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:n,formatter:function(e,t,o){var n='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=n+e.name+": "+new Number(o).toFixed(2)+"%<br>";return r}})}n.render()}function a(e,t){var o=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var n=new Rickshaw.Graph({element:document.querySelector("#"+e+"MemoryChart"),renderer:"area",width:580,height:250,min:0,max:2147483648,series:[{color:"steelblue",data:o||[],name:"memory"}]});new Rickshaw.Graph.Axis.Time({graph:n}),new Rickshaw.Graph.Axis.Y({graph:n,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"MemoryYAxis")}),new Rickshaw.Graph.HoverDetail({graph:n,formatter:function(e,t,o){var n='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=n+e.name+": "+new Number(o/1048576).toFixed(2)+"MB<br>";return r}})}n.render()}function s(e,t){var o=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var n=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:o||[],name:"apps"}]});new Rickshaw.Graph.Axis.Time({graph:n}),new Rickshaw.Graph.Axis.Y({graph:n,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:n,formatter:function(e,t,o){var n='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=n+e.name+": "+new Number(o/1048576).toFixed(2)+"MB<br>";return r}}),new Rickshaw.Graph.Legend({graph:n,element:document.getElementById(e+"DiskLegend")})}n.render()}r.getUserInfo().admin||n.path("/"),e.app={},e.initialized=!1,e.updateAvailable=!1,e.activeTab="day",e.updateVersion=null,e.password="",e.passwordWrong=!1,e.startApp=function(){r.startApp(o.appId,function(e){e&&console.error(e)})},e.stopApp=function(){r.stopApp(o.appId,function(e){e&&console.error(e)})},e.updateApp=function(){e.passwordWrong=!1,r.updateApp(o.appId,e.updateVersion,e.password,function(t){t&&403===t.statusCode?(e.password="",e.passwordWrong=!0,$("#inputPasswordUpdate").focus()):t?console.error(t):($("#updateAppModal").modal("hide"),e.updateAvailable=!1,e.updateVersion=null,e.password="")})},e.uninstallApp=function(){e.passwordWrong=!1,r.uninstallApp(o.appId,e.password,function(t){t&&403===t.statusCode?(e.password="",e.passwordWrong=!0,$("#inputPasswordUninstall").focus()):t?console.error(t):($("#uninstallAppModal").modal("hide"),e.password="",window.location.href="#/")})},e.updateGraphs=function(){var t="nonNegativeDerivative(sumSeries(collectd.localhost.table-"+e.app.id+"-cpu.gauge-user,collectd.localhost.table-"+e.app.id+"-cpu.gauge-system))",o="collectd.localhost.table-"+e.app.id+"-memory.gauge-max_usage_in_bytes",n="collectd.localhost.filecount-"+e.app.id+"-appdata.bytes",l=e.activeTab,c="-24hours";switch(l){case"day":c="-24hours";break;case"month":c="-1month";break;case"year":c="-1year";break;default:console.log("internal errror")}r.graphs([t,o,n],c,function(e,t){return e?console.log(e):(i(l,t[0]),a(l,t[1]),void s(l,t[2]))})},r.onReady(function(){r.getApp(o.appId,function(t,o){if(t)return console.error(t),void(window.location.href="#/");if(e.app=o,e.appLogUrl=r.getAppLogUrl(o.id),r.getConfig().update&&r.getConfig().update.apps)for(var n=r.getConfig().update.apps,i=0;i<n.length;i++)n[i].appId===e.app.appStoreId&&n[i].version!==e.app.version&&(e.updateAvailable=!0,e.updateVersion=n[i].version);e.updateGraphs(),e.initialized=!0})})}]),angular.module("Application").controller("AppInstallController",["$scope","$routeParams","$location","Client","AppStore","$timeout",function(e,t,o,n,r,i){n.getUserInfo().admin||o.path("/"),e.app=null,e.password="",e.location="",e.accessRestriction="",e.disabled=!1,e.error={},e.domain="",e.version=null,e.portBindings={},e.hostPortMin=1025,e.hostPortMax=9999,n.onReady(function(){e.domain=n.getConfig().fqdn,r.getAppById(t.appStoreId,function(t,o){e.error=t||{},t||(e.app=o)}),r.getManifest(t.appStoreId,function(t,o){if(e.error=t||{},!t){e.version=o.version,e.portBindings=o.tcpPorts,e.accessRestriction=o.accessRestriction||"";for(var n in e.portBindings)e.portBindings[n].hostPort=parseInt(n)}})}),e.installApp=function(){e.error.name=null,e.error.password=null;var o={};for(var r in e.portBindings)o[r]=e.portBindings[r].hostPort;n.installApp(t.appStoreId,e.version,e.password,e.app.title,{location:e.location,portBindings:o,accessRestriction:e.accessRestriction},function(t,o){return t?(409===t.statusCode?e.error.name="Application already exists.":403===t.statusCode?(e.error.password="Wrong password provided.",e.password=""):e.error.name="App with the name "+e.app.name+" cannot be installed.",void(e.disabled=!1)):void window.location.replace("#/app/"+o+"/details")})},e.cancel=function(){window.history.back()},e.$on("$viewContentLoaded",function(){i(function(){$("input[autofocus]:visible:first").focus()},1e3)})}]),angular.module("Application").controller("AppStoreController",["$scope","$location","$timeout","Client","AppStore",function(e,t,o,n,r){function i(){r.getApps(function(t,r){return t&&420===t.statusCode?o(i,500):t?(e.loadStatus=e.ERROR,void(e.loadError=t.message)):void n.refreshInstalledApps(function(t){if(t)return e.loadStatus=e.ERROR,void(e.loadError=t.message);for(var o in r){for(var i=!1,a=0;a<e.apps.length;++a)if(r[o].id===e.apps[a].id){i=!0;break}i||e.apps.push(r[o])}e.apps.forEach(function(t,o){n._installedApps&&(t.installed=n._installedApps.some(function(e){return e.appStoreId===t.id})),r[t.id]||e.apps.splice(o,1)}),e.loadStatus=e.LOADED})})}n.getUserInfo().admin||t.path("/"),e.LOADING=1,e.ERROR=2,e.LOADED=3,e.loadStatus=e.LOADING,e.loadError="",e.apps=[],e.installApp=function(e){t.path("/app/"+e.id+"/install")},e.openApp=function(e){for(var t=0;t<n._installedApps.length;t++)if(n._installedApps[t].appStoreId===e.id){window.open("https://"+n._installedApps[t].fqdn);break}},i()}]),angular.module("Application").controller("DashboardController",function(){}),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,t,o){function n(e,t){var o=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var n=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:o,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:n}),new Rickshaw.Graph.Axis.Y({graph:n,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:n,formatter:function(e,t,o){var n='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=n+e.name+": "+new Number(o).toFixed(2)+"%<br>";return r}})}n.render()}function r(e,t,o){var n=[],r=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var i=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:n,name:"tx"},{color:"green",data:r,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:i}),new Rickshaw.Graph.Axis.Y({graph:i,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(e,t,o){var n='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=n+e.name+": "+new Number(o/1024).toFixed(2)+"KB<br>";return r}})}i.render()}function i(e,t,o){var n=[],r=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var i=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:n,name:"apps"},{color:"green",data:r,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:i}),new Rickshaw.Graph.Axis.Y({graph:i,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(e,t,o){var n='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=n+e.name+": "+new Number(o/1073741824).toFixed(2)+"GB<br>";return r}}),new Rickshaw.Graph.Legend({graph:i,element:document.getElementById(e+"DiskLegend")})}i.render()}o.getUserInfo().admin||t.path("/"),e.activeTab="day";var a="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",s="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",l="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",c="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",p="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var t=e.activeTab,u="-24hours";switch(t){case"day":u="-24hours";break;case"month":u="-1month";break;case"year":u="-1year";break;default:console.log("internal errror")}o.graphs([a,s,l,c,p],u,function(e,o){return e?console.log(e):(n(t,o[0]),r(t,o[1],o[2]),void i(t,o[3],o[4]))})},o.onReady(e.updateGraphs)}]),angular.module("Application").controller("SecurityController",["$scope","Client",function(e,t){e.activeClients=[],e.tokenInUse=null,e.removeAccessTokens=function(e,o){e._busy=!0,t.delTokensByClientId(e.id,function(t){return t?console.error(t):($(o.target).addClass("disabled"),void(e._busy=!1))})},t.onReady(function(){e.tokenInUse=t._token,t.getOAuthClients(function(t,o){return t?console.error(t):void(e.activeClients=o)})})}]),angular.module("Application").controller("SettingsController",["$scope","$location","Client",function(e,t,o){o.getUserInfo().admin||t.path("/"),e.user=o.getUserInfo(),e.config=o.getConfig(),e.nakedDomainApp=null,e.drives=[],e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var t=e.nakedDomainApp?e.nakedDomainApp.id:"admin";o.setNakedDomain(t,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,o.backup(function(t){function n(){o.version(function(t){return t?window.setTimeout(n,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}t&&console.error(t),window.setTimeout(n,5e3)})},e.reboot=function(){$("#rebootModal").modal("hide"),$("#rebootProgressModal").modal("show"),e.$parent.initialized=!1,o.reboot(function(e){function t(){o.version(function(e){return e?window.setTimeout(t,1e3):($("#rebootProgressModal").modal("hide"),void window.setTimeout(window.location.reload.bind(window.location,!0),1e3))})}e&&console.error(e),window.setTimeout(t,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,o.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(t){e.$apply(function(){e.certificateFile=t.target.files[0],e.certificateFileName=t.target.files[0].name})},document.getElementById("idKey").onchange=function(t){e.$apply(function(){e.keyFile=t.target.files[0],e.keyFileName=t.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void o.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},o.onConfig(function(){e.tokenInUse=o._token,o.getApps(function(t,n){t&&console.error("Error loading app list"),e.apps=n,o.getNakedDomain(function(t,o){if(t)return console.error(t);e.nakedDomainApp=null;for(var n=0;n<e.apps.length;n++)if(e.apps[n].id===o){e.nakedDomainApp=e.apps[n];break}}),o.stats(function(t,o){return t?console.error(t):void(e.drives=o.drives)})})})}]),angular.module("Application").controller("UserCreateController",["$scope","$routeParams","$location","Client",function(e,t,o,n){n.getUserInfo().admin||o.path("/"),e.disabled=!1,e.username="",e.email="",e.alreadyTaken="",e.submit=function(){e.alreadyTaken="",e.disabled=!0,n.createUser(e.username,e.email,function(t){return t&&409===t.statusCode?(e.alreadyTaken=e.username,console.error("Username already taken")):(t&&console.error("Unable to create user.",t),void(window.location.href="#/userlist"))})},e.cancel=function(){window.history.back()}}]),angular.module("Application").controller("UserListController",["$scope","$location","Client",function(e,t,o){function n(){o.listUsers(function(t,o){return t?console.error("Unable to get user listing.",t):(e.users=o.users,void(e.ready=!0))})}o.getUserInfo().admin||t.path("/"),e.ready=!1,e.users=[],e.userInfo=o.getUserInfo(),e.userDeleteForm={username:"",password:""},e.isMe=function(e){return e.username===o.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){o.setAdmin(e.username,!e.admin,function(t){return t?console.error(t):void(e.admin=!e.admin)})},e.deleteUser=function(t){return e.userDeleteForm.username!==t.username?console.error("Username does not match"):void o.removeUser(t.username,e.userDeleteForm.password,function(e){return e&&401===e.statusCode?console.error("Wrong password"):e?console.error("Unable to delete user.",e):($("#userDeleteModal-"+t.username).modal("hide"),void n())})},e.addUser=function(){window.location.href="#/usercreate"},n()}]),angular.module("Application").controller("UserPasswordController",["$scope","$routeParams","$location","Client",function(e,t,o,n){n.getUserInfo().admin||o.path("/"),e.active=!1,e.currentPassword="",e.newPassword="",e.repeatPassword="",e.validationClass={},e.submit=function(){return e.validationClass.currentPassword="",e.validationClass.newPassword="",e.validationClass.repeatPassword="",e.newPassword!==e.repeatPassword?(document.getElementById("inputRepeatPassword").focus(),e.validationClass.repeatPassword="has-error",void(e.repeatPassword="")):(e.active=!0,void n.changePassword(e.currentPassword,e.newPassword,function(t){t&&403===t.statusCode?(document.getElementById("inputCurrentPassword").focus(),e.validationClass.currentPassword="has-error",e.currentPassword="",e.newPassword="",e.repeatPassword=""):t?console.error("Unable to change password.",t):window.history.back(),e.active=!1}))},e.cancel=function(){window.history.back()},document.getElementById("inputCurrentPassword").focus()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcGNvbmZpZ3VyZS5qcyIsImFwcGRldGFpbHMuanMiLCJhcHBpbnN0YWxsLmpzIiwiZGFzaGJvYXJkLmpzIiwiZ3JhcGhzLmpzIiwic2VjdXJpdHkuanMiLCJzZXR0aW5ncy5qcyIsInVzZXJjcmVhdGUuanMiLCJ1c2VybGlzdC5qcyIsInVzZXJwYXNzd29yZC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwicmVkaXJlY3RUbyIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsImZpbHRlciIsImlucHV0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbSIsImF0dHJzIiwiY3RybHMiLCIkc2V0IiwibGF0ZXJOYW1lIiwibW9kZWxDdHJsIiwiZm9ybUN0cmwiLCIkbmFtZSIsIm5hbWUiLCIkYWRkQ29udHJvbCIsIiRvbiIsIiRyZW1vdmVDb250cm9sIiwic2VydmljZSIsIiRodHRwIiwibWQ1IiwiQ2xpZW50RXJyb3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsIkVycm9yIiwiY2FsbCIsInRoaXMiLCJjb25zdHJ1Y3RvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWZhdWx0RXJyb3JIYW5kbGVyIiwiY2FsbGJhY2siLCJkYXRhIiwic3RhdHVzIiwiY2xpZW50IiwibG9nb3V0IiwiQ2xpZW50IiwiX3JlYWR5IiwiX2NvbmZpZ0xpc3RlbmVyIiwiX3JlYWR5TGlzdGVuZXIiLCJfdXNlckluZm8iLCJ1c2VybmFtZSIsImVtYWlsIiwiYWRtaW4iLCJfdG9rZW4iLCJfY2xpZW50SWQiLCJfY2xpZW50U2VjcmV0IiwiX2NvbmZpZyIsImFwaVNlcnZlck9yaWdpbiIsIndlYlNlcnZlck9yaWdpbiIsImZxZG4iLCJpcCIsInJldmlzaW9uIiwidXBkYXRlIiwiaXNEZXYiLCJwcm9ncmVzcyIsIl9pbnN0YWxsZWRBcHBzIiwic2V0VG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsInByb3RvdHlwZSIsInNldFJlYWR5IiwiZm9yRWFjaCIsIm9uUmVhZHkiLCJwdXNoIiwib25Db25maWciLCJzZXRVc2VySW5mbyIsInVzZXJJbmZvIiwiZ3JhdmF0YXIiLCJjcmVhdGVIYXNoIiwidG9Mb3dlckNhc2UiLCJzZXRDb25maWciLCJ2ZXJzaW9uIiwidGhhdCIsImdldEluc3RhbGxlZEFwcHMiLCJnZXRVc2VySW5mbyIsImdldENvbmZpZyIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsIkF1dGhvcml6YXRpb24iLCJyZW1vdmVJdGVtIiwiZ2V0Iiwic3VjY2VzcyIsImVycm9yIiwiaW5zdGFsbEFwcCIsImlkIiwicGFzc3dvcmQiLCJ0aXRsZSIsImFwcFN0b3JlSWQiLCJsb2NhdGlvbiIsInBvcnRCaW5kaW5ncyIsImFjY2Vzc1Jlc3RyaWN0aW9uIiwicG9zdCIsIm1hbmlmZXN0IiwidW5pbnN0YWxsQXBwIiwiYXBwSWQiLCJjb25maWd1cmVBcHAiLCJ1cGRhdGVBcHAiLCJzdGFydEFwcCIsInN0b3BBcHAiLCJpc1NlcnZlckZpcnN0VGltZSIsImFjdGl2YXRlZCIsImdldE5ha2VkRG9tYWluIiwiYXBwaWQiLCJzZXROYWtlZERvbWFpbiIsImdldEFwcHMiLCJhcHBzIiwiZ2V0QXBwIiwiYXBwRm91bmQiLCJzb21lIiwiZ2V0QXBwTG9nU3RyZWFtIiwic291cmNlIiwiRXZlbnRTb3VyY2UiLCJnZXRBcHBMb2dVcmwiLCJzZXRBZG1pbiIsInBheWxvYWQiLCJjcmVhdGVBZG1pbiIsInNldHVwVG9rZW4iLCJsaXN0VXNlcnMiLCJzdGF0cyIsImdldE9BdXRoQ2xpZW50cyIsImNsaWVudHMiLCJkZWxUb2tlbnNCeUNsaWVudElkIiwicmVib290IiwiYmFja3VwIiwic2V0Q2VydGlmaWNhdGUiLCJjZXJ0aWZpY2F0ZUZpbGUiLCJrZXlGaWxlIiwiY29uc29sZSIsImxvZyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJDb250ZW50LVR5cGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJncmFwaHMiLCJ0YXJnZXRzIiwiZnJvbSIsInBhcmFtcyIsInRhcmdldCIsImZvcm1hdCIsImNyZWF0ZVVzZXIiLCJyZW1vdmVVc2VyIiwibWV0aG9kIiwidXJsIiwiY2hhbmdlUGFzc3dvcmQiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsInJlZnJlc2hDb25maWciLCJyZXN1bHQiLCJyZWZyZXNoSW5zdGFsbGVkQXBwcyIsImZvdW5kIiwiaSIsImxlbmd0aCIsImNvcHkiLCJzcGxpY2UiLCJ3aW5kb3ciLCJocmVmIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW4iLCJhdXRoQ29kZSIsImdyYW50X3R5cGUiLCJjb2RlIiwicmVkaXJlY3RfdXJpIiwib3JpZ2luIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImFjY2Vzc190b2tlbiIsIkFwcFN0b3JlRXJyb3IiLCJBcHBTdG9yZSIsIl9hcHBzQ2FjaGUiLCJib3hWZXJzaW9uIiwiZ2V0QXBwQnlJZCIsImdldE1hbmlmZXN0IiwibWFuaWZlc3RVcmwiLCIkc2NvcGUiLCIkcm91dGUiLCIkaW50ZXJ2YWwiLCJpbml0aWFsaXplZCIsImluc3RhbGxlZEFwcHMiLCJpc0FjdGl2ZSIsImN1cnJlbnQiLCIkJHJvdXRlIiwib3JpZ2luYWxQYXRoIiwiaW5kZXhPZiIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwibG9naW4iLCJjYWxsYmFja1VSTCIsInNldHVwIiwiaXNGaXJzdFRpbWUiLCJyZWZyZXNoQXBwc1RpbWVyIiwiYmluZCIsInJlZnJlc2hDb25maWdUaW1lciIsImNhbmNlbCIsIiRsb2NhdGlvbiIsInVzZXIiLCJwYXRoIiwiJHJvdXRlUGFyYW1zIiwiZGlzYWJsZWQiLCJkb21haW4iLCJjb250YWluZXJQb3J0IiwiaG9zdFBvcnQiLCJyZXBsYWNlIiwiaGlzdG9yeSIsImJhY2siLCJ0Y3BQb3J0cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb2N1cyIsInJlbmRlckNwdSIsImFjdGl2ZVRhYiIsImNwdURhdGEiLCJ0cmFuc2Zvcm1lZENwdSIsImRhdGFwb2ludHMiLCJtYXAiLCJwb2ludCIsInkiLCJ4IiwiY3B1R3JhcGgiLCJSaWNrc2hhdyIsIkdyYXBoIiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyZW5kZXJlciIsIndpZHRoIiwiaGVpZ2h0IiwibWluIiwibWF4Iiwic2VyaWVzIiwiY29sb3IiLCJBeGlzIiwiVGltZSIsImdyYXBoIiwiWSIsIm9yaWVudGF0aW9uIiwidGlja0Zvcm1hdCIsIkZpeHR1cmVzIiwiTnVtYmVyIiwiZm9ybWF0S01CVCIsIkhvdmVyRGV0YWlsIiwiZm9ybWF0dGVyIiwic3dhdGNoIiwiY29udGVudCIsInRvRml4ZWQiLCJyZW5kZXIiLCJyZW5kZXJNZW1vcnkiLCJtZW1vcnlEYXRhIiwidHJhbnNmb3JtZWRNZW1vcnkiLCJtZW1vcnlHcmFwaCIsInJlbmRlckRpc2siLCJkaXNrRGF0YSIsInRyYW5zZm9ybWVkRGlzayIsImRpc2tHcmFwaCIsIkxlZ2VuZCIsInVwZGF0ZUF2YWlsYWJsZSIsInVwZGF0ZVZlcnNpb24iLCJwYXNzd29yZFdyb25nIiwiJCIsIm1vZGFsIiwidXBkYXRlR3JhcGhzIiwiY3B1VXNhZ2VUYXJnZXQiLCJtZW1vcnlVc2FnZVRhcmdldCIsImRpc2tVc2FnZVRhcmdldCIsImFwcExvZ1VybCIsImFwcFVwZGF0ZXMiLCIkdGltZW91dCIsImhvc3RQb3J0TWluIiwiaG9zdFBvcnRNYXgiLCJwb3J0IiwicGFyc2VJbnQiLCJyZWZyZXNoIiwibG9hZFN0YXR1cyIsIkVSUk9SIiwibG9hZEVycm9yIiwiaW5kZXgiLCJpbnN0YWxsZWQiLCJhIiwiTE9BREVEIiwiTE9BRElORyIsIm9wZW5BcHAiLCJvcGVuIiwicmVuZGVyTmV0d29yayIsInR4RGF0YSIsInJ4RGF0YSIsInRyYW5zZm9ybWVkVHgiLCJ0cmFuc2Zvcm1lZFJ4IiwibmV0d29ya0dyYXBoIiwiYXBwc1VzZWREYXRhIiwiZGF0YVVzZWREYXRhIiwidHJhbnNmb3JtZWRBcHBzVXNlZCIsInRyYW5zZm9ybWVkRGF0YVVzZWQiLCJuZXR3b3JrVXNhZ2VUeFRhcmdldCIsIm5ldHdvcmtVc2FnZVJ4VGFyZ2V0IiwiZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQiLCJkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCIsImFjdGl2ZUNsaWVudHMiLCJ0b2tlbkluVXNlIiwicmVtb3ZlQWNjZXNzVG9rZW5zIiwiX2J1c3kiLCJhZGRDbGFzcyIsIm5ha2VkRG9tYWluQXBwIiwiZHJpdmVzIiwiY2VydGlmaWNhdGVGaWxlTmFtZSIsImtleUZpbGVOYW1lIiwiJHBhcmVudCIsImNoZWNrSWZEb25lIiwic2V0VGltZW91dCIsInJlbG9hZCIsIm9uY2hhbmdlIiwiJGFwcGx5IiwiZmlsZXMiLCJhbHJlYWR5VGFrZW4iLCJzdWJtaXQiLCJ1c2VycyIsInJlYWR5IiwidXNlckRlbGV0ZUZvcm0iLCJpc01lIiwiaXNBZG1pbiIsInRvZ2dsZUFkbWluIiwiZGVsZXRlVXNlciIsImFkZFVzZXIiLCJhY3RpdmUiLCJyZXBlYXRQYXNzd29yZCIsInZhbGlkYXRpb25DbGFzcyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFLQSxJQUFBQSxLQUFBQyxRQUFBQyxPQUFBLGVBQUEsVUFBQSxZQUFBLGVBR0FGLEtBQUFHLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQSxLQUNBQyxXQUFBLGVBQ0FELEtBQUEsY0FDQUUsV0FBQSxzQkFDQUMsWUFBQSx5QkFDQUgsS0FBQSxlQUNBRSxXQUFBLHVCQUNBQyxZQUFBLDBCQUNBSCxLQUFBLGlCQUNBRSxXQUFBLHlCQUNBQyxZQUFBLDRCQUNBSCxLQUFBLGFBQ0FFLFdBQUEscUJBQ0FDLFlBQUEsd0JBQ0FILEtBQUEsYUFDQUUsV0FBQSxxQkFDQUMsWUFBQSx3QkFDQUgsS0FBQSw0QkFDQUUsV0FB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Y3QnO1xuXG4vKiBnbG9iYWwgYW5ndWxhcjpmYWxzZSAqL1xuXG4vLyBjcmVhdGUgbWFpbiBhcHBsaWNhdGlvbiBtb2R1bGVcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbJ25nUm91dGUnLCAnbmdBbmltYXRlJywgJ2FuZ3VsYXItbWQ1J10pO1xuXG4vLyBzZXR1cCBhbGwgbWFqb3IgYXBwbGljYXRpb24gcm91dGVzXG5hcHAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJywge1xuICAgICAgICByZWRpcmVjdFRvOiAnL2Rhc2hib2FyZCdcbiAgICB9KS53aGVuKCcvZGFzaGJvYXJkJywge1xuICAgICAgICBjb250cm9sbGVyOiAnRGFzaGJvYXJkQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZGFzaGJvYXJkLmh0bWwnXG4gICAgfSkud2hlbignL3VzZXJjcmVhdGUnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3JlYXRlQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlcmNyZWF0ZS5odG1sJ1xuICAgIH0pLndoZW4oJy91c2VycGFzc3dvcmQnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyUGFzc3dvcmRDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VycGFzc3dvcmQuaHRtbCdcbiAgICB9KS53aGVuKCcvdXNlcmxpc3QnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyTGlzdENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJsaXN0Lmh0bWwnXG4gICAgfSkud2hlbignL2FwcHN0b3JlJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwU3RvcmVDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBzdG9yZS5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHAvOmFwcFN0b3JlSWQvaW5zdGFsbCcsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcEluc3RhbGxDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBpbnN0YWxsLmh0bWwnXG4gICAgfSkud2hlbignL2FwcC86YXBwSWQvY29uZmlndXJlJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwQ29uZmlndXJlQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwY29uZmlndXJlLmh0bWwnXG4gICAgfSkud2hlbignL2FwcC86YXBwSWQvZGV0YWlscycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcERldGFpbHNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBkZXRhaWxzLmh0bWwnXG4gICAgfSkud2hlbignL3NldHRpbmdzJywge1xuICAgICAgICBjb250cm9sbGVyOiAnU2V0dGluZ3NDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zZXR0aW5ncy5odG1sJ1xuICAgIH0pLndoZW4oJy9hY2NvdW50Jywge1xuICAgICAgICBjb250cm9sbGVyOiAnQWNjb3VudENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FjY291bnQuaHRtbCdcbiAgICB9KS53aGVuKCcvZ3JhcGhzJywge1xuICAgICAgICBjb250cm9sbGVyOiAnR3JhcGhzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3JhcGhzLmh0bWwnXG4gICAgfSkud2hlbignL3NlY3VyaXR5Jywge1xuICAgICAgICBjb250cm9sbGVyOiAnU2VjdXJpdHlDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zZWN1cml0eS5odG1sJ1xuICAgIH0pLm90aGVyd2lzZSh7IHJlZGlyZWN0VG86ICcvJ30pO1xufV0pO1xuXG5hcHAuZmlsdGVyKCdpbnN0YWxsYXRpb25BY3RpdmUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZXJyb3InKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2luc3RhbGxlZCcpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn0pO1xuXG5hcHAuZmlsdGVyKCdpbnN0YWxsYXRpb25TdGF0ZUxhYmVsJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2Vycm9yJykgcmV0dXJuICdFcnJvcic7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3N1YmRvbWFpbl9lcnJvcicpIHJldHVybiAnRXJyb3InO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdpbnN0YWxsZWQnKSByZXR1cm4gJ0luc3RhbGxlZCc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2Rvd25sb2FkaW5nX2ltYWdlJykgcmV0dXJuICdEb3dubG9hZGluZyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3BlbmRpbmdfaW5zdGFsbCcpIHJldHVybiAnSW5zdGFsbGluZyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3BlbmRpbmdfdW5pbnN0YWxsJykgcmV0dXJuICdVbmluc3RhbGxpbmcnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdjcmVhdGluZ19jb250YWluZXInKSByZXR1cm4gJ0NvbnRhaW5lcic7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2Rvd25sb2FkaW5nX21hbmlmZXN0JykgcmV0dXJuICdNYW5pZmVzdCc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2NyZWF0aW5nX3ZvbHVtZScpIHJldHVybiAnVm9sdW1lJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncmVnaXN0ZXJpbmdfc3ViZG9tYWluJykgcmV0dXJuICdTdWJkb21haW4nO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdhbGxvY2F0ZWRfb2F1dGhfY3JlZGVudGlhbHMnKSByZXR1cm4gJ09BdXRoJztcblxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcbn0pO1xuXG5hcHAuZmlsdGVyKCdhY2Nlc3NSZXN0cmljdGlvbkxhYmVsJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJycpIHJldHVybiAncHVibGljJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncm9sZVVzZXInKSByZXR1cm4gJ3ByaXZhdGUnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyb2xlQWRtaW4nKSByZXR1cm4gJ3ByaXZhdGUgKEFkbWlucyBvbmx5KSc7XG5cbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH07XG59KTtcblxuLy8gY3VzdG9tIGRpcmVjdGl2ZSBmb3IgZHluYW1pYyBuYW1lcyBpbiBmb3Jtc1xuLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjM2MTY1NzgvaXNzdWUtcmVnaXN0ZXJpbmctZm9ybS1jb250cm9sLXdpdGgtaW50ZXJwb2xhdGVkLW5hbWUjYW5zd2VyLTIzNjE3NDAxXG5hcHAuZGlyZWN0aXZlKCdsYXRlck5hbWUnLCBmdW5jdGlvbiAoKSB7ICAgICAgICAgICAgICAgICAgIC8vICgyKVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHJlcXVpcmU6IFsnP25nTW9kZWwnLCAnXj9mb3JtJ10sICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbSwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICAgICAgICBhdHRycy4kc2V0KCduYW1lJywgYXR0cnMubGF0ZXJOYW1lKTtcblxuICAgICAgICAgICAgdmFyIG1vZGVsQ3RybCA9IGN0cmxzWzBdOyAgICAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgICAgIHZhciBmb3JtQ3RybCAgPSBjdHJsc1sxXTsgICAgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgICAgICBpZiAobW9kZWxDdHJsICYmIGZvcm1DdHJsKSB7XG4gICAgICAgICAgICAgICAgbW9kZWxDdHJsLiRuYW1lID0gYXR0cnMubmFtZTsgICAgICAgICAgICAgIC8vICg0KVxuICAgICAgICAgICAgICAgIGZvcm1DdHJsLiRhZGRDb250cm9sKG1vZGVsQ3RybCk7ICAgICAgICAgICAvLyAoMilcbiAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtQ3RybC4kcmVtb3ZlQ29udHJvbChtb2RlbEN0cmwpOyAgICAvLyAoNSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbi8qIGdsb2JhbCBhbmd1bGFyICovXG4vKiBnbG9iYWwgRXZlbnRTb3VyY2UgKi9cblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuc2VydmljZSgnQ2xpZW50JywgWyckaHR0cCcsICdtZDUnLCBmdW5jdGlvbiAoJGh0dHAsIG1kNSkge1xuICAgIHZhciBjbGllbnQgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gQ2xpZW50RXJyb3Ioc3RhdHVzQ29kZSwgbWVzc2FnZSkge1xuICAgICAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSByZXR1cm4gY2xpZW50LmxvZ291dCgpO1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENsaWVudCgpIHtcbiAgICAgICAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIgPSBbXTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lciA9IFtdO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBudWxsLFxuICAgICAgICAgICAgZW1haWw6IG51bGwsXG4gICAgICAgICAgICBhZG1pbjogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fdG9rZW4gPSBudWxsO1xuICAgICAgICB0aGlzLl9jbGllbnRJZCA9ICdjaWQtd2ViYWRtaW4nO1xuICAgICAgICB0aGlzLl9jbGllbnRTZWNyZXQgPSAndW51c2VkJztcbiAgICAgICAgdGhpcy5fY29uZmlnID0ge1xuICAgICAgICAgICAgYXBpU2VydmVyT3JpZ2luOiBudWxsLFxuICAgICAgICAgICAgd2ViU2VydmVyT3JpZ2luOiBudWxsLFxuICAgICAgICAgICAgZnFkbjogbnVsbCxcbiAgICAgICAgICAgIGlwOiBudWxsLFxuICAgICAgICAgICAgcmV2aXNpb246IG51bGwsXG4gICAgICAgICAgICB1cGRhdGU6IG51bGwsXG4gICAgICAgICAgICBpc0RldjogZmFsc2UsXG4gICAgICAgICAgICBwcm9ncmVzczoge31cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5faW5zdGFsbGVkQXBwcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuc2V0VG9rZW4obG9jYWxTdG9yYWdlLnRva2VuKTtcbiAgICB9XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fcmVhZHkpIHJldHVybjtcblxuICAgICAgICB0aGlzLl9yZWFkeSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlYWR5KSBjYWxsYmFjaygpO1xuICAgICAgICB0aGlzLl9yZWFkeUxpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLm9uQ29uZmlnID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xuICAgICAgICBjYWxsYmFjayh0aGlzLl9jb25maWcpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFVzZXJJbmZvID0gZnVuY3Rpb24gKHVzZXJJbmZvKSB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGtlZXAgdGhlIGFuZ3VsYXIgYmluZGluZ3MgYWxpdmUsIHNldCBlYWNoIHByb3BlcnR5IGluZGl2aWR1YWxseVxuICAgICAgICB0aGlzLl91c2VySW5mby51c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lO1xuICAgICAgICB0aGlzLl91c2VySW5mby5lbWFpbCA9IHVzZXJJbmZvLmVtYWlsO1xuICAgICAgICB0aGlzLl91c2VySW5mby5hZG1pbiA9ICEhdXNlckluZm8uYWRtaW47XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmdyYXZhdGFyID0gJ2h0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvJyArIG1kNS5jcmVhdGVIYXNoKHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkpICsgJy5qcGc/cz0yNCZkPW1tJztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGtlZXAgdGhlIGFuZ3VsYXIgYmluZGluZ3MgYWxpdmUsIHNldCBlYWNoIHByb3BlcnR5IGluZGl2aWR1YWxseSAoVE9ETzoganVzdCB1c2UgYW5ndWxhci5jb3B5ID8pXG4gICAgICAgIHRoaXMuX2NvbmZpZy5hcGlTZXJ2ZXJPcmlnaW4gPSBjb25maWcuYXBpU2VydmVyT3JpZ2luO1xuICAgICAgICB0aGlzLl9jb25maWcud2ViU2VydmVyT3JpZ2luID0gY29uZmlnLndlYlNlcnZlck9yaWdpbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLnZlcnNpb24gPSBjb25maWcudmVyc2lvbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmZxZG4gPSBjb25maWcuZnFkbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmlwID0gY29uZmlnLmlwO1xuICAgICAgICB0aGlzLl9jb25maWcucmV2aXNpb24gPSBjb25maWcucmV2aXNpb247XG4gICAgICAgIHRoaXMuX2NvbmZpZy51cGRhdGUgPSBjb25maWcudXBkYXRlO1xuICAgICAgICB0aGlzLl9jb25maWcuaXNEZXYgPSBjb25maWcuaXNEZXY7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5wcm9ncmVzcyA9IGNvbmZpZy5wcm9ncmVzcztcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoYXQuX2NvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEluc3RhbGxlZEFwcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YWxsZWRBcHBzO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyB0b2tlbjtcbiAgICAgICAgaWYgKCF0b2tlbikgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIGVsc2UgbG9jYWxTdG9yYWdlLnRva2VuID0gdG9rZW47XG4gICAgICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XG4gICAgfTtcblxuICAgIC8qXG4gICAgICogUmVzdCBBUEkgd3JhcHBlcnNcbiAgICAgKi9cbiAgICBDbGllbnQucHJvdG90eXBlLmNvbmZpZyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vY29uZmlnJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVzZXJJbmZvID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9wcm9maWxlJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoaWQsIHZlcnNpb24sIHBhc3N3b3JkLCB0aXRsZSwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhID0geyBhcHBTdG9yZUlkOiBpZCwgdmVyc2lvbjogdmVyc2lvbiwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzL2luc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIHB1dCBuZXcgYXBwIHdpdGggYW1lbmRlZCB0aXRsZSBpbiBjYWNoZVxuICAgICAgICAgICAgZGF0YS5tYW5pZmVzdCA9IHsgdGl0bGU6IHRpdGxlIH07XG4gICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnB1c2goZGF0YSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGFwcElkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IHBhc3N3b3JkOiBwYXNzd29yZCB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGFwcElkICsgJy91bmluc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKGlkLCBwYXNzd29yZCwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwSWQ6IGlkLCBwYXNzd29yZDogcGFzc3dvcmQsIGxvY2F0aW9uOiBjb25maWcubG9jYXRpb24sIHBvcnRCaW5kaW5nczogY29uZmlnLnBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246IGNvbmZpZy5hY2Nlc3NSZXN0cmljdGlvbiB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9jb25maWd1cmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKGlkLCB2ZXJzaW9uLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvdXBkYXRlJywgeyB2ZXJzaW9uOiB2ZXJzaW9uLCBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKGlkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvc3RhcnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RvcEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0b3AnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudmVyc2lvbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmlzU2VydmVyRmlyc3RUaW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9zdGF0dXMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICFkYXRhLmFjdGl2YXRlZCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYXBwaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoYXBwaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJywgeyBhcHBpZDogYXBwaWQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2FwcHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwID0gZnVuY3Rpb24gKGFwcElkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXBwRm91bmQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzLnNvbWUoZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgaWYgKGFwcC5pZCA9PT0gYXBwSWQpIHtcbiAgICAgICAgICAgICAgICBhcHBGb3VuZCA9IGFwcDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYXBwRm91bmQpIHJldHVybiBjYWxsYmFjayhudWxsLCBhcHBGb3VuZCk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignQXBwIG5vdCBmb3VuZCcpKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBMb2dTdHJlYW0gPSBmdW5jdGlvbiAoYXBwSWQpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9nc3RyZWFtJyk7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nVXJsID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHJldHVybiAnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9ncz9hY2Nlc3NfdG9rZW49JyArIHRoaXMuX3Rva2VuO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldEFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBhZG1pbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBhZG1pbjogYWRtaW5cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzLycgKyB1c2VybmFtZSArICcvYWRtaW4nLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlQWRtaW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgc2V0dXBUb2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9hY3RpdmF0ZT9zZXR1cFRva2VuPScgKyBzZXR1cFRva2VuLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgICAgICAgIHRoYXQuc2V0VXNlckluZm8oeyB1c2VybmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCwgYWRtaW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWN0aXZhdGVkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxpc3RVc2VycyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvdXNlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RhdHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL3N0YXRzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldE9BdXRoQ2xpZW50cyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvb2F1dGgvY2xpZW50cycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YS5jbGllbnRzKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmRlbFRva2Vuc0J5Q2xpZW50SWQgPSBmdW5jdGlvbiAoaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2FwaS92MS9vYXV0aC9jbGllbnRzLycgKyBpZCArICcvdG9rZW5zJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi91cGRhdGUnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUucmVib290ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9yZWJvb3QnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuYmFja3VwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vYmFja3VwcycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRDZXJ0aWZpY2F0ZSA9IGZ1bmN0aW9uIChjZXJ0aWZpY2F0ZUZpbGUsIGtleUZpbGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd3aWxsIHNldCBjZXJ0aWZpY2F0ZScpO1xuXG4gICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmZC5hcHBlbmQoJ2NlcnRpZmljYXRlJywgY2VydGlmaWNhdGVGaWxlKTtcbiAgICAgICAgZmQuYXBwZW5kKCdrZXknLCBrZXlGaWxlKTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2Nsb3Vkcm9uL2NlcnRpZmljYXRlJywgZmQsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5ncmFwaHMgPSBmdW5jdGlvbiAodGFyZ2V0cywgZnJvbSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0cyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBmcm9tOiBmcm9tXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL2dyYXBocycsIGNvbmZpZykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5jcmVhdGVVc2VyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBlbWFpbCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlbW92ZVVzZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwKHsgbWV0aG9kOiAnREVMRVRFJywgdXJsOiAnL2FwaS92MS91c2Vycy8nICsgdXNlcm5hbWUsIGRhdGE6IGRhdGEsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9fSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBwYXNzd29yZDogY3VycmVudFBhc3N3b3JkLFxuICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld1Bhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2Vycy8nICsgdGhpcy5fdXNlckluZm8udXNlcm5hbWUgKyAnL3Bhc3N3b3JkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hDb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGNhbGxiYWNrID0gdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICB0aGlzLmNvbmZpZyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICB0aGF0LnNldENvbmZpZyhyZXN1bHQpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBpbnNlcnQgb3IgdXBkYXRlIG5ldyBhcHBzXG4gICAgICAgICAgICBhcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Ll9pbnN0YWxsZWRBcHBzW2ldLmlkID09PSBhcHAuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYXBwLCB0aGF0Ll9pbnN0YWxsZWRBcHBzW2ZvdW5kXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5wdXNoKGFwcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgb2xkIGVudHJpZXMsIGdvaW5nIGJhY2t3YXJkcyB0byBhbGxvdyBzcGxpY2luZ1xuICAgICAgICAgICAgZm9yKHZhciBpID0gdGhhdC5faW5zdGFsbGVkQXBwcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGlmICghYXBwcy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7IHJldHVybiAoZWxlbS5pZCA9PT0gdGhhdC5faW5zdGFsbGVkQXBwc1tpXS5pZCk7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2luc3RhbGxlZEFwcHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRva2VuKG51bGwpO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9O1xuXG4gICAgICAgIC8vIGxvZ291dCBmcm9tIE9BdXRoIHNlc3Npb25cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9zZXNzaW9uL2xvZ291dCc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZXhjaGFuZ2VDb2RlRm9yVG9rZW4gPSBmdW5jdGlvbiAoYXV0aENvZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXG4gICAgICAgICAgICBjb2RlOiBhdXRoQ29kZSxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5fY2xpZW50SWQsXG4gICAgICAgICAgICBjbGllbnRfc2VjcmV0OiB0aGlzLl9jbGllbnRTZWNyZXRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL29hdXRoL3Rva2VuP3Jlc3BvbnNlX3R5cGU9dG9rZW4mY2xpZW50X2lkPScgKyB0aGlzLl9jbGllbnRJZCwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBjbGllbnQgPSBuZXcgQ2xpZW50KCk7XG4gICAgcmV0dXJuIGNsaWVudDtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwU3RvcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyR0aW1lb3V0JywgJ0NsaWVudCcsICdBcHBTdG9yZScsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHRpbWVvdXQsIENsaWVudCwgQXBwU3RvcmUpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLkxPQURJTkcgPSAxO1xuICAgICRzY29wZS5FUlJPUiA9IDI7XG4gICAgJHNjb3BlLkxPQURFRCA9IDM7XG5cbiAgICAkc2NvcGUubG9hZFN0YXR1cyA9ICRzY29wZS5MT0FESU5HO1xuICAgICRzY29wZS5sb2FkRXJyb3IgPSAnJztcblxuICAgICRzY29wZS5hcHBzID0gW107XG5cbiAgICAkc2NvcGUuaW5zdGFsbEFwcCA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9hcHAvJyArIGFwcC5pZCArICcvaW5zdGFsbCcpO1xuICAgIH07XG5cbiAgICAkc2NvcGUub3BlbkFwcCA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDbGllbnQuX2luc3RhbGxlZEFwcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChDbGllbnQuX2luc3RhbGxlZEFwcHNbaV0uYXBwU3RvcmVJZCA9PT0gYXBwLmlkKSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vJyArIENsaWVudC5faW5zdGFsbGVkQXBwc1tpXS5mcWRuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgICBBcHBTdG9yZS5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQyMCkgcmV0dXJuICR0aW1lb3V0KHJlZnJlc2gsIDUwMCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFN0YXR1cyA9ICRzY29wZS5FUlJPUjtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZEVycm9yID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENsaWVudC5yZWZyZXNoSW5zdGFsbGVkQXBwcyhmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRTdGF0dXMgPSAkc2NvcGUuRVJST1I7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkRXJyb3IgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYXBwIGluIGFwcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmFwcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBzW2FwcF0uaWQgPT09ICRzY29wZS5hcHBzW2ldLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgJHNjb3BlLmFwcHMucHVzaChhcHBzW2FwcF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKENsaWVudC5faW5zdGFsbGVkQXBwcykgYXBwLmluc3RhbGxlZCA9IENsaWVudC5faW5zdGFsbGVkQXBwcy5zb21lKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLmFwcFN0b3JlSWQgPT09IGFwcC5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXBwc1thcHAuaWRdKSAkc2NvcGUuYXBwcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRTdGF0dXMgPSAkc2NvcGUuTE9BREVEO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlZnJlc2goKTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckcm91dGUnLCAnJGludGVydmFsJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZSwgJGludGVydmFsLCBDbGllbnQpIHtcbiAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlckluZm8gPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUuaW5zdGFsbGVkQXBwcyA9IENsaWVudC5nZXRJbnN0YWxsZWRBcHBzKCk7XG5cbiAgICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIGlmICghJHJvdXRlLmN1cnJlbnQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50LiQkcm91dGUub3JpZ2luYWxQYXRoLmluZGV4T2YodXJsKSA9PT0gMDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIENsaWVudC5sb2dvdXQoKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FsbGJhY2tVUkwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9sb2dpbl9jYWxsYmFjay5odG1sJztcbiAgICAgICAgdmFyIHNjb3BlID0gJ3Jvb3QscHJvZmlsZSxhcHBzLHJvbGVBZG1pbic7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hcGkvdjEvb2F1dGgvZGlhbG9nL2F1dGhvcml6ZT9yZXNwb25zZV90eXBlPWNvZGUmY2xpZW50X2lkPScgKyBDbGllbnQuX2NsaWVudElkICsgJyZyZWRpcmVjdF91cmk9JyArIGNhbGxiYWNrVVJMICsgJyZzY29wZT0nICsgc2NvcGU7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXR1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Vycm9yLmh0bWw/ZXJyb3JDb2RlPTEnO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9lcnJvci5odG1sJztcbiAgICB9O1xuXG4gICAgQ2xpZW50LmlzU2VydmVyRmlyc3RUaW1lKGZ1bmN0aW9uIChlcnJvciwgaXNGaXJzdFRpbWUpIHtcbiAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKGlzRmlyc3RUaW1lKSByZXR1cm4gJHNjb3BlLnNldHVwKCk7XG5cbiAgICAgICAgLy8gd2UgdXNlIHRoZSBjb25maWcgcmVxdWVzdCBhcyBhbiBpbmRpY2F0b3IgaWYgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkXG4gICAgICAgIC8vIFRPRE8gd2Ugc2hvdWxkIHByb2JhYmx5IGF0dGFjaCBzdWNoIGEgaGFuZGxlciBmb3IgZWFjaCByZXF1ZXN0LCBhcyB0aGUgdG9rZW4gY2FuIGdldCBpbnZhbGlkXG4gICAgICAgIC8vIGF0IGFueSB0aW1lIVxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnRva2VuKSB7XG4gICAgICAgICAgICBDbGllbnQucmVmcmVzaENvbmZpZyhmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAxKSByZXR1cm4gJHNjb3BlLmxvZ2luKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZSBhY3R1YWxseSB1cGRhdGVpbmdcbiAgICAgICAgICAgICAgICBpZiAoQ2xpZW50LmdldENvbmZpZygpLnByb2dyZXNzLnVwZGF0ZSkgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcblxuICAgICAgICAgICAgICAgIENsaWVudC51c2VySW5mbyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgICAgIENsaWVudC5zZXRVc2VySW5mbyhyZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIENsaWVudC5yZWZyZXNoSW5zdGFsbGVkQXBwcyhmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtpY2sgb2ZmIGluc3RhbGxlZCBhcHBzIGFuZCBjb25maWcgcG9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZnJlc2hBcHBzVGltZXIgPSAkaW50ZXJ2YWwoQ2xpZW50LnJlZnJlc2hJbnN0YWxsZWRBcHBzLmJpbmQoQ2xpZW50KSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaENvbmZpZ1RpbWVyID0gJGludGVydmFsKENsaWVudC5yZWZyZXNoQ29uZmlnLmJpbmQoQ2xpZW50KSwgNTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocmVmcmVzaEFwcHNUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChyZWZyZXNoQ29uZmlnVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdyBtYXJrIHRoZSBDbGllbnQgdG8gYmUgcmVhZHlcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudC5zZXRSZWFkeSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHdhaXQgdGlsbCB0aGUgdmlldyBoYXMgbG9hZGVkIHVudGlsIHNob3dpbmcgYSBtb2RhbCBkaWFsb2dcbiAgICBDbGllbnQub25Db25maWcoZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBpZiAoY29uZmlnLnByb2dyZXNzLnVwZGF0ZSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcbiAgICAgICAgfVxuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdBY2NvdW50Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgICRzY29wZS51c2VyID0gQ2xpZW50LmdldFVzZXJJbmZvKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy91c2VycGFzc3dvcmQnKTtcbiAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy91c2VycGFzc3dvcmQnO1xuICAgIH07XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcENvbmZpZ3VyZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFwcCA9IG51bGw7XG4gICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLmxvY2F0aW9uID0gJyc7XG4gICAgJHNjb3BlLmFjY2Vzc1Jlc3RyaWN0aW9uID0gJyc7XG4gICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgJHNjb3BlLmVycm9yID0ge307XG4gICAgJHNjb3BlLmRvbWFpbiA9ICcnO1xuICAgICRzY29wZS5wb3J0QmluZGluZ3MgPSB7IH07XG5cbiAgICAkc2NvcGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAgICAgZm9yICh2YXIgY29udGFpbmVyUG9ydCBpbiAkc2NvcGUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0gPSAkc2NvcGUucG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdLmhvc3RQb3J0O1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LmNvbmZpZ3VyZUFwcCgkcm91dGVQYXJhbXMuYXBwSWQsICRzY29wZS5wYXNzd29yZCwgeyBsb2NhdGlvbjogJHNjb3BlLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IHBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246ICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yLnBhc3N3b3JkID0gJ1dyb25nIHBhc3N3b3JkIHByb3ZpZGVkLic7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwLm5hbWUgKyAnIGNhbm5vdCBiZSBjb25maWd1cmVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnIy9hcHAvJyArICRyb3V0ZVBhcmFtcy5hcHBJZCArICcvZGV0YWlscycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH07XG5cbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5kb21haW4gPSBDbGllbnQuZ2V0Q29uZmlnKCkuZnFkbjtcblxuICAgICAgICBDbGllbnQuZ2V0QXBwKCRyb3V0ZVBhcmFtcy5hcHBJZCwgZnVuY3Rpb24gKGVycm9yLCBhcHApIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yIHx8IHsgfTtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuO1xuXG4gICAgICAgICAgICAkc2NvcGUuYXBwID0gYXBwO1xuICAgICAgICAgICAgJHNjb3BlLmxvY2F0aW9uID0gYXBwLmxvY2F0aW9uO1xuICAgICAgICAgICAgJHNjb3BlLnBvcnRCaW5kaW5ncyA9IGFwcC5tYW5pZmVzdC50Y3BQb3J0cztcbiAgICAgICAgICAgICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiA9IGFwcC5hY2Nlc3NSZXN0cmljdGlvbjtcbiAgICAgICAgICAgIGZvciAodmFyIGNvbnRhaW5lclBvcnQgaW4gJHNjb3BlLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgICAgICRzY29wZS5wb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0uaG9zdFBvcnQgPSBhcHAucG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dExvY2F0aW9uJykuZm9jdXMoKTtcbn1dKTtcbiIsIi8qIGdsb2JhbCAkOnRydWUgKi9cbi8qIGdsb2JhbCBSaWNrc2hhdzp0cnVlICovXG5cbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwRGV0YWlsc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5hcHAgPSB7fTtcbiAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAkc2NvcGUudXBkYXRlQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgJHNjb3BlLmFjdGl2ZVRhYiA9ICdkYXknO1xuICAgICRzY29wZS51cGRhdGVWZXJzaW9uID0gbnVsbDtcbiAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IGZhbHNlO1xuXG4gICAgJHNjb3BlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBDbGllbnQuc3RhcnRBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc3RvcEFwcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQ2xpZW50LnN0b3BBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC51cGRhdGVBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCAkc2NvcGUudXBkYXRlVmVyc2lvbiwgJHNjb3BlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgJCgnI2lucHV0UGFzc3dvcmRVcGRhdGUnKS5mb2N1cygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjdXBkYXRlQXBwTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVBdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlVmVyc2lvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC51bmluc3RhbGxBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCAkc2NvcGUucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZFdyb25nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKCcjaW5wdXRQYXNzd29yZFVuaW5zdGFsbCcpLmZvY3VzKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyN1bmluc3RhbGxBcHBNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy8nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgY3B1RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRDcHUgPSBbIF07XG5cbiAgICAgICAgaWYgKGNwdURhdGEgJiYgY3B1RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZENwdSA9IGNwdURhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuXG4gICAgICAgIHZhciBjcHVHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdDcHVDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZENwdSB8fCBbIF0sXG4gICAgICAgICAgICAgICAgbmFtZTogJ2NwdSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogY3B1R3JhcGggfSk7XG4gICAgICAgIHZhciBjcHVZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IGNwdUdyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0NwdVlBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkpLnRvRml4ZWQoMikgKyAnJTxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjcHVHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJNZW1vcnkoYWN0aXZlVGFiLCBtZW1vcnlEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZE1lbW9yeSA9IFsgXTtcblxuICAgICAgICBpZiAobWVtb3J5RGF0YSAmJiBtZW1vcnlEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkTWVtb3J5ID0gbWVtb3J5RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIG1lbW9yeUdyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ01lbW9yeUNoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAyICogMTAyNCAqIDEwMjQgKiAxMDI0LCAvLyAyZ2JcbiAgICAgICAgICAgIHNlcmllczogWyB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkTWVtb3J5IHx8IFsgXSxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbWVtb3J5J1xuICAgICAgICAgICAgfSBdXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgbWVtb3J5WEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IG1lbW9yeUdyYXBoIH0pO1xuICAgICAgICB2YXIgbWVtb3J5WUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBtZW1vcnlHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdNZW1vcnlZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWVtb3J5SG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IG1lbW9yeUdyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5LygxMDI0KjEwMjQpKS50b0ZpeGVkKDIpICsgJ01CPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lbW9yeUdyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckRpc2soYWN0aXZlVGFiLCBkaXNrRGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWREaXNrID0gWyBdO1xuXG4gICAgICAgIGlmIChkaXNrRGF0YSAmJiBkaXNrRGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZERpc2sgPSBkaXNrRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIGRpc2tHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdEaXNrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDMwICogMTAyNCAqIDEwMjQgKiAxMDI0LCAvLyAzMGdiXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkRGlzayB8fCBbIF0sXG4gICAgICAgICAgICAgICAgbmFtZTogJ2FwcHMnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIGRpc2tYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogZGlza0dyYXBoIH0pO1xuICAgICAgICB2YXIgZGlza1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICdNQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0xlZ2VuZCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5MZWdlbmQoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdEaXNrTGVnZW5kJylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlza0dyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVHcmFwaHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjcHVVc2FnZVRhcmdldCA9XG4gICAgICAgICAgICAnbm9uTmVnYXRpdmVEZXJpdmF0aXZlKCcgK1xuICAgICAgICAgICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LnRhYmxlLScgKyAkc2NvcGUuYXBwLmlkICsgJy1jcHUuZ2F1Z2UtdXNlciwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbGxlY3RkLmxvY2FsaG9zdC50YWJsZS0nICsgJHNjb3BlLmFwcC5pZCArICctY3B1LmdhdWdlLXN5c3RlbSkpJzsgLy8gYXNzdW1lcyAxMDAgamlmZmllcyBwZXIgc2VjIChVU0VSX0haKVxuXG4gICAgICAgIHZhciBtZW1vcnlVc2FnZVRhcmdldCA9ICdjb2xsZWN0ZC5sb2NhbGhvc3QudGFibGUtJyArICRzY29wZS5hcHAuaWQgKyAnLW1lbW9yeS5nYXVnZS1tYXhfdXNhZ2VfaW5fYnl0ZXMnO1xuXG4gICAgICAgIHZhciBkaXNrVXNhZ2VUYXJnZXQgPSAnY29sbGVjdGQubG9jYWxob3N0LmZpbGVjb3VudC0nICsgJHNjb3BlLmFwcC5pZCArICctYXBwZGF0YS5ieXRlcyc7XG5cbiAgICAgICAgdmFyIGFjdGl2ZVRhYiA9ICRzY29wZS5hY3RpdmVUYWI7XG4gICAgICAgIHZhciBmcm9tID0gJy0yNGhvdXJzJztcbiAgICAgICAgc3dpdGNoIChhY3RpdmVUYWIpIHtcbiAgICAgICAgY2FzZSAnZGF5JzogZnJvbSA9ICctMjRob3Vycyc7IGJyZWFrO1xuICAgICAgICBjYXNlICdtb250aCc6IGZyb20gPSAnLTFtb250aCc7IGJyZWFrO1xuICAgICAgICBjYXNlICd5ZWFyJzogZnJvbSA9ICctMXllYXInOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogY29uc29sZS5sb2coJ2ludGVybmFsIGVycnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LmdyYXBocyhbIGNwdVVzYWdlVGFyZ2V0LCBtZW1vcnlVc2FnZVRhcmdldCwgZGlza1VzYWdlVGFyZ2V0IF0sIGZyb20sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICByZW5kZXJDcHUoYWN0aXZlVGFiLCBkYXRhWzBdKTtcblxuICAgICAgICAgICAgcmVuZGVyTWVtb3J5KGFjdGl2ZVRhYiwgZGF0YVsxXSk7XG5cbiAgICAgICAgICAgIHJlbmRlckRpc2soYWN0aXZlVGFiLCBkYXRhWzJdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBDbGllbnQuZ2V0QXBwKCRyb3V0ZVBhcmFtcy5hcHBJZCwgZnVuY3Rpb24gKGVycm9yLCBhcHApIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hcHAgPSBhcHA7XG4gICAgICAgICAgICAkc2NvcGUuYXBwTG9nVXJsID0gQ2xpZW50LmdldEFwcExvZ1VybChhcHAuaWQpO1xuXG4gICAgICAgICAgICBpZiAoQ2xpZW50LmdldENvbmZpZygpLnVwZGF0ZSAmJiBDbGllbnQuZ2V0Q29uZmlnKCkudXBkYXRlLmFwcHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXBwVXBkYXRlcyA9IENsaWVudC5nZXRDb25maWcoKS51cGRhdGUuYXBwcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFwcFVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwcFVwZGF0ZXNbaV0uYXBwSWQgPT09ICRzY29wZS5hcHAuYXBwU3RvcmVJZCAmJiBhcHBVcGRhdGVzW2ldLnZlcnNpb24gIT09ICAkc2NvcGUuYXBwLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVZlcnNpb24gPSBhcHBVcGRhdGVzW2ldLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS51cGRhdGVHcmFwaHMoKTtcblxuICAgICAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcEluc3RhbGxDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCAnQXBwU3RvcmUnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgQ2xpZW50LCBBcHBTdG9yZSwgJHRpbWVvdXQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFwcCA9IG51bGw7XG4gICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLmxvY2F0aW9uID0gJyc7XG4gICAgJHNjb3BlLmFjY2Vzc1Jlc3RyaWN0aW9uID0gJyc7XG4gICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgJHNjb3BlLmVycm9yID0geyB9O1xuICAgICRzY29wZS5kb21haW4gPSAnJztcbiAgICAkc2NvcGUudmVyc2lvbiA9IG51bGw7XG4gICAgJHNjb3BlLnBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAkc2NvcGUuaG9zdFBvcnRNaW4gPSAxMDI1O1xuICAgICRzY29wZS5ob3N0UG9ydE1heCA9IDk5OTk7XG5cbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5kb21haW4gPSBDbGllbnQuZ2V0Q29uZmlnKCkuZnFkbjtcblxuICAgICAgICBBcHBTdG9yZS5nZXRBcHBCeUlkKCRyb3V0ZVBhcmFtcy5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIGFwcCkge1xuICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZXJyb3IgfHwgeyB9O1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm47XG4gICAgICAgICAgICAkc2NvcGUuYXBwID0gYXBwO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUT0RPOiB0aGlzIHNob3VsZCBiZSBiYXNlZCBvbiBib3hWZXJzaW9uXG4gICAgICAgIEFwcFN0b3JlLmdldE1hbmlmZXN0KCRyb3V0ZVBhcmFtcy5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvciB8fCB7IH07XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybjtcbiAgICAgICAgICAgICRzY29wZS52ZXJzaW9uID0gbWFuaWZlc3QudmVyc2lvbjtcbiAgICAgICAgICAgICRzY29wZS5wb3J0QmluZGluZ3MgPSBtYW5pZmVzdC50Y3BQb3J0cztcbiAgICAgICAgICAgICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiA9IG1hbmlmZXN0LmFjY2Vzc1Jlc3RyaWN0aW9uIHx8ICcnO1xuICAgICAgICAgICAgLy8gZGVmYXVsdCBzZXR0aW5nIGlzIHRvIG1hcCBwb3J0cyBhcyB0aGV5IGFyZSBpbiBtYW5pZmVzdFxuICAgICAgICAgICAgZm9yICh2YXIgcG9ydCBpbiAkc2NvcGUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvcnRCaW5kaW5nc1twb3J0XS5ob3N0UG9ydCA9IHBhcnNlSW50KHBvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICRzY29wZS5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAgICAgZm9yICh2YXIgcG9ydCBpbiAkc2NvcGUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbcG9ydF0gPSAkc2NvcGUucG9ydEJpbmRpbmdzW3BvcnRdLmhvc3RQb3J0O1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50Lmluc3RhbGxBcHAoJHJvdXRlUGFyYW1zLmFwcFN0b3JlSWQsICRzY29wZS52ZXJzaW9uLCAkc2NvcGUucGFzc3dvcmQsICRzY29wZS5hcHAudGl0bGUsIHsgbG9jYXRpb246ICRzY29wZS5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiBwb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiAkc2NvcGUuYWNjZXNzUmVzdHJpY3Rpb24gfSwgZnVuY3Rpb24gKGVycm9yLCBhcHBJZCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwOSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9ICdBcHBsaWNhdGlvbiBhbHJlYWR5IGV4aXN0cy4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9ICdBcHAgd2l0aCB0aGUgbmFtZSAnICsgJHNjb3BlLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgaW5zdGFsbGVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnIy9hcHAvJyArIGFwcElkICsgJy9kZXRhaWxzJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgfTtcblxuICAgIC8vIGhhY2sgZm9yIGF1dG9mb2N1cyB3aXRoIGFuZ3VsYXJcbiAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsgJCgnaW5wdXRbYXV0b2ZvY3VzXTp2aXNpYmxlOmZpcnN0JykuZm9jdXMoKTsgfSwgMTAwMCk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBmdW5jdGlvbiAoKSB7XG5cbn0pO1xuIiwiLyogZ2xvYmFsOlJpY2tzaGF3OnRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdHcmFwaHNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5hY3RpdmVUYWIgPSAnZGF5JztcblxuICAgIHZhciBjcHVVc2FnZVRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKCcgK1xuICAgICdzY2FsZShkaXZpZGVTZXJpZXMoJyArXG4gICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1zeXN0ZW0sY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1uaWNlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtdXNlciksJyArXG4gICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1pZGxlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtc3lzdGVtLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtbmljZSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXVzZXIsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS13YWl0KSksIDEwMCksIDApJztcblxuICAgIHZhciBuZXR3b3JrVXNhZ2VUeFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5pbnRlcmZhY2UtZXRoMC5pZl9vY3RldHMudHgsIDApJztcbiAgICB2YXIgbmV0d29ya1VzYWdlUnhUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuaW50ZXJmYWNlLWV0aDAuaWZfb2N0ZXRzLnJ4LCAwKSc7XG5cbiAgICB2YXIgZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuZGYtbG9vcDAuZGZfY29tcGxleC11c2VkLCAwKSc7XG4gICAgdmFyIGRpc2tVc2FnZURhdGFVc2VkVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmRmLWxvb3AxLmRmX2NvbXBsZXgtdXNlZCwgMCknO1xuXG4gICAgZnVuY3Rpb24gcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgY3B1RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRDcHUgPSBbIF07XG5cbiAgICAgICAgaWYgKGNwdURhdGEgJiYgY3B1RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZENwdSA9IGNwdURhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuXG4gICAgICAgIHZhciBjcHVHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdDcHVDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZENwdSxcbiAgICAgICAgICAgICAgICBuYW1lOiAnY3B1J1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdVhBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBjcHVHcmFwaCB9KTtcbiAgICAgICAgdmFyIGNwdVlBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnQ3B1WUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdUhvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBjcHVHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeSkudG9GaXhlZCgyKSArICclPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNwdUdyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlck5ldHdvcmsoYWN0aXZlVGFiLCB0eERhdGEsIHJ4RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRUeCA9IFsgXSwgdHJhbnNmb3JtZWRSeCA9IFsgXTtcblxuICAgICAgICBpZiAodHhEYXRhICYmIHR4RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZFR4ID0gdHhEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcbiAgICAgICAgaWYgKHJ4RGF0YSAmJiByeERhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRSeCA9IHJ4RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdOZXR3b3JrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBzZXJpZXM6IFsge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZFR4LFxuICAgICAgICAgICAgICAgIG5hbWU6ICd0eCdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZFJ4LFxuICAgICAgICAgICAgICAgIG5hbWU6ICdyeCdcbiAgICAgICAgICAgIH0gXVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogbmV0d29ya0dyYXBoIH0pO1xuICAgICAgICB2YXIgbmV0d29ya1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogbmV0d29ya0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ05ldHdvcmtZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbmV0d29ya0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBuZXR3b3JrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvMTAyNCkudG9GaXhlZCgyKSArICdLQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBuZXR3b3JrR3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyRGlzayhhY3RpdmVUYWIsIGFwcHNVc2VkRGF0YSwgZGF0YVVzZWREYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZEFwcHNVc2VkID0gWyBdLCB0cmFuc2Zvcm1lZERhdGFVc2VkID0gWyBdO1xuXG4gICAgICAgIGlmIChhcHBzVXNlZERhdGEgJiYgYXBwc1VzZWREYXRhLmRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQXBwc1VzZWQgPSBhcHBzVXNlZERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9OyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhVXNlZERhdGEgJiYgZGF0YVVzZWREYXRhLmRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkRGF0YVVzZWQgPSBkYXRhVXNlZERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9OyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaXNrR3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnRGlza0NoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAzMCAqIDEwMjQgKiAxMDI0ICogMTAyNCwgLy8gMzBnYlxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZEFwcHNVc2VkLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdhcHBzJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZ3JlZW4nLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkRGF0YVVzZWQsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2RhdGEnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIGRpc2tYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogZGlza0dyYXBoIH0pO1xuICAgICAgICB2YXIgZGlza1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvKDEwMjQgKiAxMDI0ICogMTAyNCkpLnRvRml4ZWQoMikgKyAnR0I8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRpc2tMZWdlbmQgPSBuZXcgUmlja3NoYXcuR3JhcGguTGVnZW5kKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnRGlza0xlZ2VuZCcpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpc2tHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUudXBkYXRlR3JhcGhzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYWN0aXZlVGFiID0gJHNjb3BlLmFjdGl2ZVRhYjtcbiAgICAgICB2YXIgZnJvbSA9ICctMjRob3Vycyc7XG4gICAgICAgIHN3aXRjaCAoYWN0aXZlVGFiKSB7XG4gICAgICAgIGNhc2UgJ2RheSc6IGZyb20gPSAnLTI0aG91cnMnOyBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGgnOiBmcm9tID0gJy0xbW9udGgnOyBicmVhaztcbiAgICAgICAgY2FzZSAneWVhcic6IGZyb20gPSAnLTF5ZWFyJzsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKCdpbnRlcm5hbCBlcnJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5ncmFwaHMoWyBjcHVVc2FnZVRhcmdldCwgbmV0d29ya1VzYWdlVHhUYXJnZXQsIG5ldHdvcmtVc2FnZVJ4VGFyZ2V0LCBkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCwgZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQgXSwgZnJvbSwgZnVuY3Rpb24gKGVycm9yLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgIHJlbmRlckNwdShhY3RpdmVUYWIsIGRhdGFbMF0pO1xuXG4gICAgICAgICAgICByZW5kZXJOZXR3b3JrKGFjdGl2ZVRhYiwgZGF0YVsxXSwgZGF0YVsyXSk7XG5cbiAgICAgICAgICAgIHJlbmRlckRpc2soYWN0aXZlVGFiLCBkYXRhWzNdLCBkYXRhWzRdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vblJlYWR5KCRzY29wZS51cGRhdGVHcmFwaHMpO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdTZWN1cml0eUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCBDbGllbnQpIHtcbiAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IFtdO1xuICAgICRzY29wZS50b2tlbkluVXNlID0gbnVsbDtcblxuICAgICRzY29wZS5yZW1vdmVBY2Nlc3NUb2tlbnMgPSBmdW5jdGlvbiAoY2xpZW50LCBldmVudCkge1xuICAgICAgICBjbGllbnQuX2J1c3kgPSB0cnVlO1xuXG4gICAgICAgIENsaWVudC5kZWxUb2tlbnNCeUNsaWVudElkKGNsaWVudC5pZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIGNsaWVudC5fYnVzeSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldE9BdXRoQ2xpZW50cyhmdW5jdGlvbiAoZXJyb3IsIGFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IGFjdGl2ZUNsaWVudHM7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLnVzZXIgPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9IG51bGw7XG4gICAgJHNjb3BlLmRyaXZlcyA9IFtdO1xuICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUgPSBudWxsO1xuICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGVOYW1lID0gJyc7XG4gICAgJHNjb3BlLmtleUZpbGUgPSBudWxsO1xuICAgICRzY29wZS5rZXlGaWxlTmFtZSA9ICcnO1xuXG4gICAgJHNjb3BlLnNldE5ha2VkRG9tYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXBwaWQgPSAkc2NvcGUubmFrZWREb21haW5BcHAgPyAkc2NvcGUubmFrZWREb21haW5BcHAuaWQgOiAnYWRtaW4nO1xuXG4gICAgICAgIENsaWVudC5zZXROYWtlZERvbWFpbihhcHBpZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIG5ha2VkIGRvbWFpbicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5iYWNrdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgICAgICBDbGllbnQuYmFja3VwKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gbm93IHN0YXJ0IHF1ZXJ5XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0lmRG9uZSgpIHtcbiAgICAgICAgICAgICAgICBDbGllbnQudmVyc2lvbihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVib290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjcmVib290TW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAkKCcjcmVib290UHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LnJlYm9vdChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIG5vdyBzdGFydCBxdWVyeVxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tJZkRvbmUoKSB7XG4gICAgICAgICAgICAgICAgQ2xpZW50LnZlcnNpb24oZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrSWZEb25lLCAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcjcmVib290UHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQod2luZG93LmxvY2F0aW9uLnJlbG9hZC5iaW5kKHdpbmRvdy5sb2NhdGlvbiwgdHJ1ZSksIDEwMDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LnVwZGF0ZShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRDZXJ0aWZpY2F0ZScpLm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGVOYW1lID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRLZXknKS5vbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5rZXlGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgJHNjb3BlLmtleUZpbGVOYW1lID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0Q2VydGlmaWNhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdXaWxsIHNldCB0aGUgY2VydGlmaWNhdGUnKTtcblxuICAgICAgICBpZiAoISRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUpIHJldHVybiBjb25zb2xlLmxvZygnQ2VydGlmaWNhdGUgbm90IHNldCcpO1xuICAgICAgICBpZiAoISRzY29wZS5rZXlGaWxlKSByZXR1cm4gY29uc29sZS5sb2coJ0tleSBub3Qgc2V0Jyk7XG5cbiAgICAgICAgQ2xpZW50LnNldENlcnRpZmljYXRlKCRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUsICRzY29wZS5rZXlGaWxlLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQod2luZG93LmxvY2F0aW9uLnJlbG9hZC5iaW5kKHdpbmRvdy5sb2NhdGlvbiwgdHJ1ZSksIDMwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uQ29uZmlnKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnRva2VuSW5Vc2UgPSBDbGllbnQuX3Rva2VuO1xuXG4gICAgICAgIENsaWVudC5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGFwcCBsaXN0Jyk7XG4gICAgICAgICAgICAkc2NvcGUuYXBwcyA9IGFwcHM7XG5cbiAgICAgICAgICAgIENsaWVudC5nZXROYWtlZERvbWFpbihmdW5jdGlvbiAoZXJyb3IsIGFwcGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmFwcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hcHBzW2ldLmlkID09PSBhcHBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gJHNjb3BlLmFwcHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBDbGllbnQuc3RhdHMoZnVuY3Rpb24gKGVycm9yLCBzdGF0cykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRyaXZlcyA9IHN0YXRzLmRyaXZlcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignVXNlckNyZWF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICAkc2NvcGUudXNlcm5hbWUgPSAnJztcbiAgICAkc2NvcGUuZW1haWwgPSAnJztcbiAgICAkc2NvcGUuYWxyZWFkeVRha2VuID0gJyc7XG5cbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYWxyZWFkeVRha2VuID0gJyc7XG5cbiAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICBDbGllbnQuY3JlYXRlVXNlcigkc2NvcGUudXNlcm5hbWUsICRzY29wZS5lbWFpbCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFscmVhZHlUYWtlbiA9ICRzY29wZS51c2VybmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignVXNlcm5hbWUgYWxyZWFkeSB0YWtlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY3JlYXRlIHVzZXIuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjL3VzZXJsaXN0JztcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICB9O1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdVc2VyTGlzdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG4gICAgJHNjb3BlLnVzZXJzID0gW107XG4gICAgJHNjb3BlLnVzZXJJbmZvID0gQ2xpZW50LmdldFVzZXJJbmZvKCk7XG4gICAgJHNjb3BlLnVzZXJEZWxldGVGb3JtID0ge1xuICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgIHBhc3N3b3JkOiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNNZSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLnVzZXJuYW1lID09PSBDbGllbnQuZ2V0VXNlckluZm8oKS51c2VybmFtZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzQWRtaW4gPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gISF1c2VyLmFkbWluO1xuICAgIH07XG5cbiAgICAkc2NvcGUudG9nZ2xlQWRtaW4gPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICBDbGllbnQuc2V0QWRtaW4odXNlci51c2VybmFtZSwgIXVzZXIuYWRtaW4sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHVzZXIuYWRtaW4gPSAhdXNlci5hZG1pbjtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgLy8gVE9ETyBhZGQgYnVzeSBpbmRpY2F0b3IgYW5kIGJsb2NrIGZvcm1cbiAgICAgICAgaWYgKCRzY29wZS51c2VyRGVsZXRlRm9ybS51c2VybmFtZSAhPT0gdXNlci51c2VybmFtZSkgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VzZXJuYW1lIGRvZXMgbm90IG1hdGNoJyk7XG5cbiAgICAgICAgQ2xpZW50LnJlbW92ZVVzZXIodXNlci51c2VybmFtZSwgJHNjb3BlLnVzZXJEZWxldGVGb3JtLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDEpIHJldHVybiBjb25zb2xlLmVycm9yKCdXcm9uZyBwYXNzd29yZCcpO1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGRlbGV0ZSB1c2VyLicsIGVycm9yKTtcblxuICAgICAgICAgICAgJCgnI3VzZXJEZWxldGVNb2RhbC0nICsgdXNlci51c2VybmFtZSkubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgcmVmcmVzaCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgQ2xpZW50Lmxpc3RVc2VycyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGdldCB1c2VyIGxpc3RpbmcuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUudXNlcnMgPSByZXN1bHQudXNlcnM7XG4gICAgICAgICAgICAkc2NvcGUucmVhZHkgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuYWRkVXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy91c2VyY3JlYXRlJztcbiAgICB9O1xuXG4gICAgcmVmcmVzaCgpO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdVc2VyUGFzc3dvcmRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAkc2NvcGUuY3VycmVudFBhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLm5ld1Bhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLnJlcGVhdFBhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLnZhbGlkYXRpb25DbGFzcyA9IHt9O1xuXG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnZhbGlkYXRpb25DbGFzcy5jdXJyZW50UGFzc3dvcmQgPSAnJztcbiAgICAgICAgJHNjb3BlLnZhbGlkYXRpb25DbGFzcy5uZXdQYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUudmFsaWRhdGlvbkNsYXNzLnJlcGVhdFBhc3N3b3JkID0gJyc7XG5cbiAgICAgICAgaWYgKCRzY29wZS5uZXdQYXNzd29yZCAhPT0gJHNjb3BlLnJlcGVhdFBhc3N3b3JkKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRSZXBlYXRQYXNzd29yZCcpLmZvY3VzKCk7XG4gICAgICAgICAgICAkc2NvcGUudmFsaWRhdGlvbkNsYXNzLnJlcGVhdFBhc3N3b3JkID0gJ2hhcy1lcnJvcic7XG4gICAgICAgICAgICAkc2NvcGUucmVwZWF0UGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBDbGllbnQuY2hhbmdlUGFzc3dvcmQoJHNjb3BlLmN1cnJlbnRQYXNzd29yZCwgJHNjb3BlLm5ld1Bhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRDdXJyZW50UGFzc3dvcmQnKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICRzY29wZS52YWxpZGF0aW9uQ2xhc3MuY3VycmVudFBhc3N3b3JkID0gJ2hhcy1lcnJvcic7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICRzY29wZS5uZXdQYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZXBlYXRQYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjaGFuZ2UgcGFzc3dvcmQuJywgZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0Q3VycmVudFBhc3N3b3JkJykuZm9jdXMoKTtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==