"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/apps"}).when("/users",{controller:"UsersController",templateUrl:"views/users.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/apps",{controller:"AppsController",templateUrl:"views/apps.html"}).when("/dns",{controller:"DnsController",templateUrl:"views/dns.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).otherwise({redirectTo:"/"})}]),app.filter("installationActive",function(){return function(e){return"error"===e?!1:"installed"===e?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){return"error"===e?"Error":"subdomain_error"===e?"Error":"installed"===e?"Running":"downloading_image"===e?"Downloading":"pending_install"===e?"Installing":"pending_restore"===e?"Starting":"pending_configure"===e?"Configuring":"pending_uninstall"===e?"Uninstalling":"creating_container"===e?"Container":"downloading_manifest"===e?"Manifest":"creating_volume"===e?"Volume":"registering_subdomain"===e?"Subdomain":"allocated_oauth_credentials"===e?"OAuth":e}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,n,o,r){o.$set("name",o.laterName);var t=r[0],a=r[1];t&&a&&(t.$name=o.name,a.$addControl(t),e.$on("$destroy",function(){a.$removeControl(t)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,n){function o(e,n){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof n?n:JSON.stringify(n)}function r(e){return function(n,r){return 401===r?a.logout():void e(new o(r,n))}}function t(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:{box:null,apps:null},isDev:!1,progress:{},isCustomDomain:!1},this._installedApps=[],this.setToken(localStorage.token)}var a=null;return t.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},t.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},t.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},t.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+n.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm",this._userInfo.gravatarHuge="https://www.gravatar.com/avatar/"+n.createHash(e.email.toLowerCase())+".jpg?s=128&d=mm"},t.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress,this._config.isCustomDomain=e.isCustomDomain;var n=this;this._configListener.forEach(function(e){e(n._config)})},t.prototype.getInstalledApps=function(){return this._installedApps},t.prototype.getUserInfo=function(){return this._userInfo},t.prototype.getConfig=function(){return this._config},t.prototype.setToken=function(n){e.defaults.headers.common.Authorization="Bearer "+n,n?localStorage.token=n:localStorage.removeItem("token"),this._token=n},t.prototype.config=function(n){e.get("/api/v1/cloudron/config").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.userInfo=function(n){e.get("/api/v1/profile").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.installApp=function(n,t,a,i,s,p){var l=this,u={appStoreId:n,manifest:t,password:a,location:s.location,portBindings:s.portBindings,accessRestriction:s.accessRestriction};e.post("/api/v1/apps/install",u).success(function(e,n){return 202!==n||"object"!=typeof e?p(new o(n,e)):(e.manifest={title:i},l._installedApps.push(e),void p(null,e.id))}).error(r(p))},t.prototype.uninstallApp=function(n,t,a){var i={password:t};e.post("/api/v1/apps/"+n+"/uninstall",i).success(function(e,n){return 202!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.configureApp=function(n,t,a,i){var s={appId:n,password:t,location:a.location,portBindings:a.portBindings,accessRestriction:a.accessRestriction};e.post("/api/v1/apps/"+n+"/configure",s).success(function(e,n){return 202!==n?i(new o(n,e)):void i(null)}).error(r(i))},t.prototype.updateApp=function(n,t,a,i){e.post("/api/v1/apps/"+n+"/update",{manifest:t,password:a}).success(function(e,n){return 202!==n?i(new o(n,e)):void i(null)}).error(r(i))},t.prototype.startApp=function(n,t){var a={};e.post("/api/v1/apps/"+n+"/start",a).success(function(e,n){return 202!==n?t(new o(n,e)):void t(null)}).error(r(t))},t.prototype.stopApp=function(n,t){var a={};e.post("/api/v1/apps/"+n+"/stop",a).success(function(e,n){return 202!==n?t(new o(n,e)):void t(null)}).error(r(t))},t.prototype.version=function(n){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.isServerFirstTime=function(n){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,!e.activated)}).error(r(n))},t.prototype.getNakedDomain=function(n){e.get("/api/v1/settings/naked_domain").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e.appid)}).error(r(n))},t.prototype.setNakedDomain=function(n,t){e.post("/api/v1/settings/naked_domain",{appid:n}).success(function(e,n){return 204!==n?t(new o(n)):void t(null)}).error(r(t))},t.prototype.getApps=function(n){e.get("/api/v1/apps").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e.apps)}).error(r(n))},t.prototype.getApp=function(e,n){var o=null;return this._installedApps.some(function(n){return n.id===e?(o=n,!0):!1}),o?n(null,o):n(new Error("App not found"))},t.prototype.getAppLogStream=function(e){var n=new EventSource("/api/v1/apps/"+e+"/logstream");return n},t.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},t.prototype.setAdmin=function(n,t,a){var i={username:n,admin:t};e.post("/api/v1/users/"+n+"/admin",i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.createAdmin=function(n,t,a,i,s){var p={username:n,password:t,email:a},l=this;e.post("/api/v1/cloudron/activate?setupToken="+i,p).success(function(e,r){return 201!==r||"object"!=typeof e?s(new o(r,e)):(l.setToken(e.token),l.setUserInfo({username:n,email:a,admin:!0}),void s(null,e.activated))}).error(r(s))},t.prototype.listUsers=function(n){e.get("/api/v1/users").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.getOAuthClients=function(n){e.get("/api/v1/oauth/clients").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e.clients)}).error(r(n))},t.prototype.delTokensByClientId=function(n,t){e["delete"]("/api/v1/oauth/clients/"+n+"/tokens").success(function(e,n){return 204!==n?t(new o(n,e)):void t(null)}).error(r(t))},t.prototype.update=function(n,t){e.post("/api/v1/cloudron/update",{password:n}).success(function(e,n){return 202!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(r(t))},t.prototype.reboot=function(n){e.get("/api/v1/cloudron/reboot").success(function(e,r){return 202!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.backup=function(n){e.post("/api/v1/cloudron/backups").success(function(e,r){return 202!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.setCertificate=function(n,t,a){console.log("will set certificate");var i=new FormData;i.append("certificate",n),i.append("key",t),e.post("/api/v1/cloudron/certificate",i,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,n){return 202!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.graphs=function(n,t,a){var i={params:{target:n,format:"json",from:t}};e.get("/api/v1/cloudron/graphs",i).success(function(e,n){return 200!==n||"object"!=typeof e?a(new o(n,e)):void a(null,e)}).error(r(a))},t.prototype.createUser=function(n,t,a){var i={username:n,email:t};e.post("/api/v1/users",i).success(function(e,n){return 201!==n||"object"!=typeof e?a(new o(n,e)):void a(null,e)}).error(r(a))},t.prototype.removeUser=function(n,t,a){var i={username:n,password:t};e({method:"DELETE",url:"/api/v1/users/"+n,data:i,headers:{"Content-Type":"application/json"}}).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.changePassword=function(n,t,a){var i={password:n,newPassword:t};e.post("/api/v1/users/"+this._userInfo.username+"/password",i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null,e)}).error(r(a))},t.prototype.changeEmail=function(n,t,a){var i={password:t,email:n};e.put("/api/v1/users/"+this._userInfo.username,i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null,e)}).error(r(a))},t.prototype.refreshConfig=function(e){var n=this;e="function"==typeof e?e:function(){},this.config(function(o,r){return o?e(o):(n.setConfig(r),void e(null))})},t.prototype.refreshInstalledApps=function(e){var n=this;e="function"==typeof e?e:function(){},this.getApps(function(o,r){if(o)return e(o);r.forEach(function(e){for(var o=!1,r=0;r<n._installedApps.length;++r)if(n._installedApps[r].id===e.id){o=r;break}o!==!1?angular.copy(e,n._installedApps[o]):n._installedApps.push(e)});for(var t=n._installedApps.length-1;t>=0;--t)r.some(function(e){return e.id===n._installedApps[t].id})||n._installedApps.splice(t,1);e(null)})},t.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},t.prototype.exchangeCodeForToken=function(n,t){var a={grant_type:"authorization_code",code:n,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,a).success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e.access_token)}).error(r(t))},a=new t}]),angular.module("Application").service("AppStore",["$http","Client",function(e,n){function o(e,n){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof n?n:JSON.stringify(n)}function r(){this._appsCache={}}return r.prototype.getApps=function(r){if(null===n.getConfig().apiServerOrigin)return r(new o(420,"Enhance Your Calm"));var t=this;e.get(n.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:n.getConfig().version}}).success(function(e,n){return 200!==n?r(new o(n,e)):(e.apps.forEach(function(e){t._appsCache[e.id]||(t._appsCache[e.id]=e)}),r(null,t._appsCache))}).error(function(e,n){return r(new o(n,e))})},r.prototype.getAppById=function(e,n){if(e in this._appsCache)return n(null,this._appsCache[e]);var r=this;this.getApps(function(t){return t?n(t):e in r._appsCache?n(null,r._appsCache[e]):void n(new o(404,"Not found"))})},r.prototype.getManifest=function(r,t){if(null===n.getConfig().apiServerOrigin)return t(new o(420,"Enhance Your Calm"));var a=n.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+r+"/manifest";console.log("Getting the manifest of ",r,a),e.get(a).success(function(e,n){return 200!==n?t(new o(n,e)):t(null,e)}).error(function(e,n){return t(new o(n,e))})},new r}]),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,n,o,r){e.initialized=!1,e.userInfo=r.getUserInfo(),e.config={},e.update={error:{},password:""},e.isActive=function(e){return n.current?0===n.current.$$route.originalPath.indexOf(e):!1},e.logout=function(n){n.stopPropagation(),e.initialized=!1,r.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",n="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+r._clientId+"&redirect_uri="+e+"&scope="+n},e.setup=function(){window.location.href="/error.html?errorCode=1"},e.error=function(e){console.error(e),window.location.href="/error.html"},e.showUpdateModal=function(n){e.update.error.password=null,e.update.password="",n.$setPristine(),n.$setUntouched(),$("#updateModal").modal("show")},e.doUpdate=function(){e.update.error.password=null,r.update(e.update.password,function(n){return n?void(403===n.statusCode?(e.update.error.password="Incorrect password",e.update.password=""):console.error("Unable to update.",n)):void(window.location.href="/update.html")})},e.backup=function(){$("#backupProgressModal").modal("show"),e.initialized=!1,r.backup(function(n){function o(){r.version(function(n){return n?window.setTimeout(o,1e3):($("#backupProgressModal").modal("hide"),void(e.initialized=!0))})}n&&console.error(n),window.setTimeout(o,5e3)})},r.isServerFirstTime(function(n,t){return n?e.error(n):t?e.setup():void(localStorage.token?r.refreshConfig(function(n){return n&&401===n.statusCode?e.login():n?e.error(n):(r.getConfig().progress.update&&(window.location.href="/update.html"),void r.userInfo(function(n,t){return n?e.error(n):(r.setUserInfo(t),void r.refreshInstalledApps(function(n){if(n)return e.error(n);var t=o(r.refreshInstalledApps.bind(r),2e3),a=o(r.refreshConfig.bind(r),5e3);e.$on("$destroy",function(){o.cancel(t),o.cancel(a)}),r.setReady(),e.config=r.getConfig(),e.initialized=!0}))}))}):e.login())}),r.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")}),["updateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,n,o){function r(n){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.password="",e.passwordchange.newPassword="",e.passwordchange.newPasswordRepeat="",n&&(n.$setPristine(),n.$setUntouched())}function t(n){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.email="",e.emailchange.password="",n&&(n.$setPristine(),n.$setUntouched())}e.user=o.getUserInfo(),e.config=o.getConfig(),e.activeClients=[],e.tokenInUse=null,e.passwordchange={busy:!1,error:{},password:"",newPassword:"",newPasswordRepeat:""},e.emailchange={busy:!1,error:{},email:"",password:""},e.doChangePassword=function(n){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.busy=!0,o.changePassword(e.passwordchange.password,e.passwordchange.newPassword,function(o){return o?void(403===o.statusCode?(e.passwordchange.error.password=!0,e.passwordchange.password=""):console.error("Unable to change password.",o)):(e.passwordchange.busy=!1,r(n),void $("#passwordChangeModal").modal("hide"))})},e.doChangeEmail=function(n){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.busy=!0,o.changeEmail(e.emailchange.email,e.emailchange.password,function(o){return o?void(403===o.statusCode?(e.emailchange.error.password=!0,e.emailchange.password=""):console.error("Unable to change email.",o)):(e.emailchange.busy=!1,t(n),void $("#emailChangeModal").modal("hide"))})},e.showChangePassword=function(e){r(e),$("#passwordChangeModal").modal("show")},e.showChangeEmail=function(e){t(e),$("#emailChangeModal").modal("show")},e.removeAccessTokens=function(e,n){o.delTokensByClientId(e.id,function(e){return e?console.error(e):void $(n.target).addClass("disabled")})},o.onReady(function(){e.tokenInUse=o._token,o.getOAuthClients(function(n,o){return n?console.error(n):void(e.activeClients=o)})}),["passwordChangeModal","emailChangeModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppsController",["$scope","$location","Client","AppStore",function(e,n,o,r){e.installedApps=o.getInstalledApps(),e.config=o.getConfig(),e.appconfigure={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.appuninstall={error:{},app:{},password:""},e.appupdate={error:{},app:{},password:""},e.showConfigure=function(n){e.appconfigure.app=n,e.appconfigure.location=n.location,e.appconfigure.portBindings=n.manifest.tcpPorts,e.appconfigure.accessRestriction=n.accessRestriction;for(var o in e.appconfigure.portBindings)e.appconfigure.portBindings[o].hostPort=parseInt(e.appconfigure.app.portBindings[o]);$("#appConfigureModal").modal("show")},e.doConfigure=function(n){e.appconfigure.busy=!0,e.appconfigure.error.name=null,e.appconfigure.error.password=null;var r={};for(var t in e.appconfigure.portBindings)r[t]=e.appconfigure.portBindings[t].hostPort;o.configureApp(e.appconfigure.app.id,e.appconfigure.password,{location:e.appconfigure.location,portBindings:r,accessRestriction:e.appconfigure.accessRestriction},function(o){return o?(403===o.statusCode?(e.appconfigure.error.password="Wrong password provided.",e.appconfigure.password=""):e.appconfigure.error.name="App with the name "+e.appconfigure.app.name+" cannot be configured.",void(e.appconfigure.busy=!1)):(e.appconfigure.busy=!1,e.appconfigure.error={},e.appconfigure.app={},e.appconfigure.location="",e.appconfigure.password="",e.appconfigure.portBindings={},e.appconfigure.accessRestriction="",n.$setPristine(),n.$setUntouched(),void $("#appConfigureModal").modal("hide"))})},e.showUninstall=function(n){e.appuninstall.app=n,e.appuninstall.error.password=null,$("#appUninstallModal").modal("show")},e.doUninstall=function(n){e.appuninstall.error.password=null,o.uninstallApp(e.appuninstall.app.id,e.appuninstall.password,function(o){return o?void(403===o.statusCode?(e.appuninstall.password="",e.appuninstall.error.password=!0):console.error(o)):(e.appuninstall.app={},e.appuninstall.password="",n.$setPristine(),n.$setUntouched(),void $("#appUninstallModal").modal("hide"))})},e.showUpdate=function(n){e.appupdate.app=n,e.appupdate.error.password=null,r.getManifest(n.appStoreId,function(n,o){return n?console.error(n):(e.appupdate.app.manifest=o,void $("#appUpdateModal").modal("show"))})},e.doUpdate=function(n){e.appupdate.error.password=null,o.updateApp(e.appupdate.app.id,e.appupdate.app.manifest,e.appupdate.password,function(o){return o?void(403===o.statusCode?(e.appupdate.password="",e.appupdate.error.password=!0):console.error(o)):(e.appupdate.app={},e.appupdate.password="",n.$setPristine(),n.$setUntouched(),void $("#appUpdateModal").modal("hide"))})},e.cancel=function(){window.history.back()},["appConfigureModal","appUninstallModal","appUpdateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppStoreController",["$scope","$location","$timeout","Client","AppStore",function(e,n,o,r,t){function a(){e.ready=!1,t.getApps(function(n,r){return n?(console.error(n),o(a,1e3)):(e.apps=r,void(e.ready=!0))})}r.onReady(function(){r.getUserInfo().admin||n.path("/")}),e.ready=!1,e.apps=[],e.config=r.getConfig(),e.appinstall={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.showInstall=function(n){t.getManifest(n.id,function(o,r){if(o)return console.error(o);n.manifest=r,e.appinstall.app=n,e.appinstall.location=n.location,e.appinstall.portBindings=r.tcpPorts,e.appinstall.accessRestriction=n.accessRestriction||"";for(var t in e.appinstall.portBindings)e.appinstall.portBindings[t].hostPort=parseInt(t);$("#appInstallModal").modal("show")})},e.doInstall=function(o){e.appinstall.busy=!0,e.appinstall.error.name=null,e.appinstall.error.password=null;var t={};for(var a in e.appinstall.portBindings)t[a]=e.appinstall.portBindings[a].hostPort;r.installApp(e.appinstall.app.id,e.appinstall.app.manifest,e.appinstall.password,e.appinstall.app.title,{location:e.appinstall.location,portBindings:t,accessRestriction:e.appinstall.accessRestriction},function(r){return r?(409===r.statusCode?e.appinstall.error.name="Application already exists.":403===r.statusCode?(e.appinstall.error.password="Wrong password provided.",e.appinstall.password=""):e.appinstall.error.name="App with the name "+e.appinstall.app.name+" cannot be installed.",void(e.appinstall.busy=!1)):(e.appinstall.busy=!1,e.appinstall.error={},e.appinstall.app={},e.appinstall.location="",e.appinstall.password="",e.appinstall.portBindings={},e.appinstall.accessRestriction="",o.$setPristine(),o.$setUntouched(),$("#appInstallModal").modal("hide"),void n.path("/apps"))})},a(),["appInstallModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("DnsController",["$scope","$location","Client",function(e,n,o){o.onReady(function(){o.getUserInfo().admin||n.path("/")}),e.ready=!1,e.user=o.getUserInfo(),e.config=o.getConfig(),e.nakedDomainApp=null,e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var n=e.nakedDomainApp?e.nakedDomainApp.id:"admin";o.setNakedDomain(n,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,o.backup(function(n){function r(){o.version(function(n){return n?window.setTimeout(r,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}n&&console.error(n),window.setTimeout(r,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,o.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(n){e.$apply(function(){e.certificateFile=n.target.files[0],e.certificateFileName=n.target.files[0].name})},document.getElementById("idKey").onchange=function(n){e.$apply(function(){e.keyFile=n.target.files[0],e.keyFileName=n.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void o.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},o.onConfig(function(){e.tokenInUse=o._token,o.getApps(function(n,r){n&&console.error("Error loading app list"),e.apps=r,o.getNakedDomain(function(n,o){if(n)return console.error(n);e.nakedDomainApp=null;for(var r=0;r<e.apps.length;r++)if(e.apps[r].id===o){e.nakedDomainApp=e.apps[r];break}e.ready=!0})})})}]),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,n,o){function r(e,n){var o=[];n&&n.datapoints&&(o=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var r=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:o,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:r}),new Rickshaw.Graph.Axis.Y({graph:r,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:r,formatter:function(e,n,o){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(o).toFixed(2)+"%<br>";return t}})}r.render()}function t(e,n,o){var r=[],t=[];n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(t=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:r,name:"tx"},{color:"green",data:t,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,n,o){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(o/1024).toFixed(2)+"KB<br>";return t}})}a.render()}function a(e,n,o){var r=[],t=[];n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(t=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:r,name:"apps"},{color:"green",data:t,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,n,o){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(o/1073741824).toFixed(2)+"GB<br>";return t}}),new Rickshaw.Graph.Legend({graph:a,element:document.getElementById(e+"DiskLegend")})}a.render()}o.getUserInfo().admin||n.path("/"),e.activeTab="day";var i="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",s="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",p="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",l="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",u="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var n=e.activeTab,c="-24hours";switch(n){case"day":c="-24hours";break;case"month":c="-1month";break;case"year":c="-1year";break;default:console.log("internal errror")}o.graphs([i,s,p,l,u],c,function(e,o){return e?console.log(e):(r(n,o[0]),t(n,o[1],o[2]),void a(n,o[3],o[4]))})},o.onReady(e.updateGraphs)}]),angular.module("Application").controller("UsersController",["$scope","$location","Client",function(e,n,o){function r(){o.listUsers(function(n,o){return n?console.error("Unable to get user listing.",n):(e.users=o.users,void(e.ready=!0))})}o.onReady(function(){o.getUserInfo().admin||n.path("/")}),e.ready=!1,e.users=[],e.userInfo=o.getUserInfo(),e.userremove={busy:!1,error:{},userInfo:{},username:"",password:""},e.useradd={busy:!1,alreadyTaken:!1,error:{},username:"",email:""},e.isMe=function(e){return e.username===o.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){o.setAdmin(e.username,!e.admin,function(n){return n?console.error(n):void(e.admin=!e.admin)})},e.doAdd=function(){e.useradd.alreadyTaken="",e.useradd.error.username=null,e.useradd.error.email=null,o.createUser(e.useradd.username,e.useradd.email,function(n){if(n&&409===n.statusCode)return e.useradd.alreadyTaken=e.username,console.error("Username already taken");if(n&&400===n.statusCode){if(-1!==n.message.indexOf("email"))return e.useradd.error.email="Invalid Email",void(e.useradd.email="");if(-1!==n.message.indexOf("username"))return e.useradd.error.username="Invalid Username",void(e.useradd.username="")}else n&&console.error("Unable to create user.",n),r(),$("#userAddModal").modal("hide")})},e.showUserRemove=function(n){e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.userInfo=n,$("#userRemoveModal").modal("show")},e.doUserRemove=function(n){return e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.username!==e.userremove.userInfo.username?(e.userremove.error.username="Username does not match",void(e.userremove.username="")):void o.removeUser(e.userremove.username,e.userremove.password,function(o){return o&&403===o.statusCode?(e.userremove.error.password="Incorrect password",void(e.userremove.password="")):o?console.error("Unable to delete user.",o):(e.userremove.userInfo={},e.userremove.username="",e.userremove.password="",n.$setPristine(),n.$setUntouched(),$("#userRemoveModal").modal("hide"),void r())})},r(),["userAddModal","userRemoveModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcHMuanMiLCJkbnMuanMiLCJncmFwaHMuanMiLCJ1c2Vycy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwicmVkaXJlY3RUbyIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsImZpbHRlciIsImlucHV0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbSIsImF0dHJzIiwiY3RybHMiLCIkc2V0IiwibGF0ZXJOYW1lIiwibW9kZWxDdHJsIiwiZm9ybUN0cmwiLCIkbmFtZSIsIm5hbWUiLCIkYWRkQ29udHJvbCIsIiRvbiIsIiRyZW1vdmVDb250cm9sIiwic2VydmljZSIsIiRodHRwIiwibWQ1IiwiQ2xpZW50RXJyb3IiLCJzdGF0dXNDb2RlIiwibWVzc2FnZSIsIkVycm9yIiwiY2FsbCIsInRoaXMiLCJjb25zdHJ1Y3RvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWZhdWx0RXJyb3JIYW5kbGVyIiwiY2FsbGJhY2siLCJkYXRhIiwic3RhdHVzIiwiY2xpZW50IiwibG9nb3V0IiwiQ2xpZW50IiwiX3JlYWR5IiwiX2NvbmZpZ0xpc3RlbmVyIiwiX3JlYWR5TGlzdGVuZXIiLCJfdXNlckluZm8iLCJ1c2VybmFtZSIsImVtYWlsIiwiYWRtaW4iLCJfdG9rZW4iLCJfY2xpZW50SWQiLCJfY2xpZW50U2VjcmV0IiwiX2NvbmZpZyIsImFwaVNlcnZlck9yaWdpbiIsIndlYlNlcnZlck9yaWdpbiIsImZxZG4iLCJpcCIsInJldmlzaW9uIiwidXBkYXRlIiwiYm94IiwiYXBwcyIsImlzRGV2IiwicHJvZ3Jlc3MiLCJpc0N1c3RvbURvbWFpbiIsIl9pbnN0YWxsZWRBcHBzIiwic2V0VG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsInByb3RvdHlwZSIsInNldFJlYWR5IiwiZm9yRWFjaCIsIm9uUmVhZHkiLCJwdXNoIiwib25Db25maWciLCJzZXRVc2VySW5mbyIsInVzZXJJbmZvIiwiZ3JhdmF0YXIiLCJjcmVhdGVIYXNoIiwidG9Mb3dlckNhc2UiLCJncmF2YXRhckh1Z2UiLCJzZXRDb25maWciLCJ2ZXJzaW9uIiwidGhhdCIsImdldEluc3RhbGxlZEFwcHMiLCJnZXRVc2VySW5mbyIsImdldENvbmZpZyIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsIkF1dGhvcml6YXRpb24iLCJyZW1vdmVJdGVtIiwiZ2V0Iiwic3VjY2VzcyIsImVycm9yIiwiaW5zdGFsbEFwcCIsImlkIiwibWFuaWZlc3QiLCJwYXNzd29yZCIsInRpdGxlIiwiYXBwU3RvcmVJZCIsImxvY2F0aW9uIiwicG9ydEJpbmRpbmdzIiwiYWNjZXNzUmVzdHJpY3Rpb24iLCJwb3N0IiwidW5pbnN0YWxsQXBwIiwiYXBwSWQiLCJjb25maWd1cmVBcHAiLCJ1cGRhdGVBcHAiLCJzdGFydEFwcCIsInN0b3BBcHAiLCJpc1NlcnZlckZpcnN0VGltZSIsImFjdGl2YXRlZCIsImdldE5ha2VkRG9tYWluIiwiYXBwaWQiLCJzZXROYWtlZERvbWFpbiIsImdldEFwcHMiLCJnZXRBcHAiLCJhcHBGb3VuZCIsInNvbWUiLCJnZXRBcHBMb2dTdHJlYW0iLCJzb3VyY2UiLCJFdmVudFNvdXJjZSIsImdldEFwcExvZ1VybCIsInNldEFkbWluIiwicGF5bG9hZCIsImNyZWF0ZUFkbWluIiwic2V0dXBUb2tlbiIsImxpc3RVc2VycyIsImdldE9BdXRoQ2xpZW50cyIsImNsaWVudHMiLCJkZWxUb2tlbnNCeUNsaWVudElkIiwicmVib290IiwiYmFja3VwIiwic2V0Q2VydGlmaWNhdGUiLCJjZXJ0aWZpY2F0ZUZpbGUiLCJrZXlGaWxlIiwiY29uc29sZSIsImxvZyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJDb250ZW50LVR5cGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJncmFwaHMiLCJ0YXJnZXRzIiwiZnJvbSIsInBhcmFtcyIsInRhcmdldCIsImZvcm1hdCIsImNyZWF0ZVVzZXIiLCJyZW1vdmVVc2VyIiwibWV0aG9kIiwidXJsIiwiY2hhbmdlUGFzc3dvcmQiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImNoYW5nZUVtYWlsIiwicHV0IiwicmVmcmVzaENvbmZpZyIsInJlc3VsdCIsInJlZnJlc2hJbnN0YWxsZWRBcHBzIiwiZm91bmQiLCJpIiwibGVuZ3RoIiwiY29weSIsInNwbGljZSIsIndpbmRvdyIsImhyZWYiLCJleGNoYW5nZUNvZGVGb3JUb2tlbiIsImF1dGhDb2RlIiwiZ3JhbnRfdHlwZSIsImNvZGUiLCJyZWRpcmVjdF91cmkiLCJvcmlnaW4iLCJjbGllbnRfaWQiLCJjbGllbnRfc2VjcmV0IiwiYWNjZXNzX3Rva2VuIiwiQXBwU3RvcmVFcnJvciIsIkFwcFN0b3JlIiwiX2FwcHNDYWNoZSIsImJveFZlcnNpb24iLCJnZXRBcHBCeUlkIiwiZ2V0TWFuaWZlc3QiLCJtYW5pZmVzdFVybCIsIiRzY29wZSIsIiRyb3V0ZSIsIiRpbnRlcnZhbCIsImluaXRpYWxpemVkIiwiaXNBY3RpdmUiLCJjdXJyZW50IiwiJCRyb3V0ZSIsIm9yaWdpbmFsUGF0aCIsImluZGV4T2YiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImxvZ2luIiwiY2FsbGJhY2tVUkwiLCJzZXR1cCIsInNob3dVcGRhdGVNb2RhbCIsImZvcm0iLCIkc2V0UHJpc3RpbmUiLCIkc2V0VW50b3VjaGVkIiwiJCIsIm1vZGFsIiwiZG9VcGRhdGUiLCJjaGVja0lmRG9uZSIsInNldFRpbWVvdXQiLCJpc0ZpcnN0VGltZSIsInJlZnJlc2hBcHBzVGltZXIiLCJiaW5kIiwicmVmcmVzaENvbmZpZ1RpbWVyIiwiY2FuY2VsIiwib24iLCJmaW5kIiwiZm9jdXMiLCIkbG9jYXRpb24iLCJwYXNzd29yZENoYW5nZVJlc2V0IiwicGFzc3dvcmRjaGFuZ2UiLCJuZXdQYXNzd29yZFJlcGVhdCIsImVtYWlsQ2hhbmdlUmVzZXQiLCJlbWFpbGNoYW5nZSIsInVzZXIiLCJhY3RpdmVDbGllbnRzIiwidG9rZW5JblVzZSIsImJ1c3kiLCJkb0NoYW5nZVBhc3N3b3JkIiwiZG9DaGFuZ2VFbWFpbCIsInNob3dDaGFuZ2VQYXNzd29yZCIsInNob3dDaGFuZ2VFbWFpbCIsInJlbW92ZUFjY2Vzc1Rva2VucyIsImFkZENsYXNzIiwiaW5zdGFsbGVkQXBwcyIsImFwcGNvbmZpZ3VyZSIsImFwcHVuaW5zdGFsbCIsImFwcHVwZGF0ZSIsInNob3dDb25maWd1cmUiLCJ0Y3BQb3J0cyIsImNvbnRhaW5lclBvcnQiLCJob3N0UG9ydCIsInBhcnNlSW50IiwiZG9Db25maWd1cmUiLCJzaG93VW5pbnN0YWxsIiwiZG9Vbmluc3RhbGwiLCJzaG93VXBkYXRlIiwiaGlzdG9yeSIsImJhY2siLCIkdGltZW91dCIsInJlZnJlc2giLCJyZWFkeSIsInBhdGgiLCJhcHBpbnN0YWxsIiwic2hvd0luc3RhbGwiLCJwb3J0IiwiZG9JbnN0YWxsIiwibmFrZWREb21haW5BcHAiLCJjZXJ0aWZpY2F0ZUZpbGVOYW1lIiwia2V5RmlsZU5hbWUiLCIkcGFyZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9uY2hhbmdlIiwiJGFwcGx5IiwiZmlsZXMiLCJyZWxvYWQiLCJyZW5kZXJDcHUiLCJhY3RpdmVUYWIiLCJjcHVEYXRhIiwidHJhbnNmb3JtZWRDcHUiLCJkYXRhcG9pbnRzIiwibWFwIiwicG9pbnQiLCJ5IiwieCIsImNwdUdyYXBoIiwiUmlja3NoYXciLCJHcmFwaCIsImVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVuZGVyZXIiLCJ3aWR0aCIsImhlaWdodCIsIm1pbiIsIm1heCIsInNlcmllcyIsImNvbG9yIiwiQXhpcyIsIlRpbWUiLCJncmFwaCIsIlkiLCJvcmllbnRhdGlvbiIsInRpY2tGb3JtYXQiLCJGaXh0dXJlcyIsIk51bWJlciIsImZvcm1hdEtNQlQiLCJIb3ZlckRldGFpbCIsImZvcm1hdHRlciIsInN3YXRjaCIsImNvbnRlbnQiLCJ0b0ZpeGVkIiwicmVuZGVyIiwicmVuZGVyTmV0d29yayIsInR4RGF0YSIsInJ4RGF0YSIsInRyYW5zZm9ybWVkVHgiLCJ0cmFuc2Zvcm1lZFJ4IiwibmV0d29ya0dyYXBoIiwicmVuZGVyRGlzayIsImFwcHNVc2VkRGF0YSIsImRhdGFVc2VkRGF0YSIsInRyYW5zZm9ybWVkQXBwc1VzZWQiLCJ0cmFuc2Zvcm1lZERhdGFVc2VkIiwiZGlza0dyYXBoIiwiTGVnZW5kIiwiY3B1VXNhZ2VUYXJnZXQiLCJuZXR3b3JrVXNhZ2VUeFRhcmdldCIsIm5ldHdvcmtVc2FnZVJ4VGFyZ2V0IiwiZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQiLCJkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCIsInVwZGF0ZUdyYXBocyIsInVzZXJzIiwidXNlcnJlbW92ZSIsInVzZXJhZGQiLCJhbHJlYWR5VGFrZW4iLCJpc01lIiwiaXNBZG1pbiIsInRvZ2dsZUFkbWluIiwiZG9BZGQiLCJzaG93VXNlclJlbW92ZSIsImRvVXNlclJlbW92ZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFLQSxJQUFBQSxLQUFBQyxRQUFBQyxPQUFBLGVBQUEsVUFBQSxZQUFBLGVBR0FGLEtBQUFHLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQSxLQUNBQyxXQUFBLFVBQ0FELEtBQUEsVUFDQUUsV0FBQSxrQkFDQUMsWUFBQSxxQkFDQUgsS0FBQSxhQUNBRSxXQUFBLHFCQUNBQyxZQUFBLHdCQUNBSCxLQUFBLFNBQ0FFLFdBQUEsaUJBQ0FDLFlBQUEsb0JBQ0FILEtBQUEsUUFDQUUsV0FBQSxnQkFDQUMsWUFBQSxtQkFDQUgsS0FBQSxZQUNBRSxXQUFBLG9CQUNBQyxZQUFBLHVCQUNBSCxLQUFBLFdBQ0FFLFdBQUEsbUJBQ0FDLFlBQUEsc0JBQ0FDLFdBQUFILFdBQUEsU0FHQU4sSUFBQVUsT0FBQSxxQkFBQSxXQUNBLE1BQUEsVUFBQUMsR0FD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cmljdCc7XG5cbi8qIGdsb2JhbCBhbmd1bGFyOmZhbHNlICovXG5cbi8vIGNyZWF0ZSBtYWluIGFwcGxpY2F0aW9uIG1vZHVsZVxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAnYW5ndWxhci1tZDUnXSk7XG5cbi8vIHNldHVwIGFsbCBtYWpvciBhcHBsaWNhdGlvbiByb3V0ZXNcbmFwcC5jb25maWcoWyckcm91dGVQcm92aWRlcicsIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLCB7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvYXBwcydcbiAgICB9KS53aGVuKCcvdXNlcnMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJzLmh0bWwnXG4gICAgfSkud2hlbignL2FwcHN0b3JlJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwU3RvcmVDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBzdG9yZS5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHBzJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FwcHMuaHRtbCdcbiAgICB9KS53aGVuKCcvZG5zJywge1xuICAgICAgICBjb250cm9sbGVyOiAnRG5zQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZG5zLmh0bWwnXG4gICAgfSkud2hlbignL2FjY291bnQnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBY2NvdW50Q29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYWNjb3VudC5odG1sJ1xuICAgIH0pLndoZW4oJy9ncmFwaHMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdHcmFwaHNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ncmFwaHMuaHRtbCdcbiAgICB9KS5vdGhlcndpc2UoeyByZWRpcmVjdFRvOiAnLyd9KTtcbn1dKTtcblxuYXBwLmZpbHRlcignaW5zdGFsbGF0aW9uQWN0aXZlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2Vycm9yJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdpbnN0YWxsZWQnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59KTtcblxuYXBwLmZpbHRlcignaW5zdGFsbGF0aW9uU3RhdGVMYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdlcnJvcicpIHJldHVybiAnRXJyb3InO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdzdWJkb21haW5fZXJyb3InKSByZXR1cm4gJ0Vycm9yJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnaW5zdGFsbGVkJykgcmV0dXJuICdSdW5uaW5nJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZG93bmxvYWRpbmdfaW1hZ2UnKSByZXR1cm4gJ0Rvd25sb2FkaW5nJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncGVuZGluZ19pbnN0YWxsJykgcmV0dXJuICdJbnN0YWxsaW5nJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncGVuZGluZ19yZXN0b3JlJykgcmV0dXJuICdTdGFydGluZyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3BlbmRpbmdfY29uZmlndXJlJykgcmV0dXJuICdDb25maWd1cmluZyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3BlbmRpbmdfdW5pbnN0YWxsJykgcmV0dXJuICdVbmluc3RhbGxpbmcnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdjcmVhdGluZ19jb250YWluZXInKSByZXR1cm4gJ0NvbnRhaW5lcic7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2Rvd25sb2FkaW5nX21hbmlmZXN0JykgcmV0dXJuICdNYW5pZmVzdCc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2NyZWF0aW5nX3ZvbHVtZScpIHJldHVybiAnVm9sdW1lJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncmVnaXN0ZXJpbmdfc3ViZG9tYWluJykgcmV0dXJuICdTdWJkb21haW4nO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdhbGxvY2F0ZWRfb2F1dGhfY3JlZGVudGlhbHMnKSByZXR1cm4gJ09BdXRoJztcblxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcbn0pO1xuXG5hcHAuZmlsdGVyKCdhY2Nlc3NSZXN0cmljdGlvbkxhYmVsJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJycpIHJldHVybiAncHVibGljJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncm9sZVVzZXInKSByZXR1cm4gJ3ByaXZhdGUnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyb2xlQWRtaW4nKSByZXR1cm4gJ3ByaXZhdGUgKEFkbWlucyBvbmx5KSc7XG5cbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH07XG59KTtcblxuLy8gY3VzdG9tIGRpcmVjdGl2ZSBmb3IgZHluYW1pYyBuYW1lcyBpbiBmb3Jtc1xuLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjM2MTY1NzgvaXNzdWUtcmVnaXN0ZXJpbmctZm9ybS1jb250cm9sLXdpdGgtaW50ZXJwb2xhdGVkLW5hbWUjYW5zd2VyLTIzNjE3NDAxXG5hcHAuZGlyZWN0aXZlKCdsYXRlck5hbWUnLCBmdW5jdGlvbiAoKSB7ICAgICAgICAgICAgICAgICAgIC8vICgyKVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHJlcXVpcmU6IFsnP25nTW9kZWwnLCAnXj9mb3JtJ10sICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgZWxlbSwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICAgICAgICBhdHRycy4kc2V0KCduYW1lJywgYXR0cnMubGF0ZXJOYW1lKTtcblxuICAgICAgICAgICAgdmFyIG1vZGVsQ3RybCA9IGN0cmxzWzBdOyAgICAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgICAgIHZhciBmb3JtQ3RybCAgPSBjdHJsc1sxXTsgICAgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgICAgICBpZiAobW9kZWxDdHJsICYmIGZvcm1DdHJsKSB7XG4gICAgICAgICAgICAgICAgbW9kZWxDdHJsLiRuYW1lID0gYXR0cnMubmFtZTsgICAgICAgICAgICAgIC8vICg0KVxuICAgICAgICAgICAgICAgIGZvcm1DdHJsLiRhZGRDb250cm9sKG1vZGVsQ3RybCk7ICAgICAgICAgICAvLyAoMilcbiAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtQ3RybC4kcmVtb3ZlQ29udHJvbChtb2RlbEN0cmwpOyAgICAvLyAoNSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbi8qIGdsb2JhbCBhbmd1bGFyICovXG4vKiBnbG9iYWwgRXZlbnRTb3VyY2UgKi9cblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuc2VydmljZSgnQ2xpZW50JywgWyckaHR0cCcsICdtZDUnLCBmdW5jdGlvbiAoJGh0dHAsIG1kNSkge1xuICAgIHZhciBjbGllbnQgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gQ2xpZW50RXJyb3Ioc3RhdHVzQ29kZSwgbWVzc2FnZSkge1xuICAgICAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSByZXR1cm4gY2xpZW50LmxvZ291dCgpO1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIENsaWVudCgpIHtcbiAgICAgICAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIgPSBbXTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lciA9IFtdO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBudWxsLFxuICAgICAgICAgICAgZW1haWw6IG51bGwsXG4gICAgICAgICAgICBhZG1pbjogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fdG9rZW4gPSBudWxsO1xuICAgICAgICB0aGlzLl9jbGllbnRJZCA9ICdjaWQtd2ViYWRtaW4nO1xuICAgICAgICB0aGlzLl9jbGllbnRTZWNyZXQgPSAndW51c2VkJztcbiAgICAgICAgdGhpcy5fY29uZmlnID0ge1xuICAgICAgICAgICAgYXBpU2VydmVyT3JpZ2luOiBudWxsLFxuICAgICAgICAgICAgd2ViU2VydmVyT3JpZ2luOiBudWxsLFxuICAgICAgICAgICAgZnFkbjogbnVsbCxcbiAgICAgICAgICAgIGlwOiBudWxsLFxuICAgICAgICAgICAgcmV2aXNpb246IG51bGwsXG4gICAgICAgICAgICB1cGRhdGU6IHsgYm94OiBudWxsLCBhcHBzOiBudWxsIH0sXG4gICAgICAgICAgICBpc0RldjogZmFsc2UsXG4gICAgICAgICAgICBwcm9ncmVzczoge30sXG4gICAgICAgICAgICBpc0N1c3RvbURvbWFpbjogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5faW5zdGFsbGVkQXBwcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuc2V0VG9rZW4obG9jYWxTdG9yYWdlLnRva2VuKTtcbiAgICB9XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fcmVhZHkpIHJldHVybjtcblxuICAgICAgICB0aGlzLl9yZWFkeSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlYWR5KSBjYWxsYmFjaygpO1xuICAgICAgICB0aGlzLl9yZWFkeUxpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLm9uQ29uZmlnID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xuICAgICAgICBjYWxsYmFjayh0aGlzLl9jb25maWcpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFVzZXJJbmZvID0gZnVuY3Rpb24gKHVzZXJJbmZvKSB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGtlZXAgdGhlIGFuZ3VsYXIgYmluZGluZ3MgYWxpdmUsIHNldCBlYWNoIHByb3BlcnR5IGluZGl2aWR1YWxseVxuICAgICAgICB0aGlzLl91c2VySW5mby51c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lO1xuICAgICAgICB0aGlzLl91c2VySW5mby5lbWFpbCA9IHVzZXJJbmZvLmVtYWlsO1xuICAgICAgICB0aGlzLl91c2VySW5mby5hZG1pbiA9ICEhdXNlckluZm8uYWRtaW47XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmdyYXZhdGFyID0gJ2h0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvJyArIG1kNS5jcmVhdGVIYXNoKHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkpICsgJy5qcGc/cz0yNCZkPW1tJztcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZ3JhdmF0YXJIdWdlID0gJ2h0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvJyArIG1kNS5jcmVhdGVIYXNoKHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkpICsgJy5qcGc/cz0xMjgmZD1tbSc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBrZWVwIHRoZSBhbmd1bGFyIGJpbmRpbmdzIGFsaXZlLCBzZXQgZWFjaCBwcm9wZXJ0eSBpbmRpdmlkdWFsbHkgKFRPRE86IGp1c3QgdXNlIGFuZ3VsYXIuY29weSA/KVxuICAgICAgICB0aGlzLl9jb25maWcuYXBpU2VydmVyT3JpZ2luID0gY29uZmlnLmFwaVNlcnZlck9yaWdpbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLndlYlNlcnZlck9yaWdpbiA9IGNvbmZpZy53ZWJTZXJ2ZXJPcmlnaW47XG4gICAgICAgIHRoaXMuX2NvbmZpZy52ZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG4gICAgICAgIHRoaXMuX2NvbmZpZy5mcWRuID0gY29uZmlnLmZxZG47XG4gICAgICAgIHRoaXMuX2NvbmZpZy5pcCA9IGNvbmZpZy5pcDtcbiAgICAgICAgdGhpcy5fY29uZmlnLnJldmlzaW9uID0gY29uZmlnLnJldmlzaW9uO1xuICAgICAgICB0aGlzLl9jb25maWcudXBkYXRlID0gY29uZmlnLnVwZGF0ZTtcbiAgICAgICAgdGhpcy5fY29uZmlnLmlzRGV2ID0gY29uZmlnLmlzRGV2O1xuICAgICAgICB0aGlzLl9jb25maWcucHJvZ3Jlc3MgPSBjb25maWcucHJvZ3Jlc3M7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5pc0N1c3RvbURvbWFpbiA9IGNvbmZpZy5pc0N1c3RvbURvbWFpbjtcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoYXQuX2NvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEluc3RhbGxlZEFwcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YWxsZWRBcHBzO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyB0b2tlbjtcbiAgICAgICAgaWYgKCF0b2tlbikgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIGVsc2UgbG9jYWxTdG9yYWdlLnRva2VuID0gdG9rZW47XG4gICAgICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XG4gICAgfTtcblxuICAgIC8qXG4gICAgICogUmVzdCBBUEkgd3JhcHBlcnNcbiAgICAgKi9cbiAgICBDbGllbnQucHJvdG90eXBlLmNvbmZpZyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vY29uZmlnJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVzZXJJbmZvID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9wcm9maWxlJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoaWQsIG1hbmlmZXN0LCBwYXNzd29yZCwgdGl0bGUsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwU3RvcmVJZDogaWQsIG1hbmlmZXN0OiBtYW5pZmVzdCwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzL2luc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIHB1dCBuZXcgYXBwIHdpdGggYW1lbmRlZCB0aXRsZSBpbiBjYWNoZVxuICAgICAgICAgICAgZGF0YS5tYW5pZmVzdCA9IHsgdGl0bGU6IHRpdGxlIH07XG4gICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnB1c2goZGF0YSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGFwcElkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IHBhc3N3b3JkOiBwYXNzd29yZCB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGFwcElkICsgJy91bmluc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKGlkLCBwYXNzd29yZCwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwSWQ6IGlkLCBwYXNzd29yZDogcGFzc3dvcmQsIGxvY2F0aW9uOiBjb25maWcubG9jYXRpb24sIHBvcnRCaW5kaW5nczogY29uZmlnLnBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246IGNvbmZpZy5hY2Nlc3NSZXN0cmljdGlvbiB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9jb25maWd1cmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKGlkLCBtYW5pZmVzdCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3VwZGF0ZScsIHsgbWFuaWZlc3Q6IG1hbmlmZXN0LCBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKGlkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvc3RhcnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RvcEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0b3AnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudmVyc2lvbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmlzU2VydmVyRmlyc3RUaW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9zdGF0dXMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICFkYXRhLmFjdGl2YXRlZCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYXBwaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoYXBwaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJywgeyBhcHBpZDogYXBwaWQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2FwcHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwID0gZnVuY3Rpb24gKGFwcElkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXBwRm91bmQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzLnNvbWUoZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgaWYgKGFwcC5pZCA9PT0gYXBwSWQpIHtcbiAgICAgICAgICAgICAgICBhcHBGb3VuZCA9IGFwcDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYXBwRm91bmQpIHJldHVybiBjYWxsYmFjayhudWxsLCBhcHBGb3VuZCk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignQXBwIG5vdCBmb3VuZCcpKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBMb2dTdHJlYW0gPSBmdW5jdGlvbiAoYXBwSWQpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9nc3RyZWFtJyk7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nVXJsID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHJldHVybiAnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9ncz9hY2Nlc3NfdG9rZW49JyArIHRoaXMuX3Rva2VuO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldEFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBhZG1pbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBhZG1pbjogYWRtaW5cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzLycgKyB1c2VybmFtZSArICcvYWRtaW4nLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlQWRtaW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgc2V0dXBUb2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9hY3RpdmF0ZT9zZXR1cFRva2VuPScgKyBzZXR1cFRva2VuLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgICAgICAgIHRoYXQuc2V0VXNlckluZm8oeyB1c2VybmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCwgYWRtaW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWN0aXZhdGVkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxpc3RVc2VycyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvdXNlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0T0F1dGhDbGllbnRzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9vYXV0aC9jbGllbnRzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmNsaWVudHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZGVsVG9rZW5zQnlDbGllbnRJZCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvYXBpL3YxL29hdXRoL2NsaWVudHMvJyArIGlkICsgJy90b2tlbnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vdXBkYXRlJywgeyBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlYm9vdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vcmVib290Jykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmJhY2t1cCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2Nsb3Vkcm9uL2JhY2t1cHMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0Q2VydGlmaWNhdGUgPSBmdW5jdGlvbiAoY2VydGlmaWNhdGVGaWxlLCBrZXlGaWxlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zb2xlLmxvZygnd2lsbCBzZXQgY2VydGlmaWNhdGUnKTtcblxuICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZmQuYXBwZW5kKCdjZXJ0aWZpY2F0ZScsIGNlcnRpZmljYXRlRmlsZSk7XG4gICAgICAgIGZkLmFwcGVuZCgna2V5Jywga2V5RmlsZSk7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9jZXJ0aWZpY2F0ZScsIGZkLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ3JhcGhzID0gZnVuY3Rpb24gKHRhcmdldHMsIGZyb20sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldHMsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAgICAgICAgZnJvbTogZnJvbVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9ncmFwaHMnLCBjb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlVXNlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgZW1haWwsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2VycycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZW1vdmVVc2VyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cCh7IG1ldGhvZDogJ0RFTEVURScsIHVybDogJy9hcGkvdjEvdXNlcnMvJyArIHVzZXJuYW1lLCBkYXRhOiBkYXRhLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfX0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKGN1cnJlbnRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgcGFzc3dvcmQ6IGN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiBuZXdQYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvdXNlcnMvJyArIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lICsgJy9wYXNzd29yZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNoYW5nZUVtYWlsID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wdXQoJy9hcGkvdjEvdXNlcnMvJyArIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZWZyZXNoQ29uZmlnID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5jb25maWcoZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRDb25maWcocmVzdWx0KTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZWZyZXNoSW5zdGFsbGVkQXBwcyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgY2FsbGJhY2sgPSB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicgPyBjYWxsYmFjayA6IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgIHRoaXMuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gaW5zZXJ0IG9yIHVwZGF0ZSBuZXcgYXBwc1xuICAgICAgICAgICAgYXBwcy5mb3JFYWNoKGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhhdC5faW5zdGFsbGVkQXBwcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5faW5zdGFsbGVkQXBwc1tpXS5pZCA9PT0gYXBwLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGFwcCwgdGhhdC5faW5zdGFsbGVkQXBwc1tmb3VuZF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2luc3RhbGxlZEFwcHMucHVzaChhcHApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IG9sZCBlbnRyaWVzLCBnb2luZyBiYWNrd2FyZHMgdG8gYWxsb3cgc3BsaWNpbmdcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IHRoYXQuX2luc3RhbGxlZEFwcHMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFwcHMuc29tZShmdW5jdGlvbiAoZWxlbSkgeyByZXR1cm4gKGVsZW0uaWQgPT09IHRoYXQuX2luc3RhbGxlZEFwcHNbaV0uaWQpOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRUb2tlbihudWxsKTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB7fTtcblxuICAgICAgICAvLyBsb2dvdXQgZnJvbSBPQXV0aCBzZXNzaW9uXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hcGkvdjEvc2Vzc2lvbi9sb2dvdXQnO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmV4Y2hhbmdlQ29kZUZvclRva2VuID0gZnVuY3Rpb24gKGF1dGhDb2RlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIGdyYW50X3R5cGU6ICdhdXRob3JpemF0aW9uX2NvZGUnLFxuICAgICAgICAgICAgY29kZTogYXV0aENvZGUsXG4gICAgICAgICAgICByZWRpcmVjdF91cmk6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgICAgICBjbGllbnRfaWQ6IHRoaXMuX2NsaWVudElkLFxuICAgICAgICAgICAgY2xpZW50X3NlY3JldDogdGhpcy5fY2xpZW50U2VjcmV0XG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9vYXV0aC90b2tlbj9yZXNwb25zZV90eXBlPXRva2VuJmNsaWVudF9pZD0nICsgdGhpcy5fY2xpZW50SWQsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFjY2Vzc190b2tlbik7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgY2xpZW50ID0gbmV3IENsaWVudCgpO1xuICAgIHJldHVybiBjbGllbnQ7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcFN0b3JlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckdGltZW91dCcsICdDbGllbnQnLCAnQXBwU3RvcmUnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sICR0aW1lb3V0LCBDbGllbnQsIEFwcFN0b3JlKSB7XG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkgeyBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpOyB9KTtcblxuICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuICAgICRzY29wZS5hcHBzID0gW107XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5hcHBpbnN0YWxsID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBsb2NhdGlvbjogJycsXG4gICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgcG9ydEJpbmRpbmdzOiB7fSxcbiAgICAgICAgYWNjZXNzUmVzdHJpY3Rpb246ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5zaG93SW5zdGFsbCA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgQXBwU3RvcmUuZ2V0TWFuaWZlc3QoYXBwLmlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gYWRkIG1hbmlmZXN0IHRvIGFwcCBvYmplY3RcbiAgICAgICAgICAgIGFwcC5tYW5pZmVzdCA9IG1hbmlmZXN0O1xuXG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hcHAgPSBhcHA7XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5sb2NhdGlvbiA9IGFwcC5sb2NhdGlvbjtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5ncyA9IG1hbmlmZXN0LnRjcFBvcnRzO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYWNjZXNzUmVzdHJpY3Rpb24gPSBhcHAuYWNjZXNzUmVzdHJpY3Rpb24gfHwgJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBwb3J0IGluICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5nc1twb3J0XS5ob3N0UG9ydCA9IHBhcnNlSW50KHBvcnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCcjYXBwSW5zdGFsbE1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb0luc3RhbGwgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5idXN5ID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IubmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICB2YXIgcG9ydEJpbmRpbmdzID0geyB9O1xuICAgICAgICBmb3IgKHZhciBjb250YWluZXJQb3J0IGluICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgcG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdID0gJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdLmhvc3RQb3J0O1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50Lmluc3RhbGxBcHAoJHNjb3BlLmFwcGluc3RhbGwuYXBwLmlkLCAkc2NvcGUuYXBwaW5zdGFsbC5hcHAubWFuaWZlc3QsICRzY29wZS5hcHBpbnN0YWxsLnBhc3N3b3JkLCAkc2NvcGUuYXBwaW5zdGFsbC5hcHAudGl0bGUsIHsgbG9jYXRpb246ICRzY29wZS5hcHBpbnN0YWxsLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IHBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246ICRzY29wZS5hcHBpbnN0YWxsLmFjY2Vzc1Jlc3RyaWN0aW9uIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwOSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5uYW1lID0gJ0FwcGxpY2F0aW9uIGFscmVhZHkgZXhpc3RzLic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IucGFzc3dvcmQgPSAnV3JvbmcgcGFzc3dvcmQgcHJvdmlkZWQuJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwaW5zdGFsbC5hcHAubmFtZSArICcgY2Fubm90IGJlIGluc3RhbGxlZC4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yID0ge307XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hcHAgPSB7fTtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmxvY2F0aW9uID0gJyc7XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzID0ge307XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hY2Nlc3NSZXN0cmljdGlvbiA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyNhcHBJbnN0YWxsTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2FwcHMnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuXG4gICAgICAgIEFwcFN0b3JlLmdldEFwcHMoZnVuY3Rpb24gKGVycm9yLCBhcHBzKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHRpbWVvdXQocmVmcmVzaCwgMTAwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hcHBzID0gYXBwcztcbiAgICAgICAgICAgICRzY29wZS5yZWFkeSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlZnJlc2goKTtcblxuICAgIC8vIHNldHVwIGFsbCB0aGUgZGlhbG9nIGZvY3VzIGhhbmRsaW5nXG4gICAgWydhcHBJbnN0YWxsTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckcm91dGUnLCAnJGludGVydmFsJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZSwgJGludGVydmFsLCBDbGllbnQpIHtcbiAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlckluZm8gPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUuY29uZmlnID0ge307XG5cbiAgICAkc2NvcGUudXBkYXRlID0ge1xuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIHBhc3N3b3JkOiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIGlmICghJHJvdXRlLmN1cnJlbnQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50LiQkcm91dGUub3JpZ2luYWxQYXRoLmluZGV4T2YodXJsKSA9PT0gMDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIENsaWVudC5sb2dvdXQoKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FsbGJhY2tVUkwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9sb2dpbl9jYWxsYmFjay5odG1sJztcbiAgICAgICAgdmFyIHNjb3BlID0gJ3Jvb3QscHJvZmlsZSxhcHBzLHJvbGVBZG1pbic7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hcGkvdjEvb2F1dGgvZGlhbG9nL2F1dGhvcml6ZT9yZXNwb25zZV90eXBlPWNvZGUmY2xpZW50X2lkPScgKyBDbGllbnQuX2NsaWVudElkICsgJyZyZWRpcmVjdF91cmk9JyArIGNhbGxiYWNrVVJMICsgJyZzY29wZT0nICsgc2NvcGU7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXR1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Vycm9yLmh0bWw/ZXJyb3JDb2RlPTEnO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9lcnJvci5odG1sJztcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVcGRhdGVNb2RhbCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUudXBkYXRlLnBhc3N3b3JkID0gJyc7XG5cbiAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgJCgnI3VwZGF0ZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudXBkYXRlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBDbGllbnQudXBkYXRlKCRzY29wZS51cGRhdGUucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlLmVycm9yLnBhc3N3b3JkID0gJ0luY29ycmVjdCBwYXNzd29yZCc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gdXBkYXRlLicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuXG4gICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC5iYWNrdXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBUT0RPIHRoaXMgZG9lcyBsb29rIGxpa2Ugd2Ugc2hvdWxkIHVzZSBwcm9ncmVzcy5qc29uP1xuICAgICAgICAgICAgLy8gbm93IHN0YXJ0IHF1ZXJ5XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0lmRG9uZSgpIHtcbiAgICAgICAgICAgICAgICBDbGllbnQudmVyc2lvbihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDUwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LmlzU2VydmVyRmlyc3RUaW1lKGZ1bmN0aW9uIChlcnJvciwgaXNGaXJzdFRpbWUpIHtcbiAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKGlzRmlyc3RUaW1lKSByZXR1cm4gJHNjb3BlLnNldHVwKCk7XG5cbiAgICAgICAgLy8gd2UgdXNlIHRoZSBjb25maWcgcmVxdWVzdCBhcyBhbiBpbmRpY2F0b3IgaWYgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkXG4gICAgICAgIC8vIFRPRE8gd2Ugc2hvdWxkIHByb2JhYmx5IGF0dGFjaCBzdWNoIGEgaGFuZGxlciBmb3IgZWFjaCByZXF1ZXN0LCBhcyB0aGUgdG9rZW4gY2FuIGdldCBpbnZhbGlkXG4gICAgICAgIC8vIGF0IGFueSB0aW1lIVxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnRva2VuKSB7XG4gICAgICAgICAgICBDbGllbnQucmVmcmVzaENvbmZpZyhmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAxKSByZXR1cm4gJHNjb3BlLmxvZ2luKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZSBhY3R1YWxseSB1cGRhdGVpbmdcbiAgICAgICAgICAgICAgICBpZiAoQ2xpZW50LmdldENvbmZpZygpLnByb2dyZXNzLnVwZGF0ZSkgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcblxuICAgICAgICAgICAgICAgIENsaWVudC51c2VySW5mbyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgICAgIENsaWVudC5zZXRVc2VySW5mbyhyZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIENsaWVudC5yZWZyZXNoSW5zdGFsbGVkQXBwcyhmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtpY2sgb2ZmIGluc3RhbGxlZCBhcHBzIGFuZCBjb25maWcgcG9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZnJlc2hBcHBzVGltZXIgPSAkaW50ZXJ2YWwoQ2xpZW50LnJlZnJlc2hJbnN0YWxsZWRBcHBzLmJpbmQoQ2xpZW50KSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaENvbmZpZ1RpbWVyID0gJGludGVydmFsKENsaWVudC5yZWZyZXNoQ29uZmlnLmJpbmQoQ2xpZW50KSwgNTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocmVmcmVzaEFwcHNUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChyZWZyZXNoQ29uZmlnVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdyBtYXJrIHRoZSBDbGllbnQgdG8gYmUgcmVhZHlcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudC5zZXRSZWFkeSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHdhaXQgdGlsbCB0aGUgdmlldyBoYXMgbG9hZGVkIHVudGlsIHNob3dpbmcgYSBtb2RhbCBkaWFsb2dcbiAgICBDbGllbnQub25Db25maWcoZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBpZiAoY29uZmlnLnByb2dyZXNzLnVwZGF0ZSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ3VwZGF0ZU1vZGFsJ10uZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgJCgnIycgKyBpZCkub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiW2F1dG9mb2N1c106Zmlyc3RcIikuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FjY291bnRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgJHNjb3BlLnVzZXIgPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuXG4gICAgJHNjb3BlLmFjdGl2ZUNsaWVudHMgPSBbXTtcbiAgICAkc2NvcGUudG9rZW5JblVzZSA9IG51bGw7XG5cbiAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgbmV3UGFzc3dvcmQ6ICcnLFxuICAgICAgICBuZXdQYXNzd29yZFJlcGVhdDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmVtYWlsY2hhbmdlID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBlbWFpbDogJycsXG4gICAgICAgIHBhc3N3b3JkOiAnJ1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwYXNzd29yZENoYW5nZVJlc2V0IChmb3JtKSB7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZFJlcGVhdCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UubmV3UGFzc3dvcmQgPSAnJztcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLm5ld1Bhc3N3b3JkUmVwZWF0ID0gJyc7XG5cbiAgICAgICAgaWYgKGZvcm0pIHtcbiAgICAgICAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVtYWlsQ2hhbmdlUmVzZXQgKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmVycm9yLmVtYWlsID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmVtYWlsID0gJyc7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgIGlmIChmb3JtKSB7XG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuZG9DaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZFJlcGVhdCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5idXN5ID0gdHJ1ZTtcblxuICAgICAgICBDbGllbnQuY2hhbmdlUGFzc3dvcmQoJHNjb3BlLnBhc3N3b3JkY2hhbmdlLnBhc3N3b3JkLCAkc2NvcGUucGFzc3dvcmRjaGFuZ2UubmV3UGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY2hhbmdlIHBhc3N3b3JkLicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgcGFzc3dvcmRDaGFuZ2VSZXNldChmb3JtKTtcblxuICAgICAgICAgICAgJCgnI3Bhc3N3b3JkQ2hhbmdlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvQ2hhbmdlRW1haWwgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IuZW1haWwgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuYnVzeSA9IHRydWU7XG5cbiAgICAgICAgQ2xpZW50LmNoYW5nZUVtYWlsKCRzY29wZS5lbWFpbGNoYW5nZS5lbWFpbCwgJHNjb3BlLmVtYWlsY2hhbmdlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNoYW5nZSBlbWFpbC4nLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgIGVtYWlsQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgICAgICQoJyNlbWFpbENoYW5nZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93Q2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICBwYXNzd29yZENoYW5nZVJlc2V0KGZvcm0pO1xuXG4gICAgICAgICQoJyNwYXNzd29yZENoYW5nZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dDaGFuZ2VFbWFpbCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgIGVtYWlsQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgJCgnI2VtYWlsQ2hhbmdlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVtb3ZlQWNjZXNzVG9rZW5zID0gZnVuY3Rpb24gKGNsaWVudCwgZXZlbnQpIHtcbiAgICAgICAgQ2xpZW50LmRlbFRva2Vuc0J5Q2xpZW50SWQoY2xpZW50LmlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldE9BdXRoQ2xpZW50cyhmdW5jdGlvbiAoZXJyb3IsIGFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IGFjdGl2ZUNsaWVudHM7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ3Bhc3N3b3JkQ2hhbmdlTW9kYWwnLCAnZW1haWxDaGFuZ2VNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdBcHBzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCAnQXBwU3RvcmUnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCwgQXBwU3RvcmUpIHtcbiAgICAkc2NvcGUuaW5zdGFsbGVkQXBwcyA9IENsaWVudC5nZXRJbnN0YWxsZWRBcHBzKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5hcHBjb25maWd1cmUgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGFwcDoge30sXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBwb3J0QmluZGluZ3M6IHt9LFxuICAgICAgICBhY2Nlc3NSZXN0cmljdGlvbjogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVuaW5zdGFsbCA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVwZGF0ZSA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dDb25maWd1cmUgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYXBwID0gYXBwO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmxvY2F0aW9uID0gYXBwLmxvY2F0aW9uO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBvcnRCaW5kaW5ncyA9IGFwcC5tYW5pZmVzdC50Y3BQb3J0cztcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5hY2Nlc3NSZXN0cmljdGlvbiA9IGFwcC5hY2Nlc3NSZXN0cmljdGlvbjtcblxuICAgICAgICBmb3IgKHZhciBjb250YWluZXJQb3J0IGluICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XS5ob3N0UG9ydCA9IHBhcnNlSW50KCRzY29wZS5hcHBjb25maWd1cmUuYXBwLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XSk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcjYXBwQ29uZmlndXJlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9Db25maWd1cmUgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmJ1c3kgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICB2YXIgcG9ydEJpbmRpbmdzID0geyB9O1xuICAgICAgICBmb3IgKHZhciBjb250YWluZXJQb3J0IGluICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0gPSAkc2NvcGUuYXBwY29uZmlndXJlLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XS5ob3N0UG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5jb25maWd1cmVBcHAoJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAuaWQsICRzY29wZS5hcHBjb25maWd1cmUucGFzc3dvcmQsIHsgbG9jYXRpb246ICRzY29wZS5hcHBjb25maWd1cmUubG9jYXRpb24sIHBvcnRCaW5kaW5nczogcG9ydEJpbmRpbmdzLCBhY2Nlc3NSZXN0cmljdGlvbjogJHNjb3BlLmFwcGNvbmZpZ3VyZS5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwY29uZmlndXJlLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgY29uZmlndXJlZC4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yID0ge307XG4gICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYWNjZXNzUmVzdHJpY3Rpb24gPSAnJztcblxuICAgICAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXG4gICAgICAgICAgICAkKCcjYXBwQ29uZmlndXJlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVbmluc3RhbGwgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuYXBwID0gYXBwO1xuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICAkKCcjYXBwVW5pbnN0YWxsTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9Vbmluc3RhbGwgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBDbGllbnQudW5pbnN0YWxsQXBwKCRzY29wZS5hcHB1bmluc3RhbGwuYXBwLmlkLCAkc2NvcGUuYXBwdW5pbnN0YWxsLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyNhcHBVbmluc3RhbGxNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZSA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5hcHAgPSBhcHA7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIEFwcFN0b3JlLmdldE1hbmlmZXN0KGFwcC5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5hcHAubWFuaWZlc3QgPSBtYW5pZmVzdDtcblxuICAgICAgICAgICAgJCgnI2FwcFVwZGF0ZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1VwZGF0ZSA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51cGRhdGVBcHAoJHNjb3BlLmFwcHVwZGF0ZS5hcHAuaWQsICRzY29wZS5hcHB1cGRhdGUuYXBwLm1hbmlmZXN0LCAkc2NvcGUuYXBwdXBkYXRlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyNhcHBVcGRhdGVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgfTtcblxuICAgIC8vIHNldHVwIGFsbCB0aGUgZGlhbG9nIGZvY3VzIGhhbmRsaW5nXG4gICAgWydhcHBDb25maWd1cmVNb2RhbCcsICdhcHBVbmluc3RhbGxNb2RhbCcsICdhcHBVcGRhdGVNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdEbnNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkgeyBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpOyB9KTtcblxuICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuICAgICRzY29wZS51c2VyID0gQ2xpZW50LmdldFVzZXJJbmZvKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcbiAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSBudWxsO1xuICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUgPSBudWxsO1xuICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGVOYW1lID0gJyc7XG4gICAgJHNjb3BlLmtleUZpbGUgPSBudWxsO1xuICAgICRzY29wZS5rZXlGaWxlTmFtZSA9ICcnO1xuXG4gICAgJHNjb3BlLnNldE5ha2VkRG9tYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXBwaWQgPSAkc2NvcGUubmFrZWREb21haW5BcHAgPyAkc2NvcGUubmFrZWREb21haW5BcHAuaWQgOiAnYWRtaW4nO1xuXG4gICAgICAgIENsaWVudC5zZXROYWtlZERvbWFpbihhcHBpZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIG5ha2VkIGRvbWFpbicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5iYWNrdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgICAgICBDbGllbnQuYmFja3VwKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gbm93IHN0YXJ0IHF1ZXJ5XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0lmRG9uZSgpIHtcbiAgICAgICAgICAgICAgICBDbGllbnQudmVyc2lvbihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LnVwZGF0ZShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRDZXJ0aWZpY2F0ZScpLm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGVOYW1lID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRLZXknKS5vbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5rZXlGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgJHNjb3BlLmtleUZpbGVOYW1lID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0Q2VydGlmaWNhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdXaWxsIHNldCB0aGUgY2VydGlmaWNhdGUnKTtcblxuICAgICAgICBpZiAoISRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUpIHJldHVybiBjb25zb2xlLmxvZygnQ2VydGlmaWNhdGUgbm90IHNldCcpO1xuICAgICAgICBpZiAoISRzY29wZS5rZXlGaWxlKSByZXR1cm4gY29uc29sZS5sb2coJ0tleSBub3Qgc2V0Jyk7XG5cbiAgICAgICAgQ2xpZW50LnNldENlcnRpZmljYXRlKCRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUsICRzY29wZS5rZXlGaWxlLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQod2luZG93LmxvY2F0aW9uLnJlbG9hZC5iaW5kKHdpbmRvdy5sb2NhdGlvbiwgdHJ1ZSksIDMwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uQ29uZmlnKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnRva2VuSW5Vc2UgPSBDbGllbnQuX3Rva2VuO1xuXG4gICAgICAgIENsaWVudC5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGFwcCBsaXN0Jyk7XG4gICAgICAgICAgICAkc2NvcGUuYXBwcyA9IGFwcHM7XG5cbiAgICAgICAgICAgIENsaWVudC5nZXROYWtlZERvbWFpbihmdW5jdGlvbiAoZXJyb3IsIGFwcGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmFwcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hcHBzW2ldLmlkID09PSBhcHBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gJHNjb3BlLmFwcHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5yZWFkeSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIvKiBnbG9iYWw6Umlja3NoYXc6dHJ1ZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0dyYXBoc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFjdGl2ZVRhYiA9ICdkYXknO1xuXG4gICAgdmFyIGNwdVVzYWdlVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoJyArXG4gICAgJ3NjYWxlKGRpdmlkZVNlcmllcygnICtcbiAgICAgICAgJ3N1bVNlcmllcyhjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXN5c3RlbSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LW5pY2UsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS11c2VyKSwnICtcbiAgICAgICAgJ3N1bVNlcmllcyhjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LWlkbGUsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1zeXN0ZW0sY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1uaWNlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtdXNlcixjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXdhaXQpKSwgMTAwKSwgMCknO1xuXG4gICAgdmFyIG5ldHdvcmtVc2FnZVR4VGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmludGVyZmFjZS1ldGgwLmlmX29jdGV0cy50eCwgMCknO1xuICAgIHZhciBuZXR3b3JrVXNhZ2VSeFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5pbnRlcmZhY2UtZXRoMC5pZl9vY3RldHMucngsIDApJztcblxuICAgIHZhciBkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5kZi1sb29wMC5kZl9jb21wbGV4LXVzZWQsIDApJztcbiAgICB2YXIgZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuZGYtbG9vcDEuZGZfY29tcGxleC11c2VkLCAwKSc7XG5cbiAgICBmdW5jdGlvbiByZW5kZXJDcHUoYWN0aXZlVGFiLCBjcHVEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZENwdSA9IFsgXTtcblxuICAgICAgICBpZiAoY3B1RGF0YSAmJiBjcHVEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkQ3B1ID0gY3B1RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIGNwdUdyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ0NwdUNoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAxMDAsXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkQ3B1LFxuICAgICAgICAgICAgICAgIG5hbWU6ICdjcHUnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY3B1WEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IGNwdUdyYXBoIH0pO1xuICAgICAgICB2YXIgY3B1WUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBjcHVHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdDcHVZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY3B1SG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IGNwdUdyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5KS50b0ZpeGVkKDIpICsgJyU8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3B1R3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyTmV0d29yayhhY3RpdmVUYWIsIHR4RGF0YSwgcnhEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZFR4ID0gWyBdLCB0cmFuc2Zvcm1lZFJ4ID0gWyBdO1xuXG4gICAgICAgIGlmICh0eERhdGEgJiYgdHhEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkVHggPSB0eERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuICAgICAgICBpZiAocnhEYXRhICYmIHJ4RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZFJ4ID0gcnhEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcblxuICAgICAgICB2YXIgbmV0d29ya0dyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ05ldHdvcmtDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIHNlcmllczogWyB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkVHgsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3R4J1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZ3JlZW4nLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkUngsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3J4J1xuICAgICAgICAgICAgfSBdXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgbmV0d29ya1hBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBuZXR3b3JrR3JhcGggfSk7XG4gICAgICAgIHZhciBuZXR3b3JrWUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBuZXR3b3JrR3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnTmV0d29ya1lBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBuZXR3b3JrSG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IG5ldHdvcmtHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeS8xMDI0KS50b0ZpeGVkKDIpICsgJ0tCPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldHdvcmtHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJEaXNrKGFjdGl2ZVRhYiwgYXBwc1VzZWREYXRhLCBkYXRhVXNlZERhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkQXBwc1VzZWQgPSBbIF0sIHRyYW5zZm9ybWVkRGF0YVVzZWQgPSBbIF07XG5cbiAgICAgICAgaWYgKGFwcHNVc2VkRGF0YSAmJiBhcHBzVXNlZERhdGEuZGF0YXBvaW50cykge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWRBcHBzVXNlZCA9IGFwcHNVc2VkRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH07IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFVc2VkRGF0YSAmJiBkYXRhVXNlZERhdGEuZGF0YXBvaW50cykge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWREYXRhVXNlZCA9IGRhdGFVc2VkRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH07IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpc2tHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdEaXNrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDMwICogMTAyNCAqIDEwMjQgKiAxMDI0LCAvLyAzMGdiXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkQXBwc1VzZWQsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2FwcHMnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWREYXRhVXNlZCxcbiAgICAgICAgICAgICAgICBuYW1lOiAnZGF0YSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgZGlza1hBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBkaXNrR3JhcGggfSk7XG4gICAgICAgIHZhciBkaXNrWUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnRGlza1lBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaXNrSG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeS8oMTAyNCAqIDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICdHQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0xlZ2VuZCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5MZWdlbmQoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdEaXNrTGVnZW5kJylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlza0dyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVHcmFwaHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhY3RpdmVUYWIgPSAkc2NvcGUuYWN0aXZlVGFiO1xuICAgICAgIHZhciBmcm9tID0gJy0yNGhvdXJzJztcbiAgICAgICAgc3dpdGNoIChhY3RpdmVUYWIpIHtcbiAgICAgICAgY2FzZSAnZGF5JzogZnJvbSA9ICctMjRob3Vycyc7IGJyZWFrO1xuICAgICAgICBjYXNlICdtb250aCc6IGZyb20gPSAnLTFtb250aCc7IGJyZWFrO1xuICAgICAgICBjYXNlICd5ZWFyJzogZnJvbSA9ICctMXllYXInOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogY29uc29sZS5sb2coJ2ludGVybmFsIGVycnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LmdyYXBocyhbIGNwdVVzYWdlVGFyZ2V0LCBuZXR3b3JrVXNhZ2VUeFRhcmdldCwgbmV0d29ya1VzYWdlUnhUYXJnZXQsIGRpc2tVc2FnZUFwcHNVc2VkVGFyZ2V0LCBkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCBdLCBmcm9tLCBmdW5jdGlvbiAoZXJyb3IsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgZGF0YVswXSk7XG5cbiAgICAgICAgICAgIHJlbmRlck5ldHdvcmsoYWN0aXZlVGFiLCBkYXRhWzFdLCBkYXRhWzJdKTtcblxuICAgICAgICAgICAgcmVuZGVyRGlzayhhY3RpdmVUYWIsIGRhdGFbM10sIGRhdGFbNF0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoJHNjb3BlLnVwZGF0ZUdyYXBocyk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ1VzZXJzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHsgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTsgfSk7XG5cbiAgICAkc2NvcGUucmVhZHkgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlcnMgPSBbXTtcbiAgICAkc2NvcGUudXNlckluZm8gPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcblxuICAgICRzY29wZS51c2VycmVtb3ZlID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICB1c2VySW5mbzoge30sXG4gICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS51c2VyYWRkID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgYWxyZWFkeVRha2VuOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgIGVtYWlsOiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNNZSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLnVzZXJuYW1lID09PSBDbGllbnQuZ2V0VXNlckluZm8oKS51c2VybmFtZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzQWRtaW4gPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gISF1c2VyLmFkbWluO1xuICAgIH07XG5cbiAgICAkc2NvcGUudG9nZ2xlQWRtaW4gPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICBDbGllbnQuc2V0QWRtaW4odXNlci51c2VybmFtZSwgIXVzZXIuYWRtaW4sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHVzZXIuYWRtaW4gPSAhdXNlci5hZG1pbjtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb0FkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnVzZXJhZGQuYWxyZWFkeVRha2VuID0gJyc7XG4gICAgICAgICRzY29wZS51c2VyYWRkLmVycm9yLnVzZXJuYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IuZW1haWwgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC5jcmVhdGVVc2VyKCRzY29wZS51c2VyYWRkLnVzZXJuYW1lLCAkc2NvcGUudXNlcmFkZC5lbWFpbCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuYWxyZWFkeVRha2VuID0gJHNjb3BlLnVzZXJuYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdVc2VybmFtZSBhbHJlYWR5IHRha2VuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5kZXhPZignZW1haWwnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IuZW1haWwgPSAnSW52YWxpZCBFbWFpbCc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyYWRkLmVtYWlsID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5kZXhPZigndXNlcm5hbWUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IudXNlcm5hbWUgPSAnSW52YWxpZCBVc2VybmFtZSc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyYWRkLnVzZXJuYW1lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY3JlYXRlIHVzZXIuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICByZWZyZXNoKCk7XG4gICAgICAgICAgICAkKCcjdXNlckFkZE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93VXNlclJlbW92ZSA9IGZ1bmN0aW9uICh1c2VySW5mbykge1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci51c2VybmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUudXNlckluZm8gPSB1c2VySW5mbztcbiAgICAgICAgJCgnI3VzZXJSZW1vdmVNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1VzZXJSZW1vdmUgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci51c2VybmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJyZW1vdmUudXNlcm5hbWUgIT09ICRzY29wZS51c2VycmVtb3ZlLnVzZXJJbmZvLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci51c2VybmFtZSA9ICdVc2VybmFtZSBkb2VzIG5vdCBtYXRjaCc7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS51c2VybmFtZSA9ICcnO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LnJlbW92ZVVzZXIoJHNjb3BlLnVzZXJyZW1vdmUudXNlcm5hbWUsICRzY29wZS51c2VycmVtb3ZlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci5wYXNzd29yZCA9ICdJbmNvcnJlY3QgcGFzc3dvcmQnO1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGRlbGV0ZSB1c2VyLicsIGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUudXNlckluZm8gPSB7fTtcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnVzZXJuYW1lID0gJyc7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyN1c2VyUmVtb3ZlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICAgICByZWZyZXNoKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgICBDbGllbnQubGlzdFVzZXJzKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZ2V0IHVzZXIgbGlzdGluZy4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgICRzY29wZS51c2VycyA9IHJlc3VsdC51c2VycztcbiAgICAgICAgICAgICRzY29wZS5yZWFkeSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlZnJlc2goKTtcblxuICAgIC8vIHNldHVwIGFsbCB0aGUgZGlhbG9nIGZvY3VzIGhhbmRsaW5nXG4gICAgWyd1c2VyQWRkTW9kYWwnLCAndXNlclJlbW92ZU1vZGFsJ10uZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgJCgnIycgKyBpZCkub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiW2F1dG9mb2N1c106Zmlyc3RcIikuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=