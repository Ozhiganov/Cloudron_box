"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/apps"}).when("/users",{controller:"UsersController",templateUrl:"views/users.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/apps",{controller:"AppsController",templateUrl:"views/apps.html"}).when("/dns",{controller:"DnsController",templateUrl:"views/dns.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).otherwise({redirectTo:"/"})}]);var ISTATES={ISTATE_PENDING_INSTALL:"pending_install",ISTATE_PENDING_CONFIGURE:"pending_configure",ISTATE_PENDING_UNINSTALL:"pending_uninstall",ISTATE_PENDING_RESTORE:"pending_restore",ISTATE_PENDING_UPDATE:"pending_update",ISTATE_ERROR:"error",ISTATE_INSTALLED:"installed"};app.filter("installationActive",function(){return function(e){return e===ISTATES.ISTATE_ERROR?!1:e===ISTATES.ISTATE_INSTALLED?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){switch(e){case ISTATES.ISTATE_PENDING_INSTALL:return"Installing";case ISTATES.ISTATE_PENDING_CONFIGURE:return"Configuring";case ISTATES.ISTATE_PENDING_UNINSTALL:return"Uninstalling";case ISTATES.ISTATE_PENDING_RESTORE:return"Starting";case ISTATES.ISTATE_PENDING_UPDATE:return"Updating";case ISTATES.ISTATE_ERROR:return"Error";case ISTATES.ISTATE_INSTALLED:return"Running";default:return e}}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,o,n,r){n.$set("name",n.laterName);var t=r[0],a=r[1];t&&a&&(t.$name=n.name,a.$addControl(t),e.$on("$destroy",function(){a.$removeControl(t)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,o){function n(e,o){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof o?o:JSON.stringify(o)}function r(e){return function(o,r){return 401===r?a.logout():void e(new n(r,o))}}function t(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:{box:null,apps:null},isDev:!1,progress:{},isCustomDomain:!1,developerMode:!1},this._installedApps=[],this.setToken(localStorage.token)}var a=null;return t.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},t.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},t.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},t.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+o.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm",this._userInfo.gravatarHuge="https://www.gravatar.com/avatar/"+o.createHash(e.email.toLowerCase())+".jpg?s=128&d=mm"},t.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress,this._config.progress=e.progress,this._config.isCustomDomain=e.isCustomDomain,this._config.developerMode=e.developerMode;var o=this;this._configListener.forEach(function(e){e(o._config)})},t.prototype.getInstalledApps=function(){return this._installedApps},t.prototype.getUserInfo=function(){return this._userInfo},t.prototype.getConfig=function(){return this._config},t.prototype.setToken=function(o){e.defaults.headers.common.Authorization="Bearer "+o,o?localStorage.token=o:localStorage.removeItem("token"),this._token=o},t.prototype.config=function(o){e.get("/api/v1/cloudron/config").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.userInfo=function(o){var t=this;e.get("/api/v1/profile").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):(t.setUserInfo(e),void o(null,e))}).error(r(o))},t.prototype.changeDeveloperMode=function(o,t,a){var s=this,i={password:t,enabled:o};e.post("/api/v1/developer",i).success(function(e,r){return 200!==r?a(new n(r,e)):(s._config.developerMode=o,void a(null))}).error(r(a))},t.prototype.installApp=function(o,t,a,s,i,p){var l=this,u={appStoreId:o,manifest:t,password:a,location:i.location,portBindings:i.portBindings,accessRestriction:i.accessRestriction};e.post("/api/v1/apps/install",u).success(function(e,o){return 202!==o||"object"!=typeof e?p(new n(o,e)):(e.manifest={title:s},l._installedApps.push(e),void p(null,e.id))}).error(r(p))},t.prototype.uninstallApp=function(o,t,a){var s={password:t};e.post("/api/v1/apps/"+o+"/uninstall",s).success(function(e,o){return 202!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.configureApp=function(o,t,a,s){var i={appId:o,password:t,location:a.location,portBindings:a.portBindings,accessRestriction:a.accessRestriction};e.post("/api/v1/apps/"+o+"/configure",i).success(function(e,o){return 202!==o?s(new n(o,e)):void s(null)}).error(r(s))},t.prototype.updateApp=function(o,t,a,s,i){e.post("/api/v1/apps/"+o+"/update",{manifest:t,password:s,portBindings:a}).success(function(e,o){return 202!==o?i(new n(o,e)):void i(null)}).error(r(i))},t.prototype.startApp=function(o,t){var a={};e.post("/api/v1/apps/"+o+"/start",a).success(function(e,o){return 202!==o?t(new n(o,e)):void t(null)}).error(r(t))},t.prototype.stopApp=function(o,t){var a={};e.post("/api/v1/apps/"+o+"/stop",a).success(function(e,o){return 202!==o?t(new n(o,e)):void t(null)}).error(r(t))},t.prototype.version=function(o){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.isServerFirstTime=function(o){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,!e.activated)}).error(r(o))},t.prototype.getNakedDomain=function(o){e.get("/api/v1/settings/naked_domain").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e.appid)}).error(r(o))},t.prototype.setNakedDomain=function(o,t){e.post("/api/v1/settings/naked_domain",{appid:o}).success(function(e,o){return 204!==o?t(new n(o)):void t(null)}).error(r(t))},t.prototype.getApps=function(o){e.get("/api/v1/apps").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e.apps)}).error(r(o))},t.prototype.getApp=function(e,o){var n=null;return this._installedApps.some(function(o){return o.id===e?(n=o,!0):!1}),n?o(null,n):o(new Error("App not found"))},t.prototype.getAppLogStream=function(e){var o=new EventSource("/api/v1/apps/"+e+"/logstream");return o},t.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},t.prototype.setAdmin=function(o,t,a){var s={username:o,admin:t};e.post("/api/v1/users/"+o+"/admin",s).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.createAdmin=function(o,t,a,s,i){var p={username:o,password:t,email:a},l=this;e.post("/api/v1/cloudron/activate?setupToken="+s,p).success(function(e,r){return 201!==r||"object"!=typeof e?i(new n(r,e)):(l.setToken(e.token),l.setUserInfo({username:o,email:a,admin:!0}),void i(null,e.activated))}).error(r(i))},t.prototype.listUsers=function(o){e.get("/api/v1/users").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.getOAuthClients=function(o){e.get("/api/v1/oauth/clients").success(function(e,r){return 200!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e.clients)}).error(r(o))},t.prototype.delTokensByClientId=function(o,t){e["delete"]("/api/v1/oauth/clients/"+o+"/tokens").success(function(e,o){return 204!==o?t(new n(o,e)):void t(null)}).error(r(t))},t.prototype.update=function(o,t){e.post("/api/v1/cloudron/update",{password:o}).success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(r(t))},t.prototype.reboot=function(o){e.get("/api/v1/cloudron/reboot").success(function(e,r){return 202!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.backup=function(o){e.post("/api/v1/cloudron/backups").success(function(e,r){return 202!==r||"object"!=typeof e?o(new n(r,e)):void o(null,e)}).error(r(o))},t.prototype.setCertificate=function(o,t,a){console.log("will set certificate");var s=new FormData;s.append("certificate",o),s.append("key",t),e.post("/api/v1/cloudron/certificate",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,o){return 202!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.graphs=function(o,t,a){var s={params:{target:o,format:"json",from:t}};e.get("/api/v1/cloudron/graphs",s).success(function(e,o){return 200!==o||"object"!=typeof e?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.createUser=function(o,t,a){var s={username:o,email:t};e.post("/api/v1/users",s).success(function(e,o){return 201!==o||"object"!=typeof e?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.removeUser=function(o,t,a){var s={password:t};e({method:"DELETE",url:"/api/v1/users/"+o,data:s,headers:{"Content-Type":"application/json"}}).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null)}).error(r(a))},t.prototype.changePassword=function(o,t,a){var s={password:o,newPassword:t};e.post("/api/v1/users/"+this._userInfo.username+"/password",s).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.changeEmail=function(o,t,a){var s={password:t,email:o};e.put("/api/v1/users/"+this._userInfo.username,s).success(function(e,o){return 204!==o?a(new n(o,e)):void a(null,e)}).error(r(a))},t.prototype.refreshConfig=function(e){var o=this;e="function"==typeof e?e:function(){},this.config(function(n,r){return n?e(n):(o.setConfig(r),void e(null))})},t.prototype.refreshInstalledApps=function(e){var o=this;e="function"==typeof e?e:function(){},this.getApps(function(n,r){if(n)return e(n);r.forEach(function(e){for(var n=!1,r=0;r<o._installedApps.length;++r)if(o._installedApps[r].id===e.id){n=r;break}n!==!1?angular.copy(e,o._installedApps[n]):o._installedApps.push(e)});for(var t=o._installedApps.length-1;t>=0;--t)r.some(function(e){return e.id===o._installedApps[t].id})||o._installedApps.splice(t,1);e(null)})},t.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},t.prototype.exchangeCodeForToken=function(o,t){var a={grant_type:"authorization_code",code:o,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,a).success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.access_token)}).error(r(t))},a=new t}]),angular.module("Application").service("AppStore",["$http","Client",function(e,o){function n(e,o){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof o?o:JSON.stringify(o)}function r(){this._appsCache={}}return r.prototype.getApps=function(r){if(null===o.getConfig().apiServerOrigin)return r(new n(420,"Enhance Your Calm"));var t=this;e.get(o.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:o.getConfig().version}}).success(function(e,o){return 200!==o?r(new n(o,e)):(e.apps.forEach(function(e){t._appsCache[e.id]||(t._appsCache[e.id]=e)}),r(null,t._appsCache))}).error(function(e,o){return r(new n(o,e))})},r.prototype.getAppById=function(e,o){if(e in this._appsCache)return o(null,this._appsCache[e]);var r=this;this.getApps(function(t){return t?o(t):e in r._appsCache?o(null,r._appsCache[e]):void o(new n(404,"Not found"))})},r.prototype.getManifest=function(r,t){if(null===o.getConfig().apiServerOrigin)return t(new n(420,"Enhance Your Calm"));var a=o.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+r+"/manifest";console.log("Getting the manifest of ",r,a),e.get(a).success(function(e,o){return 200!==o?t(new n(o,e)):t(null,e)}).error(function(e,o){return t(new n(o,e))})},new r}]),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,o,n,r){e.initialized=!1,e.userInfo=r.getUserInfo(),e.config={},e.update={error:{},password:""},e.isActive=function(e){return o.current?0===o.current.$$route.originalPath.indexOf(e):!1},e.logout=function(o){o.stopPropagation(),e.initialized=!1,r.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",o="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+r._clientId+"&redirect_uri="+e+"&scope="+o},e.setup=function(){window.location.href="/error.html?errorCode=1"},e.error=function(e){console.error(e),window.location.href="/error.html"},e.showUpdateModal=function(o){e.update.error.password=null,e.update.password="",o.$setPristine(),o.$setUntouched(),$("#updateModal").modal("show")},e.doUpdate=function(){e.update.error.password=null,r.update(e.update.password,function(o){return o?void(403===o.statusCode?(e.update.error.password="Incorrect password",e.update.password=""):console.error("Unable to update.",o)):void(window.location.href="/update.html")})},e.backup=function(){$("#backupProgressModal").modal("show"),e.initialized=!1,r.backup(function(o){function n(){r.version(function(o){return o?window.setTimeout(n,1e3):($("#backupProgressModal").modal("hide"),void(e.initialized=!0))})}o&&console.error(o),window.setTimeout(n,5e3)})},r.isServerFirstTime(function(o,t){return o?e.error(o):t?e.setup():void(localStorage.token?r.refreshConfig(function(o){return o&&401===o.statusCode?e.login():o?e.error(o):(r.getConfig().progress.update&&(window.location.href="/update.html"),void r.userInfo(function(o){return o?e.error(o):void r.refreshInstalledApps(function(o){if(o)return e.error(o);var t=n(r.refreshInstalledApps.bind(r),2e3),a=n(r.refreshConfig.bind(r),5e3);e.$on("$destroy",function(){n.cancel(t),n.cancel(a)}),r.setReady(),e.config=r.getConfig(),e.initialized=!0})}))}):e.login())}),r.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")}),["updateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,o,n){function r(o){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.password="",e.passwordchange.newPassword="",e.passwordchange.newPasswordRepeat="",o&&(o.$setPristine(),o.$setUntouched())}function t(o){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.email="",e.emailchange.password="",o&&(o.$setPristine(),o.$setUntouched())}function a(){e.developerModeChange.error.password=null,e.developerModeChange.password="",e.developerModeChangeForm.$setPristine(),e.developerModeChangeForm.$setUntouched()}e.user=n.getUserInfo(),e.config=n.getConfig(),e.activeClients=[],e.tokenInUse=null,e.passwordchange={busy:!1,error:{},password:"",newPassword:"",newPasswordRepeat:""},e.emailchange={busy:!1,error:{},email:"",password:""},e.developerModeChange={busy:!1,error:{},password:""},e.doChangePassword=function(o){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.busy=!0,n.changePassword(e.passwordchange.password,e.passwordchange.newPassword,function(n){return n?void(403===n.statusCode?(e.passwordchange.error.password=!0,e.passwordchange.password=""):console.error("Unable to change password.",n)):(e.passwordchange.busy=!1,r(o),void $("#passwordChangeModal").modal("hide"))})},e.doChangeEmail=function(o){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.busy=!0,n.changeEmail(e.emailchange.email,e.emailchange.password,function(r){return r?void(403===r.statusCode?(e.emailchange.error.password=!0,e.emailchange.password=""):console.error("Unable to change email.",r)):(e.emailchange.busy=!1,t(o),n.userInfo(function(){}),void $("#emailChangeModal").modal("hide"))})},e.doChangeDeveloperMode=function(){e.developerModeChange.error.password=null,e.developerModeChange.busy=!0,n.changeDeveloperMode(!e.config.developerMode,e.developerModeChange.password,function(o){return o?void(403===o.statusCode?(e.developerModeChange.error.password=!0,e.developerModeChange.password=""):console.error("Unable to change password.",o)):(e.developerModeChange.busy=!1,a(),void $("#developerModeChangeModal").modal("hide"))})},e.showChangePassword=function(e){r(e),$("#passwordChangeModal").modal("show")},e.showChangeEmail=function(e){t(e),$("#emailChangeModal").modal("show")},e.showChangeDeveloperMode=function(){a(),$("#developerModeChangeModal").modal("show")},e.removeAccessTokens=function(e,o){n.delTokensByClientId(e.id,function(e){return e?console.error(e):void $(o.target).addClass("disabled")})},n.onReady(function(){e.tokenInUse=n._token,n.getOAuthClients(function(o,n){return o?console.error(o):void(e.activeClients=n)})}),["passwordChangeModal","emailChangeModal","developerModeChangeModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppsController",["$scope","$location","Client","AppStore",function(e,o,n,r){e.HOST_PORT_MIN=1024,e.HOST_PORT_MAX=65535,e.installedApps=n.getInstalledApps(),e.config=n.getConfig(),e.appconfigure={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.appuninstall={error:{},app:{},password:""},e.appupdate={error:{},app:{},password:"",manifest:{},portBindings:{}},e.reset=function(){e.appconfigure.error={},e.appconfigure.app={},e.appconfigure.location="",e.appconfigure.password="",e.appconfigure.portBindings={},e.appconfigure.accessRestriction="",e.config_form.$setPristine(),e.config_form.$setUntouched(),e.appuninstall.app={},e.appuninstall.error={},e.appuninstall.password="",e.uninstall_form.$setPristine(),e.uninstall_form.$setUntouched()},e.showConfigure=function(o){e.reset(),e.appconfigure.app=o,e.appconfigure.location=o.location,e.appconfigure.accessRestriction=o.accessRestriction,e.appconfigure.portBindingsInfo=o.manifest.tcpPorts||{},e.appconfigure.portBindings=angular.copy(o.portBindings),$("#appConfigureModal").modal("show")},e.doConfigure=function(){e.appconfigure.busy=!0,e.appconfigure.error.name=null,e.appconfigure.error.password=null,n.configureApp(e.appconfigure.app.id,e.appconfigure.password,{location:e.appconfigure.location,portBindings:e.appconfigure.portBindings,accessRestriction:e.appconfigure.accessRestriction},function(o){return o?(403===o.statusCode?(e.appconfigure.error.password="Wrong password provided.",e.appconfigure.password=""):e.appconfigure.error.name="App with the name "+e.appconfigure.app.name+" cannot be configured.",void(e.appconfigure.busy=!1)):(e.appconfigure.busy=!1,$("#appConfigureModal").modal("hide"),void e.reset())})},e.showUninstall=function(o){e.reset(),e.appuninstall.app=o,$("#appUninstallModal").modal("show")},e.doUninstall=function(){e.appuninstall.error.password=null,n.uninstallApp(e.appuninstall.app.id,e.appuninstall.password,function(o){return o?void(403===o.statusCode?(e.appuninstall.password="",e.appuninstall.error.password=!0):console.error(o)):($("#appUninstallModal").modal("hide"),void e.reset())})},e.showUpdate=function(o){e.appupdate.app=o,e.appupdate.error.password=null,r.getManifest(o.appStoreId,function(n,r){if(n)return console.error(n);e.appupdate.manifest=r;var t,a={},s={},i={},p=!1;if(r.tcpPorts)for(t in r.tcpPorts)a[t]=r.tcpPorts[t],o.portBindings[t]?s[t]=o.portBindings[t]:(a[t].isNew=!0,s[t]=r.tcpPorts[t].defaultValue||0,p=!0);if(r.tcpPorts)for(t in o.portBindings)r.tcpPorts[t]||(i[t]=o.portBindings[t],p=!0);else i=angular.copy(o.portBindings),p=!0;p?(e.appupdate.portBindingsInfo=a,e.appupdate.portBindings=s,e.appupdate.obsoletePortBindings=i):(e.appupdate.portBindingsInfo={},e.appupdate.portBindings={},e.appupdate.obsoletePortBindings={}),$("#appUpdateModal").modal("show")})},e.doUpdate=function(o){e.appupdate.error.password=null,n.updateApp(e.appupdate.app.id,e.appupdate.manifest,e.appupdate.portBindings,e.appupdate.password,function(n){return n?void(403===n.statusCode?(e.appupdate.password="",e.appupdate.error.password=!0):console.error(n)):(e.appupdate.app={},e.appupdate.password="",o.$setPristine(),o.$setUntouched(),void $("#appUpdateModal").modal("hide"))})},e.cancel=function(){window.history.back()},["appConfigureModal","appUninstallModal","appUpdateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppStoreController",["$scope","$location","$timeout","Client","AppStore",function(e,o,n,r,t){function a(){e.ready=!1,t.getApps(function(o,r){return o?(console.error(o),n(a,1e3)):(e.apps=r,void(e.ready=!0))})}r.onReady(function(){r.getUserInfo().admin||o.path("/")}),e.ready=!1,e.apps=[],e.config=r.getConfig(),e.appinstall={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.reset=function(){e.appinstall.app={},e.appinstall.location="",e.appinstall.password="",e.appinstall.portBindings={},e.appinstall.accessRestriction="",e.appinstall.error={},e.install_form.$setPristine(),e.install_form.$setUntouched()},e.showInstall=function(o){e.reset(),t.getManifest(o.id,function(n,r){if(n)return console.error(n);o.manifest=r,e.appinstall.app=o,e.appinstall.location=o.location,e.appinstall.portBindingsInfo=r.tcpPorts||{},e.appinstall.portBindings={},e.appinstall.accessRestriction=o.accessRestriction||"";for(var t in r.tcpPorts)e.appinstall.portBindings[t]=r.tcpPorts[t].defaultValue||0;$("#appInstallModal").modal("show")})},e.doInstall=function(){e.appinstall.busy=!0,e.appinstall.error.name=null,e.appinstall.error.password=null,e.appinstall.error.port=null,r.installApp(e.appinstall.app.id,e.appinstall.app.manifest,e.appinstall.password,e.appinstall.app.title,{location:e.appinstall.location,portBindings:e.appinstall.portBindings,accessRestriction:e.appinstall.accessRestriction},function(n){return n?(409===n.statusCode&&-1!==n.message.indexOf("is reserved")?e.appinstall.error.port="This port is already in use.":409===n.statusCode?e.appinstall.error.name="Application already exists.":403===n.statusCode?(e.appinstall.error.password="Wrong password provided.",e.appinstall.password=""):e.appinstall.error.name="App with the name "+e.appinstall.app.name+" cannot be installed.",void(e.appinstall.busy=!1)):(e.appinstall.busy=!1,$("#appInstallModal").modal("hide"),e.reset(),void o.path("/apps"))})},a(),["appInstallModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("DnsController",["$scope","$location","Client",function(e,o,n){n.onReady(function(){n.getUserInfo().admin||o.path("/")}),e.ready=!1,e.user=n.getUserInfo(),e.config=n.getConfig(),e.nakedDomainApp=null,e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var o=e.nakedDomainApp?e.nakedDomainApp.id:"admin";n.setNakedDomain(o,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,n.backup(function(o){function r(){n.version(function(o){return o?window.setTimeout(r,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}o&&console.error(o),window.setTimeout(r,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,n.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(o){e.$apply(function(){e.certificateFile=o.target.files[0],e.certificateFileName=o.target.files[0].name})},document.getElementById("idKey").onchange=function(o){e.$apply(function(){e.keyFile=o.target.files[0],e.keyFileName=o.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void n.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},n.onConfig(function(){e.tokenInUse=n._token,n.getApps(function(o,r){o&&console.error("Error loading app list"),e.apps=r,n.getNakedDomain(function(o,n){if(o)return console.error(o);e.nakedDomainApp=null;for(var r=0;r<e.apps.length;r++)if(e.apps[r].id===n){e.nakedDomainApp=e.apps[r];break}e.ready=!0})})})}]),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,o,n){function r(e,o){var n=[];o&&o.datapoints&&(n=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var r=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:n,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:r}),new Rickshaw.Graph.Axis.Y({graph:r,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:r,formatter:function(e,o,n){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(n).toFixed(2)+"%<br>";return t}})}r.render()}function t(e,o,n){var r=[],t=[];o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(t=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:r,name:"tx"},{color:"green",data:t,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,o,n){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(n/1024).toFixed(2)+"KB<br>";return t}})}a.render()}function a(e,o,n){var r=[],t=[];o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(t=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:r,name:"apps"},{color:"green",data:t,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,o,n){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(n/1073741824).toFixed(2)+"GB<br>";return t}}),new Rickshaw.Graph.Legend({graph:a,element:document.getElementById(e+"DiskLegend")})}a.render()}n.getUserInfo().admin||o.path("/"),e.activeTab="day";var s="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",i="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",p="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",l="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",u="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var o=e.activeTab,c="-24hours";switch(o){case"day":c="-24hours";break;case"month":c="-1month";break;case"year":c="-1year";break;default:console.log("internal errror")}n.graphs([s,i,p,l,u],c,function(e,n){return e?console.log(e):(r(o,n[0]),t(o,n[1],n[2]),void a(o,n[3],n[4]))})},n.onReady(e.updateGraphs)}]),angular.module("Application").controller("UsersController",["$scope","$location","Client",function(e,o,n){function r(){n.listUsers(function(o,n){return o?console.error("Unable to get user listing.",o):(e.users=n.users,void(e.ready=!0))})}n.onReady(function(){n.getUserInfo().admin||o.path("/")}),e.ready=!1,e.users=[],e.userInfo=n.getUserInfo(),e.userremove={busy:!1,error:{},userInfo:{},username:"",password:""},e.useradd={busy:!1,alreadyTaken:!1,error:{},username:"",email:""},e.isMe=function(e){return e.username===n.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){n.setAdmin(e.username,!e.admin,function(o){return o?console.error(o):void(e.admin=!e.admin)})},e.doAdd=function(){e.useradd.alreadyTaken="",e.useradd.error.username=null,e.useradd.error.email=null,n.createUser(e.useradd.username,e.useradd.email,function(o){if(o&&409===o.statusCode)return e.useradd.alreadyTaken=e.username,console.error("Username already taken");if(o&&400===o.statusCode){if(-1!==o.message.indexOf("email"))return e.useradd.error.email="Invalid Email",void(e.useradd.email="");if(-1!==o.message.indexOf("username"))return e.useradd.error.username="Invalid Username",void(e.useradd.username="")}else o&&console.error("Unable to create user.",o),r(),$("#userAddModal").modal("hide")})},e.showUserRemove=function(o){e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.userInfo=o,$("#userRemoveModal").modal("show")},e.doUserRemove=function(o){return e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.username!==e.userremove.userInfo.username?(e.userremove.error.username="Username does not match",void(e.userremove.username="")):void n.removeUser(e.userremove.userInfo.id,e.userremove.password,function(n){return n&&403===n.statusCode?(e.userremove.error.password="Incorrect password",void(e.userremove.password="")):n?console.error("Unable to delete user.",n):(e.userremove.userInfo={},e.userremove.username="",e.userremove.password="",o.$setPristine(),o.$setUntouched(),$("#userRemoveModal").modal("hide"),void r())})},r(),["userAddModal","userRemoveModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcHMuanMiLCJkbnMuanMiLCJncmFwaHMuanMiLCJ1c2Vycy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwicmVkaXJlY3RUbyIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsIklTVEFURVMiLCJJU1RBVEVfUEVORElOR19JTlNUQUxMIiwiSVNUQVRFX1BFTkRJTkdfQ09ORklHVVJFIiwiSVNUQVRFX1BFTkRJTkdfVU5JTlNUQUxMIiwiSVNUQVRFX1BFTkRJTkdfUkVTVE9SRSIsIklTVEFURV9QRU5ESU5HX1VQREFURSIsIklTVEFURV9FUlJPUiIsIklTVEFURV9JTlNUQUxMRUQiLCJmaWx0ZXIiLCJpbnB1dCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVxdWlyZSIsImxpbmsiLCJzY29wZSIsImVsZW0iLCJhdHRycyIsImN0cmxzIiwiJHNldCIsImxhdGVyTmFtZSIsIm1vZGVsQ3RybCIsImZvcm1DdHJsIiwiJG5hbWUiLCJuYW1lIiwiJGFkZENvbnRyb2wiLCIkb24iLCIkcmVtb3ZlQ29udHJvbCIsInNlcnZpY2UiLCIkaHR0cCIsIm1kNSIsIkNsaWVudEVycm9yIiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJFcnJvciIsImNhbGwiLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVmYXVsdEVycm9ySGFuZGxlciIsImNhbGxiYWNrIiwiZGF0YSIsInN0YXR1cyIsImNsaWVudCIsImxvZ291dCIsIkNsaWVudCIsIl9yZWFkeSIsIl9jb25maWdMaXN0ZW5lciIsIl9yZWFkeUxpc3RlbmVyIiwiX3VzZXJJbmZvIiwidXNlcm5hbWUiLCJlbWFpbCIsImFkbWluIiwiX3Rva2VuIiwiX2NsaWVudElkIiwiX2NsaWVudFNlY3JldCIsIl9jb25maWciLCJhcGlTZXJ2ZXJPcmlnaW4iLCJ3ZWJTZXJ2ZXJPcmlnaW4iLCJmcWRuIiwiaXAiLCJyZXZpc2lvbiIsInVwZGF0ZSIsImJveCIsImFwcHMiLCJpc0RldiIsInByb2dyZXNzIiwiaXNDdXN0b21Eb21haW4iLCJkZXZlbG9wZXJNb2RlIiwiX2luc3RhbGxlZEFwcHMiLCJzZXRUb2tlbiIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwicHJvdG90eXBlIiwic2V0UmVhZHkiLCJmb3JFYWNoIiwib25SZWFkeSIsInB1c2giLCJvbkNvbmZpZyIsInNldFVzZXJJbmZvIiwidXNlckluZm8iLCJncmF2YXRhciIsImNyZWF0ZUhhc2giLCJ0b0xvd2VyQ2FzZSIsImdyYXZhdGFySHVnZSIsInNldENvbmZpZyIsInZlcnNpb24iLCJ0aGF0IiwiZ2V0SW5zdGFsbGVkQXBwcyIsImdldFVzZXJJbmZvIiwiZ2V0Q29uZmlnIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiQXV0aG9yaXphdGlvbiIsInJlbW92ZUl0ZW0iLCJnZXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJjaGFuZ2VEZXZlbG9wZXJNb2RlIiwiZW5hYmxlZCIsInBhc3N3b3JkIiwicG9zdCIsImluc3RhbGxBcHAiLCJpZCIsIm1hbmlmZXN0IiwidGl0bGUiLCJhcHBTdG9yZUlkIiwibG9jYXRpb24iLCJwb3J0QmluZGluZ3MiLCJhY2Nlc3NSZXN0cmljdGlvbiIsInVuaW5zdGFsbEFwcCIsImFwcElkIiwiY29uZmlndXJlQXBwIiwidXBkYXRlQXBwIiwic3RhcnRBcHAiLCJzdG9wQXBwIiwiaXNTZXJ2ZXJGaXJzdFRpbWUiLCJhY3RpdmF0ZWQiLCJnZXROYWtlZERvbWFpbiIsImFwcGlkIiwic2V0TmFrZWREb21haW4iLCJnZXRBcHBzIiwiZ2V0QXBwIiwiYXBwRm91bmQiLCJzb21lIiwiZ2V0QXBwTG9nU3RyZWFtIiwic291cmNlIiwiRXZlbnRTb3VyY2UiLCJnZXRBcHBMb2dVcmwiLCJzZXRBZG1pbiIsInBheWxvYWQiLCJjcmVhdGVBZG1pbiIsInNldHVwVG9rZW4iLCJsaXN0VXNlcnMiLCJnZXRPQXV0aENsaWVudHMiLCJjbGllbnRzIiwiZGVsVG9rZW5zQnlDbGllbnRJZCIsInJlYm9vdCIsImJhY2t1cCIsInNldENlcnRpZmljYXRlIiwiY2VydGlmaWNhdGVGaWxlIiwia2V5RmlsZSIsImNvbnNvbGUiLCJsb2ciLCJmZCIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiQ29udGVudC1UeXBlIiwidW5kZWZpbmVkIiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiZ3JhcGhzIiwidGFyZ2V0cyIsImZyb20iLCJwYXJhbXMiLCJ0YXJnZXQiLCJmb3JtYXQiLCJjcmVhdGVVc2VyIiwicmVtb3ZlVXNlciIsInVzZXJJZCIsIm1ldGhvZCIsInVybCIsImNoYW5nZVBhc3N3b3JkIiwiY3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJjaGFuZ2VFbWFpbCIsInB1dCIsInJlZnJlc2hDb25maWciLCJyZXN1bHQiLCJyZWZyZXNoSW5zdGFsbGVkQXBwcyIsImZvdW5kIiwiaSIsImxlbmd0aCIsImNvcHkiLCJzcGxpY2UiLCJ3aW5kb3ciLCJocmVmIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW4iLCJhdXRoQ29kZSIsImdyYW50X3R5cGUiLCJjb2RlIiwicmVkaXJlY3RfdXJpIiwib3JpZ2luIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImFjY2Vzc190b2tlbiIsIkFwcFN0b3JlRXJyb3IiLCJBcHBTdG9yZSIsIl9hcHBzQ2FjaGUiLCJib3hWZXJzaW9uIiwiZ2V0QXBwQnlJZCIsImdldE1hbmlmZXN0IiwibWFuaWZlc3RVcmwiLCIkc2NvcGUiLCIkcm91dGUiLCIkaW50ZXJ2YWwiLCJpbml0aWFsaXplZCIsImlzQWN0aXZlIiwiY3VycmVudCIsIiQkcm91dGUiLCJvcmlnaW5hbFBhdGgiLCJpbmRleE9mIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJsb2dpbiIsImNhbGxiYWNrVVJMIiwic2V0dXAiLCJzaG93VXBkYXRlTW9kYWwiLCJmb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsIiQiLCJtb2RhbCIsImRvVXBkYXRlIiwiY2hlY2tJZkRvbmUiLCJzZXRUaW1lb3V0IiwiaXNGaXJzdFRpbWUiLCJyZWZyZXNoQXBwc1RpbWVyIiwiYmluZCIsInJlZnJlc2hDb25maWdUaW1lciIsImNhbmNlbCIsIm9uIiwiZmluZCIsImZvY3VzIiwiJGxvY2F0aW9uIiwicGFzc3dvcmRDaGFuZ2VSZXNldCIsInBhc3N3b3JkY2hhbmdlIiwibmV3UGFzc3dvcmRSZXBlYXQiLCJlbWFpbENoYW5nZVJlc2V0IiwiZW1haWxjaGFuZ2UiLCJkZXZlbG9wZXJNb2RlQ2hhbmdlUmVzZXQiLCJkZXZlbG9wZXJNb2RlQ2hhbmdlIiwiZGV2ZWxvcGVyTW9kZUNoYW5nZUZvcm0iLCJ1c2VyIiwiYWN0aXZlQ2xpZW50cyIsInRva2VuSW5Vc2UiLCJidXN5IiwiZG9DaGFuZ2VQYXNzd29yZCIsImRvQ2hhbmdlRW1haWwiLCJkb0NoYW5nZURldmVsb3Blck1vZGUiLCJzaG93Q2hhbmdlUGFzc3dvcmQiLCJzaG93Q2hhbmdlRW1haWwiLCJzaG93Q2hhbmdlRGV2ZWxvcGVyTW9kZSIsInJlbW92ZUFjY2Vzc1Rva2VucyIsImFkZENsYXNzIiwiSE9TVF9QT1JUX01JTiIsIkhPU1RfUE9SVF9NQVgiLCJpbnN0YWxsZWRBcHBzIiwiYXBwY29uZmlndXJlIiwiYXBwdW5pbnN0YWxsIiwiYXBwdXBkYXRlIiwicmVzZXQiLCJjb25maWdfZm9ybSIsInVuaW5zdGFsbF9mb3JtIiwic2hvd0NvbmZpZ3VyZSIsInBvcnRCaW5kaW5nc0luZm8iLCJ0Y3BQb3J0cyIsImRvQ29uZmlndXJlIiwic2hvd1VuaW5zdGFsbCIsImRvVW5pbnN0YWxsIiwic2hvd1VwZGF0ZSIsImVudiIsIm9ic29sZXRlUG9ydEJpbmRpbmdzIiwicG9ydHNDaGFuZ2VkIiwiaXNOZXciLCJkZWZhdWx0VmFsdWUiLCJoaXN0b3J5IiwiYmFjayIsIiR0aW1lb3V0IiwicmVmcmVzaCIsInJlYWR5IiwicGF0aCIsImFwcGluc3RhbGwiLCJpbnN0YWxsX2Zvcm0iLCJzaG93SW5zdGFsbCIsImRvSW5zdGFsbCIsInBvcnQiLCJuYWtlZERvbWFpbkFwcCIsImNlcnRpZmljYXRlRmlsZU5hbWUiLCJrZXlGaWxlTmFtZSIsIiRwYXJlbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib25jaGFuZ2UiLCIkYXBwbHkiLCJmaWxlcyIsInJlbG9hZCIsInJlbmRlckNwdSIsImFjdGl2ZVRhYiIsImNwdURhdGEiLCJ0cmFuc2Zvcm1lZENwdSIsImRhdGFwb2ludHMiLCJtYXAiLCJwb2ludCIsInkiLCJ4IiwiY3B1R3JhcGgiLCJSaWNrc2hhdyIsIkdyYXBoIiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyZW5kZXJlciIsIndpZHRoIiwiaGVpZ2h0IiwibWluIiwibWF4Iiwic2VyaWVzIiwiY29sb3IiLCJBeGlzIiwiVGltZSIsImdyYXBoIiwiWSIsIm9yaWVudGF0aW9uIiwidGlja0Zvcm1hdCIsIkZpeHR1cmVzIiwiTnVtYmVyIiwiZm9ybWF0S01CVCIsIkhvdmVyRGV0YWlsIiwiZm9ybWF0dGVyIiwic3dhdGNoIiwiY29udGVudCIsInRvRml4ZWQiLCJyZW5kZXIiLCJyZW5kZXJOZXR3b3JrIiwidHhEYXRhIiwicnhEYXRhIiwidHJhbnNmb3JtZWRUeCIsInRyYW5zZm9ybWVkUngiLCJuZXR3b3JrR3JhcGgiLCJyZW5kZXJEaXNrIiwiYXBwc1VzZWREYXRhIiwiZGF0YVVzZWREYXRhIiwidHJhbnNmb3JtZWRBcHBzVXNlZCIsInRyYW5zZm9ybWVkRGF0YVVzZWQiLCJkaXNrR3JhcGgiLCJMZWdlbmQiLCJjcHVVc2FnZVRhcmdldCIsIm5ldHdvcmtVc2FnZVR4VGFyZ2V0IiwibmV0d29ya1VzYWdlUnhUYXJnZXQiLCJkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCIsImRpc2tVc2FnZURhdGFVc2VkVGFyZ2V0IiwidXBkYXRlR3JhcGhzIiwidXNlcnMiLCJ1c2VycmVtb3ZlIiwidXNlcmFkZCIsImFscmVhZHlUYWtlbiIsImlzTWUiLCJpc0FkbWluIiwidG9nZ2xlQWRtaW4iLCJkb0FkZCIsInNob3dVc2VyUmVtb3ZlIiwiZG9Vc2VyUmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUtBLElBQUFBLEtBQUFDLFFBQUFDLE9BQUEsZUFBQSxVQUFBLFlBQUEsZUFHQUYsS0FBQUcsUUFBQSxpQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxLQUFBLEtBQ0FDLFdBQUEsVUFDQUQsS0FBQSxVQUNBRSxXQUFBLGtCQUNBQyxZQUFBLHFCQUNBSCxLQUFBLGFBQ0FFLFdBQUEscUJBQ0FDLFlBQUEsd0JBQ0FILEtBQUEsU0FDQUUsV0FBQSxpQkFDQUMsWUFBQSxvQkFDQUgsS0FBQSxRQUNBRSxXQUFBLGdCQUNBQyxZQUFBLG1CQUNBSCxLQUFBLFlBQ0FFLFdBQUEsb0JBQ0FDLFlBQUEsdUJBQ0FILEtBQUEsV0FDQUUsV0FBQSxtQkFDQUMsWUFBQSxzQkFDQUMsV0FBQUgsV0FBQSxRQUlBLElBQUFJLFVBQ0FDLHVCQUFBLGtCQUNBQyx5QkFBQSxvQkFDQUMseUJBQUEsb0JBQ0FDLHVCQUFBLGtCQUNBQyxzQkFBQSxpQkFDQUMsYUFBQSxRQUNBQyxpQkFBQSxZQUdBakIsS0FBQWtCLE9BQUEscUJBQUEsV0FDQSxNQUFBLFVBQUFDLEdBQ0EsTUFBQUEsS0FBQVQsUUFBQU0sY0FBQSxFQUNBRyxJQUFBVCxRQUFBTyxrQkFBQSxHQUNBLEtBSUFqQixJQUFBa0IsT0FBQSx5QkFBQSxXQUNBLE1BQUEsVUFBQUMsR0FDQSxPQUFBQSxHQUNBLElBQUFULFNBQUFDLHVCQUFBLE1BQUEsWUFDQSxLQUFBRCxTQUFBRSx5QkFBQSxNQUFBLGFBQ0EsS0FBQUYsU0FBQUcseUJBQUEsTUFBQSxjQUNBLEtBQUFILFNBQUFJLHVCQUFBLE1BQUEsVUFDQSxLQUFBSixTQUFBSyxzQkFBQSxNQUFBLFVBQ0EsS0FBQUwsU0FBQU0sYUFBQSxNQUFBLE9BQ0EsS0FBQU4sU0FBQU8saUJBQUEsTUFBQSxTQUNBLFNBQUEs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QUFBSCxHQUNBLE1BQUFBLElBQUEsTUFBQUEsRUFBQW5FLFlBQ0FtSyxFQUFBc0osV0FBQXRQLE1BQUFHLFNBQUEsMEJBQ0E2RixFQUFBc0osV0FBQW5QLFNBQUEsS0FHQUgsRUFBQTZDLFFBQUE3QyxNQUFBLHlCQUFBQSxJQUVBZ0csRUFBQXNKLFdBQUF4USxZQUNBa0gsRUFBQXNKLFdBQUF0UyxTQUFBLEdBQ0FnSixFQUFBc0osV0FBQW5QLFNBQUEsR0FFQTRHLEVBQUFDLGVBQ0FELEVBQUFFLGdCQUVBQyxFQUFBLG9CQUFBQyxNQUFBLFlBRUF5RCxTQWFBQSxLQUdBLGVBQUEsbUJBQUFuTSxRQUFBLFNBQUE2QixHQUNBNEcsRUFBQSxJQUFBNUcsR0FBQXNILEdBQUEsaUJBQUEsV0FDQVYsRUFBQWpMLE1BQUE0TCxLQUFBLHFCQUFBQyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIGFuZ3VsYXI6ZmFsc2UgKi9cblxuLy8gY3JlYXRlIG1haW4gYXBwbGljYXRpb24gbW9kdWxlXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICdhbmd1bGFyLW1kNSddKTtcblxuLy8gc2V0dXAgYWxsIG1ham9yIGFwcGxpY2F0aW9uIHJvdXRlc1xuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsIHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy9hcHBzJ1xuICAgIH0pLndoZW4oJy91c2VycycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlcnMuaHRtbCdcbiAgICB9KS53aGVuKCcvYXBwc3RvcmUnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBTdG9yZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FwcHN0b3JlLmh0bWwnXG4gICAgfSkud2hlbignL2FwcHMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwcy5odG1sJ1xuICAgIH0pLndoZW4oJy9kbnMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdEbnNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9kbnMuaHRtbCdcbiAgICB9KS53aGVuKCcvYWNjb3VudCcsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FjY291bnRDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hY2NvdW50Lmh0bWwnXG4gICAgfSkud2hlbignL2dyYXBocycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0dyYXBoc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2dyYXBocy5odG1sJ1xuICAgIH0pLm90aGVyd2lzZSh7IHJlZGlyZWN0VG86ICcvJ30pO1xufV0pO1xuXG4vLyBrZWVwIGluIHN5bmMgd2l0aCBhcHBkYi5qc1xudmFyIElTVEFURVMgPSB7XG4gICAgSVNUQVRFX1BFTkRJTkdfSU5TVEFMTDogJ3BlbmRpbmdfaW5zdGFsbCcsXG4gICAgSVNUQVRFX1BFTkRJTkdfQ09ORklHVVJFOiAncGVuZGluZ19jb25maWd1cmUnLFxuICAgIElTVEFURV9QRU5ESU5HX1VOSU5TVEFMTDogJ3BlbmRpbmdfdW5pbnN0YWxsJyxcbiAgICBJU1RBVEVfUEVORElOR19SRVNUT1JFOiAncGVuZGluZ19yZXN0b3JlJyxcbiAgICBJU1RBVEVfUEVORElOR19VUERBVEU6ICdwZW5kaW5nX3VwZGF0ZScsXG4gICAgSVNUQVRFX0VSUk9SOiAnZXJyb3InLFxuICAgIElTVEFURV9JTlNUQUxMRUQ6ICdpbnN0YWxsZWQnXG59O1xuXG5hcHAuZmlsdGVyKCdpbnN0YWxsYXRpb25BY3RpdmUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSBJU1RBVEVTLklTVEFURV9FUlJPUikgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoaW5wdXQgPT09IElTVEFURVMuSVNUQVRFX0lOU1RBTExFRCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufSk7XG5cbmFwcC5maWx0ZXIoJ2luc3RhbGxhdGlvblN0YXRlTGFiZWwnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgICBjYXNlIElTVEFURVMuSVNUQVRFX1BFTkRJTkdfSU5TVEFMTDogcmV0dXJuICdJbnN0YWxsaW5nJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9QRU5ESU5HX0NPTkZJR1VSRTogcmV0dXJuICdDb25maWd1cmluZyc7XG4gICAgICAgIGNhc2UgSVNUQVRFUy5JU1RBVEVfUEVORElOR19VTklOU1RBTEw6IHJldHVybiAnVW5pbnN0YWxsaW5nJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9QRU5ESU5HX1JFU1RPUkU6IHJldHVybiAnU3RhcnRpbmcnO1xuICAgICAgICBjYXNlIElTVEFURVMuSVNUQVRFX1BFTkRJTkdfVVBEQVRFOiByZXR1cm4gJ1VwZGF0aW5nJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9FUlJPUjogcmV0dXJuICdFcnJvcic7XG4gICAgICAgIGNhc2UgSVNUQVRFUy5JU1RBVEVfSU5TVEFMTEVEOiByZXR1cm4gJ1J1bm5pbmcnO1xuICAgICAgICBkZWZhdWx0OiByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbmFwcC5maWx0ZXIoJ2FjY2Vzc1Jlc3RyaWN0aW9uTGFiZWwnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnJykgcmV0dXJuICdwdWJsaWMnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyb2xlVXNlcicpIHJldHVybiAncHJpdmF0ZSc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3JvbGVBZG1pbicpIHJldHVybiAncHJpdmF0ZSAoQWRtaW5zIG9ubHkpJztcblxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcbn0pO1xuXG4vLyBjdXN0b20gZGlyZWN0aXZlIGZvciBkeW5hbWljIG5hbWVzIGluIGZvcm1zXG4vLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMzYxNjU3OC9pc3N1ZS1yZWdpc3RlcmluZy1mb3JtLWNvbnRyb2wtd2l0aC1pbnRlcnBvbGF0ZWQtbmFtZSNhbnN3ZXItMjM2MTc0MDFcbmFwcC5kaXJlY3RpdmUoJ2xhdGVyTmFtZScsIGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgLy8gKDIpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogWyc/bmdNb2RlbCcsICdeP2Zvcm0nXSwgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybHMpIHtcbiAgICAgICAgICAgIGF0dHJzLiRzZXQoJ25hbWUnLCBhdHRycy5sYXRlck5hbWUpO1xuXG4gICAgICAgICAgICB2YXIgbW9kZWxDdHJsID0gY3RybHNbMF07ICAgICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICAgICAgdmFyIGZvcm1DdHJsICA9IGN0cmxzWzFdOyAgICAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwgJiYgZm9ybUN0cmwpIHtcbiAgICAgICAgICAgICAgICBtb2RlbEN0cmwuJG5hbWUgPSBhdHRycy5uYW1lOyAgICAgICAgICAgICAgLy8gKDQpXG4gICAgICAgICAgICAgICAgZm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTsgICAgICAgICAgIC8vICgyKVxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7ICAgIC8vICg1KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xuLyogZ2xvYmFsIEV2ZW50U291cmNlICovXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLnNlcnZpY2UoJ0NsaWVudCcsIFsnJGh0dHAnLCAnbWQ1JywgZnVuY3Rpb24gKCRodHRwLCBtZDUpIHtcbiAgICB2YXIgY2xpZW50ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIENsaWVudEVycm9yKHN0YXR1c0NvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMSkgcmV0dXJuIGNsaWVudC5sb2dvdXQoKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDbGllbnQoKSB7XG4gICAgICAgIHRoaXMuX3JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyID0gW107XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIgPSBbXTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogbnVsbCxcbiAgICAgICAgICAgIGVtYWlsOiBudWxsLFxuICAgICAgICAgICAgYWRtaW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3Rva2VuID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2xpZW50SWQgPSAnY2lkLXdlYmFkbWluJztcbiAgICAgICAgdGhpcy5fY2xpZW50U2VjcmV0ID0gJ3VudXNlZCc7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaVNlcnZlck9yaWdpbjogbnVsbCxcbiAgICAgICAgICAgIHdlYlNlcnZlck9yaWdpbjogbnVsbCxcbiAgICAgICAgICAgIGZxZG46IG51bGwsXG4gICAgICAgICAgICBpcDogbnVsbCxcbiAgICAgICAgICAgIHJldmlzaW9uOiBudWxsLFxuICAgICAgICAgICAgdXBkYXRlOiB7IGJveDogbnVsbCwgYXBwczogbnVsbCB9LFxuICAgICAgICAgICAgaXNEZXY6IGZhbHNlLFxuICAgICAgICAgICAgcHJvZ3Jlc3M6IHt9LFxuICAgICAgICAgICAgaXNDdXN0b21Eb21haW46IGZhbHNlLFxuICAgICAgICAgICAgZGV2ZWxvcGVyTW9kZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5faW5zdGFsbGVkQXBwcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuc2V0VG9rZW4obG9jYWxTdG9yYWdlLnRva2VuKTtcbiAgICB9XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fcmVhZHkpIHJldHVybjtcblxuICAgICAgICB0aGlzLl9yZWFkeSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlYWR5KSBjYWxsYmFjaygpO1xuICAgICAgICB0aGlzLl9yZWFkeUxpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLm9uQ29uZmlnID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyLnB1c2goY2FsbGJhY2spO1xuICAgICAgICBjYWxsYmFjayh0aGlzLl9jb25maWcpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFVzZXJJbmZvID0gZnVuY3Rpb24gKHVzZXJJbmZvKSB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGtlZXAgdGhlIGFuZ3VsYXIgYmluZGluZ3MgYWxpdmUsIHNldCBlYWNoIHByb3BlcnR5IGluZGl2aWR1YWxseVxuICAgICAgICB0aGlzLl91c2VySW5mby51c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lO1xuICAgICAgICB0aGlzLl91c2VySW5mby5lbWFpbCA9IHVzZXJJbmZvLmVtYWlsO1xuICAgICAgICB0aGlzLl91c2VySW5mby5hZG1pbiA9ICEhdXNlckluZm8uYWRtaW47XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmdyYXZhdGFyID0gJ2h0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvJyArIG1kNS5jcmVhdGVIYXNoKHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkpICsgJy5qcGc/cz0yNCZkPW1tJztcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZ3JhdmF0YXJIdWdlID0gJ2h0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvJyArIG1kNS5jcmVhdGVIYXNoKHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkpICsgJy5qcGc/cz0xMjgmZD1tbSc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBrZWVwIHRoZSBhbmd1bGFyIGJpbmRpbmdzIGFsaXZlLCBzZXQgZWFjaCBwcm9wZXJ0eSBpbmRpdmlkdWFsbHkgKFRPRE86IGp1c3QgdXNlIGFuZ3VsYXIuY29weSA/KVxuICAgICAgICB0aGlzLl9jb25maWcuYXBpU2VydmVyT3JpZ2luID0gY29uZmlnLmFwaVNlcnZlck9yaWdpbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLndlYlNlcnZlck9yaWdpbiA9IGNvbmZpZy53ZWJTZXJ2ZXJPcmlnaW47XG4gICAgICAgIHRoaXMuX2NvbmZpZy52ZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG4gICAgICAgIHRoaXMuX2NvbmZpZy5mcWRuID0gY29uZmlnLmZxZG47XG4gICAgICAgIHRoaXMuX2NvbmZpZy5pcCA9IGNvbmZpZy5pcDtcbiAgICAgICAgdGhpcy5fY29uZmlnLnJldmlzaW9uID0gY29uZmlnLnJldmlzaW9uO1xuICAgICAgICB0aGlzLl9jb25maWcudXBkYXRlID0gY29uZmlnLnVwZGF0ZTtcbiAgICAgICAgdGhpcy5fY29uZmlnLmlzRGV2ID0gY29uZmlnLmlzRGV2O1xuICAgICAgICB0aGlzLl9jb25maWcucHJvZ3Jlc3MgPSBjb25maWcucHJvZ3Jlc3M7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5wcm9ncmVzcyA9IGNvbmZpZy5wcm9ncmVzcztcbiAgICAgICAgdGhpcy5fY29uZmlnLmlzQ3VzdG9tRG9tYWluID0gY29uZmlnLmlzQ3VzdG9tRG9tYWluO1xuICAgICAgICB0aGlzLl9jb25maWcuZGV2ZWxvcGVyTW9kZSA9IGNvbmZpZy5kZXZlbG9wZXJNb2RlO1xuXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICB0aGlzLl9jb25maWdMaXN0ZW5lci5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2sodGhhdC5fY29uZmlnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0SW5zdGFsbGVkQXBwcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbGxlZEFwcHM7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0VXNlckluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5mbztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0VG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb24uQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIHRva2VuO1xuICAgICAgICBpZiAoIXRva2VuKSBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICAgICAgZWxzZSBsb2NhbFN0b3JhZ2UudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcbiAgICB9O1xuXG4gICAgLypcbiAgICAgKiBSZXN0IEFQSSB3cmFwcGVyc1xuICAgICAqL1xuICAgIENsaWVudC5wcm90b3R5cGUuY29uZmlnID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9jb25maWcnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXNlckluZm8gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9wcm9maWxlJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIGNhY2hlIHVzZXIgaW5mb1xuICAgICAgICAgICAgdGhhdC5zZXRVc2VySW5mbyhkYXRhKTtcblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5jaGFuZ2VEZXZlbG9wZXJNb2RlID0gZnVuY3Rpb24gKGVuYWJsZWQsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7IHBhc3N3b3JkOiBwYXNzd29yZCwgZW5hYmxlZDogZW5hYmxlZCB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2RldmVsb3BlcicsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuXG4gICAgICAgICAgICAvLyB3aWxsIGdldCBvdmVycmlkZW4gYWZ0ZXIgcG9sbGluZyBmb3IgY29uZmlnLCBidXQgZW5zdXJlcyBxdWljayBVSSB1cGRhdGVcbiAgICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZXZlbG9wZXJNb2RlID0gZW5hYmxlZDtcblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGlkLCBtYW5pZmVzdCwgcGFzc3dvcmQsIHRpdGxlLCBjb25maWcsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgdmFyIGRhdGEgPSB7IGFwcFN0b3JlSWQ6IGlkLCBtYW5pZmVzdDogbWFuaWZlc3QsIHBhc3N3b3JkOiBwYXNzd29yZCwgbG9jYXRpb246IGNvbmZpZy5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiBjb25maWcucG9ydEJpbmRpbmdzLCBhY2Nlc3NSZXN0cmljdGlvbjogY29uZmlnLmFjY2Vzc1Jlc3RyaWN0aW9uIH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy9pbnN0YWxsJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuXG4gICAgICAgICAgICAvLyBwdXQgbmV3IGFwcCB3aXRoIGFtZW5kZWQgdGl0bGUgaW4gY2FjaGVcbiAgICAgICAgICAgIGRhdGEubWFuaWZlc3QgPSB7IHRpdGxlOiB0aXRsZSB9O1xuICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5wdXNoKGRhdGEpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmlkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVuaW5zdGFsbEFwcCA9IGZ1bmN0aW9uIChhcHBJZCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0geyBwYXNzd29yZDogcGFzc3dvcmQgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvdW5pbnN0YWxsJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNvbmZpZ3VyZUFwcCA9IGZ1bmN0aW9uIChpZCwgcGFzc3dvcmQsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IGFwcElkOiBpZCwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvY29uZmlndXJlJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVwZGF0ZUFwcCA9IGZ1bmN0aW9uIChpZCwgbWFuaWZlc3QsIHBvcnRCaW5kaW5ncywgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3VwZGF0ZScsIHsgbWFuaWZlc3Q6IG1hbmlmZXN0LCBwYXNzd29yZDogcGFzc3dvcmQsIHBvcnRCaW5kaW5nczogcG9ydEJpbmRpbmdzIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zdGFydEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0YXJ0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0b3BBcHAgPSBmdW5jdGlvbiAoaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0geyB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9zdG9wJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnZlcnNpb24gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL3N0YXR1cycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5pc1NlcnZlckZpcnN0VGltZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCAhZGF0YS5hY3RpdmF0ZWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL3NldHRpbmdzL25ha2VkX2RvbWFpbicpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcGlkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldE5ha2VkRG9tYWluID0gZnVuY3Rpb24gKGFwcGlkLCBjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3NldHRpbmdzL25ha2VkX2RvbWFpbicsIHsgYXBwaWQ6IGFwcGlkIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cykpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9hcHBzJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YS5hcHBzKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcCA9IGZ1bmN0aW9uIChhcHBJZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGFwcEZvdW5kID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW5zdGFsbGVkQXBwcy5zb21lKGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgICAgIGlmIChhcHAuaWQgPT09IGFwcElkKSB7XG4gICAgICAgICAgICAgICAgYXBwRm91bmQgPSBhcHA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGFwcEZvdW5kKSByZXR1cm4gY2FsbGJhY2sobnVsbCwgYXBwRm91bmQpO1xuICAgICAgICBlbHNlIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ0FwcCBub3QgZm91bmQnKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nU3RyZWFtID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9hcGkvdjEvYXBwcy8nICsgYXBwSWQgKyAnL2xvZ3N0cmVhbScpO1xuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcExvZ1VybCA9IGZ1bmN0aW9uIChhcHBJZCkge1xuICAgICAgICByZXR1cm4gJy9hcGkvdjEvYXBwcy8nICsgYXBwSWQgKyAnL2xvZ3M/YWNjZXNzX3Rva2VuPScgKyB0aGlzLl90b2tlbjtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRBZG1pbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgYWRtaW4sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBwYXlsb2FkID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgYWRtaW46IGFkbWluXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2Vycy8nICsgdXNlcm5hbWUgKyAnL2FkbWluJywgcGF5bG9hZCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNyZWF0ZUFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCwgZW1haWwsIHNldHVwVG9rZW4sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBwYXlsb2FkID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vYWN0aXZhdGU/c2V0dXBUb2tlbj0nICsgc2V0dXBUb2tlbiwgcGF5bG9hZCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIHRoYXQuc2V0VG9rZW4oZGF0YS50b2tlbik7XG4gICAgICAgICAgICB0aGF0LnNldFVzZXJJbmZvKHsgdXNlcm5hbWU6IHVzZXJuYW1lLCBlbWFpbDogZW1haWwsIGFkbWluOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFjdGl2YXRlZCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5saXN0VXNlcnMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL3VzZXJzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldE9BdXRoQ2xpZW50cyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvb2F1dGgvY2xpZW50cycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YS5jbGllbnRzKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmRlbFRva2Vuc0J5Q2xpZW50SWQgPSBmdW5jdGlvbiAoaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2FwaS92MS9vYXV0aC9jbGllbnRzLycgKyBpZCArICcvdG9rZW5zJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2Nsb3Vkcm9uL3VwZGF0ZScsIHsgcGFzc3dvcmQ6IHBhc3N3b3JkIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZWJvb3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL3JlYm9vdCcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5iYWNrdXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9iYWNrdXBzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldENlcnRpZmljYXRlID0gZnVuY3Rpb24gKGNlcnRpZmljYXRlRmlsZSwga2V5RmlsZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3dpbGwgc2V0IGNlcnRpZmljYXRlJyk7XG5cbiAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZkLmFwcGVuZCgnY2VydGlmaWNhdGUnLCBjZXJ0aWZpY2F0ZUZpbGUpO1xuICAgICAgICBmZC5hcHBlbmQoJ2tleScsIGtleUZpbGUpO1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vY2VydGlmaWNhdGUnLCBmZCwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5XG4gICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdyYXBocyA9IGZ1bmN0aW9uICh0YXJnZXRzLCBmcm9tLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXRzLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGZyb206IGZyb21cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vZ3JhcGhzJywgY29uZmlnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNyZWF0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIGVtYWlsLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvdXNlcnMnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUucmVtb3ZlVXNlciA9IGZ1bmN0aW9uICh1c2VySWQsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwKHsgbWV0aG9kOiAnREVMRVRFJywgdXJsOiAnL2FwaS92MS91c2Vycy8nICsgdXNlcklkLCBkYXRhOiBkYXRhLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfX0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKGN1cnJlbnRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgcGFzc3dvcmQ6IGN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiBuZXdQYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvdXNlcnMvJyArIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lICsgJy9wYXNzd29yZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNoYW5nZUVtYWlsID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wdXQoJy9hcGkvdjEvdXNlcnMvJyArIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZWZyZXNoQ29uZmlnID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5jb25maWcoZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRDb25maWcocmVzdWx0KTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZWZyZXNoSW5zdGFsbGVkQXBwcyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgY2FsbGJhY2sgPSB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicgPyBjYWxsYmFjayA6IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgIHRoaXMuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gaW5zZXJ0IG9yIHVwZGF0ZSBuZXcgYXBwc1xuICAgICAgICAgICAgYXBwcy5mb3JFYWNoKGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhhdC5faW5zdGFsbGVkQXBwcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5faW5zdGFsbGVkQXBwc1tpXS5pZCA9PT0gYXBwLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5jb3B5KGFwcCwgdGhhdC5faW5zdGFsbGVkQXBwc1tmb3VuZF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2luc3RhbGxlZEFwcHMucHVzaChhcHApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IG9sZCBlbnRyaWVzLCBnb2luZyBiYWNrd2FyZHMgdG8gYWxsb3cgc3BsaWNpbmdcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IHRoYXQuX2luc3RhbGxlZEFwcHMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFwcHMuc29tZShmdW5jdGlvbiAoZWxlbSkgeyByZXR1cm4gKGVsZW0uaWQgPT09IHRoYXQuX2luc3RhbGxlZEFwcHNbaV0uaWQpOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRUb2tlbihudWxsKTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB7fTtcblxuICAgICAgICAvLyBsb2dvdXQgZnJvbSBPQXV0aCBzZXNzaW9uXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hcGkvdjEvc2Vzc2lvbi9sb2dvdXQnO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmV4Y2hhbmdlQ29kZUZvclRva2VuID0gZnVuY3Rpb24gKGF1dGhDb2RlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIGdyYW50X3R5cGU6ICdhdXRob3JpemF0aW9uX2NvZGUnLFxuICAgICAgICAgICAgY29kZTogYXV0aENvZGUsXG4gICAgICAgICAgICByZWRpcmVjdF91cmk6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgICAgICBjbGllbnRfaWQ6IHRoaXMuX2NsaWVudElkLFxuICAgICAgICAgICAgY2xpZW50X3NlY3JldDogdGhpcy5fY2xpZW50U2VjcmV0XG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9vYXV0aC90b2tlbj9yZXNwb25zZV90eXBlPXRva2VuJmNsaWVudF9pZD0nICsgdGhpcy5fY2xpZW50SWQsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFjY2Vzc190b2tlbik7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgY2xpZW50ID0gbmV3IENsaWVudCgpO1xuICAgIHJldHVybiBjbGllbnQ7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcFN0b3JlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckdGltZW91dCcsICdDbGllbnQnLCAnQXBwU3RvcmUnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sICR0aW1lb3V0LCBDbGllbnQsIEFwcFN0b3JlKSB7XG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkgeyBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpOyB9KTtcblxuICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuICAgICRzY29wZS5hcHBzID0gW107XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5hcHBpbnN0YWxsID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBsb2NhdGlvbjogJycsXG4gICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgcG9ydEJpbmRpbmdzOiB7fSxcbiAgICAgICAgYWNjZXNzUmVzdHJpY3Rpb246ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hcHAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwubG9jYXRpb24gPSAnJztcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucGFzc3dvcmQgPSAnJztcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzID0ge307XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFjY2Vzc1Jlc3RyaWN0aW9uID0gJyc7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yID0ge307XG5cbiAgICAgICAgJHNjb3BlLmluc3RhbGxfZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgJHNjb3BlLmluc3RhbGxfZm9ybS4kc2V0VW50b3VjaGVkKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93SW5zdGFsbCA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG5cbiAgICAgICAgQXBwU3RvcmUuZ2V0TWFuaWZlc3QoYXBwLmlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gYWRkIG1hbmlmZXN0IHRvIGFwcCBvYmplY3RcbiAgICAgICAgICAgIGFwcC5tYW5pZmVzdCA9IG1hbmlmZXN0O1xuXG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hcHAgPSBhcHA7XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5sb2NhdGlvbiA9IGFwcC5sb2NhdGlvbjtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5nc0luZm8gPSBtYW5pZmVzdC50Y3BQb3J0cyB8fCB7fTsgICAvLyBQb3J0YmluZGluZyBtYXAgb25seSBmb3IgaW5mb3JtYXRpb25cbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5ncyA9IHt9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgbW9kZWwgaG9sZGluZyB0aGUgZW52OnBvcnQgcGFpclxuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYWNjZXNzUmVzdHJpY3Rpb24gPSBhcHAuYWNjZXNzUmVzdHJpY3Rpb24gfHwgJyc7XG5cbiAgICAgICAgICAgIC8vIHNldCBkZWZhdWx0IHBvcnRzXG4gICAgICAgICAgICBmb3IgKHZhciBlbnYgaW4gbWFuaWZlc3QudGNwUG9ydHMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3NbZW52XSA9IG1hbmlmZXN0LnRjcFBvcnRzW2Vudl0uZGVmYXVsdFZhbHVlIHx8IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJyNhcHBJbnN0YWxsTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvSW5zdGFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IHRydWU7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLnBvcnQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC5pbnN0YWxsQXBwKCRzY29wZS5hcHBpbnN0YWxsLmFwcC5pZCwgJHNjb3BlLmFwcGluc3RhbGwuYXBwLm1hbmlmZXN0LCAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCwgJHNjb3BlLmFwcGluc3RhbGwuYXBwLnRpdGxlLCB7IGxvY2F0aW9uOiAkc2NvcGUuYXBwaW5zdGFsbC5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiAkc2NvcGUuYXBwaW5zdGFsbC5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDkgJiYgZXJyb3IubWVzc2FnZS5pbmRleE9mKCdpcyByZXNlcnZlZCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wb3J0ID0gJ1RoaXMgcG9ydCBpcyBhbHJlYWR5IGluIHVzZS4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwbGljYXRpb24gYWxyZWFkeSBleGlzdHMuJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwIHdpdGggdGhlIG5hbWUgJyArICRzY29wZS5hcHBpbnN0YWxsLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgaW5zdGFsbGVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAkKCcjYXBwSW5zdGFsbE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG5cbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYXBwcycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG5cbiAgICAgICAgQXBwU3RvcmUuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGltZW91dChyZWZyZXNoLCAxMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcHMgPSBhcHBzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ2FwcEluc3RhbGxNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZScsICckaW50ZXJ2YWwnLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlLCAkaW50ZXJ2YWwsIENsaWVudCkge1xuICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSB7fTtcblxuICAgICRzY29wZS51cGRhdGUgPSB7XG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKCEkcm91dGUuY3VycmVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGguaW5kZXhPZih1cmwpID09PSAwO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgQ2xpZW50LmxvZ291dCgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWxsYmFja1VSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2xvZ2luX2NhbGxiYWNrLmh0bWwnO1xuICAgICAgICB2YXIgc2NvcGUgPSAncm9vdCxwcm9maWxlLGFwcHMscm9sZUFkbWluJztcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9vYXV0aC9kaWFsb2cvYXV0aG9yaXplP3Jlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9JyArIENsaWVudC5fY2xpZW50SWQgKyAnJnJlZGlyZWN0X3VyaT0nICsgY2FsbGJhY2tVUkwgKyAnJnNjb3BlPScgKyBzY29wZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZXJyb3IuaHRtbD9lcnJvckNvZGU9MSc7XG4gICAgfTtcblxuICAgICRzY29wZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Vycm9yLmh0bWwnO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZU1vZGFsID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS51cGRhdGUucGFzc3dvcmQgPSAnJztcblxuICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51cGRhdGUoJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSAnSW5jb3JyZWN0IHBhc3N3b3JkJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byB1cGRhdGUuJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cbiAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LmJhY2t1cChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIFRPRE8gdGhpcyBkb2VzIGxvb2sgbGlrZSB3ZSBzaG91bGQgdXNlIHByb2dyZXNzLmpzb24/XG4gICAgICAgICAgICAvLyBub3cgc3RhcnQgcXVlcnlcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIENsaWVudC52ZXJzaW9uKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQuaXNTZXJ2ZXJGaXJzdFRpbWUoZnVuY3Rpb24gKGVycm9yLCBpc0ZpcnN0VGltZSkge1xuICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBpZiAoaXNGaXJzdFRpbWUpIHJldHVybiAkc2NvcGUuc2V0dXAoKTtcblxuICAgICAgICAvLyB3ZSB1c2UgdGhlIGNvbmZpZyByZXF1ZXN0IGFzIGFuIGluZGljYXRvciBpZiB0aGUgdG9rZW4gaXMgc3RpbGwgdmFsaWRcbiAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgcHJvYmFibHkgYXR0YWNoIHN1Y2ggYSBoYW5kbGVyIGZvciBlYWNoIHJlcXVlc3QsIGFzIHRoZSB0b2tlbiBjYW4gZ2V0IGludmFsaWRcbiAgICAgICAgLy8gYXQgYW55IHRpbWUhXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4pIHtcbiAgICAgICAgICAgIENsaWVudC5yZWZyZXNoQ29uZmlnKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDEpIHJldHVybiAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGFjdHVhbGx5IHVwZGF0ZWluZ1xuICAgICAgICAgICAgICAgIGlmIChDbGllbnQuZ2V0Q29uZmlnKCkucHJvZ3Jlc3MudXBkYXRlKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuXG4gICAgICAgICAgICAgICAgQ2xpZW50LnVzZXJJbmZvKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnJlZnJlc2hJbnN0YWxsZWRBcHBzKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2ljayBvZmYgaW5zdGFsbGVkIGFwcHMgYW5kIGNvbmZpZyBwb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaEFwcHNUaW1lciA9ICRpbnRlcnZhbChDbGllbnQucmVmcmVzaEluc3RhbGxlZEFwcHMuYmluZChDbGllbnQpLCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWZyZXNoQ29uZmlnVGltZXIgPSAkaW50ZXJ2YWwoQ2xpZW50LnJlZnJlc2hDb25maWcuYmluZChDbGllbnQpLCA1MDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChyZWZyZXNoQXBwc1RpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHJlZnJlc2hDb25maWdUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93IG1hcmsgdGhlIENsaWVudCB0byBiZSByZWFkeVxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnNldFJlYWR5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gd2FpdCB0aWxsIHRoZSB2aWV3IGhhcyBsb2FkZWQgdW50aWwgc2hvd2luZyBhIG1vZGFsIGRpYWxvZ1xuICAgIENsaWVudC5vbkNvbmZpZyhmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIGlmIChjb25maWcucHJvZ3Jlc3MudXBkYXRlKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBzZXR1cCBhbGwgdGhlIGRpYWxvZyBmb2N1cyBoYW5kbGluZ1xuICAgIFsndXBkYXRlTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQWNjb3VudENvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICAkc2NvcGUudXNlciA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IFtdO1xuICAgICRzY29wZS50b2tlbkluVXNlID0gbnVsbDtcblxuICAgICRzY29wZS5wYXNzd29yZGNoYW5nZSA9IHtcbiAgICAgICAgYnVzeTogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBuZXdQYXNzd29yZDogJycsXG4gICAgICAgIG5ld1Bhc3N3b3JkUmVwZWF0OiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUuZW1haWxjaGFuZ2UgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcGFzc3dvcmRDaGFuZ2VSZXNldCAoZm9ybSkge1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IubmV3UGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IubmV3UGFzc3dvcmRSZXBlYXQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLm5ld1Bhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5uZXdQYXNzd29yZFJlcGVhdCA9ICcnO1xuXG4gICAgICAgIGlmIChmb3JtKSB7XG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbWFpbENoYW5nZVJlc2V0IChmb3JtKSB7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lcnJvci5lbWFpbCA9IG51bGw7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lbWFpbCA9ICcnO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UucGFzc3dvcmQgPSAnJztcblxuICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGV2ZWxvcGVyTW9kZUNoYW5nZVJlc2V0ICgpIHtcbiAgICAgICAgJHNjb3BlLmRldmVsb3Blck1vZGVDaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZGV2ZWxvcGVyTW9kZUNoYW5nZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgJHNjb3BlLmRldmVsb3Blck1vZGVDaGFuZ2VGb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZG9DaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZFJlcGVhdCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5idXN5ID0gdHJ1ZTtcblxuICAgICAgICBDbGllbnQuY2hhbmdlUGFzc3dvcmQoJHNjb3BlLnBhc3N3b3JkY2hhbmdlLnBhc3N3b3JkLCAkc2NvcGUucGFzc3dvcmRjaGFuZ2UubmV3UGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY2hhbmdlIHBhc3N3b3JkLicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgcGFzc3dvcmRDaGFuZ2VSZXNldChmb3JtKTtcblxuICAgICAgICAgICAgJCgnI3Bhc3N3b3JkQ2hhbmdlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvQ2hhbmdlRW1haWwgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IuZW1haWwgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuYnVzeSA9IHRydWU7XG5cbiAgICAgICAgQ2xpZW50LmNoYW5nZUVtYWlsKCRzY29wZS5lbWFpbGNoYW5nZS5lbWFpbCwgJHNjb3BlLmVtYWlsY2hhbmdlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNoYW5nZSBlbWFpbC4nLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgIGVtYWlsQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgICAgIC8vIGZldGNoIG5ldyBpbmZvIGluIHRoZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICBDbGllbnQudXNlckluZm8oZnVuY3Rpb24gKCkge30pO1xuXG4gICAgICAgICAgICAkKCcjZW1haWxDaGFuZ2VNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9DaGFuZ2VEZXZlbG9wZXJNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZGV2ZWxvcGVyTW9kZUNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlLmJ1c3kgPSB0cnVlO1xuXG4gICAgICAgIENsaWVudC5jaGFuZ2VEZXZlbG9wZXJNb2RlKCEkc2NvcGUuY29uZmlnLmRldmVsb3Blck1vZGUsICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRldmVsb3Blck1vZGVDaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGV2ZWxvcGVyTW9kZUNoYW5nZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjaGFuZ2UgcGFzc3dvcmQuJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5kZXZlbG9wZXJNb2RlQ2hhbmdlLmJ1c3kgPSBmYWxzZTtcbiAgICAgICAgICAgIGRldmVsb3Blck1vZGVDaGFuZ2VSZXNldCgpO1xuXG4gICAgICAgICAgICAkKCcjZGV2ZWxvcGVyTW9kZUNoYW5nZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93Q2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICBwYXNzd29yZENoYW5nZVJlc2V0KGZvcm0pO1xuXG4gICAgICAgICQoJyNwYXNzd29yZENoYW5nZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dDaGFuZ2VFbWFpbCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgIGVtYWlsQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgJCgnI2VtYWlsQ2hhbmdlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd0NoYW5nZURldmVsb3Blck1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRldmVsb3Blck1vZGVDaGFuZ2VSZXNldCgpO1xuXG4gICAgICAgICQoJyNkZXZlbG9wZXJNb2RlQ2hhbmdlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVtb3ZlQWNjZXNzVG9rZW5zID0gZnVuY3Rpb24gKGNsaWVudCwgZXZlbnQpIHtcbiAgICAgICAgQ2xpZW50LmRlbFRva2Vuc0J5Q2xpZW50SWQoY2xpZW50LmlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldE9BdXRoQ2xpZW50cyhmdW5jdGlvbiAoZXJyb3IsIGFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IGFjdGl2ZUNsaWVudHM7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ3Bhc3N3b3JkQ2hhbmdlTW9kYWwnLCAnZW1haWxDaGFuZ2VNb2RhbCcsICdkZXZlbG9wZXJNb2RlQ2hhbmdlTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgJ0FwcFN0b3JlJywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQsIEFwcFN0b3JlKSB7XG4gICAgJHNjb3BlLkhPU1RfUE9SVF9NSU4gPSAxMDI0O1xuICAgICRzY29wZS5IT1NUX1BPUlRfTUFYID0gNjU1MzU7XG5cbiAgICAkc2NvcGUuaW5zdGFsbGVkQXBwcyA9IENsaWVudC5nZXRJbnN0YWxsZWRBcHBzKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5hcHBjb25maWd1cmUgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGFwcDoge30sXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBwb3J0QmluZGluZ3M6IHt9LFxuICAgICAgICBhY2Nlc3NSZXN0cmljdGlvbjogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVuaW5zdGFsbCA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVwZGF0ZSA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJycsXG4gICAgICAgIG1hbmlmZXN0OiB7fSxcbiAgICAgICAgcG9ydEJpbmRpbmdzOiB7fVxuICAgIH07XG5cbiAgICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuZXJyb3IgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzID0ge307XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYWNjZXNzUmVzdHJpY3Rpb24gPSAnJztcblxuICAgICAgICAkc2NvcGUuY29uZmlnX2Zvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICRzY29wZS5jb25maWdfZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5hcHAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5lcnJvciA9IHt9O1xuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLnBhc3N3b3JkID0gJyc7XG5cbiAgICAgICAgJHNjb3BlLnVuaW5zdGFsbF9mb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAkc2NvcGUudW5pbnN0YWxsX2Zvcm0uJHNldFVudG91Y2hlZCgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd0NvbmZpZ3VyZSA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG5cbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAgPSBhcHA7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUubG9jYXRpb24gPSBhcHAubG9jYXRpb247XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYWNjZXNzUmVzdHJpY3Rpb24gPSBhcHAuYWNjZXNzUmVzdHJpY3Rpb247XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzSW5mbyA9IGFwcC5tYW5pZmVzdC50Y3BQb3J0cyB8fCB7fTsgICAvLyBQb3J0YmluZGluZyBtYXAgb25seSBmb3IgaW5mb3JtYXRpb25cbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wb3J0QmluZGluZ3MgPSBhbmd1bGFyLmNvcHkoYXBwLnBvcnRCaW5kaW5ncyk7ICAgIC8vIFRoaXMgaXMgdGhlIGFjdHVhbCBtb2RlbCBob2xkaW5nIHRoZSBlbnY6cG9ydCBwYWlyXG5cbiAgICAgICAgJCgnI2FwcENvbmZpZ3VyZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvQ29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmJ1c3kgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBDbGllbnQuY29uZmlndXJlQXBwKCRzY29wZS5hcHBjb25maWd1cmUuYXBwLmlkLCAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkLCB7IGxvY2F0aW9uOiAkc2NvcGUuYXBwY29uZmlndXJlLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6ICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzLCBhY2Nlc3NSZXN0cmljdGlvbjogJHNjb3BlLmFwcGNvbmZpZ3VyZS5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwY29uZmlndXJlLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgY29uZmlndXJlZC4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5idXN5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICQoJyNhcHBDb25maWd1cmVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgICRzY29wZS5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVbmluc3RhbGwgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRzY29wZS5yZXNldCgpO1xuXG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuYXBwID0gYXBwO1xuXG4gICAgICAgICQoJyNhcHBVbmluc3RhbGxNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1VuaW5zdGFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgQ2xpZW50LnVuaW5zdGFsbEFwcCgkc2NvcGUuYXBwdW5pbnN0YWxsLmFwcC5pZCwgJHNjb3BlLmFwcHVuaW5zdGFsbC5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCgnI2FwcFVuaW5zdGFsbE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZSA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5hcHAgPSBhcHA7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIEFwcFN0b3JlLmdldE1hbmlmZXN0KGFwcC5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gQWN0aXZhdGUgYmVsb3cgdHdvIGxpbmVzIGZvciB0ZXN0aW5nIHRoZSBVSVxuICAgICAgICAgICAgLy8gbWFuaWZlc3QudGNwUG9ydHNbJ1RFU1RfSFRUUCddID0geyBkZWZhdWx0VmFsdWU6IDEzMzcsIGRlc2NyaXB0aW9uOiAnSFRUUCBzZXJ2ZXInfTtcbiAgICAgICAgICAgIC8vIGFwcC5wb3J0QmluZGluZ3NbJ1RFU1RfU1NIJ10gPSAxMzM3O1xuXG4gICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLm1hbmlmZXN0ID0gbWFuaWZlc3Q7XG5cbiAgICAgICAgICAgIHZhciBwb3J0QmluZGluZ3NJbmZvID0ge307ICAgICAgICAgIC8vIFBvcnRiaW5kaW5nIG1hcCBvbmx5IGZvciBpbmZvcm1hdGlvblxuICAgICAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHt9OyAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIG1vZGVsIGhvbGRpbmcgdGhlIGVudjpwb3J0IHBhaXJcbiAgICAgICAgICAgIHZhciBvYnNvbGV0ZVBvcnRCaW5kaW5ncyA9IHt9OyAgICAgIC8vIEluZm8gbWFwIGZvciBvYnNvbGV0ZSBwb3J0IGJpbmRpbmdzLCB0aGlzIGlzIGZvciBkaXNwbGF5IHVzZSBvbmx5IGFuZCB0aHVzIG5vdCBpbiB0aGUgbW9kZWxcbiAgICAgICAgICAgIHZhciBwb3J0c0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBlbnY7XG5cbiAgICAgICAgICAgIC8vIGRldGVjdCBuZXcgcG9ydGJpbmRpbmdzIGFuZCBjb3B5IGFsbCBmcm9tIG1hbmlmZXN0LnRjcFBvcnRzXG4gICAgICAgICAgICBpZiAobWFuaWZlc3QudGNwUG9ydHMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGVudiBpbiBtYW5pZmVzdC50Y3BQb3J0cykge1xuICAgICAgICAgICAgICAgICAgICBwb3J0QmluZGluZ3NJbmZvW2Vudl0gPSBtYW5pZmVzdC50Y3BQb3J0c1tlbnZdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcC5wb3J0QmluZGluZ3NbZW52XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9ydEJpbmRpbmdzSW5mb1tlbnZdLmlzTmV3ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGRlZmF1bHQgaW50ZWdlciBwb3J0IHZhbHVlIGluIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3J0QmluZGluZ3NbZW52XSA9IG1hbmlmZXN0LnRjcFBvcnRzW2Vudl0uZGVmYXVsdFZhbHVlIHx8IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcnRzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IGNvcHkgdGhlIGludGVnZXIgcG9ydCB2YWx1ZSBpbnRvIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3J0QmluZGluZ3NbZW52XSA9IGFwcC5wb3J0QmluZGluZ3NbZW52XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZGV0ZWN0IG9ic29sZXRlIHBvcnRiaW5kaW5ncyAobWFwcGluZ3MgaW4gYXBwLnBvcnRCaW5kaW5ncywgYnV0IG5vdCBhbnltb3JlIGluIG1hbmlmZXN0LnRjcFBvcnRzKVxuICAgICAgICAgICAgaWYgKG1hbmlmZXN0LnRjcFBvcnRzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChlbnYgaW4gYXBwLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW1hbmlmZXN0LnRjcFBvcnRzW2Vudl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic29sZXRlUG9ydEJpbmRpbmdzW2Vudl0gPSBhcHAucG9ydEJpbmRpbmdzW2Vudl07XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3J0c0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYnNvbGV0ZVBvcnRCaW5kaW5ncyA9IGFuZ3VsYXIuY29weShhcHAucG9ydEJpbmRpbmdzKTtcbiAgICAgICAgICAgICAgICBwb3J0c0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBub3cgaW5qZWN0IHRoZSBtYXBzIGludG8gdGhlICRzY29wZSwgd2Ugb25seSBzaG93IHRob3NlIGlmIHBvcnRzIGhhdmUgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKHBvcnRzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUucG9ydEJpbmRpbmdzSW5mbyA9IHBvcnRCaW5kaW5nc0luZm87XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wb3J0QmluZGluZ3MgPSBwb3J0QmluZGluZ3M7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5vYnNvbGV0ZVBvcnRCaW5kaW5ncyA9IG9ic29sZXRlUG9ydEJpbmRpbmdzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLnBvcnRCaW5kaW5nc0luZm8gPSB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLnBvcnRCaW5kaW5ncyA9IHt9O1xuICAgICAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUub2Jzb2xldGVQb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCgnI2FwcFVwZGF0ZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1VwZGF0ZSA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51cGRhdGVBcHAoJHNjb3BlLmFwcHVwZGF0ZS5hcHAuaWQsICRzY29wZS5hcHB1cGRhdGUubWFuaWZlc3QsICRzY29wZS5hcHB1cGRhdGUucG9ydEJpbmRpbmdzLCAkc2NvcGUuYXBwdXBkYXRlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyNhcHBVcGRhdGVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgfTtcblxuICAgIC8vIHNldHVwIGFsbCB0aGUgZGlhbG9nIGZvY3VzIGhhbmRsaW5nXG4gICAgWydhcHBDb25maWd1cmVNb2RhbCcsICdhcHBVbmluc3RhbGxNb2RhbCcsICdhcHBVcGRhdGVNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdEbnNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkgeyBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpOyB9KTtcblxuICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuICAgICRzY29wZS51c2VyID0gQ2xpZW50LmdldFVzZXJJbmZvKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcbiAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSBudWxsO1xuICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUgPSBudWxsO1xuICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGVOYW1lID0gJyc7XG4gICAgJHNjb3BlLmtleUZpbGUgPSBudWxsO1xuICAgICRzY29wZS5rZXlGaWxlTmFtZSA9ICcnO1xuXG4gICAgJHNjb3BlLnNldE5ha2VkRG9tYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXBwaWQgPSAkc2NvcGUubmFrZWREb21haW5BcHAgPyAkc2NvcGUubmFrZWREb21haW5BcHAuaWQgOiAnYWRtaW4nO1xuXG4gICAgICAgIENsaWVudC5zZXROYWtlZERvbWFpbihhcHBpZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIG5ha2VkIGRvbWFpbicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5iYWNrdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgICAgICBDbGllbnQuYmFja3VwKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgLy8gbm93IHN0YXJ0IHF1ZXJ5XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0lmRG9uZSgpIHtcbiAgICAgICAgICAgICAgICBDbGllbnQudmVyc2lvbihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LnVwZGF0ZShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRDZXJ0aWZpY2F0ZScpLm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGVOYW1lID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWRLZXknKS5vbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5rZXlGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgJHNjb3BlLmtleUZpbGVOYW1lID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0Q2VydGlmaWNhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdXaWxsIHNldCB0aGUgY2VydGlmaWNhdGUnKTtcblxuICAgICAgICBpZiAoISRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUpIHJldHVybiBjb25zb2xlLmxvZygnQ2VydGlmaWNhdGUgbm90IHNldCcpO1xuICAgICAgICBpZiAoISRzY29wZS5rZXlGaWxlKSByZXR1cm4gY29uc29sZS5sb2coJ0tleSBub3Qgc2V0Jyk7XG5cbiAgICAgICAgQ2xpZW50LnNldENlcnRpZmljYXRlKCRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUsICRzY29wZS5rZXlGaWxlLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQod2luZG93LmxvY2F0aW9uLnJlbG9hZC5iaW5kKHdpbmRvdy5sb2NhdGlvbiwgdHJ1ZSksIDMwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uQ29uZmlnKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnRva2VuSW5Vc2UgPSBDbGllbnQuX3Rva2VuO1xuXG4gICAgICAgIENsaWVudC5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGFwcCBsaXN0Jyk7XG4gICAgICAgICAgICAkc2NvcGUuYXBwcyA9IGFwcHM7XG5cbiAgICAgICAgICAgIENsaWVudC5nZXROYWtlZERvbWFpbihmdW5jdGlvbiAoZXJyb3IsIGFwcGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmFwcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hcHBzW2ldLmlkID09PSBhcHBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gJHNjb3BlLmFwcHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5yZWFkeSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIvKiBnbG9iYWw6Umlja3NoYXc6dHJ1ZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0dyYXBoc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFjdGl2ZVRhYiA9ICdkYXknO1xuXG4gICAgdmFyIGNwdVVzYWdlVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoJyArXG4gICAgJ3NjYWxlKGRpdmlkZVNlcmllcygnICtcbiAgICAgICAgJ3N1bVNlcmllcyhjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXN5c3RlbSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LW5pY2UsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS11c2VyKSwnICtcbiAgICAgICAgJ3N1bVNlcmllcyhjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LWlkbGUsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1zeXN0ZW0sY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1uaWNlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtdXNlcixjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXdhaXQpKSwgMTAwKSwgMCknO1xuXG4gICAgdmFyIG5ldHdvcmtVc2FnZVR4VGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmludGVyZmFjZS1ldGgwLmlmX29jdGV0cy50eCwgMCknO1xuICAgIHZhciBuZXR3b3JrVXNhZ2VSeFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5pbnRlcmZhY2UtZXRoMC5pZl9vY3RldHMucngsIDApJztcblxuICAgIHZhciBkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5kZi1sb29wMC5kZl9jb21wbGV4LXVzZWQsIDApJztcbiAgICB2YXIgZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuZGYtbG9vcDEuZGZfY29tcGxleC11c2VkLCAwKSc7XG5cbiAgICBmdW5jdGlvbiByZW5kZXJDcHUoYWN0aXZlVGFiLCBjcHVEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZENwdSA9IFsgXTtcblxuICAgICAgICBpZiAoY3B1RGF0YSAmJiBjcHVEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkQ3B1ID0gY3B1RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIGNwdUdyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ0NwdUNoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAxMDAsXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkQ3B1LFxuICAgICAgICAgICAgICAgIG5hbWU6ICdjcHUnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY3B1WEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IGNwdUdyYXBoIH0pO1xuICAgICAgICB2YXIgY3B1WUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBjcHVHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdDcHVZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY3B1SG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IGNwdUdyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5KS50b0ZpeGVkKDIpICsgJyU8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3B1R3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyTmV0d29yayhhY3RpdmVUYWIsIHR4RGF0YSwgcnhEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZFR4ID0gWyBdLCB0cmFuc2Zvcm1lZFJ4ID0gWyBdO1xuXG4gICAgICAgIGlmICh0eERhdGEgJiYgdHhEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkVHggPSB0eERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuICAgICAgICBpZiAocnhEYXRhICYmIHJ4RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZFJ4ID0gcnhEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcblxuICAgICAgICB2YXIgbmV0d29ya0dyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ05ldHdvcmtDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIHNlcmllczogWyB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkVHgsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3R4J1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZ3JlZW4nLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkUngsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3J4J1xuICAgICAgICAgICAgfSBdXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgbmV0d29ya1hBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBuZXR3b3JrR3JhcGggfSk7XG4gICAgICAgIHZhciBuZXR3b3JrWUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBuZXR3b3JrR3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnTmV0d29ya1lBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBuZXR3b3JrSG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IG5ldHdvcmtHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeS8xMDI0KS50b0ZpeGVkKDIpICsgJ0tCPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldHdvcmtHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJEaXNrKGFjdGl2ZVRhYiwgYXBwc1VzZWREYXRhLCBkYXRhVXNlZERhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkQXBwc1VzZWQgPSBbIF0sIHRyYW5zZm9ybWVkRGF0YVVzZWQgPSBbIF07XG5cbiAgICAgICAgaWYgKGFwcHNVc2VkRGF0YSAmJiBhcHBzVXNlZERhdGEuZGF0YXBvaW50cykge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWRBcHBzVXNlZCA9IGFwcHNVc2VkRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH07IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFVc2VkRGF0YSAmJiBkYXRhVXNlZERhdGEuZGF0YXBvaW50cykge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWREYXRhVXNlZCA9IGRhdGFVc2VkRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH07IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpc2tHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdEaXNrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDMwICogMTAyNCAqIDEwMjQgKiAxMDI0LCAvLyAzMGdiXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkQXBwc1VzZWQsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2FwcHMnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWREYXRhVXNlZCxcbiAgICAgICAgICAgICAgICBuYW1lOiAnZGF0YSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgZGlza1hBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBkaXNrR3JhcGggfSk7XG4gICAgICAgIHZhciBkaXNrWUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnRGlza1lBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaXNrSG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeS8oMTAyNCAqIDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICdHQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0xlZ2VuZCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5MZWdlbmQoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdEaXNrTGVnZW5kJylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlza0dyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVHcmFwaHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhY3RpdmVUYWIgPSAkc2NvcGUuYWN0aXZlVGFiO1xuICAgICAgIHZhciBmcm9tID0gJy0yNGhvdXJzJztcbiAgICAgICAgc3dpdGNoIChhY3RpdmVUYWIpIHtcbiAgICAgICAgY2FzZSAnZGF5JzogZnJvbSA9ICctMjRob3Vycyc7IGJyZWFrO1xuICAgICAgICBjYXNlICdtb250aCc6IGZyb20gPSAnLTFtb250aCc7IGJyZWFrO1xuICAgICAgICBjYXNlICd5ZWFyJzogZnJvbSA9ICctMXllYXInOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogY29uc29sZS5sb2coJ2ludGVybmFsIGVycnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LmdyYXBocyhbIGNwdVVzYWdlVGFyZ2V0LCBuZXR3b3JrVXNhZ2VUeFRhcmdldCwgbmV0d29ya1VzYWdlUnhUYXJnZXQsIGRpc2tVc2FnZUFwcHNVc2VkVGFyZ2V0LCBkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCBdLCBmcm9tLCBmdW5jdGlvbiAoZXJyb3IsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgZGF0YVswXSk7XG5cbiAgICAgICAgICAgIHJlbmRlck5ldHdvcmsoYWN0aXZlVGFiLCBkYXRhWzFdLCBkYXRhWzJdKTtcblxuICAgICAgICAgICAgcmVuZGVyRGlzayhhY3RpdmVUYWIsIGRhdGFbM10sIGRhdGFbNF0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoJHNjb3BlLnVwZGF0ZUdyYXBocyk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ1VzZXJzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHsgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTsgfSk7XG5cbiAgICAkc2NvcGUucmVhZHkgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlcnMgPSBbXTtcbiAgICAkc2NvcGUudXNlckluZm8gPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcblxuICAgICRzY29wZS51c2VycmVtb3ZlID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICB1c2VySW5mbzoge30sXG4gICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS51c2VyYWRkID0ge1xuICAgICAgICBidXN5OiBmYWxzZSxcbiAgICAgICAgYWxyZWFkeVRha2VuOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgIGVtYWlsOiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNNZSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLnVzZXJuYW1lID09PSBDbGllbnQuZ2V0VXNlckluZm8oKS51c2VybmFtZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzQWRtaW4gPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gISF1c2VyLmFkbWluO1xuICAgIH07XG5cbiAgICAkc2NvcGUudG9nZ2xlQWRtaW4gPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICBDbGllbnQuc2V0QWRtaW4odXNlci51c2VybmFtZSwgIXVzZXIuYWRtaW4sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHVzZXIuYWRtaW4gPSAhdXNlci5hZG1pbjtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb0FkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnVzZXJhZGQuYWxyZWFkeVRha2VuID0gJyc7XG4gICAgICAgICRzY29wZS51c2VyYWRkLmVycm9yLnVzZXJuYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IuZW1haWwgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC5jcmVhdGVVc2VyKCRzY29wZS51c2VyYWRkLnVzZXJuYW1lLCAkc2NvcGUudXNlcmFkZC5lbWFpbCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuYWxyZWFkeVRha2VuID0gJHNjb3BlLnVzZXJuYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdVc2VybmFtZSBhbHJlYWR5IHRha2VuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5kZXhPZignZW1haWwnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IuZW1haWwgPSAnSW52YWxpZCBFbWFpbCc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyYWRkLmVtYWlsID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5kZXhPZigndXNlcm5hbWUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IudXNlcm5hbWUgPSAnSW52YWxpZCBVc2VybmFtZSc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyYWRkLnVzZXJuYW1lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY3JlYXRlIHVzZXIuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICByZWZyZXNoKCk7XG4gICAgICAgICAgICAkKCcjdXNlckFkZE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93VXNlclJlbW92ZSA9IGZ1bmN0aW9uICh1c2VySW5mbykge1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci51c2VybmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUudXNlckluZm8gPSB1c2VySW5mbztcbiAgICAgICAgJCgnI3VzZXJSZW1vdmVNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1VzZXJSZW1vdmUgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci51c2VybmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBpZiAoJHNjb3BlLnVzZXJyZW1vdmUudXNlcm5hbWUgIT09ICRzY29wZS51c2VycmVtb3ZlLnVzZXJJbmZvLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci51c2VybmFtZSA9ICdVc2VybmFtZSBkb2VzIG5vdCBtYXRjaCc7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS51c2VybmFtZSA9ICcnO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LnJlbW92ZVVzZXIoJHNjb3BlLnVzZXJyZW1vdmUudXNlckluZm8uaWQsICRzY29wZS51c2VycmVtb3ZlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5lcnJvci5wYXNzd29yZCA9ICdJbmNvcnJlY3QgcGFzc3dvcmQnO1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGRlbGV0ZSB1c2VyLicsIGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUudXNlckluZm8gPSB7fTtcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnVzZXJuYW1lID0gJyc7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyN1c2VyUmVtb3ZlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICAgICByZWZyZXNoKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgICBDbGllbnQubGlzdFVzZXJzKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZ2V0IHVzZXIgbGlzdGluZy4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgICRzY29wZS51c2VycyA9IHJlc3VsdC51c2VycztcbiAgICAgICAgICAgICRzY29wZS5yZWFkeSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlZnJlc2goKTtcblxuICAgIC8vIHNldHVwIGFsbCB0aGUgZGlhbG9nIGZvY3VzIGhhbmRsaW5nXG4gICAgWyd1c2VyQWRkTW9kYWwnLCAndXNlclJlbW92ZU1vZGFsJ10uZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgJCgnIycgKyBpZCkub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiW2F1dG9mb2N1c106Zmlyc3RcIikuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=