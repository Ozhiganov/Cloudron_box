"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/apps"}).when("/users",{controller:"UsersController",templateUrl:"views/users.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/apps",{controller:"AppsController",templateUrl:"views/apps.html"}).when("/dns",{controller:"DnsController",templateUrl:"views/dns.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).otherwise({redirectTo:"/"})}]),app.filter("installationActive",function(){return function(e){return"error"===e?!1:"installed"===e?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){return"error"===e?"Error":"subdomain_error"===e?"Error":"installed"===e?"Installed":"downloading_image"===e?"Downloading":"pending_install"===e?"Installing":"pending_restore"===e?"Starting":"pending_uninstall"===e?"Uninstalling":"creating_container"===e?"Container":"downloading_manifest"===e?"Manifest":"creating_volume"===e?"Volume":"registering_subdomain"===e?"Subdomain":"allocated_oauth_credentials"===e?"OAuth":e}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,n,o,r){o.$set("name",o.laterName);var t=r[0],a=r[1];t&&a&&(t.$name=o.name,a.$addControl(t),e.$on("$destroy",function(){a.$removeControl(t)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,n){function o(e,n){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof n?n:JSON.stringify(n)}function r(e){return function(n,r){return 401===r?a.logout():void e(new o(r,n))}}function t(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:{box:null,apps:null},isDev:!1,progress:{}},this._installedApps=[],this.setToken(localStorage.token)}var a=null;return t.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},t.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},t.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},t.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+n.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm",this._userInfo.gravatarHuge="https://www.gravatar.com/avatar/"+n.createHash(e.email.toLowerCase())+".jpg?s=128&d=mm"},t.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress;var n=this;this._configListener.forEach(function(e){e(n._config)})},t.prototype.getInstalledApps=function(){return this._installedApps},t.prototype.getUserInfo=function(){return this._userInfo},t.prototype.getConfig=function(){return this._config},t.prototype.setToken=function(n){e.defaults.headers.common.Authorization="Bearer "+n,n?localStorage.token=n:localStorage.removeItem("token"),this._token=n},t.prototype.config=function(n){e.get("/api/v1/cloudron/config").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.userInfo=function(n){e.get("/api/v1/profile").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.installApp=function(n,t,a,i,s,p){var l=this,c={appStoreId:n,manifest:t,password:a,location:s.location,portBindings:s.portBindings,accessRestriction:s.accessRestriction};e.post("/api/v1/apps/install",c).success(function(e,n){return 202!==n||"object"!=typeof e?p(new o(n,e)):(e.manifest={title:i},l._installedApps.push(e),void p(null,e.id))}).error(r(p))},t.prototype.uninstallApp=function(n,t,a){var i={password:t};e.post("/api/v1/apps/"+n+"/uninstall",i).success(function(e,n){return 202!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.configureApp=function(n,t,a,i){var s={appId:n,password:t,location:a.location,portBindings:a.portBindings,accessRestriction:a.accessRestriction};e.post("/api/v1/apps/"+n+"/configure",s).success(function(e,n){return 202!==n?i(new o(n,e)):void i(null)}).error(r(i))},t.prototype.updateApp=function(n,t,a,i){e.post("/api/v1/apps/"+n+"/update",{manifest:t,password:a}).success(function(e,n){return 202!==n?i(new o(n,e)):void i(null)}).error(r(i))},t.prototype.startApp=function(n,t){var a={};e.post("/api/v1/apps/"+n+"/start",a).success(function(e,n){return 202!==n?t(new o(n,e)):void t(null)}).error(r(t))},t.prototype.stopApp=function(n,t){var a={};e.post("/api/v1/apps/"+n+"/stop",a).success(function(e,n){return 202!==n?t(new o(n,e)):void t(null)}).error(r(t))},t.prototype.version=function(n){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.isServerFirstTime=function(n){e.get("/api/v1/cloudron/status").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,!e.activated)}).error(r(n))},t.prototype.getNakedDomain=function(n){e.get("/api/v1/settings/naked_domain").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e.appid)}).error(r(n))},t.prototype.setNakedDomain=function(n,t){e.post("/api/v1/settings/naked_domain",{appid:n}).success(function(e,n){return 204!==n?t(new o(n)):void t(null)}).error(r(t))},t.prototype.getApps=function(n){e.get("/api/v1/apps").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e.apps)}).error(r(n))},t.prototype.getApp=function(e,n){var o=null;return this._installedApps.some(function(n){return n.id===e?(o=n,!0):!1}),o?n(null,o):n(new Error("App not found"))},t.prototype.getAppLogStream=function(e){var n=new EventSource("/api/v1/apps/"+e+"/logstream");return n},t.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},t.prototype.setAdmin=function(n,t,a){var i={username:n,admin:t};e.post("/api/v1/users/"+n+"/admin",i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.createAdmin=function(n,t,a,i,s){var p={username:n,password:t,email:a},l=this;e.post("/api/v1/cloudron/activate?setupToken="+i,p).success(function(e,r){return 201!==r||"object"!=typeof e?s(new o(r,e)):(l.setToken(e.token),l.setUserInfo({username:n,email:a,admin:!0}),void s(null,e.activated))}).error(r(s))},t.prototype.listUsers=function(n){e.get("/api/v1/users").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.getOAuthClients=function(n){e.get("/api/v1/oauth/clients").success(function(e,r){return 200!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e.clients)}).error(r(n))},t.prototype.delTokensByClientId=function(n,t){e["delete"]("/api/v1/oauth/clients/"+n+"/tokens").success(function(e,n){return 204!==n?t(new o(n,e)):void t(null)}).error(r(t))},t.prototype.update=function(n,t){e.post("/api/v1/cloudron/update",{password:n}).success(function(e,n){return 202!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e)}).error(r(t))},t.prototype.reboot=function(n){e.get("/api/v1/cloudron/reboot").success(function(e,r){return 202!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.backup=function(n){e.post("/api/v1/cloudron/backups").success(function(e,r){return 202!==r||"object"!=typeof e?n(new o(r,e)):void n(null,e)}).error(r(n))},t.prototype.setCertificate=function(n,t,a){console.log("will set certificate");var i=new FormData;i.append("certificate",n),i.append("key",t),e.post("/api/v1/cloudron/certificate",i,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,n){return 202!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.graphs=function(n,t,a){var i={params:{target:n,format:"json",from:t}};e.get("/api/v1/cloudron/graphs",i).success(function(e,n){return 200!==n||"object"!=typeof e?a(new o(n,e)):void a(null,e)}).error(r(a))},t.prototype.createUser=function(n,t,a){var i={username:n,email:t};e.post("/api/v1/users",i).success(function(e,n){return 201!==n||"object"!=typeof e?a(new o(n,e)):void a(null,e)}).error(r(a))},t.prototype.removeUser=function(n,t,a){var i={username:n,password:t};e({method:"DELETE",url:"/api/v1/users/"+n,data:i,headers:{"Content-Type":"application/json"}}).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null)}).error(r(a))},t.prototype.changePassword=function(n,t,a){var i={password:n,newPassword:t};e.post("/api/v1/users/"+this._userInfo.username+"/password",i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null,e)}).error(r(a))},t.prototype.refreshConfig=function(e){var n=this;e="function"==typeof e?e:function(){},this.config(function(o,r){return o?e(o):(n.setConfig(r),void e(null))})},t.prototype.refreshInstalledApps=function(e){var n=this;e="function"==typeof e?e:function(){},this.getApps(function(o,r){if(o)return e(o);r.forEach(function(e){for(var o=!1,r=0;r<n._installedApps.length;++r)if(n._installedApps[r].id===e.id){o=r;break}o!==!1?angular.copy(e,n._installedApps[o]):n._installedApps.push(e)});for(var t=n._installedApps.length-1;t>=0;--t)r.some(function(e){return e.id===n._installedApps[t].id})||n._installedApps.splice(t,1);e(null)})},t.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},t.prototype.exchangeCodeForToken=function(n,t){var a={grant_type:"authorization_code",code:n,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,a).success(function(e,n){return 200!==n||"object"!=typeof e?t(new o(n,e)):void t(null,e.access_token)}).error(r(t))},a=new t}]),angular.module("Application").service("AppStore",["$http","Client",function(e,n){function o(e,n){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof n?n:JSON.stringify(n)}function r(){this._appsCache={}}return r.prototype.getApps=function(r){if(null===n.getConfig().apiServerOrigin)return r(new o(420,"Enhance Your Calm"));var t=this;e.get(n.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:n.getConfig().version}}).success(function(e,n){return 200!==n?r(new o(n,e)):(e.apps.forEach(function(e){t._appsCache[e.id]||(t._appsCache[e.id]=e)}),r(null,t._appsCache))}).error(function(e,n){return r(new o(n,e))})},r.prototype.getAppById=function(e,n){if(e in this._appsCache)return n(null,this._appsCache[e]);var r=this;this.getApps(function(t){return t?n(t):e in r._appsCache?n(null,r._appsCache[e]):void n(new o(404,"Not found"))})},r.prototype.getManifest=function(r,t){if(null===n.getConfig().apiServerOrigin)return t(new o(420,"Enhance Your Calm"));var a=n.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+r+"/manifest";console.log("Getting the manifest of ",r,a),e.get(a).success(function(e,n){return 200!==n?t(new o(n,e)):t(null,e)}).error(function(e,n){return t(new o(n,e))})},new r}]),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,n,o,r){e.initialized=!1,e.userInfo=r.getUserInfo(),e.config={},e.update={error:{},password:""},e.isActive=function(e){return n.current?0===n.current.$$route.originalPath.indexOf(e):!1},e.logout=function(n){n.stopPropagation(),e.initialized=!1,r.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",n="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+r._clientId+"&redirect_uri="+e+"&scope="+n},e.setup=function(){window.location.href="/error.html?errorCode=1"},e.error=function(e){console.error(e),window.location.href="/error.html"},e.showUpdateModal=function(n){e.update.error.password=null,e.update.password="",n.$setPristine(),n.$setUntouched(),$("#updateModal").modal("show")},e.doUpdate=function(){e.update.error.password=null,r.update(e.update.password,function(n){return n?void(403===n.statusCode?(e.update.error.password="Incorrect password",e.update.password=""):console.error("Unable to update.",n)):void(window.location.href="/update.html")})},e.backup=function(){$("#backupProgressModal").modal("show"),e.initialized=!1,r.backup(function(n){function o(){r.version(function(n){return n?window.setTimeout(o,1e3):($("#backupProgressModal").modal("hide"),void(e.initialized=!0))})}n&&console.error(n),window.setTimeout(o,5e3)})},r.isServerFirstTime(function(n,t){return n?e.error(n):t?e.setup():void(localStorage.token?r.refreshConfig(function(n){return n&&401===n.statusCode?e.login():n?e.error(n):(r.getConfig().progress.update&&(window.location.href="/update.html"),void r.userInfo(function(n,t){return n?e.error(n):(r.setUserInfo(t),void r.refreshInstalledApps(function(n){if(n)return e.error(n);var t=o(r.refreshInstalledApps.bind(r),2e3),a=o(r.refreshConfig.bind(r),5e3);e.$on("$destroy",function(){o.cancel(t),o.cancel(a)}),r.setReady(),e.config=r.getConfig(),e.initialized=!0}))}))}):e.login())}),r.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,n,o){function r(n){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.password="",e.passwordchange.newPassword="",e.passwordchange.newPasswordRepeat="",n&&(n.$setPristine(),n.$setUntouched())}e.user=o.getUserInfo(),e.config=o.getConfig(),e.activeClients=[],e.tokenInUse=null,e.passwordchange={busy:!1,error:{},password:"",newPassword:"",newPasswordRepeat:""},e.doChangePassword=function(n){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.busy=!0,o.changePassword(e.passwordchange.password,e.passwordchange.newPassword,function(o){return o?void(403===o.statusCode?(e.passwordchange.error.password=!0,e.passwordchange.password=""):console.error("Unable to change password.",o)):(e.passwordchange.busy=!1,r(n),void $("#passwordChangeModal").modal("hide"))})},e.showChangePassword=function(e){r(e),$("#passwordChangeModal").modal("show")},e.removeAccessTokens=function(e,n){o.delTokensByClientId(e.id,function(e){return e?console.error(e):void $(n.target).addClass("disabled")})},o.onReady(function(){e.tokenInUse=o._token,o.getOAuthClients(function(n,o){return n?console.error(n):void(e.activeClients=o)})})}]),angular.module("Application").controller("AppsController",["$scope","$location","Client","AppStore",function(e,n,o,r){e.installedApps=o.getInstalledApps(),e.config=o.getConfig(),e.appconfigure={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.appuninstall={error:{},app:{},password:""},e.appupdate={error:{},app:{},password:""},e.showConfigure=function(n){e.appconfigure.app=n,e.appconfigure.location=n.location,e.appconfigure.portBindings=n.manifest.tcpPorts,e.appconfigure.accessRestriction=n.accessRestriction;for(var o in e.appconfigure.portBindings)e.appconfigure.portBindings[o].hostPort=parseInt(e.appconfigure.app.portBindings[o]);$("#appConfigureModal").modal("show")},e.doConfigure=function(n){e.appconfigure.busy=!0,e.appconfigure.error.name=null,e.appconfigure.error.password=null;var r={};for(var t in e.appconfigure.portBindings)r[t]=e.appconfigure.portBindings[t].hostPort;o.configureApp(e.appconfigure.app.id,e.appconfigure.password,{location:e.appconfigure.location,portBindings:r,accessRestriction:e.appconfigure.accessRestriction},function(o){return o?(403===o.statusCode?(e.appconfigure.error.password="Wrong password provided.",e.appconfigure.password=""):e.appconfigure.error.name="App with the name "+e.appconfigure.app.name+" cannot be configured.",void(e.appconfigure.busy=!1)):(e.appconfigure.busy=!1,e.appconfigure.error={},e.appconfigure.app={},e.appconfigure.location="",e.appconfigure.password="",e.appconfigure.portBindings={},e.appconfigure.accessRestriction="",n.$setPristine(),n.$setUntouched(),void $("#appConfigureModal").modal("hide"))})},e.showUninstall=function(n){e.appuninstall.app=n,e.appuninstall.error.password=null,$("#appUninstallModal").modal("show")},e.doUninstall=function(n){e.appuninstall.error.password=null,o.uninstallApp(e.appuninstall.app.id,e.appuninstall.password,function(o){return o?void(403===o.statusCode?(e.appuninstall.password="",e.appuninstall.error.password=!0):console.error(o)):(e.appuninstall.app={},e.appuninstall.password="",n.$setPristine(),n.$setUntouched(),void $("#appUninstallModal").modal("hide"))})},e.showUpdate=function(n){e.appupdate.app=n,e.appupdate.error.password=null,r.getManifest(n.appStoreId,function(n,o){return n?console.error(n):(e.appupdate.app.manifest=o,void $("#appUpdateModal").modal("show"))})},e.doUpdate=function(n){e.appupdate.error.password=null,o.updateApp(e.appupdate.app.id,e.appupdate.app.manifest,e.appupdate.password,function(o){return o?void(403===o.statusCode?(e.appupdate.password="",e.appupdate.error.password=!0):console.error(o)):(e.appupdate.app={},e.appupdate.password="",n.$setPristine(),n.$setUntouched(),void $("#appUpdateModal").modal("hide"))})},e.cancel=function(){window.history.back()}}]),angular.module("Application").controller("AppStoreController",["$scope","$location","$timeout","Client","AppStore",function(e,n,o,r,t){function a(){e.ready=!1,t.getApps(function(n,r){return n?(console.error(n),o(a,1e3)):(e.apps=r,void(e.ready=!0))})}r.onReady(function(){r.getUserInfo().admin||n.path("/")}),e.ready=!1,e.apps=[],e.config=r.getConfig(),e.appinstall={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.showInstall=function(n){t.getManifest(n.id,function(o,r){if(o)return console.error(o);n.manifest=r,e.appinstall.app=n,e.appinstall.location=n.location,e.appinstall.portBindings=r.tcpPorts,e.appinstall.accessRestriction=n.accessRestriction||"";for(var t in e.appinstall.portBindings)e.appinstall.portBindings[t].hostPort=parseInt(t);$("#appInstallModal").modal("show")})},e.doInstall=function(o){e.appinstall.busy=!0,e.appinstall.error.name=null,e.appinstall.error.password=null;var t={};for(var a in e.appinstall.portBindings)t[a]=e.appinstall.portBindings[a].hostPort;r.installApp(e.appinstall.app.id,e.appinstall.app.manifest,e.appinstall.password,e.appinstall.app.title,{location:e.appinstall.location,portBindings:t,accessRestriction:e.appinstall.accessRestriction},function(r){return r?(409===r.statusCode?e.appinstall.error.name="Application already exists.":403===r.statusCode?(e.appinstall.error.password="Wrong password provided.",e.appinstall.password=""):e.appinstall.error.name="App with the name "+e.appinstall.app.name+" cannot be installed.",void(e.appinstall.busy=!1)):(e.appinstall.busy=!1,e.appinstall.error={},e.appinstall.app={},e.appinstall.location="",e.appinstall.password="",e.appinstall.portBindings={},e.appinstall.accessRestriction="",o.$setPristine(),o.$setUntouched(),$("#appInstallModal").modal("hide"),void n.path("/apps"))})},a()}]),angular.module("Application").controller("DnsController",["$scope","$location","Client",function(e,n,o){o.onReady(function(){o.getUserInfo().admin||n.path("/")}),e.ready=!1,e.user=o.getUserInfo(),e.config=o.getConfig(),e.nakedDomainApp=null,e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var n=e.nakedDomainApp?e.nakedDomainApp.id:"admin";o.setNakedDomain(n,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,o.backup(function(n){function r(){o.version(function(n){return n?window.setTimeout(r,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}n&&console.error(n),window.setTimeout(r,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,o.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(n){e.$apply(function(){e.certificateFile=n.target.files[0],e.certificateFileName=n.target.files[0].name})},document.getElementById("idKey").onchange=function(n){e.$apply(function(){e.keyFile=n.target.files[0],e.keyFileName=n.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void o.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},o.onConfig(function(){e.tokenInUse=o._token,o.getApps(function(n,r){n&&console.error("Error loading app list"),e.apps=r,o.getNakedDomain(function(n,o){if(n)return console.error(n);e.nakedDomainApp=null;for(var r=0;r<e.apps.length;r++)if(e.apps[r].id===o){e.nakedDomainApp=e.apps[r];break}e.ready=!0})})})}]),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,n,o){function r(e,n){var o=[];n&&n.datapoints&&(o=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var r=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:o,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:r}),new Rickshaw.Graph.Axis.Y({graph:r,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:r,formatter:function(e,n,o){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(o).toFixed(2)+"%<br>";return t}})}r.render()}function t(e,n,o){var r=[],t=[];n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(t=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:r,name:"tx"},{color:"green",data:t,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,n,o){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(o/1024).toFixed(2)+"KB<br>";return t}})}a.render()}function a(e,n,o){var r=[],t=[];n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(t=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:r,name:"apps"},{color:"green",data:t,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,n,o){var r='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',t=r+e.name+": "+new Number(o/1073741824).toFixed(2)+"GB<br>";return t}}),new Rickshaw.Graph.Legend({graph:a,element:document.getElementById(e+"DiskLegend")})}a.render()}o.getUserInfo().admin||n.path("/"),e.activeTab="day";var i="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",s="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",p="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",l="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",c="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var n=e.activeTab,u="-24hours";switch(n){case"day":u="-24hours";break;case"month":u="-1month";break;case"year":u="-1year";break;default:console.log("internal errror")}o.graphs([i,s,p,l,c],u,function(e,o){return e?console.log(e):(r(n,o[0]),t(n,o[1],o[2]),void a(n,o[3],o[4]))})},o.onReady(e.updateGraphs)}]),angular.module("Application").controller("SecurityController",["$scope","Client",function(e,n){e.activeClients=[],e.tokenInUse=null,e.ready=!1,e.removeAccessTokens=function(e,o){e._busy=!0,n.delTokensByClientId(e.id,function(n){return n?console.error(n):($(o.target).addClass("disabled"),void(e._busy=!1))})},n.onReady(function(){e.tokenInUse=n._token,n.getOAuthClients(function(n,o){return n?console.error(n):(e.activeClients=o,void(e.ready=!0))})})}]),angular.module("Application").controller("UsersController",["$scope","$location","Client",function(e,n,o){function r(){o.listUsers(function(n,o){return n?console.error("Unable to get user listing.",n):(e.users=o.users,void(e.ready=!0))})}o.onReady(function(){o.getUserInfo().admin||n.path("/")}),e.ready=!1,e.users=[],e.userInfo=o.getUserInfo(),e.userremove={busy:!1,error:{},userInfo:{},username:"",password:""},e.useradd={busy:!1,alreadyTaken:!1,error:{},username:"",email:""},e.isMe=function(e){return e.username===o.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){o.setAdmin(e.username,!e.admin,function(n){return n?console.error(n):void(e.admin=!e.admin)})},e.doAdd=function(){e.useradd.alreadyTaken="",e.useradd.error.username=null,e.useradd.error.email=null,o.createUser(e.useradd.username,e.useradd.email,function(n){if(n&&409===n.statusCode)return e.useradd.alreadyTaken=e.username,console.error("Username already taken");if(n&&400===n.statusCode){if(-1!==n.message.indexOf("email"))return e.useradd.error.email="Invalid Email",void(e.useradd.email="");if(-1!==n.message.indexOf("username"))return e.useradd.error.username="Invalid Username",void(e.useradd.username="")}else n&&console.error("Unable to create user.",n),r(),$("#userAddModal").modal("hide")})},e.showUserRemove=function(n){e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.userInfo=n,$("#userRemoveModal").modal("show")},e.doUserRemove=function(n){return e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.username!==e.userremove.userInfo.username?(e.userremove.error.username="Username does not match",void(e.userremove.username="")):void o.removeUser(e.userremove.username,e.userremove.password,function(o){return o&&403===o.statusCode?(e.userremove.error.password="Incorrect password",void(e.userremove.password="")):o?console.error("Unable to delete user.",o):(e.userremove.userInfo={},e.userremove.username="",e.userremove.password="",n.$setPristine(),n.$setUntouched(),$("#userRemoveModal").modal("hide"),void r())})},r()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcHMuanMiLCJkbnMuanMiLCJncmFwaHMuanMiLCJzZWN1cml0eS5qcyIsInVzZXJzLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJyZWRpcmVjdFRvIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwiZmlsdGVyIiwiaW5wdXQiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcXVpcmUiLCJsaW5rIiwic2NvcGUiLCJlbGVtIiwiYXR0cnMiLCJjdHJscyIsIiRzZXQiLCJsYXRlck5hbWUiLCJtb2RlbEN0cmwiLCJmb3JtQ3RybCIsIiRuYW1lIiwibmFtZSIsIiRhZGRDb250cm9sIiwiJG9uIiwiJHJlbW92ZUNvbnRyb2wiLCJzZXJ2aWNlIiwiJGh0dHAiLCJtZDUiLCJDbGllbnRFcnJvciIsInN0YXR1c0NvZGUiLCJtZXNzYWdlIiwiRXJyb3IiLCJjYWxsIiwidGhpcyIsImNvbnN0cnVjdG9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlZmF1bHRFcnJvckhhbmRsZXIiLCJjYWxsYmFjayIsImRhdGEiLCJzdGF0dXMiLCJjbGllbnQiLCJsb2dvdXQiLCJDbGllbnQiLCJfcmVhZHkiLCJfY29uZmlnTGlzdGVuZXIiLCJfcmVhZHlMaXN0ZW5lciIsIl91c2VySW5mbyIsInVzZXJuYW1lIiwiZW1haWwiLCJhZG1pbiIsIl90b2tlbiIsIl9jbGllbnRJZCIsIl9jbGllbnRTZWNyZXQiLCJfY29uZmlnIiwiYXBpU2VydmVyT3JpZ2luIiwid2ViU2VydmVyT3JpZ2luIiwiZnFkbiIsImlwIiwicmV2aXNpb24iLCJ1cGRhdGUiLCJib3giLCJhcHBzIiwiaXNEZXYiLCJwcm9ncmVzcyIsIl9pbnN0YWxsZWRBcHBzIiwic2V0VG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsInByb3RvdHlwZSIsInNldFJlYWR5IiwiZm9yRWFjaCIsIm9uUmVhZHkiLCJwdXNoIiwib25Db25maWciLCJzZXRVc2VySW5mbyIsInVzZXJJbmZvIiwiZ3JhdmF0YXIiLCJjcmVhdGVIYXNoIiwidG9Mb3dlckNhc2UiLCJncmF2YXRhckh1Z2UiLCJzZXRDb25maWciLCJ2ZXJzaW9uIiwidGhhdCIsImdldEluc3RhbGxlZEFwcHMiLCJnZXRVc2VySW5mbyIsImdldENvbmZpZyIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsIkF1dGhvcml6YXRpb24iLCJyZW1vdmVJdGVtIiwiZ2V0Iiwic3VjY2VzcyIsImVycm9yIiwiaW5zdGFsbEFwcCIsImlkIiwibWFuaWZlc3QiLCJwYXNzd29yZCIsInRpdGxlIiwiYXBwU3RvcmVJZCIsImxvY2F0aW9uIiwicG9ydEJpbmRpbmdzIiwiYWNjZXNzUmVzdHJpY3Rpb24iLCJwb3N0IiwidW5pbnN0YWxsQXBwIiwiYXBwSWQiLCJjb25maWd1cmVBcHAiLCJ1cGRhdGVBcHAiLCJzdGFydEFwcCIsInN0b3BBcHAiLCJpc1NlcnZlckZpcnN0VGltZSIsImFjdGl2YXRlZCIsImdldE5ha2VkRG9tYWluIiwiYXBwaWQiLCJzZXROYWtlZERvbWFpbiIsImdldEFwcHMiLCJnZXRBcHAiLCJhcHBGb3VuZCIsInNvbWUiLCJnZXRBcHBMb2dTdHJlYW0iLCJzb3VyY2UiLCJFdmVudFNvdXJjZSIsImdldEFwcExvZ1VybCIsInNldEFkbWluIiwicGF5bG9hZCIsImNyZWF0ZUFkbWluIiwic2V0dXBUb2tlbiIsImxpc3RVc2VycyIsImdldE9BdXRoQ2xpZW50cyIsImNsaWVudHMiLCJkZWxUb2tlbnNCeUNsaWVudElkIiwicmVib290IiwiYmFja3VwIiwic2V0Q2VydGlmaWNhdGUiLCJjZXJ0aWZpY2F0ZUZpbGUiLCJrZXlGaWxlIiwiY29uc29sZSIsImxvZyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJDb250ZW50LVR5cGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJncmFwaHMiLCJ0YXJnZXRzIiwiZnJvbSIsInBhcmFtcyIsInRhcmdldCIsImZvcm1hdCIsImNyZWF0ZVVzZXIiLCJyZW1vdmVVc2VyIiwibWV0aG9kIiwidXJsIiwiY2hhbmdlUGFzc3dvcmQiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsInJlZnJlc2hDb25maWciLCJyZXN1bHQiLCJyZWZyZXNoSW5zdGFsbGVkQXBwcyIsImZvdW5kIiwiaSIsImxlbmd0aCIsImNvcHkiLCJzcGxpY2UiLCJ3aW5kb3ciLCJocmVmIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW4iLCJhdXRoQ29kZSIsImdyYW50X3R5cGUiLCJjb2RlIiwicmVkaXJlY3RfdXJpIiwib3JpZ2luIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImFjY2Vzc190b2tlbiIsIkFwcFN0b3JlRXJyb3IiLCJBcHBTdG9yZSIsIl9hcHBzQ2FjaGUiLCJib3hWZXJzaW9uIiwiZ2V0QXBwQnlJZCIsImdldE1hbmlmZXN0IiwibWFuaWZlc3RVcmwiLCIkc2NvcGUiLCIkcm91dGUiLCIkaW50ZXJ2YWwiLCJpbml0aWFsaXplZCIsImlzQWN0aXZlIiwiY3VycmVudCIsIiQkcm91dGUiLCJvcmlnaW5hbFBhdGgiLCJpbmRleE9mIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJsb2dpbiIsImNhbGxiYWNrVVJMIiwic2V0dXAiLCJzaG93VXBkYXRlTW9kYWwiLCJmb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsIiQiLCJtb2RhbCIsImRvVXBkYXRlIiwiY2hlY2tJZkRvbmUiLCJzZXRUaW1lb3V0IiwiaXNGaXJzdFRpbWUiLCJyZWZyZXNoQXBwc1RpbWVyIiwiYmluZCIsInJlZnJlc2hDb25maWdUaW1lciIsImNhbmNlbCIsIiRsb2NhdGlvbiIsInBhc3N3b3JkQ2hhbmdlUmVzZXQiLCJwYXNzd29yZGNoYW5nZSIsIm5ld1Bhc3N3b3JkUmVwZWF0IiwidXNlciIsImFjdGl2ZUNsaWVudHMiLCJ0b2tlbkluVXNlIiwiYnVzeSIsImRvQ2hhbmdlUGFzc3dvcmQiLCJzaG93Q2hhbmdlUGFzc3dvcmQiLCJyZW1vdmVBY2Nlc3NUb2tlbnMiLCJhZGRDbGFzcyIsImluc3RhbGxlZEFwcHMiLCJhcHBjb25maWd1cmUiLCJhcHB1bmluc3RhbGwiLCJhcHB1cGRhdGUiLCJzaG93Q29uZmlndXJlIiwidGNwUG9ydHMiLCJjb250YWluZXJQb3J0IiwiaG9zdFBvcnQiLCJwYXJzZUludCIsImRvQ29uZmlndXJlIiwic2hvd1VuaW5zdGFsbCIsImRvVW5pbnN0YWxsIiwic2hvd1VwZGF0ZSIsImhpc3RvcnkiLCJiYWNrIiwiJHRpbWVvdXQiLCJyZWZyZXNoIiwicmVhZHkiLCJwYXRoIiwiYXBwaW5zdGFsbCIsInNob3dJbnN0YWxsIiwicG9ydCIsImRvSW5zdGFsbCIsIm5ha2VkRG9tYWluQXBwIiwiY2VydGlmaWNhdGVGaWxlTmFtZSIsImtleUZpbGVOYW1lIiwiJHBhcmVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvbmNoYW5nZSIsIiRhcHBseSIsImZpbGVzIiwicmVsb2FkIiwicmVuZGVyQ3B1IiwiYWN0aXZlVGFiIiwiY3B1RGF0YSIsInRyYW5zZm9ybWVkQ3B1IiwiZGF0YXBvaW50cyIsIm1hcCIsInBvaW50IiwieSIsIngiLCJjcHVHcmFwaCIsIlJpY2tzaGF3IiwiR3JhcGgiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbmRlcmVyIiwid2lkdGgiLCJoZWlnaHQiLCJtaW4iLCJtYXgiLCJzZXJpZXMiLCJjb2xvciIsIkF4aXMiLCJUaW1lIiwiZ3JhcGgiLCJZIiwib3JpZW50YXRpb24iLCJ0aWNrRm9ybWF0IiwiRml4dHVyZXMiLCJOdW1iZXIiLCJmb3JtYXRLTUJUIiwiSG92ZXJEZXRhaWwiLCJmb3JtYXR0ZXIiLCJzd2F0Y2giLCJjb250ZW50IiwidG9GaXhlZCIsInJlbmRlciIsInJlbmRlck5ldHdvcmsiLCJ0eERhdGEiLCJyeERhdGEiLCJ0cmFuc2Zvcm1lZFR4IiwidHJhbnNmb3JtZWRSeCIsIm5ldHdvcmtHcmFwaCIsInJlbmRlckRpc2siLCJhcHBzVXNlZERhdGEiLCJkYXRhVXNlZERhdGEiLCJ0cmFuc2Zvcm1lZEFwcHNVc2VkIiwidHJhbnNmb3JtZWREYXRhVXNlZCIsImRpc2tHcmFwaCIsIkxlZ2VuZCIsImNwdVVzYWdlVGFyZ2V0IiwibmV0d29ya1VzYWdlVHhUYXJnZXQiLCJuZXR3b3JrVXNhZ2VSeFRhcmdldCIsImRpc2tVc2FnZUFwcHNVc2VkVGFyZ2V0IiwiZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQiLCJ1cGRhdGVHcmFwaHMiLCJfYnVzeSIsInVzZXJzIiwidXNlcnJlbW92ZSIsInVzZXJhZGQiLCJhbHJlYWR5VGFrZW4iLCJpc01lIiwiaXNBZG1pbiIsInRvZ2dsZUFkbWluIiwiZG9BZGQiLCJzaG93VXNlclJlbW92ZSIsImRvVXNlclJlbW92ZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFLQSxJQUFBQSxLQUFBQyxRQUFBQyxPQUFBLGVBQUEsVUFBQSxZQUFBLGVBR0FGLEtBQUFHLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQSxLQUNBQyxXQUFBLFVBQ0FELEtBQUEsVUFDQUUsV0FBQSxrQkFDQUMsWUFBQSxxQkFDQUgsS0FBQSxhQUNBRSxXQUFBLHFCQUNBQyxZQUFBLHdCQUNBSCxLQUFBLFNBQ0FFLFdBQUEsaUJBQ0FDLFlBQUEsb0JBQ0FILEtBQUEsUUFDQUUsV0FBQSxnQkFDQUMsWUFBQSxtQkFDQUgsS0FBQSxZQUNBRSxXQUFBLG9CQUNBQyxZQUFBLHVCQUNBSCxLQUFBLFdBQ0FFLFdBQUEsbUJBQ0FDLFlBQUEsc0JBQ0FDLFdBQUFILFdBQUEsU0FHQU4sSUFBQVUsT0FBQSxxQkFBQSxXQUNBLE1BQUEsVUFBQUMsR0FDQSxNQUFBLFVBQUFBLEdBQUEsRUFDQSxjQUFBQSxHQUFBLEdBQ0EsS0FJQVgsSUFBQVUsT0FBQSx5QkFBQSxXQUNBLE1BQUEsVUFBQUMsR0FDQSxNQUFBLFVBQUFBLEVBQUEsUUFD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LGVBQUEsU0FBQXRQLEdBQ0E2RyxFQUFBa0ksV0FBQTdOLE1BQUE5QyxTQUFBLEtBQ0F5SSxFQUFBa0ksV0FBQTdOLE1BQUFJLFNBQUEsS0FDQXVGLEVBQUFrSSxXQUFBL08sU0FBQUEsRUFDQStILEVBQUEsb0JBQUFDLE1BQUEsU0FHQW5CLEVBQUEwSSxhQUFBLFNBQUEzSCxHQUlBLE1BSEFmLEdBQUFrSSxXQUFBN04sTUFBQTlDLFNBQUEsS0FDQXlJLEVBQUFrSSxXQUFBN04sTUFBQUksU0FBQSxLQUVBdUYsRUFBQWtJLFdBQUEzUSxXQUFBeUksRUFBQWtJLFdBQUEvTyxTQUFBNUIsVUFDQXlJLEVBQUFrSSxXQUFBN04sTUFBQTlDLFNBQUEsK0JBQ0F5SSxFQUFBa0ksV0FBQTNRLFNBQUEsU0FJQUwsR0FBQThHLFdBQUFnQyxFQUFBa0ksV0FBQTNRLFNBQUF5SSxFQUFBa0ksV0FBQXpOLFNBQUEsU0FBQUosR0FDQSxNQUFBQSxJQUFBLE1BQUFBLEVBQUFqRSxZQUNBNEosRUFBQWtJLFdBQUE3TixNQUFBSSxTQUFBLDBCQUNBdUYsRUFBQWtJLFdBQUF6TixTQUFBLEtBR0FKLEVBQUEyQyxRQUFBM0MsTUFBQSx5QkFBQUEsSUFFQTJGLEVBQUFrSSxXQUFBL08sWUFDQTZHLEVBQUFrSSxXQUFBM1EsU0FBQSxHQUNBeUksRUFBQWtJLFdBQUF6TixTQUFBLEdBRUFzRyxFQUFBQyxlQUNBRCxFQUFBRSxnQkFFQUMsRUFBQSxvQkFBQUMsTUFBQSxZQUVBcUMsU0FhQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qIGdsb2JhbCBhbmd1bGFyOmZhbHNlICovXG5cbi8vIGNyZWF0ZSBtYWluIGFwcGxpY2F0aW9uIG1vZHVsZVxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAnYW5ndWxhci1tZDUnXSk7XG5cbi8vIHNldHVwIGFsbCBtYWpvciBhcHBsaWNhdGlvbiByb3V0ZXNcbmFwcC5jb25maWcoWyckcm91dGVQcm92aWRlcicsIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLCB7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvYXBwcydcbiAgICB9KS53aGVuKCcvdXNlcnMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJzLmh0bWwnXG4gICAgfSkud2hlbignL2FwcHN0b3JlJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwU3RvcmVDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBzdG9yZS5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHBzJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FwcHMuaHRtbCdcbiAgICB9KS53aGVuKCcvZG5zJywge1xuICAgICAgICBjb250cm9sbGVyOiAnRG5zQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZG5zLmh0bWwnXG4gICAgfSkud2hlbignL2FjY291bnQnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBY2NvdW50Q29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYWNjb3VudC5odG1sJ1xuICAgIH0pLndoZW4oJy9ncmFwaHMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdHcmFwaHNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ncmFwaHMuaHRtbCdcbiAgICB9KS5vdGhlcndpc2UoeyByZWRpcmVjdFRvOiAnLyd9KTtcbn1dKTtcblxuYXBwLmZpbHRlcignaW5zdGFsbGF0aW9uQWN0aXZlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2Vycm9yJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdpbnN0YWxsZWQnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59KTtcblxuYXBwLmZpbHRlcignaW5zdGFsbGF0aW9uU3RhdGVMYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdlcnJvcicpIHJldHVybiAnRXJyb3InO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdzdWJkb21haW5fZXJyb3InKSByZXR1cm4gJ0Vycm9yJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnaW5zdGFsbGVkJykgcmV0dXJuICdJbnN0YWxsZWQnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdkb3dubG9hZGluZ19pbWFnZScpIHJldHVybiAnRG93bmxvYWRpbmcnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdwZW5kaW5nX2luc3RhbGwnKSByZXR1cm4gJ0luc3RhbGxpbmcnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdwZW5kaW5nX3Jlc3RvcmUnKSByZXR1cm4gJ1N0YXJ0aW5nJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncGVuZGluZ191bmluc3RhbGwnKSByZXR1cm4gJ1VuaW5zdGFsbGluZyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2NyZWF0aW5nX2NvbnRhaW5lcicpIHJldHVybiAnQ29udGFpbmVyJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZG93bmxvYWRpbmdfbWFuaWZlc3QnKSByZXR1cm4gJ01hbmlmZXN0JztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnY3JlYXRpbmdfdm9sdW1lJykgcmV0dXJuICdWb2x1bWUnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyZWdpc3RlcmluZ19zdWJkb21haW4nKSByZXR1cm4gJ1N1YmRvbWFpbic7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2FsbG9jYXRlZF9vYXV0aF9jcmVkZW50aWFscycpIHJldHVybiAnT0F1dGgnO1xuXG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9O1xufSk7XG5cbmFwcC5maWx0ZXIoJ2FjY2Vzc1Jlc3RyaWN0aW9uTGFiZWwnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnJykgcmV0dXJuICdwdWJsaWMnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyb2xlVXNlcicpIHJldHVybiAncHJpdmF0ZSc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3JvbGVBZG1pbicpIHJldHVybiAncHJpdmF0ZSAoQWRtaW5zIG9ubHkpJztcblxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcbn0pO1xuXG4vLyBjdXN0b20gZGlyZWN0aXZlIGZvciBkeW5hbWljIG5hbWVzIGluIGZvcm1zXG4vLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMzYxNjU3OC9pc3N1ZS1yZWdpc3RlcmluZy1mb3JtLWNvbnRyb2wtd2l0aC1pbnRlcnBvbGF0ZWQtbmFtZSNhbnN3ZXItMjM2MTc0MDFcbmFwcC5kaXJlY3RpdmUoJ2xhdGVyTmFtZScsIGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgLy8gKDIpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogWyc/bmdNb2RlbCcsICdeP2Zvcm0nXSwgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybHMpIHtcbiAgICAgICAgICAgIGF0dHJzLiRzZXQoJ25hbWUnLCBhdHRycy5sYXRlck5hbWUpO1xuXG4gICAgICAgICAgICB2YXIgbW9kZWxDdHJsID0gY3RybHNbMF07ICAgICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICAgICAgdmFyIGZvcm1DdHJsICA9IGN0cmxzWzFdOyAgICAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwgJiYgZm9ybUN0cmwpIHtcbiAgICAgICAgICAgICAgICBtb2RlbEN0cmwuJG5hbWUgPSBhdHRycy5uYW1lOyAgICAgICAgICAgICAgLy8gKDQpXG4gICAgICAgICAgICAgICAgZm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTsgICAgICAgICAgIC8vICgyKVxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7ICAgIC8vICg1KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cbi8qIGdsb2JhbCBFdmVudFNvdXJjZSAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5zZXJ2aWNlKCdDbGllbnQnLCBbJyRodHRwJywgJ21kNScsIGZ1bmN0aW9uICgkaHR0cCwgbWQ1KSB7XG4gICAgdmFyIGNsaWVudCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBDbGllbnRFcnJvcihzdGF0dXNDb2RlLCBtZXNzYWdlKSB7XG4gICAgICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHJldHVybiBjbGllbnQubG9nb3V0KCk7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ2xpZW50KCkge1xuICAgICAgICB0aGlzLl9yZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jb25maWdMaXN0ZW5lciA9IFtdO1xuICAgICAgICB0aGlzLl9yZWFkeUxpc3RlbmVyID0gW107XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IG51bGwsXG4gICAgICAgICAgICBlbWFpbDogbnVsbCxcbiAgICAgICAgICAgIGFkbWluOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl90b2tlbiA9IG51bGw7XG4gICAgICAgIHRoaXMuX2NsaWVudElkID0gJ2NpZC13ZWJhZG1pbic7XG4gICAgICAgIHRoaXMuX2NsaWVudFNlY3JldCA9ICd1bnVzZWQnO1xuICAgICAgICB0aGlzLl9jb25maWcgPSB7XG4gICAgICAgICAgICBhcGlTZXJ2ZXJPcmlnaW46IG51bGwsXG4gICAgICAgICAgICB3ZWJTZXJ2ZXJPcmlnaW46IG51bGwsXG4gICAgICAgICAgICBmcWRuOiBudWxsLFxuICAgICAgICAgICAgaXA6IG51bGwsXG4gICAgICAgICAgICByZXZpc2lvbjogbnVsbCxcbiAgICAgICAgICAgIHVwZGF0ZTogeyBib3g6IG51bGwsIGFwcHM6IG51bGwgfSxcbiAgICAgICAgICAgIGlzRGV2OiBmYWxzZSxcbiAgICAgICAgICAgIHByb2dyZXNzOiB7fVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzID0gW107XG5cbiAgICAgICAgdGhpcy5zZXRUb2tlbihsb2NhbFN0b3JhZ2UudG9rZW4pO1xuICAgIH1cblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0UmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWFkeSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX3JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lci5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUub25SZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5fcmVhZHkpIGNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIucHVzaChjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUub25Db25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIucHVzaChjYWxsYmFjayk7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMuX2NvbmZpZyk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0VXNlckluZm8gPSBmdW5jdGlvbiAodXNlckluZm8pIHtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8ga2VlcCB0aGUgYW5ndWxhciBiaW5kaW5ncyBhbGl2ZSwgc2V0IGVhY2ggcHJvcGVydHkgaW5kaXZpZHVhbGx5XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmVtYWlsID0gdXNlckluZm8uZW1haWw7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmFkbWluID0gISF1c2VySW5mby5hZG1pbjtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZ3JhdmF0YXIgPSAnaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8nICsgbWQ1LmNyZWF0ZUhhc2godXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSkgKyAnLmpwZz9zPTI0JmQ9bW0nO1xuICAgICAgICB0aGlzLl91c2VySW5mby5ncmF2YXRhckh1Z2UgPSAnaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8nICsgbWQ1LmNyZWF0ZUhhc2godXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSkgKyAnLmpwZz9zPTEyOCZkPW1tJztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGtlZXAgdGhlIGFuZ3VsYXIgYmluZGluZ3MgYWxpdmUsIHNldCBlYWNoIHByb3BlcnR5IGluZGl2aWR1YWxseSAoVE9ETzoganVzdCB1c2UgYW5ndWxhci5jb3B5ID8pXG4gICAgICAgIHRoaXMuX2NvbmZpZy5hcGlTZXJ2ZXJPcmlnaW4gPSBjb25maWcuYXBpU2VydmVyT3JpZ2luO1xuICAgICAgICB0aGlzLl9jb25maWcud2ViU2VydmVyT3JpZ2luID0gY29uZmlnLndlYlNlcnZlck9yaWdpbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLnZlcnNpb24gPSBjb25maWcudmVyc2lvbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmZxZG4gPSBjb25maWcuZnFkbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmlwID0gY29uZmlnLmlwO1xuICAgICAgICB0aGlzLl9jb25maWcucmV2aXNpb24gPSBjb25maWcucmV2aXNpb247XG4gICAgICAgIHRoaXMuX2NvbmZpZy51cGRhdGUgPSBjb25maWcudXBkYXRlO1xuICAgICAgICB0aGlzLl9jb25maWcuaXNEZXYgPSBjb25maWcuaXNEZXY7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5wcm9ncmVzcyA9IGNvbmZpZy5wcm9ncmVzcztcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoYXQuX2NvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEluc3RhbGxlZEFwcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YWxsZWRBcHBzO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyB0b2tlbjtcbiAgICAgICAgaWYgKCF0b2tlbikgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIGVsc2UgbG9jYWxTdG9yYWdlLnRva2VuID0gdG9rZW47XG4gICAgICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XG4gICAgfTtcblxuICAgIC8qXG4gICAgICogUmVzdCBBUEkgd3JhcHBlcnNcbiAgICAgKi9cbiAgICBDbGllbnQucHJvdG90eXBlLmNvbmZpZyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vY29uZmlnJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVzZXJJbmZvID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9wcm9maWxlJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoaWQsIG1hbmlmZXN0LCBwYXNzd29yZCwgdGl0bGUsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwU3RvcmVJZDogaWQsIG1hbmlmZXN0OiBtYW5pZmVzdCwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzL2luc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIHB1dCBuZXcgYXBwIHdpdGggYW1lbmRlZCB0aXRsZSBpbiBjYWNoZVxuICAgICAgICAgICAgZGF0YS5tYW5pZmVzdCA9IHsgdGl0bGU6IHRpdGxlIH07XG4gICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnB1c2goZGF0YSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGFwcElkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IHBhc3N3b3JkOiBwYXNzd29yZCB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGFwcElkICsgJy91bmluc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKGlkLCBwYXNzd29yZCwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwSWQ6IGlkLCBwYXNzd29yZDogcGFzc3dvcmQsIGxvY2F0aW9uOiBjb25maWcubG9jYXRpb24sIHBvcnRCaW5kaW5nczogY29uZmlnLnBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246IGNvbmZpZy5hY2Nlc3NSZXN0cmljdGlvbiB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9jb25maWd1cmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKGlkLCBtYW5pZmVzdCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3VwZGF0ZScsIHsgbWFuaWZlc3Q6IG1hbmlmZXN0LCBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKGlkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvc3RhcnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RvcEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0b3AnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudmVyc2lvbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmlzU2VydmVyRmlyc3RUaW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9zdGF0dXMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICFkYXRhLmFjdGl2YXRlZCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYXBwaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoYXBwaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJywgeyBhcHBpZDogYXBwaWQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2FwcHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwID0gZnVuY3Rpb24gKGFwcElkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXBwRm91bmQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzLnNvbWUoZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgaWYgKGFwcC5pZCA9PT0gYXBwSWQpIHtcbiAgICAgICAgICAgICAgICBhcHBGb3VuZCA9IGFwcDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYXBwRm91bmQpIHJldHVybiBjYWxsYmFjayhudWxsLCBhcHBGb3VuZCk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignQXBwIG5vdCBmb3VuZCcpKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBMb2dTdHJlYW0gPSBmdW5jdGlvbiAoYXBwSWQpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9nc3RyZWFtJyk7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nVXJsID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHJldHVybiAnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9ncz9hY2Nlc3NfdG9rZW49JyArIHRoaXMuX3Rva2VuO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldEFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBhZG1pbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBhZG1pbjogYWRtaW5cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzLycgKyB1c2VybmFtZSArICcvYWRtaW4nLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlQWRtaW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgc2V0dXBUb2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9hY3RpdmF0ZT9zZXR1cFRva2VuPScgKyBzZXR1cFRva2VuLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgICAgICAgIHRoYXQuc2V0VXNlckluZm8oeyB1c2VybmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCwgYWRtaW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWN0aXZhdGVkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxpc3RVc2VycyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvdXNlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0T0F1dGhDbGllbnRzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9vYXV0aC9jbGllbnRzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmNsaWVudHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZGVsVG9rZW5zQnlDbGllbnRJZCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvYXBpL3YxL29hdXRoL2NsaWVudHMvJyArIGlkICsgJy90b2tlbnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vdXBkYXRlJywgeyBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlYm9vdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vcmVib290Jykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmJhY2t1cCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2Nsb3Vkcm9uL2JhY2t1cHMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0Q2VydGlmaWNhdGUgPSBmdW5jdGlvbiAoY2VydGlmaWNhdGVGaWxlLCBrZXlGaWxlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zb2xlLmxvZygnd2lsbCBzZXQgY2VydGlmaWNhdGUnKTtcblxuICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZmQuYXBwZW5kKCdjZXJ0aWZpY2F0ZScsIGNlcnRpZmljYXRlRmlsZSk7XG4gICAgICAgIGZkLmFwcGVuZCgna2V5Jywga2V5RmlsZSk7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9jZXJ0aWZpY2F0ZScsIGZkLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ3JhcGhzID0gZnVuY3Rpb24gKHRhcmdldHMsIGZyb20sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldHMsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAgICAgICAgZnJvbTogZnJvbVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9ncmFwaHMnLCBjb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlVXNlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgZW1haWwsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2VycycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZW1vdmVVc2VyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cCh7IG1ldGhvZDogJ0RFTEVURScsIHVybDogJy9hcGkvdjEvdXNlcnMvJyArIHVzZXJuYW1lLCBkYXRhOiBkYXRhLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfX0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKGN1cnJlbnRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgcGFzc3dvcmQ6IGN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiBuZXdQYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvdXNlcnMvJyArIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lICsgJy9wYXNzd29yZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hDb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGNhbGxiYWNrID0gdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICB0aGlzLmNvbmZpZyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICB0aGF0LnNldENvbmZpZyhyZXN1bHQpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBpbnNlcnQgb3IgdXBkYXRlIG5ldyBhcHBzXG4gICAgICAgICAgICBhcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Ll9pbnN0YWxsZWRBcHBzW2ldLmlkID09PSBhcHAuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYXBwLCB0aGF0Ll9pbnN0YWxsZWRBcHBzW2ZvdW5kXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5wdXNoKGFwcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgb2xkIGVudHJpZXMsIGdvaW5nIGJhY2t3YXJkcyB0byBhbGxvdyBzcGxpY2luZ1xuICAgICAgICAgICAgZm9yKHZhciBpID0gdGhhdC5faW5zdGFsbGVkQXBwcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGlmICghYXBwcy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7IHJldHVybiAoZWxlbS5pZCA9PT0gdGhhdC5faW5zdGFsbGVkQXBwc1tpXS5pZCk7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2luc3RhbGxlZEFwcHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRva2VuKG51bGwpO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9O1xuXG4gICAgICAgIC8vIGxvZ291dCBmcm9tIE9BdXRoIHNlc3Npb25cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9zZXNzaW9uL2xvZ291dCc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZXhjaGFuZ2VDb2RlRm9yVG9rZW4gPSBmdW5jdGlvbiAoYXV0aENvZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXG4gICAgICAgICAgICBjb2RlOiBhdXRoQ29kZSxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5fY2xpZW50SWQsXG4gICAgICAgICAgICBjbGllbnRfc2VjcmV0OiB0aGlzLl9jbGllbnRTZWNyZXRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL29hdXRoL3Rva2VuP3Jlc3BvbnNlX3R5cGU9dG9rZW4mY2xpZW50X2lkPScgKyB0aGlzLl9jbGllbnRJZCwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBjbGllbnQgPSBuZXcgQ2xpZW50KCk7XG4gICAgcmV0dXJuIGNsaWVudDtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwU3RvcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyR0aW1lb3V0JywgJ0NsaWVudCcsICdBcHBTdG9yZScsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHRpbWVvdXQsIENsaWVudCwgQXBwU3RvcmUpIHtcbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7IGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7IH0pO1xuXG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG4gICAgJHNjb3BlLmFwcHMgPSBbXTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuXG4gICAgJHNjb3BlLmFwcGluc3RhbGwgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGFwcDoge30sXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBwb3J0QmluZGluZ3M6IHt9LFxuICAgICAgICBhY2Nlc3NSZXN0cmljdGlvbjogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dJbnN0YWxsID0gZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICBBcHBTdG9yZS5nZXRNYW5pZmVzdChhcHAuaWQsIGZ1bmN0aW9uIChlcnJvciwgbWFuaWZlc3QpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBhZGQgbWFuaWZlc3QgdG8gYXBwIG9iamVjdFxuICAgICAgICAgICAgYXBwLm1hbmlmZXN0ID0gbWFuaWZlc3Q7XG5cbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFwcCA9IGFwcDtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmxvY2F0aW9uID0gYXBwLmxvY2F0aW9uO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzID0gbWFuaWZlc3QudGNwUG9ydHM7XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hY2Nlc3NSZXN0cmljdGlvbiA9IGFwcC5hY2Nlc3NSZXN0cmljdGlvbiB8fCAnJztcbiAgICAgICAgICAgIGZvciAodmFyIHBvcnQgaW4gJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzW3BvcnRdLmhvc3RQb3J0ID0gcGFyc2VJbnQocG9ydCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJyNhcHBJbnN0YWxsTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvSW5zdGFsbCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmJ1c3kgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5uYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIHZhciBwb3J0QmluZGluZ3MgPSB7IH07XG4gICAgICAgIGZvciAodmFyIGNvbnRhaW5lclBvcnQgaW4gJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0gPSAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0uaG9zdFBvcnQ7XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQuaW5zdGFsbEFwcCgkc2NvcGUuYXBwaW5zdGFsbC5hcHAuaWQsICRzY29wZS5hcHBpbnN0YWxsLmFwcC5tYW5pZmVzdCwgJHNjb3BlLmFwcGluc3RhbGwucGFzc3dvcmQsICRzY29wZS5hcHBpbnN0YWxsLmFwcC50aXRsZSwgeyBsb2NhdGlvbjogJHNjb3BlLmFwcGluc3RhbGwubG9jYXRpb24sIHBvcnRCaW5kaW5nczogcG9ydEJpbmRpbmdzLCBhY2Nlc3NSZXN0cmljdGlvbjogJHNjb3BlLmFwcGluc3RhbGwuYWNjZXNzUmVzdHJpY3Rpb24gfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwbGljYXRpb24gYWxyZWFkeSBleGlzdHMuJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwIHdpdGggdGhlIG5hbWUgJyArICRzY29wZS5hcHBpbnN0YWxsLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgaW5zdGFsbGVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IgPSB7fTtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwubG9jYXRpb24gPSAnJztcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFjY2Vzc1Jlc3RyaWN0aW9uID0gJyc7XG5cbiAgICAgICAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAgICAgJCgnI2FwcEluc3RhbGxNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYXBwcycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG5cbiAgICAgICAgQXBwU3RvcmUuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGltZW91dChyZWZyZXNoLCAxMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcHMgPSBhcHBzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZScsICckaW50ZXJ2YWwnLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlLCAkaW50ZXJ2YWwsIENsaWVudCkge1xuICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSB7fTtcblxuICAgICRzY29wZS51cGRhdGUgPSB7XG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKCEkcm91dGUuY3VycmVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGguaW5kZXhPZih1cmwpID09PSAwO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgQ2xpZW50LmxvZ291dCgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWxsYmFja1VSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2xvZ2luX2NhbGxiYWNrLmh0bWwnO1xuICAgICAgICB2YXIgc2NvcGUgPSAncm9vdCxwcm9maWxlLGFwcHMscm9sZUFkbWluJztcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9vYXV0aC9kaWFsb2cvYXV0aG9yaXplP3Jlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9JyArIENsaWVudC5fY2xpZW50SWQgKyAnJnJlZGlyZWN0X3VyaT0nICsgY2FsbGJhY2tVUkwgKyAnJnNjb3BlPScgKyBzY29wZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZXJyb3IuaHRtbD9lcnJvckNvZGU9MSc7XG4gICAgfTtcblxuICAgICRzY29wZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Vycm9yLmh0bWwnO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZU1vZGFsID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS51cGRhdGUucGFzc3dvcmQgPSAnJztcblxuICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51cGRhdGUoJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSAnSW5jb3JyZWN0IHBhc3N3b3JkJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byB1cGRhdGUuJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cbiAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LmJhY2t1cChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIFRPRE8gdGhpcyBkb2VzIGxvb2sgbGlrZSB3ZSBzaG91bGQgdXNlIHByb2dyZXNzLmpzb24/XG4gICAgICAgICAgICAvLyBub3cgc3RhcnQgcXVlcnlcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIENsaWVudC52ZXJzaW9uKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQuaXNTZXJ2ZXJGaXJzdFRpbWUoZnVuY3Rpb24gKGVycm9yLCBpc0ZpcnN0VGltZSkge1xuICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBpZiAoaXNGaXJzdFRpbWUpIHJldHVybiAkc2NvcGUuc2V0dXAoKTtcblxuICAgICAgICAvLyB3ZSB1c2UgdGhlIGNvbmZpZyByZXF1ZXN0IGFzIGFuIGluZGljYXRvciBpZiB0aGUgdG9rZW4gaXMgc3RpbGwgdmFsaWRcbiAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgcHJvYmFibHkgYXR0YWNoIHN1Y2ggYSBoYW5kbGVyIGZvciBlYWNoIHJlcXVlc3QsIGFzIHRoZSB0b2tlbiBjYW4gZ2V0IGludmFsaWRcbiAgICAgICAgLy8gYXQgYW55IHRpbWUhXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4pIHtcbiAgICAgICAgICAgIENsaWVudC5yZWZyZXNoQ29uZmlnKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDEpIHJldHVybiAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGFjdHVhbGx5IHVwZGF0ZWluZ1xuICAgICAgICAgICAgICAgIGlmIChDbGllbnQuZ2V0Q29uZmlnKCkucHJvZ3Jlc3MudXBkYXRlKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuXG4gICAgICAgICAgICAgICAgQ2xpZW50LnVzZXJJbmZvKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnNldFVzZXJJbmZvKHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnJlZnJlc2hJbnN0YWxsZWRBcHBzKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2ljayBvZmYgaW5zdGFsbGVkIGFwcHMgYW5kIGNvbmZpZyBwb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaEFwcHNUaW1lciA9ICRpbnRlcnZhbChDbGllbnQucmVmcmVzaEluc3RhbGxlZEFwcHMuYmluZChDbGllbnQpLCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWZyZXNoQ29uZmlnVGltZXIgPSAkaW50ZXJ2YWwoQ2xpZW50LnJlZnJlc2hDb25maWcuYmluZChDbGllbnQpLCA1MDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChyZWZyZXNoQXBwc1RpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHJlZnJlc2hDb25maWdUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93IG1hcmsgdGhlIENsaWVudCB0byBiZSByZWFkeVxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnNldFJlYWR5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gd2FpdCB0aWxsIHRoZSB2aWV3IGhhcyBsb2FkZWQgdW50aWwgc2hvd2luZyBhIG1vZGFsIGRpYWxvZ1xuICAgIENsaWVudC5vbkNvbmZpZyhmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIGlmIChjb25maWcucHJvZ3Jlc3MudXBkYXRlKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FjY291bnRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgJHNjb3BlLnVzZXIgPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuXG4gICAgJHNjb3BlLmFjdGl2ZUNsaWVudHMgPSBbXTtcbiAgICAkc2NvcGUudG9rZW5JblVzZSA9IG51bGw7XG5cbiAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIHBhc3N3b3JkOiAnJyxcbiAgICAgICAgbmV3UGFzc3dvcmQ6ICcnLFxuICAgICAgICBuZXdQYXNzd29yZFJlcGVhdDogJydcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcGFzc3dvcmRDaGFuZ2VSZXNldCAoZm9ybSkge1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IubmV3UGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IubmV3UGFzc3dvcmRSZXBlYXQgPSBudWxsO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLm5ld1Bhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5uZXdQYXNzd29yZFJlcGVhdCA9ICcnO1xuXG4gICAgICAgIGlmIChmb3JtKSB7XG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuZG9DaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5uZXdQYXNzd29yZFJlcGVhdCA9IG51bGw7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5idXN5ID0gdHJ1ZTtcblxuICAgICAgICBDbGllbnQuY2hhbmdlUGFzc3dvcmQoJHNjb3BlLnBhc3N3b3JkY2hhbmdlLnBhc3N3b3JkLCAkc2NvcGUucGFzc3dvcmRjaGFuZ2UubmV3UGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY2hhbmdlIHBhc3N3b3JkLicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgcGFzc3dvcmRDaGFuZ2VSZXNldChmb3JtKTtcblxuICAgICAgICAgICAgJCgnI3Bhc3N3b3JkQ2hhbmdlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dDaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgIHBhc3N3b3JkQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgJCgnI3Bhc3N3b3JkQ2hhbmdlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVtb3ZlQWNjZXNzVG9rZW5zID0gZnVuY3Rpb24gKGNsaWVudCwgZXZlbnQpIHtcbiAgICAgICAgQ2xpZW50LmRlbFRva2Vuc0J5Q2xpZW50SWQoY2xpZW50LmlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldE9BdXRoQ2xpZW50cyhmdW5jdGlvbiAoZXJyb3IsIGFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IGFjdGl2ZUNsaWVudHM7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdBcHBzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCAnQXBwU3RvcmUnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCwgQXBwU3RvcmUpIHtcbiAgICAkc2NvcGUuaW5zdGFsbGVkQXBwcyA9IENsaWVudC5nZXRJbnN0YWxsZWRBcHBzKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5hcHBjb25maWd1cmUgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGFwcDoge30sXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBwb3J0QmluZGluZ3M6IHt9LFxuICAgICAgICBhY2Nlc3NSZXN0cmljdGlvbjogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVuaW5zdGFsbCA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVwZGF0ZSA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dDb25maWd1cmUgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYXBwID0gYXBwO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmxvY2F0aW9uID0gYXBwLmxvY2F0aW9uO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBvcnRCaW5kaW5ncyA9IGFwcC5tYW5pZmVzdC50Y3BQb3J0cztcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5hY2Nlc3NSZXN0cmljdGlvbiA9IGFwcC5hY2Nlc3NSZXN0cmljdGlvbjtcblxuICAgICAgICBmb3IgKHZhciBjb250YWluZXJQb3J0IGluICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XS5ob3N0UG9ydCA9IHBhcnNlSW50KCRzY29wZS5hcHBjb25maWd1cmUuYXBwLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XSk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcjYXBwQ29uZmlndXJlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9Db25maWd1cmUgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmJ1c3kgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICB2YXIgcG9ydEJpbmRpbmdzID0geyB9O1xuICAgICAgICBmb3IgKHZhciBjb250YWluZXJQb3J0IGluICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0gPSAkc2NvcGUuYXBwY29uZmlndXJlLnBvcnRCaW5kaW5nc1tjb250YWluZXJQb3J0XS5ob3N0UG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5jb25maWd1cmVBcHAoJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAuaWQsICRzY29wZS5hcHBjb25maWd1cmUucGFzc3dvcmQsIHsgbG9jYXRpb246ICRzY29wZS5hcHBjb25maWd1cmUubG9jYXRpb24sIHBvcnRCaW5kaW5nczogcG9ydEJpbmRpbmdzLCBhY2Nlc3NSZXN0cmljdGlvbjogJHNjb3BlLmFwcGNvbmZpZ3VyZS5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwY29uZmlndXJlLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgY29uZmlndXJlZC4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yID0ge307XG4gICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYWNjZXNzUmVzdHJpY3Rpb24gPSAnJztcblxuICAgICAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXG4gICAgICAgICAgICAkKCcjYXBwQ29uZmlndXJlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVbmluc3RhbGwgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuYXBwID0gYXBwO1xuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICAkKCcjYXBwVW5pbnN0YWxsTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9Vbmluc3RhbGwgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICBDbGllbnQudW5pbnN0YWxsQXBwKCRzY29wZS5hcHB1bmluc3RhbGwuYXBwLmlkLCAkc2NvcGUuYXBwdW5pbnN0YWxsLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyNhcHBVbmluc3RhbGxNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZSA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5hcHAgPSBhcHA7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIEFwcFN0b3JlLmdldE1hbmlmZXN0KGFwcC5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5hcHAubWFuaWZlc3QgPSBtYW5pZmVzdDtcblxuICAgICAgICAgICAgJCgnI2FwcFVwZGF0ZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1VwZGF0ZSA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51cGRhdGVBcHAoJHNjb3BlLmFwcHVwZGF0ZS5hcHAuaWQsICRzY29wZS5hcHB1cGRhdGUuYXBwLm1hbmlmZXN0LCAkc2NvcGUuYXBwdXBkYXRlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmVycm9yLnBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLmFwcCA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuXG4gICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgICAgICQoJyNhcHBVcGRhdGVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgfTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignRG5zQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHsgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTsgfSk7XG5cbiAgICAkc2NvcGUucmVhZHkgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlciA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG4gICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gbnVsbDtcbiAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlID0gbnVsbDtcbiAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlTmFtZSA9ICcnO1xuICAgICRzY29wZS5rZXlGaWxlID0gbnVsbDtcbiAgICAkc2NvcGUua2V5RmlsZU5hbWUgPSAnJztcblxuICAgICRzY29wZS5zZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFwcGlkID0gJHNjb3BlLm5ha2VkRG9tYWluQXBwID8gJHNjb3BlLm5ha2VkRG9tYWluQXBwLmlkIDogJ2FkbWluJztcblxuICAgICAgICBDbGllbnQuc2V0TmFrZWREb21haW4oYXBwaWQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyBuYWtlZCBkb21haW4nLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LmJhY2t1cChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIG5vdyBzdGFydCBxdWVyeVxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tJZkRvbmUoKSB7XG4gICAgICAgICAgICAgICAgQ2xpZW50LnZlcnNpb24oZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrSWZEb25lLCAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDUwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI3VwZGF0ZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC51cGRhdGUoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkQ2VydGlmaWNhdGUnKS5vbmNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5jZXJ0aWZpY2F0ZUZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlTmFtZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkS2V5Jykub25jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUua2V5RmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgICAgICRzY29wZS5rZXlGaWxlTmFtZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXS5uYW1lO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldENlcnRpZmljYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnV2lsbCBzZXQgdGhlIGNlcnRpZmljYXRlJyk7XG5cbiAgICAgICAgaWYgKCEkc2NvcGUuY2VydGlmaWNhdGVGaWxlKSByZXR1cm4gY29uc29sZS5sb2coJ0NlcnRpZmljYXRlIG5vdCBzZXQnKTtcbiAgICAgICAgaWYgKCEkc2NvcGUua2V5RmlsZSkgcmV0dXJuIGNvbnNvbGUubG9nKCdLZXkgbm90IHNldCcpO1xuXG4gICAgICAgIENsaWVudC5zZXRDZXJ0aWZpY2F0ZSgkc2NvcGUuY2VydGlmaWNhdGVGaWxlLCAkc2NvcGUua2V5RmlsZSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQuYmluZCh3aW5kb3cubG9jYXRpb24sIHRydWUpLCAzMDAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vbkNvbmZpZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS50b2tlbkluVXNlID0gQ2xpZW50Ll90b2tlbjtcblxuICAgICAgICBDbGllbnQuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBhcHAgbGlzdCcpO1xuICAgICAgICAgICAgJHNjb3BlLmFwcHMgPSBhcHBzO1xuXG4gICAgICAgICAgICBDbGllbnQuZ2V0TmFrZWREb21haW4oZnVuY3Rpb24gKGVycm9yLCBhcHBpZCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ha2VkRG9tYWluQXBwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5hcHBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXBwc1tpXS5pZCA9PT0gYXBwaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9ICRzY29wZS5hcHBzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUucmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiLyogZ2xvYmFsOlJpY2tzaGF3OnRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdHcmFwaHNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5hY3RpdmVUYWIgPSAnZGF5JztcblxuICAgIHZhciBjcHVVc2FnZVRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKCcgK1xuICAgICdzY2FsZShkaXZpZGVTZXJpZXMoJyArXG4gICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1zeXN0ZW0sY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1uaWNlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtdXNlciksJyArXG4gICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS1pZGxlLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtc3lzdGVtLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtbmljZSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXVzZXIsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS13YWl0KSksIDEwMCksIDApJztcblxuICAgIHZhciBuZXR3b3JrVXNhZ2VUeFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5pbnRlcmZhY2UtZXRoMC5pZl9vY3RldHMudHgsIDApJztcbiAgICB2YXIgbmV0d29ya1VzYWdlUnhUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuaW50ZXJmYWNlLWV0aDAuaWZfb2N0ZXRzLnJ4LCAwKSc7XG5cbiAgICB2YXIgZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuZGYtbG9vcDAuZGZfY29tcGxleC11c2VkLCAwKSc7XG4gICAgdmFyIGRpc2tVc2FnZURhdGFVc2VkVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmRmLWxvb3AxLmRmX2NvbXBsZXgtdXNlZCwgMCknO1xuXG4gICAgZnVuY3Rpb24gcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgY3B1RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRDcHUgPSBbIF07XG5cbiAgICAgICAgaWYgKGNwdURhdGEgJiYgY3B1RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZENwdSA9IGNwdURhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuXG4gICAgICAgIHZhciBjcHVHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdDcHVDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZENwdSxcbiAgICAgICAgICAgICAgICBuYW1lOiAnY3B1J1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdVhBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuVGltZSh7IGdyYXBoOiBjcHVHcmFwaCB9KTtcbiAgICAgICAgdmFyIGNwdVlBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxuICAgICAgICAgICAgdGlja0Zvcm1hdDogUmlja3NoYXcuRml4dHVyZXMuTnVtYmVyLmZvcm1hdEtNQlQsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnQ3B1WUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNwdUhvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBjcHVHcmFwaCxcbiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oc2VyaWVzLCB4LCB5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN3YXRjaCA9ICc8c3BhbiBjbGFzcz1cImRldGFpbF9zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICcgKyBzZXJpZXMuY29sb3IgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBzd2F0Y2ggKyBzZXJpZXMubmFtZSArIFwiOiBcIiArIG5ldyBOdW1iZXIoeSkudG9GaXhlZCgyKSArICclPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNwdUdyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlck5ldHdvcmsoYWN0aXZlVGFiLCB0eERhdGEsIHJ4RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRUeCA9IFsgXSwgdHJhbnNmb3JtZWRSeCA9IFsgXTtcblxuICAgICAgICBpZiAodHhEYXRhICYmIHR4RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZFR4ID0gdHhEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcbiAgICAgICAgaWYgKHJ4RGF0YSAmJiByeERhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRSeCA9IHJ4RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdOZXR3b3JrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBzZXJpZXM6IFsge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZFR4LFxuICAgICAgICAgICAgICAgIG5hbWU6ICd0eCdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZFJ4LFxuICAgICAgICAgICAgICAgIG5hbWU6ICdyeCdcbiAgICAgICAgICAgIH0gXVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogbmV0d29ya0dyYXBoIH0pO1xuICAgICAgICB2YXIgbmV0d29ya1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogbmV0d29ya0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ05ldHdvcmtZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbmV0d29ya0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBuZXR3b3JrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvMTAyNCkudG9GaXhlZCgyKSArICdLQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBuZXR3b3JrR3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyRGlzayhhY3RpdmVUYWIsIGFwcHNVc2VkRGF0YSwgZGF0YVVzZWREYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZEFwcHNVc2VkID0gWyBdLCB0cmFuc2Zvcm1lZERhdGFVc2VkID0gWyBdO1xuXG4gICAgICAgIGlmIChhcHBzVXNlZERhdGEgJiYgYXBwc1VzZWREYXRhLmRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQXBwc1VzZWQgPSBhcHBzVXNlZERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9OyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhVXNlZERhdGEgJiYgZGF0YVVzZWREYXRhLmRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkRGF0YVVzZWQgPSBkYXRhVXNlZERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9OyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaXNrR3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnRGlza0NoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAzMCAqIDEwMjQgKiAxMDI0ICogMTAyNCwgLy8gMzBnYlxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZEFwcHNVc2VkLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdhcHBzJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZ3JlZW4nLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkRGF0YVVzZWQsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2RhdGEnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIGRpc2tYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogZGlza0dyYXBoIH0pO1xuICAgICAgICB2YXIgZGlza1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvKDEwMjQgKiAxMDI0ICogMTAyNCkpLnRvRml4ZWQoMikgKyAnR0I8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRpc2tMZWdlbmQgPSBuZXcgUmlja3NoYXcuR3JhcGguTGVnZW5kKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3RpdmVUYWIgKyAnRGlza0xlZ2VuZCcpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpc2tHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUudXBkYXRlR3JhcGhzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYWN0aXZlVGFiID0gJHNjb3BlLmFjdGl2ZVRhYjtcbiAgICAgICB2YXIgZnJvbSA9ICctMjRob3Vycyc7XG4gICAgICAgIHN3aXRjaCAoYWN0aXZlVGFiKSB7XG4gICAgICAgIGNhc2UgJ2RheSc6IGZyb20gPSAnLTI0aG91cnMnOyBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGgnOiBmcm9tID0gJy0xbW9udGgnOyBicmVhaztcbiAgICAgICAgY2FzZSAneWVhcic6IGZyb20gPSAnLTF5ZWFyJzsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKCdpbnRlcm5hbCBlcnJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5ncmFwaHMoWyBjcHVVc2FnZVRhcmdldCwgbmV0d29ya1VzYWdlVHhUYXJnZXQsIG5ldHdvcmtVc2FnZVJ4VGFyZ2V0LCBkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCwgZGlza1VzYWdlRGF0YVVzZWRUYXJnZXQgXSwgZnJvbSwgZnVuY3Rpb24gKGVycm9yLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgIHJlbmRlckNwdShhY3RpdmVUYWIsIGRhdGFbMF0pO1xuXG4gICAgICAgICAgICByZW5kZXJOZXR3b3JrKGFjdGl2ZVRhYiwgZGF0YVsxXSwgZGF0YVsyXSk7XG5cbiAgICAgICAgICAgIHJlbmRlckRpc2soYWN0aXZlVGFiLCBkYXRhWzNdLCBkYXRhWzRdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vblJlYWR5KCRzY29wZS51cGRhdGVHcmFwaHMpO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdTZWN1cml0eUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCBDbGllbnQpIHtcbiAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IFtdO1xuICAgICRzY29wZS50b2tlbkluVXNlID0gbnVsbDtcbiAgICAkc2NvcGUucmVhZHkgPSBmYWxzZTtcblxuICAgICRzY29wZS5yZW1vdmVBY2Nlc3NUb2tlbnMgPSBmdW5jdGlvbiAoY2xpZW50LCBldmVudCkge1xuICAgICAgICBjbGllbnQuX2J1c3kgPSB0cnVlO1xuXG4gICAgICAgIENsaWVudC5kZWxUb2tlbnNCeUNsaWVudElkKGNsaWVudC5pZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIGNsaWVudC5fYnVzeSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldE9BdXRoQ2xpZW50cyhmdW5jdGlvbiAoZXJyb3IsIGFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IGFjdGl2ZUNsaWVudHM7XG4gICAgICAgICAgICAkc2NvcGUucmVhZHkgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkgeyBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpOyB9KTtcblxuICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuICAgICRzY29wZS51c2VycyA9IFtdO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuXG4gICAgJHNjb3BlLnVzZXJyZW1vdmUgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIHVzZXJJbmZvOiB7fSxcbiAgICAgICAgdXNlcm5hbWU6ICcnLFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVzZXJhZGQgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBhbHJlYWR5VGFrZW46IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgZW1haWw6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5pc01lID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXIudXNlcm5hbWUgPT09IENsaWVudC5nZXRVc2VySW5mbygpLnVzZXJuYW1lO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBZG1pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiAhIXVzZXIuYWRtaW47XG4gICAgfTtcblxuICAgICRzY29wZS50b2dnbGVBZG1pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIENsaWVudC5zZXRBZG1pbih1c2VyLnVzZXJuYW1lLCAhdXNlci5hZG1pbiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgdXNlci5hZG1pbiA9ICF1c2VyLmFkbWluO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvQWRkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudXNlcmFkZC5hbHJlYWR5VGFrZW4gPSAnJztcbiAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IudXNlcm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUudXNlcmFkZC5lcnJvci5lbWFpbCA9IG51bGw7XG5cbiAgICAgICAgQ2xpZW50LmNyZWF0ZVVzZXIoJHNjb3BlLnVzZXJhZGQudXNlcm5hbWUsICRzY29wZS51c2VyYWRkLmVtYWlsLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC5hbHJlYWR5VGFrZW4gPSAkc2NvcGUudXNlcm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VzZXJuYW1lIGFscmVhZHkgdGFrZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmRleE9mKCdlbWFpbCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC5lcnJvci5lbWFpbCA9ICdJbnZhbGlkIEVtYWlsJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuZW1haWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmRleE9mKCd1c2VybmFtZScpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC5lcnJvci51c2VybmFtZSA9ICdJbnZhbGlkIFVzZXJuYW1lJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQudXNlcm5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgdXNlci4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgIHJlZnJlc2goKTtcbiAgICAgICAgICAgICQoJyN1c2VyQWRkTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVc2VyUmVtb3ZlID0gZnVuY3Rpb24gKHVzZXJJbmZvKSB7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnVzZXJuYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS51c2VySW5mbyA9IHVzZXJJbmZvO1xuICAgICAgICAkKCcjdXNlclJlbW92ZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvVXNlclJlbW92ZSA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnVzZXJuYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIGlmICgkc2NvcGUudXNlcnJlbW92ZS51c2VybmFtZSAhPT0gJHNjb3BlLnVzZXJyZW1vdmUudXNlckluZm8udXNlcm5hbWUpIHtcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnVzZXJuYW1lID0gJ1VzZXJuYW1lIGRvZXMgbm90IG1hdGNoJztcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnVzZXJuYW1lID0gJyc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQucmVtb3ZlVXNlcigkc2NvcGUudXNlcnJlbW92ZS51c2VybmFtZSwgJHNjb3BlLnVzZXJyZW1vdmUucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnBhc3N3b3JkID0gJ0luY29ycmVjdCBwYXNzd29yZCc7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZGVsZXRlIHVzZXIuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS51c2VySW5mbyA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUudXNlcm5hbWUgPSAnJztcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnBhc3N3b3JkID0gJyc7XG5cbiAgICAgICAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAgICAgJCgnI3VzZXJSZW1vdmVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgIHJlZnJlc2goKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICAgIENsaWVudC5saXN0VXNlcnMoZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBnZXQgdXNlciBsaXN0aW5nLicsIGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzdWx0LnVzZXJzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpO1xufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9