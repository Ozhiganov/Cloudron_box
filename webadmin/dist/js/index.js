"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/apps"}).when("/users",{controller:"UsersController",templateUrl:"views/users.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/apps",{controller:"AppsController",templateUrl:"views/apps.html"}).when("/dns",{controller:"DnsController",templateUrl:"views/dns.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).otherwise({redirectTo:"/"})}]);var ISTATES={ISTATE_PENDING_INSTALL:"pending_install",ISTATE_PENDING_CONFIGURE:"pending_configure",ISTATE_PENDING_UNINSTALL:"pending_uninstall",ISTATE_PENDING_RESTORE:"pending_restore",ISTATE_PENDING_UPDATE:"pending_update",ISTATE_ERROR:"error",ISTATE_INSTALLED:"installed"};app.filter("installationActive",function(){return function(e){return e===ISTATES.ISTATE_ERROR?!1:e===ISTATES.ISTATE_INSTALLED?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){switch(e){case ISTATES.ISTATE_PENDING_INSTALL:return"Installing";case ISTATES.ISTATE_PENDING_CONFIGURE:return"Configuring";case ISTATES.ISTATE_PENDING_UNINSTALL:return"Uninstalling";case ISTATES.ISTATE_PENDING_RESTORE:return"Starting";case ISTATES.ISTATE_PENDING_UPDATE:return"Updating";case ISTATES.ISTATE_ERROR:return"Error";case ISTATES.ISTATE_INSTALLED:return"Running";default:return e}}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,n,o,t){o.$set("name",o.laterName);var r=t[0],a=t[1];r&&a&&(r.$name=o.name,a.$addControl(r),e.$on("$destroy",function(){a.$removeControl(r)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,n){function o(e,n){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof n?n:JSON.stringify(n)}function t(e){return function(n,t){return 401===t?a.logout():void e(new o(t,n))}}function r(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:{box:null,apps:null},isDev:!1,progress:{},isCustomDomain:!1},this._installedApps=[],this.setToken(localStorage.token)}var a=null;return r.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},r.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},r.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},r.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+n.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm",this._userInfo.gravatarHuge="https://www.gravatar.com/avatar/"+n.createHash(e.email.toLowerCase())+".jpg?s=128&d=mm"},r.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress,this._config.isCustomDomain=e.isCustomDomain;var n=this;this._configListener.forEach(function(e){e(n._config)})},r.prototype.getInstalledApps=function(){return this._installedApps},r.prototype.getUserInfo=function(){return this._userInfo},r.prototype.getConfig=function(){return this._config},r.prototype.setToken=function(n){e.defaults.headers.common.Authorization="Bearer "+n,n?localStorage.token=n:localStorage.removeItem("token"),this._token=n},r.prototype.config=function(n){e.get("/api/v1/cloudron/config").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e)}).error(t(n))},r.prototype.userInfo=function(n){var r=this;e.get("/api/v1/profile").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):(r.setUserInfo(e),void n(null,e))}).error(t(n))},r.prototype.installApp=function(n,r,a,i,s,p){var l=this,u={appStoreId:n,manifest:r,password:a,location:s.location,portBindings:s.portBindings,accessRestriction:s.accessRestriction};e.post("/api/v1/apps/install",u).success(function(e,n){return 202!==n||"object"!=typeof e?p(new o(n,e)):(e.manifest={title:i},l._installedApps.push(e),void p(null,e.id))}).error(t(p))},r.prototype.uninstallApp=function(n,r,a){var i={password:r};e.post("/api/v1/apps/"+n+"/uninstall",i).success(function(e,n){return 202!==n?a(new o(n,e)):void a(null)}).error(t(a))},r.prototype.configureApp=function(n,r,a,i){var s={appId:n,password:r,location:a.location,portBindings:a.portBindings,accessRestriction:a.accessRestriction};e.post("/api/v1/apps/"+n+"/configure",s).success(function(e,n){return 202!==n?i(new o(n,e)):void i(null)}).error(t(i))},r.prototype.updateApp=function(n,r,a,i,s){e.post("/api/v1/apps/"+n+"/update",{manifest:r,password:i,portBindings:a}).success(function(e,n){return 202!==n?s(new o(n,e)):void s(null)}).error(t(s))},r.prototype.startApp=function(n,r){var a={};e.post("/api/v1/apps/"+n+"/start",a).success(function(e,n){return 202!==n?r(new o(n,e)):void r(null)}).error(t(r))},r.prototype.stopApp=function(n,r){var a={};e.post("/api/v1/apps/"+n+"/stop",a).success(function(e,n){return 202!==n?r(new o(n,e)):void r(null)}).error(t(r))},r.prototype.version=function(n){e.get("/api/v1/cloudron/status").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e)}).error(t(n))},r.prototype.isServerFirstTime=function(n){e.get("/api/v1/cloudron/status").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):void n(null,!e.activated)}).error(t(n))},r.prototype.getNakedDomain=function(n){e.get("/api/v1/settings/naked_domain").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e.appid)}).error(t(n))},r.prototype.setNakedDomain=function(n,r){e.post("/api/v1/settings/naked_domain",{appid:n}).success(function(e,n){return 204!==n?r(new o(n)):void r(null)}).error(t(r))},r.prototype.getApps=function(n){e.get("/api/v1/apps").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e.apps)}).error(t(n))},r.prototype.getApp=function(e,n){var o=null;return this._installedApps.some(function(n){return n.id===e?(o=n,!0):!1}),o?n(null,o):n(new Error("App not found"))},r.prototype.getAppLogStream=function(e){var n=new EventSource("/api/v1/apps/"+e+"/logstream");return n},r.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},r.prototype.setAdmin=function(n,r,a){var i={username:n,admin:r};e.post("/api/v1/users/"+n+"/admin",i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null)}).error(t(a))},r.prototype.createAdmin=function(n,r,a,i,s){var p={username:n,password:r,email:a},l=this;e.post("/api/v1/cloudron/activate?setupToken="+i,p).success(function(e,t){return 201!==t||"object"!=typeof e?s(new o(t,e)):(l.setToken(e.token),l.setUserInfo({username:n,email:a,admin:!0}),void s(null,e.activated))}).error(t(s))},r.prototype.listUsers=function(n){e.get("/api/v1/users").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e)}).error(t(n))},r.prototype.getOAuthClients=function(n){e.get("/api/v1/oauth/clients").success(function(e,t){return 200!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e.clients)}).error(t(n))},r.prototype.delTokensByClientId=function(n,r){e["delete"]("/api/v1/oauth/clients/"+n+"/tokens").success(function(e,n){return 204!==n?r(new o(n,e)):void r(null)}).error(t(r))},r.prototype.update=function(n,r){e.post("/api/v1/cloudron/update",{password:n}).success(function(e,n){return 202!==n||"object"!=typeof e?r(new o(n,e)):void r(null,e)}).error(t(r))},r.prototype.reboot=function(n){e.get("/api/v1/cloudron/reboot").success(function(e,t){return 202!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e)}).error(t(n))},r.prototype.backup=function(n){e.post("/api/v1/cloudron/backups").success(function(e,t){return 202!==t||"object"!=typeof e?n(new o(t,e)):void n(null,e)}).error(t(n))},r.prototype.setCertificate=function(n,r,a){console.log("will set certificate");var i=new FormData;i.append("certificate",n),i.append("key",r),e.post("/api/v1/cloudron/certificate",i,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,n){return 202!==n?a(new o(n,e)):void a(null)}).error(t(a))},r.prototype.graphs=function(n,r,a){var i={params:{target:n,format:"json",from:r}};e.get("/api/v1/cloudron/graphs",i).success(function(e,n){return 200!==n||"object"!=typeof e?a(new o(n,e)):void a(null,e)}).error(t(a))},r.prototype.createUser=function(n,r,a){var i={username:n,email:r};e.post("/api/v1/users",i).success(function(e,n){return 201!==n||"object"!=typeof e?a(new o(n,e)):void a(null,e)}).error(t(a))},r.prototype.removeUser=function(n,r,a){var i={password:r};e({method:"DELETE",url:"/api/v1/users/"+n,data:i,headers:{"Content-Type":"application/json"}}).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null)}).error(t(a))},r.prototype.changePassword=function(n,r,a){var i={password:n,newPassword:r};e.post("/api/v1/users/"+this._userInfo.username+"/password",i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null,e)}).error(t(a))},r.prototype.changeEmail=function(n,r,a){var i={password:r,email:n};e.put("/api/v1/users/"+this._userInfo.username,i).success(function(e,n){return 204!==n?a(new o(n,e)):void a(null,e)}).error(t(a))},r.prototype.refreshConfig=function(e){var n=this;e="function"==typeof e?e:function(){},this.config(function(o,t){return o?e(o):(n.setConfig(t),void e(null))})},r.prototype.refreshInstalledApps=function(e){var n=this;e="function"==typeof e?e:function(){},this.getApps(function(o,t){if(o)return e(o);t.forEach(function(e){for(var o=!1,t=0;t<n._installedApps.length;++t)if(n._installedApps[t].id===e.id){o=t;break}o!==!1?angular.copy(e,n._installedApps[o]):n._installedApps.push(e)});for(var r=n._installedApps.length-1;r>=0;--r)t.some(function(e){return e.id===n._installedApps[r].id})||n._installedApps.splice(r,1);e(null)})},r.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},r.prototype.exchangeCodeForToken=function(n,r){var a={grant_type:"authorization_code",code:n,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,a).success(function(e,n){return 200!==n||"object"!=typeof e?r(new o(n,e)):void r(null,e.access_token)}).error(t(r))},a=new r}]),angular.module("Application").service("AppStore",["$http","Client",function(e,n){function o(e,n){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof n?n:JSON.stringify(n)}function t(){this._appsCache={}}return t.prototype.getApps=function(t){if(null===n.getConfig().apiServerOrigin)return t(new o(420,"Enhance Your Calm"));var r=this;e.get(n.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:n.getConfig().version}}).success(function(e,n){return 200!==n?t(new o(n,e)):(e.apps.forEach(function(e){r._appsCache[e.id]||(r._appsCache[e.id]=e)}),t(null,r._appsCache))}).error(function(e,n){return t(new o(n,e))})},t.prototype.getAppById=function(e,n){if(e in this._appsCache)return n(null,this._appsCache[e]);var t=this;this.getApps(function(r){return r?n(r):e in t._appsCache?n(null,t._appsCache[e]):void n(new o(404,"Not found"))})},t.prototype.getManifest=function(t,r){if(null===n.getConfig().apiServerOrigin)return r(new o(420,"Enhance Your Calm"));var a=n.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+t+"/manifest";console.log("Getting the manifest of ",t,a),e.get(a).success(function(e,n){return 200!==n?r(new o(n,e)):r(null,e)}).error(function(e,n){return r(new o(n,e))})},new t}]),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,n,o,t){e.initialized=!1,e.userInfo=t.getUserInfo(),e.config={},e.update={error:{},password:""},e.isActive=function(e){return n.current?0===n.current.$$route.originalPath.indexOf(e):!1},e.logout=function(n){n.stopPropagation(),e.initialized=!1,t.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",n="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+t._clientId+"&redirect_uri="+e+"&scope="+n},e.setup=function(){window.location.href="/error.html?errorCode=1"},e.error=function(e){console.error(e),window.location.href="/error.html"},e.showUpdateModal=function(n){e.update.error.password=null,e.update.password="",n.$setPristine(),n.$setUntouched(),$("#updateModal").modal("show")},e.doUpdate=function(){e.update.error.password=null,t.update(e.update.password,function(n){return n?void(403===n.statusCode?(e.update.error.password="Incorrect password",e.update.password=""):console.error("Unable to update.",n)):void(window.location.href="/update.html")})},e.backup=function(){$("#backupProgressModal").modal("show"),e.initialized=!1,t.backup(function(n){function o(){t.version(function(n){return n?window.setTimeout(o,1e3):($("#backupProgressModal").modal("hide"),void(e.initialized=!0))})}n&&console.error(n),window.setTimeout(o,5e3)})},t.isServerFirstTime(function(n,r){return n?e.error(n):r?e.setup():void(localStorage.token?t.refreshConfig(function(n){return n&&401===n.statusCode?e.login():n?e.error(n):(t.getConfig().progress.update&&(window.location.href="/update.html"),void t.userInfo(function(n){return n?e.error(n):void t.refreshInstalledApps(function(n){if(n)return e.error(n);var r=o(t.refreshInstalledApps.bind(t),2e3),a=o(t.refreshConfig.bind(t),5e3);e.$on("$destroy",function(){o.cancel(r),o.cancel(a)}),t.setReady(),e.config=t.getConfig(),e.initialized=!0})}))}):e.login())}),t.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")}),["updateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,n,o){function t(n){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.password="",e.passwordchange.newPassword="",e.passwordchange.newPasswordRepeat="",n&&(n.$setPristine(),n.$setUntouched())}function r(n){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.email="",e.emailchange.password="",n&&(n.$setPristine(),n.$setUntouched())}e.user=o.getUserInfo(),e.config=o.getConfig(),e.activeClients=[],e.tokenInUse=null,e.passwordchange={busy:!1,error:{},password:"",newPassword:"",newPasswordRepeat:""},e.emailchange={busy:!1,error:{},email:"",password:""},e.doChangePassword=function(n){e.passwordchange.error.password=null,e.passwordchange.error.newPassword=null,e.passwordchange.error.newPasswordRepeat=null,e.passwordchange.busy=!0,o.changePassword(e.passwordchange.password,e.passwordchange.newPassword,function(o){return o?void(403===o.statusCode?(e.passwordchange.error.password=!0,e.passwordchange.password=""):console.error("Unable to change password.",o)):(e.passwordchange.busy=!1,t(n),void $("#passwordChangeModal").modal("hide"))})},e.doChangeEmail=function(n){e.emailchange.error.email=null,e.emailchange.error.password=null,e.emailchange.busy=!0,o.changeEmail(e.emailchange.email,e.emailchange.password,function(t){return t?void(403===t.statusCode?(e.emailchange.error.password=!0,e.emailchange.password=""):console.error("Unable to change email.",t)):(e.emailchange.busy=!1,r(n),o.userInfo(function(){}),void $("#emailChangeModal").modal("hide"))})},e.showChangePassword=function(e){t(e),$("#passwordChangeModal").modal("show")},e.showChangeEmail=function(e){r(e),$("#emailChangeModal").modal("show")},e.removeAccessTokens=function(e,n){o.delTokensByClientId(e.id,function(e){return e?console.error(e):void $(n.target).addClass("disabled")})},o.onReady(function(){e.tokenInUse=o._token,o.getOAuthClients(function(n,o){return n?console.error(n):void(e.activeClients=o)})}),["passwordChangeModal","emailChangeModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppsController",["$scope","$location","Client","AppStore",function(e,n,o,t){e.installedApps=o.getInstalledApps(),e.config=o.getConfig(),e.appconfigure={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.appuninstall={error:{},app:{},password:""},e.appupdate={error:{},app:{},password:"",manifest:{},portBindings:{}},e.reset=function(){e.appconfigure.error={},e.appconfigure.app={},e.appconfigure.location="",e.appconfigure.password="",e.appconfigure.portBindings={},e.appconfigure.accessRestriction="",e.config_form.$setPristine(),e.config_form.$setUntouched(),e.appuninstall.app={},e.appuninstall.error={},e.appuninstall.password="",e.appuninstall.manifest={},e.appuninstall.portBindings={},e.uninstall_form.$setPristine(),e.uninstall_form.$setUntouched()},e.showConfigure=function(n){e.reset(),e.appconfigure.app=n,e.appconfigure.location=n.location,e.appconfigure.portBindings=n.manifest.tcpPorts,e.appconfigure.accessRestriction=n.accessRestriction,$("#appConfigureModal").modal("show")},e.doConfigure=function(){e.appconfigure.busy=!0,e.appconfigure.error.name=null,e.appconfigure.error.password=null;var n={};for(var t in e.appconfigure.portBindings)n[t]=e.appconfigure.portBindings[t].hostPort;o.configureApp(e.appconfigure.app.id,e.appconfigure.password,{location:e.appconfigure.location,portBindings:n,accessRestriction:e.appconfigure.accessRestriction},function(n){return n?(403===n.statusCode?(e.appconfigure.error.password="Wrong password provided.",e.appconfigure.password=""):e.appconfigure.error.name="App with the name "+e.appconfigure.app.name+" cannot be configured.",void(e.appconfigure.busy=!1)):(e.appconfigure.busy=!1,$("#appConfigureModal").modal("hide"),void e.reset())})},e.showUninstall=function(n){e.reset(),e.appuninstall.app=n,$("#appUninstallModal").modal("show")},e.doUninstall=function(){e.appuninstall.error.password=null,o.uninstallApp(e.appuninstall.app.id,e.appuninstall.password,function(n){return n?void(403===n.statusCode?(e.appuninstall.password="",e.appuninstall.error.password=!0):console.error(n)):($("#appUninstallModal").modal("hide"),void e.reset())})},e.showUpdate=function(n){e.appupdate.app=n,e.appupdate.error.password=null,t.getManifest(n.appStoreId,function(o,t){if(o)return console.error(o);e.appupdate.manifest=t,e.appupdate.portBindings=n.portBindings,e.appupdate.newPortBindings=null;for(var r in e.appupdate.manifest.tcpPorts)e.appupdate.app.portBindings[r]||(e.appupdate.newPortBindings||(e.appupdate.newPortBindings={}),e.appupdate.newPortBindings[r]=e.appupdate.manifest.tcpPorts[r]);e.appupdate.obsoletePortBindings=null;for(r in e.appupdate.app.portBindings)e.appupdate.manifest.tcpPorts[r]||(e.appupdate.obsoletePortBindings||(e.appupdate.obsoletePortBindings={}),e.appupdate.obsoletePortBindings[r]=e.appupdate.app.portBindings[r]);$("#appUpdateModal").modal("show")})},e.doUpdate=function(n){e.appupdate.error.password=null,o.updateApp(e.appupdate.app.id,e.appupdate.manifest,e.appupdate.portBindings,e.appupdate.password,function(o){return o?void(403===o.statusCode?(e.appupdate.password="",e.appupdate.error.password=!0):console.error(o)):(e.appupdate.app={},e.appupdate.password="",n.$setPristine(),n.$setUntouched(),void $("#appUpdateModal").modal("hide"))})},e.cancel=function(){window.history.back()},["appConfigureModal","appUninstallModal","appUpdateModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("AppStoreController",["$scope","$location","$timeout","Client","AppStore",function(e,n,o,t,r){function a(){e.ready=!1,r.getApps(function(n,t){return n?(console.error(n),o(a,1e3)):(e.apps=t,void(e.ready=!0))})}t.onReady(function(){t.getUserInfo().admin||n.path("/")}),e.ready=!1,e.apps=[],e.config=t.getConfig(),e.appinstall={busy:!1,error:{},app:{},location:"",password:"",portBindings:{},accessRestriction:""},e.reset=function(){e.appinstall.app={},e.appinstall.location="",e.appinstall.password="",e.appinstall.portBindings={},e.appinstall.accessRestriction="",e.appinstall.error={},e.install_form.$setPristine(),e.install_form.$setUntouched()},e.showInstall=function(n){e.reset(),r.getManifest(n.id,function(o,t){return o?console.error(o):(n.manifest=t,e.appinstall.app=n,e.appinstall.location=n.location,e.appinstall.portBindings=t.tcpPorts,e.appinstall.accessRestriction=n.accessRestriction||"",void $("#appInstallModal").modal("show"))})},e.doInstall=function(){e.appinstall.busy=!0,e.appinstall.error.name=null,e.appinstall.error.password=null,e.appinstall.error.port=null;var o={};for(var r in e.appinstall.portBindings)o[r]=e.appinstall.portBindings[r].hostPort;t.installApp(e.appinstall.app.id,e.appinstall.app.manifest,e.appinstall.password,e.appinstall.app.title,{location:e.appinstall.location,portBindings:o,accessRestriction:e.appinstall.accessRestriction},function(o){return o?(409===o.statusCode&&-1!==o.message.indexOf("is reserved")?e.appinstall.error.port="This port is already in use.":409===o.statusCode?e.appinstall.error.name="Application already exists.":403===o.statusCode?(e.appinstall.error.password="Wrong password provided.",e.appinstall.password=""):e.appinstall.error.name="App with the name "+e.appinstall.app.name+" cannot be installed.",void(e.appinstall.busy=!1)):(e.appinstall.busy=!1,$("#appInstallModal").modal("hide"),e.reset(),void n.path("/apps"))})},a(),["appInstallModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]),angular.module("Application").controller("DnsController",["$scope","$location","Client",function(e,n,o){o.onReady(function(){o.getUserInfo().admin||n.path("/")}),e.ready=!1,e.user=o.getUserInfo(),e.config=o.getConfig(),e.nakedDomainApp=null,e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var n=e.nakedDomainApp?e.nakedDomainApp.id:"admin";o.setNakedDomain(n,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,o.backup(function(n){function t(){o.version(function(n){return n?window.setTimeout(t,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}n&&console.error(n),window.setTimeout(t,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,o.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(n){e.$apply(function(){e.certificateFile=n.target.files[0],e.certificateFileName=n.target.files[0].name})},document.getElementById("idKey").onchange=function(n){e.$apply(function(){e.keyFile=n.target.files[0],e.keyFileName=n.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void o.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},o.onConfig(function(){e.tokenInUse=o._token,o.getApps(function(n,t){n&&console.error("Error loading app list"),e.apps=t,o.getNakedDomain(function(n,o){if(n)return console.error(n);e.nakedDomainApp=null;for(var t=0;t<e.apps.length;t++)if(e.apps[t].id===o){e.nakedDomainApp=e.apps[t];break}e.ready=!0})})})}]),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,n,o){function t(e,n){var o=[];n&&n.datapoints&&(o=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var t=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:o,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:t}),new Rickshaw.Graph.Axis.Y({graph:t,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:t,formatter:function(e,n,o){var t='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=t+e.name+": "+new Number(o).toFixed(2)+"%<br>";return r}})}t.render()}function r(e,n,o){var t=[],r=[];n&&n.datapoints&&(t=n.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:t,name:"tx"},{color:"green",data:r,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,n,o){var t='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=t+e.name+": "+new Number(o/1024).toFixed(2)+"KB<br>";return r}})}a.render()}function a(e,n,o){var t=[],r=[];n&&n.datapoints&&(t=n.datapoints.map(function(e){return{y:e[0],x:e[1]}})),o&&o.datapoints&&(r=o.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var a=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:t,name:"apps"},{color:"green",data:r,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:a}),new Rickshaw.Graph.Axis.Y({graph:a,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:a,formatter:function(e,n,o){var t='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=t+e.name+": "+new Number(o/1073741824).toFixed(2)+"GB<br>";return r}}),new Rickshaw.Graph.Legend({graph:a,element:document.getElementById(e+"DiskLegend")})}a.render()}o.getUserInfo().admin||n.path("/"),e.activeTab="day";var i="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",s="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",p="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",l="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",u="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var n=e.activeTab,c="-24hours";switch(n){case"day":c="-24hours";break;case"month":c="-1month";break;case"year":c="-1year";break;default:console.log("internal errror")}o.graphs([i,s,p,l,u],c,function(e,o){return e?console.log(e):(t(n,o[0]),r(n,o[1],o[2]),void a(n,o[3],o[4]))})},o.onReady(e.updateGraphs)}]),angular.module("Application").controller("UsersController",["$scope","$location","Client",function(e,n,o){function t(){o.listUsers(function(n,o){return n?console.error("Unable to get user listing.",n):(e.users=o.users,void(e.ready=!0))})}o.onReady(function(){o.getUserInfo().admin||n.path("/")}),e.ready=!1,e.users=[],e.userInfo=o.getUserInfo(),e.userremove={busy:!1,error:{},userInfo:{},username:"",password:""},e.useradd={busy:!1,alreadyTaken:!1,error:{},username:"",email:""},e.isMe=function(e){return e.username===o.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){o.setAdmin(e.username,!e.admin,function(n){return n?console.error(n):void(e.admin=!e.admin)})},e.doAdd=function(){e.useradd.alreadyTaken="",e.useradd.error.username=null,e.useradd.error.email=null,o.createUser(e.useradd.username,e.useradd.email,function(n){if(n&&409===n.statusCode)return e.useradd.alreadyTaken=e.username,console.error("Username already taken");if(n&&400===n.statusCode){if(-1!==n.message.indexOf("email"))return e.useradd.error.email="Invalid Email",void(e.useradd.email="");if(-1!==n.message.indexOf("username"))return e.useradd.error.username="Invalid Username",void(e.useradd.username="")}else n&&console.error("Unable to create user.",n),t(),$("#userAddModal").modal("hide")})},e.showUserRemove=function(n){e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.userInfo=n,$("#userRemoveModal").modal("show")},e.doUserRemove=function(n){return e.userremove.error.username=null,e.userremove.error.password=null,e.userremove.username!==e.userremove.userInfo.username?(e.userremove.error.username="Username does not match",void(e.userremove.username="")):void o.removeUser(e.userremove.userInfo.id,e.userremove.password,function(o){return o&&403===o.statusCode?(e.userremove.error.password="Incorrect password",void(e.userremove.password="")):o?console.error("Unable to delete user.",o):(e.userremove.userInfo={},e.userremove.username="",e.userremove.password="",n.$setPristine(),n.$setUntouched(),$("#userRemoveModal").modal("hide"),void t())})},t(),["userAddModal","userRemoveModal"].forEach(function(e){$("#"+e).on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcHMuanMiLCJkbnMuanMiLCJncmFwaHMuanMiLCJ1c2Vycy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwicmVkaXJlY3RUbyIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsIklTVEFURVMiLCJJU1RBVEVfUEVORElOR19JTlNUQUxMIiwiSVNUQVRFX1BFTkRJTkdfQ09ORklHVVJFIiwiSVNUQVRFX1BFTkRJTkdfVU5JTlNUQUxMIiwiSVNUQVRFX1BFTkRJTkdfUkVTVE9SRSIsIklTVEFURV9QRU5ESU5HX1VQREFURSIsIklTVEFURV9FUlJPUiIsIklTVEFURV9JTlNUQUxMRUQiLCJmaWx0ZXIiLCJpbnB1dCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVxdWlyZSIsImxpbmsiLCJzY29wZSIsImVsZW0iLCJhdHRycyIsImN0cmxzIiwiJHNldCIsImxhdGVyTmFtZSIsIm1vZGVsQ3RybCIsImZvcm1DdHJsIiwiJG5hbWUiLCJuYW1lIiwiJGFkZENvbnRyb2wiLCIkb24iLCIkcmVtb3ZlQ29udHJvbCIsInNlcnZpY2UiLCIkaHR0cCIsIm1kNSIsIkNsaWVudEVycm9yIiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJFcnJvciIsImNhbGwiLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVmYXVsdEVycm9ySGFuZGxlciIsImNhbGxiYWNrIiwiZGF0YSIsInN0YXR1cyIsImNsaWVudCIsImxvZ291dCIsIkNsaWVudCIsIl9yZWFkeSIsIl9jb25maWdMaXN0ZW5lciIsIl9yZWFkeUxpc3RlbmVyIiwiX3VzZXJJbmZvIiwidXNlcm5hbWUiLCJlbWFpbCIsImFkbWluIiwiX3Rva2VuIiwiX2NsaWVudElkIiwiX2NsaWVudFNlY3JldCIsIl9jb25maWciLCJhcGlTZXJ2ZXJPcmlnaW4iLCJ3ZWJTZXJ2ZXJPcmlnaW4iLCJmcWRuIiwiaXAiLCJyZXZpc2lvbiIsInVwZGF0ZSIsImJveCIsImFwcHMiLCJpc0RldiIsInByb2dyZXNzIiwiaXNDdXN0b21Eb21haW4iLCJfaW5zdGFsbGVkQXBwcyIsInNldFRva2VuIiwibG9jYWxTdG9yYWdlIiwidG9rZW4iLCJwcm90b3R5cGUiLCJzZXRSZWFkeSIsImZvckVhY2giLCJvblJlYWR5IiwicHVzaCIsIm9uQ29uZmlnIiwic2V0VXNlckluZm8iLCJ1c2VySW5mbyIsImdyYXZhdGFyIiwiY3JlYXRlSGFzaCIsInRvTG93ZXJDYXNlIiwiZ3JhdmF0YXJIdWdlIiwic2V0Q29uZmlnIiwidmVyc2lvbiIsInRoYXQiLCJnZXRJbnN0YWxsZWRBcHBzIiwiZ2V0VXNlckluZm8iLCJnZXRDb25maWciLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJBdXRob3JpemF0aW9uIiwicmVtb3ZlSXRlbSIsImdldCIsInN1Y2Nlc3MiLCJlcnJvciIsImluc3RhbGxBcHAiLCJpZCIsIm1hbmlmZXN0IiwicGFzc3dvcmQiLCJ0aXRsZSIsImFwcFN0b3JlSWQiLCJsb2NhdGlvbiIsInBvcnRCaW5kaW5ncyIsImFjY2Vzc1Jlc3RyaWN0aW9uIiwicG9zdCIsInVuaW5zdGFsbEFwcCIsImFwcElkIiwiY29uZmlndXJlQXBwIiwidXBkYXRlQXBwIiwic3RhcnRBcHAiLCJzdG9wQXBwIiwiaXNTZXJ2ZXJGaXJzdFRpbWUiLCJhY3RpdmF0ZWQiLCJnZXROYWtlZERvbWFpbiIsImFwcGlkIiwic2V0TmFrZWREb21haW4iLCJnZXRBcHBzIiwiZ2V0QXBwIiwiYXBwRm91bmQiLCJzb21lIiwiZ2V0QXBwTG9nU3RyZWFtIiwic291cmNlIiwiRXZlbnRTb3VyY2UiLCJnZXRBcHBMb2dVcmwiLCJzZXRBZG1pbiIsInBheWxvYWQiLCJjcmVhdGVBZG1pbiIsInNldHVwVG9rZW4iLCJsaXN0VXNlcnMiLCJnZXRPQXV0aENsaWVudHMiLCJjbGllbnRzIiwiZGVsVG9rZW5zQnlDbGllbnRJZCIsInJlYm9vdCIsImJhY2t1cCIsInNldENlcnRpZmljYXRlIiwiY2VydGlmaWNhdGVGaWxlIiwia2V5RmlsZSIsImNvbnNvbGUiLCJsb2ciLCJmZCIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiQ29udGVudC1UeXBlIiwidW5kZWZpbmVkIiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiZ3JhcGhzIiwidGFyZ2V0cyIsImZyb20iLCJwYXJhbXMiLCJ0YXJnZXQiLCJmb3JtYXQiLCJjcmVhdGVVc2VyIiwicmVtb3ZlVXNlciIsInVzZXJJZCIsIm1ldGhvZCIsInVybCIsImNoYW5nZVBhc3N3b3JkIiwiY3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJjaGFuZ2VFbWFpbCIsInB1dCIsInJlZnJlc2hDb25maWciLCJyZXN1bHQiLCJyZWZyZXNoSW5zdGFsbGVkQXBwcyIsImZvdW5kIiwiaSIsImxlbmd0aCIsImNvcHkiLCJzcGxpY2UiLCJ3aW5kb3ciLCJocmVmIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW4iLCJhdXRoQ29kZSIsImdyYW50X3R5cGUiLCJjb2RlIiwicmVkaXJlY3RfdXJpIiwib3JpZ2luIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImFjY2Vzc190b2tlbiIsIkFwcFN0b3JlRXJyb3IiLCJBcHBTdG9yZSIsIl9hcHBzQ2FjaGUiLCJib3hWZXJzaW9uIiwiZ2V0QXBwQnlJZCIsImdldE1hbmlmZXN0IiwibWFuaWZlc3RVcmwiLCIkc2NvcGUiLCIkcm91dGUiLCIkaW50ZXJ2YWwiLCJpbml0aWFsaXplZCIsImlzQWN0aXZlIiwiY3VycmVudCIsIiQkcm91dGUiLCJvcmlnaW5hbFBhdGgiLCJpbmRleE9mIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJsb2dpbiIsImNhbGxiYWNrVVJMIiwic2V0dXAiLCJzaG93VXBkYXRlTW9kYWwiLCJmb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsIiQiLCJtb2RhbCIsImRvVXBkYXRlIiwiY2hlY2tJZkRvbmUiLCJzZXRUaW1lb3V0IiwiaXNGaXJzdFRpbWUiLCJyZWZyZXNoQXBwc1RpbWVyIiwiYmluZCIsInJlZnJlc2hDb25maWdUaW1lciIsImNhbmNlbCIsIm9uIiwiZmluZCIsImZvY3VzIiwiJGxvY2F0aW9uIiwicGFzc3dvcmRDaGFuZ2VSZXNldCIsInBhc3N3b3JkY2hhbmdlIiwibmV3UGFzc3dvcmRSZXBlYXQiLCJlbWFpbENoYW5nZVJlc2V0IiwiZW1haWxjaGFuZ2UiLCJ1c2VyIiwiYWN0aXZlQ2xpZW50cyIsInRva2VuSW5Vc2UiLCJidXN5IiwiZG9DaGFuZ2VQYXNzd29yZCIsImRvQ2hhbmdlRW1haWwiLCJzaG93Q2hhbmdlUGFzc3dvcmQiLCJzaG93Q2hhbmdlRW1haWwiLCJyZW1vdmVBY2Nlc3NUb2tlbnMiLCJhZGRDbGFzcyIsImluc3RhbGxlZEFwcHMiLCJhcHBjb25maWd1cmUiLCJhcHB1bmluc3RhbGwiLCJhcHB1cGRhdGUiLCJyZXNldCIsImNvbmZpZ19mb3JtIiwidW5pbnN0YWxsX2Zvcm0iLCJzaG93Q29uZmlndXJlIiwidGNwUG9ydHMiLCJkb0NvbmZpZ3VyZSIsImVudiIsImhvc3RQb3J0Iiwic2hvd1VuaW5zdGFsbCIsImRvVW5pbnN0YWxsIiwic2hvd1VwZGF0ZSIsIm5ld1BvcnRCaW5kaW5ncyIsIm9ic29sZXRlUG9ydEJpbmRpbmdzIiwiaGlzdG9yeSIsImJhY2siLCIkdGltZW91dCIsInJlZnJlc2giLCJyZWFkeSIsInBhdGgiLCJhcHBpbnN0YWxsIiwiaW5zdGFsbF9mb3JtIiwic2hvd0luc3RhbGwiLCJkb0luc3RhbGwiLCJwb3J0IiwibmFrZWREb21haW5BcHAiLCJjZXJ0aWZpY2F0ZUZpbGVOYW1lIiwia2V5RmlsZU5hbWUiLCIkcGFyZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9uY2hhbmdlIiwiJGFwcGx5IiwiZmlsZXMiLCJyZWxvYWQiLCJyZW5kZXJDcHUiLCJhY3RpdmVUYWIiLCJjcHVEYXRhIiwidHJhbnNmb3JtZWRDcHUiLCJkYXRhcG9pbnRzIiwibWFwIiwicG9pbnQiLCJ5IiwieCIsImNwdUdyYXBoIiwiUmlja3NoYXciLCJHcmFwaCIsImVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVuZGVyZXIiLCJ3aWR0aCIsImhlaWdodCIsIm1pbiIsIm1heCIsInNlcmllcyIsImNvbG9yIiwiQXhpcyIsIlRpbWUiLCJncmFwaCIsIlkiLCJvcmllbnRhdGlvbiIsInRpY2tGb3JtYXQiLCJGaXh0dXJlcyIsIk51bWJlciIsImZvcm1hdEtNQlQiLCJIb3ZlckRldGFpbCIsImZvcm1hdHRlciIsInN3YXRjaCIsImNvbnRlbnQiLCJ0b0ZpeGVkIiwicmVuZGVyIiwicmVuZGVyTmV0d29yayIsInR4RGF0YSIsInJ4RGF0YSIsInRyYW5zZm9ybWVkVHgiLCJ0cmFuc2Zvcm1lZFJ4IiwibmV0d29ya0dyYXBoIiwicmVuZGVyRGlzayIsImFwcHNVc2VkRGF0YSIsImRhdGFVc2VkRGF0YSIsInRyYW5zZm9ybWVkQXBwc1VzZWQiLCJ0cmFuc2Zvcm1lZERhdGFVc2VkIiwiZGlza0dyYXBoIiwiTGVnZW5kIiwiY3B1VXNhZ2VUYXJnZXQiLCJuZXR3b3JrVXNhZ2VUeFRhcmdldCIsIm5ldHdvcmtVc2FnZVJ4VGFyZ2V0IiwiZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQiLCJkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCIsInVwZGF0ZUdyYXBocyIsInVzZXJzIiwidXNlcnJlbW92ZSIsInVzZXJhZGQiLCJhbHJlYWR5VGFrZW4iLCJpc01lIiwiaXNBZG1pbiIsInRvZ2dsZUFkbWluIiwiZG9BZGQiLCJzaG93VXNlclJlbW92ZSIsImRvVXNlclJlbW92ZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFLQSxJQUFBQSxLQUFBQyxRQUFBQyxPQUFBLGVBQUEsVUFBQSxZQUFBLGVBR0FGLEtBQUFHLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQSxLQUNBQyxXQUFBLFVBQ0FELEtBQUEsVUFD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R0FBQXdILEdBQUEsaUJBQUEsV0FDQVYsRUFBQTlLLE1BQUF5TCxLQUFBLHFCQUFBQyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIGFuZ3VsYXI6ZmFsc2UgKi9cblxuLy8gY3JlYXRlIG1haW4gYXBwbGljYXRpb24gbW9kdWxlXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICdhbmd1bGFyLW1kNSddKTtcblxuLy8gc2V0dXAgYWxsIG1ham9yIGFwcGxpY2F0aW9uIHJvdXRlc1xuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsIHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy9hcHBzJ1xuICAgIH0pLndoZW4oJy91c2VycycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlcnMuaHRtbCdcbiAgICB9KS53aGVuKCcvYXBwc3RvcmUnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBTdG9yZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FwcHN0b3JlLmh0bWwnXG4gICAgfSkud2hlbignL2FwcHMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBzQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwcy5odG1sJ1xuICAgIH0pLndoZW4oJy9kbnMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdEbnNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9kbnMuaHRtbCdcbiAgICB9KS53aGVuKCcvYWNjb3VudCcsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FjY291bnRDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hY2NvdW50Lmh0bWwnXG4gICAgfSkud2hlbignL2dyYXBocycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0dyYXBoc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2dyYXBocy5odG1sJ1xuICAgIH0pLm90aGVyd2lzZSh7IHJlZGlyZWN0VG86ICcvJ30pO1xufV0pO1xuXG4vLyBrZWVwIGluIHN5bmMgd2l0aCBhcHBkYi5qc1xudmFyIElTVEFURVMgPSB7XG4gICAgSVNUQVRFX1BFTkRJTkdfSU5TVEFMTDogJ3BlbmRpbmdfaW5zdGFsbCcsXG4gICAgSVNUQVRFX1BFTkRJTkdfQ09ORklHVVJFOiAncGVuZGluZ19jb25maWd1cmUnLFxuICAgIElTVEFURV9QRU5ESU5HX1VOSU5TVEFMTDogJ3BlbmRpbmdfdW5pbnN0YWxsJyxcbiAgICBJU1RBVEVfUEVORElOR19SRVNUT1JFOiAncGVuZGluZ19yZXN0b3JlJyxcbiAgICBJU1RBVEVfUEVORElOR19VUERBVEU6ICdwZW5kaW5nX3VwZGF0ZScsXG4gICAgSVNUQVRFX0VSUk9SOiAnZXJyb3InLFxuICAgIElTVEFURV9JTlNUQUxMRUQ6ICdpbnN0YWxsZWQnXG59O1xuXG5hcHAuZmlsdGVyKCdpbnN0YWxsYXRpb25BY3RpdmUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSBJU1RBVEVTLklTVEFURV9FUlJPUikgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoaW5wdXQgPT09IElTVEFURVMuSVNUQVRFX0lOU1RBTExFRCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufSk7XG5cbmFwcC5maWx0ZXIoJ2luc3RhbGxhdGlvblN0YXRlTGFiZWwnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgICBjYXNlIElTVEFURVMuSVNUQVRFX1BFTkRJTkdfSU5TVEFMTDogcmV0dXJuICdJbnN0YWxsaW5nJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9QRU5ESU5HX0NPTkZJR1VSRTogcmV0dXJuICdDb25maWd1cmluZyc7XG4gICAgICAgIGNhc2UgSVNUQVRFUy5JU1RBVEVfUEVORElOR19VTklOU1RBTEw6IHJldHVybiAnVW5pbnN0YWxsaW5nJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9QRU5ESU5HX1JFU1RPUkU6IHJldHVybiAnU3RhcnRpbmcnO1xuICAgICAgICBjYXNlIElTVEFURVMuSVNUQVRFX1BFTkRJTkdfVVBEQVRFOiByZXR1cm4gJ1VwZGF0aW5nJztcbiAgICAgICAgY2FzZSBJU1RBVEVTLklTVEFURV9FUlJPUjogcmV0dXJuICdFcnJvcic7XG4gICAgICAgIGNhc2UgSVNUQVRFUy5JU1RBVEVfSU5TVEFMTEVEOiByZXR1cm4gJ1J1bm5pbmcnO1xuICAgICAgICBkZWZhdWx0OiByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbmFwcC5maWx0ZXIoJ2FjY2Vzc1Jlc3RyaWN0aW9uTGFiZWwnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnJykgcmV0dXJuICdwdWJsaWMnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyb2xlVXNlcicpIHJldHVybiAncHJpdmF0ZSc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3JvbGVBZG1pbicpIHJldHVybiAncHJpdmF0ZSAoQWRtaW5zIG9ubHkpJztcblxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcbn0pO1xuXG4vLyBjdXN0b20gZGlyZWN0aXZlIGZvciBkeW5hbWljIG5hbWVzIGluIGZvcm1zXG4vLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMzYxNjU3OC9pc3N1ZS1yZWdpc3RlcmluZy1mb3JtLWNvbnRyb2wtd2l0aC1pbnRlcnBvbGF0ZWQtbmFtZSNhbnN3ZXItMjM2MTc0MDFcbmFwcC5kaXJlY3RpdmUoJ2xhdGVyTmFtZScsIGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgLy8gKDIpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogWyc/bmdNb2RlbCcsICdeP2Zvcm0nXSwgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybHMpIHtcbiAgICAgICAgICAgIGF0dHJzLiRzZXQoJ25hbWUnLCBhdHRycy5sYXRlck5hbWUpO1xuXG4gICAgICAgICAgICB2YXIgbW9kZWxDdHJsID0gY3RybHNbMF07ICAgICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICAgICAgdmFyIGZvcm1DdHJsICA9IGN0cmxzWzFdOyAgICAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwgJiYgZm9ybUN0cmwpIHtcbiAgICAgICAgICAgICAgICBtb2RlbEN0cmwuJG5hbWUgPSBhdHRycy5uYW1lOyAgICAgICAgICAgICAgLy8gKDQpXG4gICAgICAgICAgICAgICAgZm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTsgICAgICAgICAgIC8vICgyKVxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7ICAgIC8vICg1KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xuLyogZ2xvYmFsIEV2ZW50U291cmNlICovXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLnNlcnZpY2UoJ0NsaWVudCcsIFsnJGh0dHAnLCAnbWQ1JywgZnVuY3Rpb24gKCRodHRwLCBtZDUpIHtcbiAgICB2YXIgY2xpZW50ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIENsaWVudEVycm9yKHN0YXR1c0NvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDQwMSkgcmV0dXJuIGNsaWVudC5sb2dvdXQoKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDbGllbnQoKSB7XG4gICAgICAgIHRoaXMuX3JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyID0gW107XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIgPSBbXTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogbnVsbCxcbiAgICAgICAgICAgIGVtYWlsOiBudWxsLFxuICAgICAgICAgICAgYWRtaW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3Rva2VuID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2xpZW50SWQgPSAnY2lkLXdlYmFkbWluJztcbiAgICAgICAgdGhpcy5fY2xpZW50U2VjcmV0ID0gJ3VudXNlZCc7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaVNlcnZlck9yaWdpbjogbnVsbCxcbiAgICAgICAgICAgIHdlYlNlcnZlck9yaWdpbjogbnVsbCxcbiAgICAgICAgICAgIGZxZG46IG51bGwsXG4gICAgICAgICAgICBpcDogbnVsbCxcbiAgICAgICAgICAgIHJldmlzaW9uOiBudWxsLFxuICAgICAgICAgICAgdXBkYXRlOiB7IGJveDogbnVsbCwgYXBwczogbnVsbCB9LFxuICAgICAgICAgICAgaXNEZXY6IGZhbHNlLFxuICAgICAgICAgICAgcHJvZ3Jlc3M6IHt9LFxuICAgICAgICAgICAgaXNDdXN0b21Eb21haW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2luc3RhbGxlZEFwcHMgPSBbXTtcblxuICAgICAgICB0aGlzLnNldFRva2VuKGxvY2FsU3RvcmFnZS50b2tlbik7XG4gICAgfVxuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3JlYWR5KSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5fcmVhZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yZWFkeUxpc3RlbmVyLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5vblJlYWR5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWFkeSkgY2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lci5wdXNoKGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5vbkNvbmZpZyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9jb25maWdMaXN0ZW5lci5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5fY29uZmlnKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRVc2VySW5mbyA9IGZ1bmN0aW9uICh1c2VySW5mbykge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBrZWVwIHRoZSBhbmd1bGFyIGJpbmRpbmdzIGFsaXZlLCBzZXQgZWFjaCBwcm9wZXJ0eSBpbmRpdmlkdWFsbHlcbiAgICAgICAgdGhpcy5fdXNlckluZm8udXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZW1haWwgPSB1c2VySW5mby5lbWFpbDtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uYWRtaW4gPSAhIXVzZXJJbmZvLmFkbWluO1xuICAgICAgICB0aGlzLl91c2VySW5mby5ncmF2YXRhciA9ICdodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLycgKyBtZDUuY3JlYXRlSGFzaCh1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpKSArICcuanBnP3M9MjQmZD1tbSc7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmdyYXZhdGFySHVnZSA9ICdodHRwczovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyLycgKyBtZDUuY3JlYXRlSGFzaCh1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpKSArICcuanBnP3M9MTI4JmQ9bW0nO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldENvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8ga2VlcCB0aGUgYW5ndWxhciBiaW5kaW5ncyBhbGl2ZSwgc2V0IGVhY2ggcHJvcGVydHkgaW5kaXZpZHVhbGx5IChUT0RPOiBqdXN0IHVzZSBhbmd1bGFyLmNvcHkgPylcbiAgICAgICAgdGhpcy5fY29uZmlnLmFwaVNlcnZlck9yaWdpbiA9IGNvbmZpZy5hcGlTZXJ2ZXJPcmlnaW47XG4gICAgICAgIHRoaXMuX2NvbmZpZy53ZWJTZXJ2ZXJPcmlnaW4gPSBjb25maWcud2ViU2VydmVyT3JpZ2luO1xuICAgICAgICB0aGlzLl9jb25maWcudmVyc2lvbiA9IGNvbmZpZy52ZXJzaW9uO1xuICAgICAgICB0aGlzLl9jb25maWcuZnFkbiA9IGNvbmZpZy5mcWRuO1xuICAgICAgICB0aGlzLl9jb25maWcuaXAgPSBjb25maWcuaXA7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5yZXZpc2lvbiA9IGNvbmZpZy5yZXZpc2lvbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLnVwZGF0ZSA9IGNvbmZpZy51cGRhdGU7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5pc0RldiA9IGNvbmZpZy5pc0RldjtcbiAgICAgICAgdGhpcy5fY29uZmlnLnByb2dyZXNzID0gY29uZmlnLnByb2dyZXNzO1xuICAgICAgICB0aGlzLl9jb25maWcuaXNDdXN0b21Eb21haW4gPSBjb25maWcuaXNDdXN0b21Eb21haW47XG5cbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2NvbmZpZ0xpc3RlbmVyLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGF0Ll9jb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5zdGFsbGVkQXBwcztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgdG9rZW47XG4gICAgICAgIGlmICghdG9rZW4pIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpO1xuICAgICAgICBlbHNlIGxvY2FsU3RvcmFnZS50b2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLl90b2tlbiA9IHRva2VuO1xuICAgIH07XG5cbiAgICAvKlxuICAgICAqIFJlc3QgQVBJIHdyYXBwZXJzXG4gICAgICovXG4gICAgQ2xpZW50LnByb3RvdHlwZS5jb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL2NvbmZpZycpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51c2VySW5mbyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL3Byb2ZpbGUnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgLy8gY2FjaGUgdXNlciBpbmZvXG4gICAgICAgICAgICB0aGF0LnNldFVzZXJJbmZvKGRhdGEpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoaWQsIG1hbmlmZXN0LCBwYXNzd29yZCwgdGl0bGUsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwU3RvcmVJZDogaWQsIG1hbmlmZXN0OiBtYW5pZmVzdCwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzL2luc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIHB1dCBuZXcgYXBwIHdpdGggYW1lbmRlZCB0aXRsZSBpbiBjYWNoZVxuICAgICAgICAgICAgZGF0YS5tYW5pZmVzdCA9IHsgdGl0bGU6IHRpdGxlIH07XG4gICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnB1c2goZGF0YSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGFwcElkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IHBhc3N3b3JkOiBwYXNzd29yZCB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGFwcElkICsgJy91bmluc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKGlkLCBwYXNzd29yZCwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwSWQ6IGlkLCBwYXNzd29yZDogcGFzc3dvcmQsIGxvY2F0aW9uOiBjb25maWcubG9jYXRpb24sIHBvcnRCaW5kaW5nczogY29uZmlnLnBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246IGNvbmZpZy5hY2Nlc3NSZXN0cmljdGlvbiB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9jb25maWd1cmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKGlkLCBtYW5pZmVzdCwgcG9ydEJpbmRpbmdzLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvdXBkYXRlJywgeyBtYW5pZmVzdDogbWFuaWZlc3QsIHBhc3N3b3JkOiBwYXNzd29yZCwgcG9ydEJpbmRpbmdzOiBwb3J0QmluZGluZ3MgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKGlkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvc3RhcnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RvcEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0b3AnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudmVyc2lvbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmlzU2VydmVyRmlyc3RUaW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9zdGF0dXMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICFkYXRhLmFjdGl2YXRlZCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYXBwaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoYXBwaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJywgeyBhcHBpZDogYXBwaWQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2FwcHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwID0gZnVuY3Rpb24gKGFwcElkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXBwRm91bmQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzLnNvbWUoZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgaWYgKGFwcC5pZCA9PT0gYXBwSWQpIHtcbiAgICAgICAgICAgICAgICBhcHBGb3VuZCA9IGFwcDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYXBwRm91bmQpIHJldHVybiBjYWxsYmFjayhudWxsLCBhcHBGb3VuZCk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignQXBwIG5vdCBmb3VuZCcpKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBMb2dTdHJlYW0gPSBmdW5jdGlvbiAoYXBwSWQpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9nc3RyZWFtJyk7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nVXJsID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHJldHVybiAnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9ncz9hY2Nlc3NfdG9rZW49JyArIHRoaXMuX3Rva2VuO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldEFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBhZG1pbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBhZG1pbjogYWRtaW5cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzLycgKyB1c2VybmFtZSArICcvYWRtaW4nLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlQWRtaW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgc2V0dXBUb2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9hY3RpdmF0ZT9zZXR1cFRva2VuPScgKyBzZXR1cFRva2VuLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgICAgICAgIHRoYXQuc2V0VXNlckluZm8oeyB1c2VybmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCwgYWRtaW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWN0aXZhdGVkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxpc3RVc2VycyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvdXNlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0T0F1dGhDbGllbnRzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9vYXV0aC9jbGllbnRzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmNsaWVudHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZGVsVG9rZW5zQnlDbGllbnRJZCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvYXBpL3YxL29hdXRoL2NsaWVudHMvJyArIGlkICsgJy90b2tlbnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vdXBkYXRlJywgeyBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlYm9vdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vcmVib290Jykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmJhY2t1cCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2Nsb3Vkcm9uL2JhY2t1cHMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAyIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0Q2VydGlmaWNhdGUgPSBmdW5jdGlvbiAoY2VydGlmaWNhdGVGaWxlLCBrZXlGaWxlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zb2xlLmxvZygnd2lsbCBzZXQgY2VydGlmaWNhdGUnKTtcblxuICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZmQuYXBwZW5kKCdjZXJ0aWZpY2F0ZScsIGNlcnRpZmljYXRlRmlsZSk7XG4gICAgICAgIGZkLmFwcGVuZCgna2V5Jywga2V5RmlsZSk7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9jZXJ0aWZpY2F0ZScsIGZkLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ3JhcGhzID0gZnVuY3Rpb24gKHRhcmdldHMsIGZyb20sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldHMsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAgICAgICAgZnJvbTogZnJvbVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9ncmFwaHMnLCBjb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlVXNlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgZW1haWwsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2VycycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZW1vdmVVc2VyID0gZnVuY3Rpb24gKHVzZXJJZCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAoeyBtZXRob2Q6ICdERUxFVEUnLCB1cmw6ICcvYXBpL3YxL3VzZXJzLycgKyB1c2VySWQsIGRhdGE6IGRhdGEsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9fSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBwYXNzd29yZDogY3VycmVudFBhc3N3b3JkLFxuICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld1Bhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS91c2Vycy8nICsgdGhpcy5fdXNlckluZm8udXNlcm5hbWUgKyAnL3Bhc3N3b3JkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY2hhbmdlRW1haWwgPSBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnB1dCgnL2FwaS92MS91c2Vycy8nICsgdGhpcy5fdXNlckluZm8udXNlcm5hbWUsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hDb25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGNhbGxiYWNrID0gdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICB0aGlzLmNvbmZpZyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICB0aGF0LnNldENvbmZpZyhyZXN1bHQpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnJlZnJlc2hJbnN0YWxsZWRBcHBzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICBjYWxsYmFjayA9IHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyA/IGNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5nZXRBcHBzKGZ1bmN0aW9uIChlcnJvciwgYXBwcykge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBpbnNlcnQgb3IgdXBkYXRlIG5ldyBhcHBzXG4gICAgICAgICAgICBhcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Ll9pbnN0YWxsZWRBcHBzW2ldLmlkID09PSBhcHAuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmNvcHkoYXBwLCB0aGF0Ll9pbnN0YWxsZWRBcHBzW2ZvdW5kXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5wdXNoKGFwcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgb2xkIGVudHJpZXMsIGdvaW5nIGJhY2t3YXJkcyB0byBhbGxvdyBzcGxpY2luZ1xuICAgICAgICAgICAgZm9yKHZhciBpID0gdGhhdC5faW5zdGFsbGVkQXBwcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGlmICghYXBwcy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7IHJldHVybiAoZWxlbS5pZCA9PT0gdGhhdC5faW5zdGFsbGVkQXBwc1tpXS5pZCk7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2luc3RhbGxlZEFwcHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRva2VuKG51bGwpO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9O1xuXG4gICAgICAgIC8vIGxvZ291dCBmcm9tIE9BdXRoIHNlc3Npb25cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9zZXNzaW9uL2xvZ291dCc7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZXhjaGFuZ2VDb2RlRm9yVG9rZW4gPSBmdW5jdGlvbiAoYXV0aENvZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXG4gICAgICAgICAgICBjb2RlOiBhdXRoQ29kZSxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5fY2xpZW50SWQsXG4gICAgICAgICAgICBjbGllbnRfc2VjcmV0OiB0aGlzLl9jbGllbnRTZWNyZXRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL29hdXRoL3Rva2VuP3Jlc3BvbnNlX3R5cGU9dG9rZW4mY2xpZW50X2lkPScgKyB0aGlzLl9jbGllbnRJZCwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBjbGllbnQgPSBuZXcgQ2xpZW50KCk7XG4gICAgcmV0dXJuIGNsaWVudDtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwU3RvcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyR0aW1lb3V0JywgJ0NsaWVudCcsICdBcHBTdG9yZScsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHRpbWVvdXQsIENsaWVudCwgQXBwU3RvcmUpIHtcbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7IGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7IH0pO1xuXG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG4gICAgJHNjb3BlLmFwcHMgPSBbXTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuXG4gICAgJHNjb3BlLmFwcGluc3RhbGwgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGFwcDoge30sXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBwb3J0QmluZGluZ3M6IHt9LFxuICAgICAgICBhY2Nlc3NSZXN0cmljdGlvbjogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFwcCA9IHt9O1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYWNjZXNzUmVzdHJpY3Rpb24gPSAnJztcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IgPSB7fTtcblxuICAgICAgICAkc2NvcGUuaW5zdGFsbF9mb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAkc2NvcGUuaW5zdGFsbF9mb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dJbnN0YWxsID0gZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAkc2NvcGUucmVzZXQoKTtcblxuICAgICAgICBBcHBTdG9yZS5nZXRNYW5pZmVzdChhcHAuaWQsIGZ1bmN0aW9uIChlcnJvciwgbWFuaWZlc3QpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBhZGQgbWFuaWZlc3QgdG8gYXBwIG9iamVjdFxuICAgICAgICAgICAgYXBwLm1hbmlmZXN0ID0gbWFuaWZlc3Q7XG5cbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmFwcCA9IGFwcDtcbiAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmxvY2F0aW9uID0gYXBwLmxvY2F0aW9uO1xuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwucG9ydEJpbmRpbmdzID0gbWFuaWZlc3QudGNwUG9ydHM7XG4gICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5hY2Nlc3NSZXN0cmljdGlvbiA9IGFwcC5hY2Nlc3NSZXN0cmljdGlvbiB8fCAnJztcblxuICAgICAgICAgICAgJCgnI2FwcEluc3RhbGxNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9JbnN0YWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5idXN5ID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IubmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuZXJyb3IucG9ydCA9IG51bGw7XG5cbiAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAgICAgZm9yICh2YXIgZW52IGluICRzY29wZS5hcHBpbnN0YWxsLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgcG9ydEJpbmRpbmdzW2Vudl0gPSAkc2NvcGUuYXBwaW5zdGFsbC5wb3J0QmluZGluZ3NbZW52XS5ob3N0UG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5pbnN0YWxsQXBwKCRzY29wZS5hcHBpbnN0YWxsLmFwcC5pZCwgJHNjb3BlLmFwcGluc3RhbGwuYXBwLm1hbmlmZXN0LCAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCwgJHNjb3BlLmFwcGluc3RhbGwuYXBwLnRpdGxlLCB7IGxvY2F0aW9uOiAkc2NvcGUuYXBwaW5zdGFsbC5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiBwb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiAkc2NvcGUuYXBwaW5zdGFsbC5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDkgJiYgZXJyb3IubWVzc2FnZS5pbmRleE9mKCdpcyByZXNlcnZlZCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wb3J0ID0gJ1RoaXMgcG9ydCBpcyBhbHJlYWR5IGluIHVzZS4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDA5KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwbGljYXRpb24gYWxyZWFkeSBleGlzdHMuJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwaW5zdGFsbC5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHBpbnN0YWxsLmVycm9yLm5hbWUgPSAnQXBwIHdpdGggdGhlIG5hbWUgJyArICRzY29wZS5hcHBpbnN0YWxsLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgaW5zdGFsbGVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGluc3RhbGwuYnVzeSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAkKCcjYXBwSW5zdGFsbE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG5cbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYXBwcycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG5cbiAgICAgICAgQXBwU3RvcmUuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGltZW91dChyZWZyZXNoLCAxMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcHMgPSBhcHBzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ2FwcEluc3RhbGxNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZScsICckaW50ZXJ2YWwnLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlLCAkaW50ZXJ2YWwsIENsaWVudCkge1xuICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSB7fTtcblxuICAgICRzY29wZS51cGRhdGUgPSB7XG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKCEkcm91dGUuY3VycmVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGguaW5kZXhPZih1cmwpID09PSAwO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgQ2xpZW50LmxvZ291dCgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWxsYmFja1VSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2xvZ2luX2NhbGxiYWNrLmh0bWwnO1xuICAgICAgICB2YXIgc2NvcGUgPSAncm9vdCxwcm9maWxlLGFwcHMscm9sZUFkbWluJztcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9vYXV0aC9kaWFsb2cvYXV0aG9yaXplP3Jlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9JyArIENsaWVudC5fY2xpZW50SWQgKyAnJnJlZGlyZWN0X3VyaT0nICsgY2FsbGJhY2tVUkwgKyAnJnNjb3BlPScgKyBzY29wZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZXJyb3IuaHRtbD9lcnJvckNvZGU9MSc7XG4gICAgfTtcblxuICAgICRzY29wZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Vycm9yLmh0bWwnO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZU1vZGFsID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS51cGRhdGUucGFzc3dvcmQgPSAnJztcblxuICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIENsaWVudC51cGRhdGUoJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGUuZXJyb3IucGFzc3dvcmQgPSAnSW5jb3JyZWN0IHBhc3N3b3JkJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byB1cGRhdGUuJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy91cGRhdGUuaHRtbCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjYmFja3VwUHJvZ3Jlc3NNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cbiAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICAgICAgQ2xpZW50LmJhY2t1cChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIFRPRE8gdGhpcyBkb2VzIGxvb2sgbGlrZSB3ZSBzaG91bGQgdXNlIHByb2dyZXNzLmpzb24/XG4gICAgICAgICAgICAvLyBub3cgc3RhcnQgcXVlcnlcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIENsaWVudC52ZXJzaW9uKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgNTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQuaXNTZXJ2ZXJGaXJzdFRpbWUoZnVuY3Rpb24gKGVycm9yLCBpc0ZpcnN0VGltZSkge1xuICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBpZiAoaXNGaXJzdFRpbWUpIHJldHVybiAkc2NvcGUuc2V0dXAoKTtcblxuICAgICAgICAvLyB3ZSB1c2UgdGhlIGNvbmZpZyByZXF1ZXN0IGFzIGFuIGluZGljYXRvciBpZiB0aGUgdG9rZW4gaXMgc3RpbGwgdmFsaWRcbiAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgcHJvYmFibHkgYXR0YWNoIHN1Y2ggYSBoYW5kbGVyIGZvciBlYWNoIHJlcXVlc3QsIGFzIHRoZSB0b2tlbiBjYW4gZ2V0IGludmFsaWRcbiAgICAgICAgLy8gYXQgYW55IHRpbWUhXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4pIHtcbiAgICAgICAgICAgIENsaWVudC5yZWZyZXNoQ29uZmlnKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDEpIHJldHVybiAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGFjdHVhbGx5IHVwZGF0ZWluZ1xuICAgICAgICAgICAgICAgIGlmIChDbGllbnQuZ2V0Q29uZmlnKCkucHJvZ3Jlc3MudXBkYXRlKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuXG4gICAgICAgICAgICAgICAgQ2xpZW50LnVzZXJJbmZvKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnJlZnJlc2hJbnN0YWxsZWRBcHBzKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2ljayBvZmYgaW5zdGFsbGVkIGFwcHMgYW5kIGNvbmZpZyBwb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaEFwcHNUaW1lciA9ICRpbnRlcnZhbChDbGllbnQucmVmcmVzaEluc3RhbGxlZEFwcHMuYmluZChDbGllbnQpLCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWZyZXNoQ29uZmlnVGltZXIgPSAkaW50ZXJ2YWwoQ2xpZW50LnJlZnJlc2hDb25maWcuYmluZChDbGllbnQpLCA1MDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChyZWZyZXNoQXBwc1RpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHJlZnJlc2hDb25maWdUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93IG1hcmsgdGhlIENsaWVudCB0byBiZSByZWFkeVxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xpZW50LnNldFJlYWR5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUubG9naW4oKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gd2FpdCB0aWxsIHRoZSB2aWV3IGhhcyBsb2FkZWQgdW50aWwgc2hvd2luZyBhIG1vZGFsIGRpYWxvZ1xuICAgIENsaWVudC5vbkNvbmZpZyhmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIGlmIChjb25maWcucHJvZ3Jlc3MudXBkYXRlKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBzZXR1cCBhbGwgdGhlIGRpYWxvZyBmb2N1cyBoYW5kbGluZ1xuICAgIFsndXBkYXRlTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQWNjb3VudENvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICAkc2NvcGUudXNlciA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSBDbGllbnQuZ2V0Q29uZmlnKCk7XG5cbiAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IFtdO1xuICAgICRzY29wZS50b2tlbkluVXNlID0gbnVsbDtcblxuICAgICRzY29wZS5wYXNzd29yZGNoYW5nZSA9IHtcbiAgICAgICAgYnVzeTogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7fSxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBuZXdQYXNzd29yZDogJycsXG4gICAgICAgIG5ld1Bhc3N3b3JkUmVwZWF0OiAnJ1xuICAgIH07XG5cbiAgICAkc2NvcGUuZW1haWxjaGFuZ2UgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHBhc3N3b3JkQ2hhbmdlUmVzZXQgKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLmVycm9yLm5ld1Bhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLmVycm9yLm5ld1Bhc3N3b3JkUmVwZWF0ID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5uZXdQYXNzd29yZCA9ICcnO1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRjaGFuZ2UubmV3UGFzc3dvcmRSZXBlYXQgPSAnJztcblxuICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW1haWxDaGFuZ2VSZXNldCAoZm9ybSkge1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IuZW1haWwgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZW1haWwgPSAnJztcbiAgICAgICAgJHNjb3BlLmVtYWlsY2hhbmdlLnBhc3N3b3JkID0gJyc7XG5cbiAgICAgICAgaWYgKGZvcm0pIHtcbiAgICAgICAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5kb0NoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLmVycm9yLm5ld1Bhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLmVycm9yLm5ld1Bhc3N3b3JkUmVwZWF0ID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnBhc3N3b3JkY2hhbmdlLmJ1c3kgPSB0cnVlO1xuXG4gICAgICAgIENsaWVudC5jaGFuZ2VQYXNzd29yZCgkc2NvcGUucGFzc3dvcmRjaGFuZ2UucGFzc3dvcmQsICRzY29wZS5wYXNzd29yZGNoYW5nZS5uZXdQYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjaGFuZ2UgcGFzc3dvcmQuJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5wYXNzd29yZGNoYW5nZS5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICBwYXNzd29yZENoYW5nZVJlc2V0KGZvcm0pO1xuXG4gICAgICAgICAgICAkKCcjcGFzc3dvcmRDaGFuZ2VNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZG9DaGFuZ2VFbWFpbCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lcnJvci5lbWFpbCA9IG51bGw7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgICRzY29wZS5lbWFpbGNoYW5nZS5idXN5ID0gdHJ1ZTtcblxuICAgICAgICBDbGllbnQuY2hhbmdlRW1haWwoJHNjb3BlLmVtYWlsY2hhbmdlLmVtYWlsLCAkc2NvcGUuZW1haWxjaGFuZ2UucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY2hhbmdlIGVtYWlsLicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZW1haWxjaGFuZ2UuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgZW1haWxDaGFuZ2VSZXNldChmb3JtKTtcblxuICAgICAgICAgICAgLy8gZmV0Y2ggbmV3IGluZm8gaW4gdGhlIGJhY2tncm91bmRcbiAgICAgICAgICAgIENsaWVudC51c2VySW5mbyhmdW5jdGlvbiAoKSB7fSk7XG5cbiAgICAgICAgICAgICQoJyNlbWFpbENoYW5nZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93Q2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICBwYXNzd29yZENoYW5nZVJlc2V0KGZvcm0pO1xuXG4gICAgICAgICQoJyNwYXNzd29yZENoYW5nZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dDaGFuZ2VFbWFpbCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgIGVtYWlsQ2hhbmdlUmVzZXQoZm9ybSk7XG5cbiAgICAgICAgJCgnI2VtYWlsQ2hhbmdlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVtb3ZlQWNjZXNzVG9rZW5zID0gZnVuY3Rpb24gKGNsaWVudCwgZXZlbnQpIHtcbiAgICAgICAgQ2xpZW50LmRlbFRva2Vuc0J5Q2xpZW50SWQoY2xpZW50LmlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldE9BdXRoQ2xpZW50cyhmdW5jdGlvbiAoZXJyb3IsIGFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlQ2xpZW50cyA9IGFjdGl2ZUNsaWVudHM7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ3Bhc3N3b3JkQ2hhbmdlTW9kYWwnLCAnZW1haWxDaGFuZ2VNb2RhbCddLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICQoJyMnICsgaWQpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcIlthdXRvZm9jdXNdOmZpcnN0XCIpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdBcHBzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCAnQXBwU3RvcmUnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCwgQXBwU3RvcmUpIHtcbiAgICAkc2NvcGUuaW5zdGFsbGVkQXBwcyA9IENsaWVudC5nZXRJbnN0YWxsZWRBcHBzKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5hcHBjb25maWd1cmUgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIGFwcDoge30sXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICBwb3J0QmluZGluZ3M6IHt9LFxuICAgICAgICBhY2Nlc3NSZXN0cmljdGlvbjogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVuaW5zdGFsbCA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFwcHVwZGF0ZSA9IHtcbiAgICAgICAgZXJyb3I6IHt9LFxuICAgICAgICBhcHA6IHt9LFxuICAgICAgICBwYXNzd29yZDogJycsXG4gICAgICAgIG1hbmlmZXN0OiB7fSxcbiAgICAgICAgcG9ydEJpbmRpbmdzOiB7fVxuICAgIH07XG5cbiAgICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuZXJyb3IgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5sb2NhdGlvbiA9ICcnO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUucG9ydEJpbmRpbmdzID0ge307XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYWNjZXNzUmVzdHJpY3Rpb24gPSAnJztcblxuICAgICAgICAkc2NvcGUuY29uZmlnX2Zvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICRzY29wZS5jb25maWdfZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5hcHAgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5lcnJvciA9IHt9O1xuICAgICAgICAkc2NvcGUuYXBwdW5pbnN0YWxsLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwubWFuaWZlc3QgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5wb3J0QmluZGluZ3MgPSB7fTtcblxuICAgICAgICAkc2NvcGUudW5pbnN0YWxsX2Zvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICRzY29wZS51bmluc3RhbGxfZm9ybS4kc2V0VW50b3VjaGVkKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5zaG93Q29uZmlndXJlID0gZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAkc2NvcGUucmVzZXQoKTtcblxuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmFwcCA9IGFwcDtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5sb2NhdGlvbiA9IGFwcC5sb2NhdGlvbjtcbiAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5wb3J0QmluZGluZ3MgPSBhcHAubWFuaWZlc3QudGNwUG9ydHM7XG4gICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYWNjZXNzUmVzdHJpY3Rpb24gPSBhcHAuYWNjZXNzUmVzdHJpY3Rpb247XG5cbiAgICAgICAgJCgnI2FwcENvbmZpZ3VyZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvQ29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmJ1c3kgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLmVycm9yLnBhc3N3b3JkID0gbnVsbDtcblxuICAgICAgICB2YXIgcG9ydEJpbmRpbmdzID0geyB9O1xuICAgICAgICBmb3IgKHZhciBlbnYgaW4gJHNjb3BlLmFwcGNvbmZpZ3VyZS5wb3J0QmluZGluZ3MpIHtcbiAgICAgICAgICAgIHBvcnRCaW5kaW5nc1tlbnZdID0gJHNjb3BlLmFwcGNvbmZpZ3VyZS5wb3J0QmluZGluZ3NbZW52XS5ob3N0UG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIENsaWVudC5jb25maWd1cmVBcHAoJHNjb3BlLmFwcGNvbmZpZ3VyZS5hcHAuaWQsICRzY29wZS5hcHBjb25maWd1cmUucGFzc3dvcmQsIHsgbG9jYXRpb246ICRzY29wZS5hcHBjb25maWd1cmUubG9jYXRpb24sIHBvcnRCaW5kaW5nczogcG9ydEJpbmRpbmdzLCBhY2Nlc3NSZXN0cmljdGlvbjogJHNjb3BlLmFwcGNvbmZpZ3VyZS5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwY29uZmlndXJlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwY29uZmlndXJlLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgY29uZmlndXJlZC4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcHBjb25maWd1cmUuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcGNvbmZpZ3VyZS5idXN5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICQoJyNhcHBDb25maWd1cmVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgICRzY29wZS5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVbmluc3RhbGwgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRzY29wZS5yZXNldCgpO1xuXG4gICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwuYXBwID0gYXBwO1xuXG4gICAgICAgICQoJyNhcHBVbmluc3RhbGxNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgfTtcblxuICAgICRzY29wZS5kb1VuaW5zdGFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgQ2xpZW50LnVuaW5zdGFsbEFwcCgkc2NvcGUuYXBwdW5pbnN0YWxsLmFwcC5pZCwgJHNjb3BlLmFwcHVuaW5zdGFsbC5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHB1bmluc3RhbGwucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFwcHVuaW5zdGFsbC5lcnJvci5wYXNzd29yZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCgnI2FwcFVuaW5zdGFsbE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuICAgICAgICAgICAgJHNjb3BlLnJlc2V0KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2hvd1VwZGF0ZSA9IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5hcHAgPSBhcHA7XG4gICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIEFwcFN0b3JlLmdldE1hbmlmZXN0KGFwcC5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5tYW5pZmVzdCA9IG1hbmlmZXN0O1xuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5wb3J0QmluZGluZ3MgPSBhcHAucG9ydEJpbmRpbmdzO1xuXG4gICAgICAgICAgICAvLyBkZXRlY3QgbmV3IHBvcnRiaW5kaW5nc1xuICAgICAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5uZXdQb3J0QmluZGluZ3MgPSBudWxsO1xuICAgICAgICAgICAgZm9yICh2YXIgZWxlbSBpbiAkc2NvcGUuYXBwdXBkYXRlLm1hbmlmZXN0LnRjcFBvcnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hcHB1cGRhdGUuYXBwLnBvcnRCaW5kaW5nc1tlbGVtXSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuYXBwdXBkYXRlLm5ld1BvcnRCaW5kaW5ncykgJHNjb3BlLmFwcHVwZGF0ZS5uZXdQb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLm5ld1BvcnRCaW5kaW5nc1tlbGVtXSA9ICRzY29wZS5hcHB1cGRhdGUubWFuaWZlc3QudGNwUG9ydHNbZWxlbV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRldGVjdCBvYnNvbGV0ZSBwb3J0YmluZGluZ3NcbiAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUub2Jzb2xldGVQb3J0QmluZGluZ3MgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChlbGVtIGluICRzY29wZS5hcHB1cGRhdGUuYXBwLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXBwdXBkYXRlLm1hbmlmZXN0LnRjcFBvcnRzW2VsZW1dKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5hcHB1cGRhdGUub2Jzb2xldGVQb3J0QmluZGluZ3MpICRzY29wZS5hcHB1cGRhdGUub2Jzb2xldGVQb3J0QmluZGluZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLm9ic29sZXRlUG9ydEJpbmRpbmdzW2VsZW1dID0gJHNjb3BlLmFwcHVwZGF0ZS5hcHAucG9ydEJpbmRpbmdzW2VsZW1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCcjYXBwVXBkYXRlTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvVXBkYXRlID0gZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgJHNjb3BlLmFwcHVwZGF0ZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgQ2xpZW50LnVwZGF0ZUFwcCgkc2NvcGUuYXBwdXBkYXRlLmFwcC5pZCwgJHNjb3BlLmFwcHVwZGF0ZS5tYW5pZmVzdCwgJHNjb3BlLmFwcHVwZGF0ZS5wb3J0QmluZGluZ3MsICRzY29wZS5hcHB1cGRhdGUucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUuZXJyb3IucGFzc3dvcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hcHB1cGRhdGUuYXBwID0ge307XG4gICAgICAgICAgICAkc2NvcGUuYXBwdXBkYXRlLnBhc3N3b3JkID0gJyc7XG5cbiAgICAgICAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAgICAgJCgnI2FwcFVwZGF0ZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICB9O1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ2FwcENvbmZpZ3VyZU1vZGFsJywgJ2FwcFVuaW5zdGFsbE1vZGFsJywgJ2FwcFVwZGF0ZU1vZGFsJ10uZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgJCgnIycgKyBpZCkub24oJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiW2F1dG9mb2N1c106Zmlyc3RcIikuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0Ruc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7IGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7IH0pO1xuXG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG4gICAgJHNjb3BlLnVzZXIgPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9IG51bGw7XG4gICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZSA9IG51bGw7XG4gICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZU5hbWUgPSAnJztcbiAgICAkc2NvcGUua2V5RmlsZSA9IG51bGw7XG4gICAgJHNjb3BlLmtleUZpbGVOYW1lID0gJyc7XG5cbiAgICAkc2NvcGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcHBpZCA9ICRzY29wZS5uYWtlZERvbWFpbkFwcCA/ICRzY29wZS5uYWtlZERvbWFpbkFwcC5pZCA6ICdhZG1pbic7XG5cbiAgICAgICAgQ2xpZW50LnNldE5ha2VkRG9tYWluKGFwcGlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgbmFrZWQgZG9tYWluJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC5iYWNrdXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBub3cgc3RhcnQgcXVlcnlcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIENsaWVudC52ZXJzaW9uKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrSWZEb25lLCA1MDAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyN1cGRhdGVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgICAgICBDbGllbnQudXBkYXRlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZENlcnRpZmljYXRlJykub25jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZU5hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZEtleScpLm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmtleUZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAkc2NvcGUua2V5RmlsZU5hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRDZXJ0aWZpY2F0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1dpbGwgc2V0IHRoZSBjZXJ0aWZpY2F0ZScpO1xuXG4gICAgICAgIGlmICghJHNjb3BlLmNlcnRpZmljYXRlRmlsZSkgcmV0dXJuIGNvbnNvbGUubG9nKCdDZXJ0aWZpY2F0ZSBub3Qgc2V0Jyk7XG4gICAgICAgIGlmICghJHNjb3BlLmtleUZpbGUpIHJldHVybiBjb25zb2xlLmxvZygnS2V5IG5vdCBzZXQnKTtcblxuICAgICAgICBDbGllbnQuc2V0Q2VydGlmaWNhdGUoJHNjb3BlLmNlcnRpZmljYXRlRmlsZSwgJHNjb3BlLmtleUZpbGUsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh3aW5kb3cubG9jYXRpb24ucmVsb2FkLmJpbmQod2luZG93LmxvY2F0aW9uLCB0cnVlKSwgMzAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQub25Db25maWcoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldEFwcHMoZnVuY3Rpb24gKGVycm9yLCBhcHBzKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgYXBwIGxpc3QnKTtcbiAgICAgICAgICAgICRzY29wZS5hcHBzID0gYXBwcztcblxuICAgICAgICAgICAgQ2xpZW50LmdldE5ha2VkRG9tYWluKGZ1bmN0aW9uIChlcnJvciwgYXBwaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuYXBwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFwcHNbaV0uaWQgPT09IGFwcGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSAkc2NvcGUuYXBwc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIi8qIGdsb2JhbDpSaWNrc2hhdzp0cnVlICovXG5cbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignR3JhcGhzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUuYWN0aXZlVGFiID0gJ2RheSc7XG5cbiAgICB2YXIgY3B1VXNhZ2VUYXJnZXQgPSAndHJhbnNmb3JtTnVsbCgnICtcbiAgICAnc2NhbGUoZGl2aWRlU2VyaWVzKCcgK1xuICAgICAgICAnc3VtU2VyaWVzKGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtc3lzdGVtLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtbmljZSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXVzZXIpLCcgK1xuICAgICAgICAnc3VtU2VyaWVzKGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtaWRsZSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXN5c3RlbSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LW5pY2UsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS11c2VyLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtd2FpdCkpLCAxMDApLCAwKSc7XG5cbiAgICB2YXIgbmV0d29ya1VzYWdlVHhUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuaW50ZXJmYWNlLWV0aDAuaWZfb2N0ZXRzLnR4LCAwKSc7XG4gICAgdmFyIG5ldHdvcmtVc2FnZVJ4VGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmludGVyZmFjZS1ldGgwLmlmX29jdGV0cy5yeCwgMCknO1xuXG4gICAgdmFyIGRpc2tVc2FnZUFwcHNVc2VkVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmRmLWxvb3AwLmRmX2NvbXBsZXgtdXNlZCwgMCknO1xuICAgIHZhciBkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5kZi1sb29wMS5kZl9jb21wbGV4LXVzZWQsIDApJztcblxuICAgIGZ1bmN0aW9uIHJlbmRlckNwdShhY3RpdmVUYWIsIGNwdURhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkQ3B1ID0gWyBdO1xuXG4gICAgICAgIGlmIChjcHVEYXRhICYmIGNwdURhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRDcHUgPSBjcHVEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcblxuICAgICAgICB2YXIgY3B1R3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnQ3B1Q2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICAgIHNlcmllczogW3tcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRDcHUsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2NwdSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogY3B1R3JhcGggfSk7XG4gICAgICAgIHZhciBjcHVZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IGNwdUdyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0NwdVlBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkpLnRvRml4ZWQoMikgKyAnJTxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjcHVHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJOZXR3b3JrKGFjdGl2ZVRhYiwgdHhEYXRhLCByeERhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkVHggPSBbIF0sIHRyYW5zZm9ybWVkUnggPSBbIF07XG5cbiAgICAgICAgaWYgKHR4RGF0YSAmJiB0eERhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRUeCA9IHR4RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG4gICAgICAgIGlmIChyeERhdGEgJiYgcnhEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkUnggPSByeERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuXG4gICAgICAgIHZhciBuZXR3b3JrR3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnTmV0d29ya0NoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgc2VyaWVzOiBbIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRUeCxcbiAgICAgICAgICAgICAgICBuYW1lOiAndHgnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRSeCxcbiAgICAgICAgICAgICAgICBuYW1lOiAncngnXG4gICAgICAgICAgICB9IF1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIHZhciBuZXR3b3JrWEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IG5ldHdvcmtHcmFwaCB9KTtcbiAgICAgICAgdmFyIG5ldHdvcmtZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IG5ldHdvcmtHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdOZXR3b3JrWUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogbmV0d29ya0dyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5LzEwMjQpLnRvRml4ZWQoMikgKyAnS0I8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV0d29ya0dyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckRpc2soYWN0aXZlVGFiLCBhcHBzVXNlZERhdGEsIGRhdGFVc2VkRGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRBcHBzVXNlZCA9IFsgXSwgdHJhbnNmb3JtZWREYXRhVXNlZCA9IFsgXTtcblxuICAgICAgICBpZiAoYXBwc1VzZWREYXRhICYmIGFwcHNVc2VkRGF0YS5kYXRhcG9pbnRzKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZEFwcHNVc2VkID0gYXBwc1VzZWREYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YVVzZWREYXRhICYmIGRhdGFVc2VkRGF0YS5kYXRhcG9pbnRzKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZERhdGFVc2VkID0gZGF0YVVzZWREYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGlza0dyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ0Rpc2tDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMzAgKiAxMDI0ICogMTAyNCAqIDEwMjQsIC8vIDMwZ2JcbiAgICAgICAgICAgIHNlcmllczogW3tcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRBcHBzVXNlZCxcbiAgICAgICAgICAgICAgICBuYW1lOiAnYXBwcydcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZERhdGFVc2VkLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdkYXRhJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIHZhciBkaXNrWEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IGRpc2tHcmFwaCB9KTtcbiAgICAgICAgdmFyIGRpc2tZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdEaXNrWUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRpc2tIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5LygxMDI0ICogMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpICsgJ0dCPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaXNrTGVnZW5kID0gbmV3IFJpY2tzaGF3LkdyYXBoLkxlZ2VuZCh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tMZWdlbmQnKVxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNrR3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnVwZGF0ZUdyYXBocyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFjdGl2ZVRhYiA9ICRzY29wZS5hY3RpdmVUYWI7XG4gICAgICAgdmFyIGZyb20gPSAnLTI0aG91cnMnO1xuICAgICAgICBzd2l0Y2ggKGFjdGl2ZVRhYikge1xuICAgICAgICBjYXNlICdkYXknOiBmcm9tID0gJy0yNGhvdXJzJzsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vbnRoJzogZnJvbSA9ICctMW1vbnRoJzsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3llYXInOiBmcm9tID0gJy0xeWVhcic7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiBjb25zb2xlLmxvZygnaW50ZXJuYWwgZXJycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQuZ3JhcGhzKFsgY3B1VXNhZ2VUYXJnZXQsIG5ldHdvcmtVc2FnZVR4VGFyZ2V0LCBuZXR3b3JrVXNhZ2VSeFRhcmdldCwgZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQsIGRpc2tVc2FnZURhdGFVc2VkVGFyZ2V0IF0sIGZyb20sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICByZW5kZXJDcHUoYWN0aXZlVGFiLCBkYXRhWzBdKTtcblxuICAgICAgICAgICAgcmVuZGVyTmV0d29yayhhY3RpdmVUYWIsIGRhdGFbMV0sIGRhdGFbMl0pO1xuXG4gICAgICAgICAgICByZW5kZXJEaXNrKGFjdGl2ZVRhYiwgZGF0YVszXSwgZGF0YVs0XSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQub25SZWFkeSgkc2NvcGUudXBkYXRlR3JhcGhzKTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgQ2xpZW50Lm9uUmVhZHkoZnVuY3Rpb24gKCkgeyBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpOyB9KTtcblxuICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuICAgICRzY29wZS51c2VycyA9IFtdO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuXG4gICAgJHNjb3BlLnVzZXJyZW1vdmUgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIHVzZXJJbmZvOiB7fSxcbiAgICAgICAgdXNlcm5hbWU6ICcnLFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVzZXJhZGQgPSB7XG4gICAgICAgIGJ1c3k6IGZhbHNlLFxuICAgICAgICBhbHJlYWR5VGFrZW46IGZhbHNlLFxuICAgICAgICBlcnJvcjoge30sXG4gICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgZW1haWw6ICcnXG4gICAgfTtcblxuICAgICRzY29wZS5pc01lID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXIudXNlcm5hbWUgPT09IENsaWVudC5nZXRVc2VySW5mbygpLnVzZXJuYW1lO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBZG1pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiAhIXVzZXIuYWRtaW47XG4gICAgfTtcblxuICAgICRzY29wZS50b2dnbGVBZG1pbiA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIENsaWVudC5zZXRBZG1pbih1c2VyLnVzZXJuYW1lLCAhdXNlci5hZG1pbiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgdXNlci5hZG1pbiA9ICF1c2VyLmFkbWluO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvQWRkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudXNlcmFkZC5hbHJlYWR5VGFrZW4gPSAnJztcbiAgICAgICAgJHNjb3BlLnVzZXJhZGQuZXJyb3IudXNlcm5hbWUgPSBudWxsO1xuICAgICAgICAkc2NvcGUudXNlcmFkZC5lcnJvci5lbWFpbCA9IG51bGw7XG5cbiAgICAgICAgQ2xpZW50LmNyZWF0ZVVzZXIoJHNjb3BlLnVzZXJhZGQudXNlcm5hbWUsICRzY29wZS51c2VyYWRkLmVtYWlsLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC5hbHJlYWR5VGFrZW4gPSAkc2NvcGUudXNlcm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VzZXJuYW1lIGFscmVhZHkgdGFrZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmRleE9mKCdlbWFpbCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC5lcnJvci5lbWFpbCA9ICdJbnZhbGlkIEVtYWlsJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQuZW1haWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmRleE9mKCd1c2VybmFtZScpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmFkZC5lcnJvci51c2VybmFtZSA9ICdJbnZhbGlkIFVzZXJuYW1lJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJhZGQudXNlcm5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgdXNlci4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgIHJlZnJlc2goKTtcbiAgICAgICAgICAgICQoJyN1c2VyQWRkTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dVc2VyUmVtb3ZlID0gZnVuY3Rpb24gKHVzZXJJbmZvKSB7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnVzZXJuYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS51c2VySW5mbyA9IHVzZXJJbmZvO1xuICAgICAgICAkKCcjdXNlclJlbW92ZU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRvVXNlclJlbW92ZSA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnVzZXJuYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUuZXJyb3IucGFzc3dvcmQgPSBudWxsO1xuXG4gICAgICAgIGlmICgkc2NvcGUudXNlcnJlbW92ZS51c2VybmFtZSAhPT0gJHNjb3BlLnVzZXJyZW1vdmUudXNlckluZm8udXNlcm5hbWUpIHtcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnVzZXJuYW1lID0gJ1VzZXJuYW1lIGRvZXMgbm90IG1hdGNoJztcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnVzZXJuYW1lID0gJyc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQucmVtb3ZlVXNlcigkc2NvcGUudXNlcnJlbW92ZS51c2VySW5mby5pZCwgJHNjb3BlLnVzZXJyZW1vdmUucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLmVycm9yLnBhc3N3b3JkID0gJ0luY29ycmVjdCBwYXNzd29yZCc7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZGVsZXRlIHVzZXIuJywgZXJyb3IpO1xuXG4gICAgICAgICAgICAkc2NvcGUudXNlcnJlbW92ZS51c2VySW5mbyA9IHt9O1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJyZW1vdmUudXNlcm5hbWUgPSAnJztcbiAgICAgICAgICAgICRzY29wZS51c2VycmVtb3ZlLnBhc3N3b3JkID0gJyc7XG5cbiAgICAgICAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblxuICAgICAgICAgICAgJCgnI3VzZXJSZW1vdmVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgIHJlZnJlc2goKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICAgIENsaWVudC5saXN0VXNlcnMoZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBnZXQgdXNlciBsaXN0aW5nLicsIGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzdWx0LnVzZXJzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpO1xuXG4gICAgLy8gc2V0dXAgYWxsIHRoZSBkaWFsb2cgZm9jdXMgaGFuZGxpbmdcbiAgICBbJ3VzZXJBZGRNb2RhbCcsICd1c2VyUmVtb3ZlTW9kYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkKCcjJyArIGlkKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJbYXV0b2ZvY3VzXTpmaXJzdFwiKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==