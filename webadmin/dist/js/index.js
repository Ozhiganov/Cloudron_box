"use strict";var app=angular.module("Application",["ngRoute","ngAnimate","angular-md5"]);app.config(["$routeProvider",function(e){e.when("/",{redirectTo:"/apps"}).when("/dashboard",{controller:"DashboardController",templateUrl:"views/dashboard.html"}).when("/usercreate",{controller:"UserCreateController",templateUrl:"views/usercreate.html"}).when("/userpassword",{controller:"UserPasswordController",templateUrl:"views/userpassword.html"}).when("/userlist",{controller:"UserListController",templateUrl:"views/userlist.html"}).when("/appstore",{controller:"AppStoreController",templateUrl:"views/appstore.html"}).when("/apps",{controller:"AppListController",templateUrl:"views/applist.html"}).when("/app/:appStoreId/install",{controller:"AppInstallController",templateUrl:"views/appinstall.html"}).when("/app/:appId/configure",{controller:"AppConfigureController",templateUrl:"views/appconfigure.html"}).when("/app/:appId/details",{controller:"AppDetailsController",templateUrl:"views/appdetails.html"}).when("/dns",{controller:"DnsController",templateUrl:"views/dns.html"}).when("/account",{controller:"AccountController",templateUrl:"views/account.html"}).when("/graphs",{controller:"GraphsController",templateUrl:"views/graphs.html"}).when("/security",{controller:"SecurityController",templateUrl:"views/security.html"}).otherwise({redirectTo:"/"})}]),app.filter("installationActive",function(){return function(e){return"error"===e?!1:"installed"===e?!1:!0}}),app.filter("installationStateLabel",function(){return function(e){return"error"===e?"Error":"subdomain_error"===e?"Error":"installed"===e?"Installed":"downloading_image"===e?"Downloading":"pending_install"===e?"Installing":"pending_uninstall"===e?"Uninstalling":"creating_container"===e?"Container":"downloading_manifest"===e?"Manifest":"creating_volume"===e?"Volume":"registering_subdomain"===e?"Subdomain":"allocated_oauth_credentials"===e?"OAuth":e}}),app.filter("accessRestrictionLabel",function(){return function(e){return""===e?"public":"roleUser"===e?"private":"roleAdmin"===e?"private (Admins only)":e}}),app.directive("laterName",function(){return{restrict:"A",require:["?ngModel","^?form"],link:function(e,t,n,o){n.$set("name",n.laterName);var r=o[0],i=o[1];r&&i&&(r.$name=n.name,i.$addControl(r),e.$on("$destroy",function(){i.$removeControl(r)}))}}}),angular.module("Application").service("Client",["$http","md5",function(e,t){function n(e,t){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof t?t:JSON.stringify(t)}function o(e){return function(t,o){return 401===o?i.logout():void e(new n(o,t))}}function r(){this._ready=!1,this._configListener=[],this._readyListener=[],this._userInfo={username:null,email:null,admin:!1},this._token=null,this._clientId="cid-webadmin",this._clientSecret="unused",this._config={apiServerOrigin:null,webServerOrigin:null,fqdn:null,ip:null,revision:null,update:null,isDev:!1,progress:{}},this._installedApps=[],this.setToken(localStorage.token)}var i=null;return r.prototype.setReady=function(){this._ready||(this._ready=!0,this._readyListener.forEach(function(e){e()}))},r.prototype.onReady=function(e){this._ready&&e(),this._readyListener.push(e)},r.prototype.onConfig=function(e){this._configListener.push(e),e(this._config)},r.prototype.setUserInfo=function(e){this._userInfo.username=e.username,this._userInfo.email=e.email,this._userInfo.admin=!!e.admin,this._userInfo.gravatar="https://www.gravatar.com/avatar/"+t.createHash(e.email.toLowerCase())+".jpg?s=24&d=mm",this._userInfo.gravatarHuge="https://www.gravatar.com/avatar/"+t.createHash(e.email.toLowerCase())+".jpg?s=128&d=mm"},r.prototype.setConfig=function(e){this._config.apiServerOrigin=e.apiServerOrigin,this._config.webServerOrigin=e.webServerOrigin,this._config.version=e.version,this._config.fqdn=e.fqdn,this._config.ip=e.ip,this._config.revision=e.revision,this._config.update=e.update,this._config.isDev=e.isDev,this._config.progress=e.progress;var t=this;this._configListener.forEach(function(e){e(t._config)})},r.prototype.getInstalledApps=function(){return this._installedApps},r.prototype.getUserInfo=function(){return this._userInfo},r.prototype.getConfig=function(){return this._config},r.prototype.setToken=function(t){e.defaults.headers.common.Authorization="Bearer "+t,t?localStorage.token=t:localStorage.removeItem("token"),this._token=t},r.prototype.config=function(t){e.get("/api/v1/cloudron/config").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.userInfo=function(t){e.get("/api/v1/profile").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.installApp=function(t,r,i,a,s,l){var c=this,p={appStoreId:t,version:r,password:i,location:s.location,portBindings:s.portBindings,accessRestriction:s.accessRestriction};e.post("/api/v1/apps/install",p).success(function(e,t){return 202!==t||"object"!=typeof e?l(new n(t,e)):(e.manifest={title:a},c._installedApps.push(e),void l(null,e.id))}).error(o(l))},r.prototype.uninstallApp=function(t,r,i){var a={password:r};e.post("/api/v1/apps/"+t+"/uninstall",a).success(function(e,t){return 202!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.configureApp=function(t,r,i,a){var s={appId:t,password:r,location:i.location,portBindings:i.portBindings,accessRestriction:i.accessRestriction};e.post("/api/v1/apps/"+t+"/configure",s).success(function(e,t){return 202!==t?a(new n(t,e)):void a(null)}).error(o(a))},r.prototype.updateApp=function(t,r,i,a){e.post("/api/v1/apps/"+t+"/update",{version:r,password:i}).success(function(e,t){return 202!==t?a(new n(t,e)):void a(null)}).error(o(a))},r.prototype.startApp=function(t,r){var i={};e.post("/api/v1/apps/"+t+"/start",i).success(function(e,t){return 202!==t?r(new n(t,e)):void r(null)}).error(o(r))},r.prototype.stopApp=function(t,r){var i={};e.post("/api/v1/apps/"+t+"/stop",i).success(function(e,t){return 202!==t?r(new n(t,e)):void r(null)}).error(o(r))},r.prototype.version=function(t){e.get("/api/v1/cloudron/status").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.isServerFirstTime=function(t){e.get("/api/v1/cloudron/status").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,!e.activated)}).error(o(t))},r.prototype.getNakedDomain=function(t){e.get("/api/v1/settings/naked_domain").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.appid)}).error(o(t))},r.prototype.setNakedDomain=function(t,r){e.post("/api/v1/settings/naked_domain",{appid:t}).success(function(e,t){return 204!==t?r(new n(t)):void r(null)}).error(o(r))},r.prototype.getApps=function(t){e.get("/api/v1/apps").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.apps)}).error(o(t))},r.prototype.getApp=function(e,t){var n=null;return this._installedApps.some(function(t){return t.id===e?(n=t,!0):!1}),n?t(null,n):t(new Error("App not found"))},r.prototype.getAppLogStream=function(e){var t=new EventSource("/api/v1/apps/"+e+"/logstream");return t},r.prototype.getAppLogUrl=function(e){return"/api/v1/apps/"+e+"/logs?access_token="+this._token},r.prototype.setAdmin=function(t,r,i){var a={username:t,admin:r};e.post("/api/v1/users/"+t+"/admin",a).success(function(e,t){return 204!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.createAdmin=function(t,r,i,a,s){var l={username:t,password:r,email:i},c=this;e.post("/api/v1/cloudron/activate?setupToken="+a,l).success(function(e,o){return 201!==o||"object"!=typeof e?s(new n(o,e)):(c.setToken(e.token),c.setUserInfo({username:t,email:i,admin:!0}),void s(null,e.activated))}).error(o(s))},r.prototype.listUsers=function(t){e.get("/api/v1/users").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.getOAuthClients=function(t){e.get("/api/v1/oauth/clients").success(function(e,o){return 200!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e.clients)}).error(o(t))},r.prototype.delTokensByClientId=function(t,r){e["delete"]("/api/v1/oauth/clients/"+t+"/tokens").success(function(e,t){return 204!==t?r(new n(t,e)):void r(null)}).error(o(r))},r.prototype.update=function(t){e.get("/api/v1/cloudron/update").success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.reboot=function(t){e.get("/api/v1/cloudron/reboot").success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.backup=function(t){e.post("/api/v1/cloudron/backups").success(function(e,o){return 202!==o||"object"!=typeof e?t(new n(o,e)):void t(null,e)}).error(o(t))},r.prototype.setCertificate=function(t,r,i){console.log("will set certificate");var a=new FormData;a.append("certificate",t),a.append("key",r),e.post("/api/v1/cloudron/certificate",a,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e,t){return 202!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.graphs=function(t,r,i){var a={params:{target:t,format:"json",from:r}};e.get("/api/v1/cloudron/graphs",a).success(function(e,t){return 200!==t||"object"!=typeof e?i(new n(t,e)):void i(null,e)}).error(o(i))},r.prototype.createUser=function(t,r,i){var a={username:t,email:r};e.post("/api/v1/users",a).success(function(e,t){return 201!==t||"object"!=typeof e?i(new n(t,e)):void i(null,e)}).error(o(i))},r.prototype.removeUser=function(t,r,i){var a={username:t,password:r};e({method:"DELETE",url:"/api/v1/users/"+t,data:a,headers:{"Content-Type":"application/json"}}).success(function(e,t){return 204!==t?i(new n(t,e)):void i(null)}).error(o(i))},r.prototype.changePassword=function(t,r,i){var a={password:t,newPassword:r};e.post("/api/v1/users/"+this._userInfo.username+"/password",a).success(function(e,t){return 204!==t||"object"!=typeof e?i(new n(t,e)):void i(null,e)}).error(o(i))},r.prototype.refreshConfig=function(e){var t=this;e="function"==typeof e?e:function(){},this.config(function(n,o){return n?e(n):(t.setConfig(o),void e(null))})},r.prototype.refreshInstalledApps=function(e){var t=this;e="function"==typeof e?e:function(){},this.getApps(function(n,o){if(n)return e(n);o.forEach(function(e){for(var n=!1,o=0;o<t._installedApps.length;++o)if(t._installedApps[o].id===e.id){n=o;break}n!==!1?angular.copy(e,t._installedApps[n]):t._installedApps.push(e)});for(var r=t._installedApps.length-1;r>=0;--r)o.some(function(e){return e.id===t._installedApps[r].id})||t._installedApps.splice(r,1);e(null)})},r.prototype.logout=function(){this.setToken(null),this._userInfo={},window.location.href="/api/v1/session/logout"},r.prototype.exchangeCodeForToken=function(t,r){var i={grant_type:"authorization_code",code:t,redirect_uri:window.location.origin,client_id:this._clientId,client_secret:this._clientSecret};e.post("/api/v1/oauth/token?response_type=token&client_id="+this._clientId,i).success(function(e,t){return 200!==t||"object"!=typeof e?r(new n(t,e)):void r(null,e.access_token)}).error(o(r))},i=new r}]),angular.module("Application").service("AppStore",["$http","Client",function(e,t){function n(e,t){Error.call(this),this.name=this.constructor.name,this.statusCode=e,this.message="string"==typeof t?t:JSON.stringify(t)}function o(){this._appsCache={}}return o.prototype.getApps=function(o){if(null===t.getConfig().apiServerOrigin)return o(new n(420,"Enhance Your Calm"));var r=this;e.get(t.getConfig().apiServerOrigin+"/api/v1/appstore/apps",{params:{boxVersion:t.getConfig().version}}).success(function(e,t){return 200!==t?o(new n(t,e)):(e.apps.forEach(function(e){r._appsCache[e.id]||(r._appsCache[e.id]=e)}),o(null,r._appsCache))}).error(function(e,t){return o(new n(t,e))})},o.prototype.getAppById=function(e,t){if(e in this._appsCache)return t(null,this._appsCache[e]);var o=this;this.getApps(function(r){return r?t(r):e in o._appsCache?t(null,o._appsCache[e]):void t(new n(404,"Not found"))})},o.prototype.getManifest=function(o,r){if(null===t.getConfig().apiServerOrigin)return r(new n(420,"Enhance Your Calm"));var i=t.getConfig().apiServerOrigin+"/api/v1/appstore/apps/"+o+"/manifest";console.log("Getting the manifest of ",o,i),e.get(i).success(function(e,t){return 200!==t?r(new n(t,e)):r(null,e)}).error(function(e,t){return r(new n(t,e))})},new o}]),angular.module("Application").controller("MainController",["$scope","$route","$interval","Client",function(e,t,n,o){e.initialized=!1,e.userInfo=o.getUserInfo(),e.config={},e.isActive=function(e){return t.current?0===t.current.$$route.originalPath.indexOf(e):!1},e.logout=function(t){t.stopPropagation(),e.initialized=!1,o.logout()},e.login=function(){var e=window.location.origin+"/login_callback.html",t="root,profile,apps,roleAdmin";window.location.href="/api/v1/oauth/dialog/authorize?response_type=code&client_id="+o._clientId+"&redirect_uri="+e+"&scope="+t},e.setup=function(){window.location.href="/error.html?errorCode=1"},e.error=function(e){console.error(e),window.location.href="/error.html"},e.update=function(){$("#updateModal").modal("hide"),e.initialized=!1,o.update(function(e){e&&console.error(e),window.location.href="/update.html"})},e.backup=function(){$("#backupProgressModal").modal("show"),e.initialized=!1,o.backup(function(t){function n(){o.version(function(t){return t?window.setTimeout(n,1e3):($("#backupProgressModal").modal("hide"),void(e.initialized=!0))})}t&&console.error(t),window.setTimeout(n,5e3)})},o.isServerFirstTime(function(t,r){return t?e.error(t):r?e.setup():void(localStorage.token?o.refreshConfig(function(t){return t&&401===t.statusCode?e.login():t?e.error(t):(o.getConfig().progress.update&&(window.location.href="/update.html"),void o.userInfo(function(t,r){return t?e.error(t):(o.setUserInfo(r),void o.refreshInstalledApps(function(t){if(t)return e.error(t);var r=n(o.refreshInstalledApps.bind(o),2e3),i=n(o.refreshConfig.bind(o),5e3);e.$on("$destroy",function(){n.cancel(r),n.cancel(i)}),o.setReady(),e.config=o.getConfig(),e.initialized=!0}))}))}):e.login())}),o.onConfig(function(e){e.progress.update&&(window.location.href="/update.html")})}]),angular.module("Application").controller("AccountController",["$scope","$location","Client",function(e,t,n){e.user=n.getUserInfo(),e.config=n.getConfig(),e.changePassword=function(){t.path("/userpassword")}}]),angular.module("Application").controller("AppConfigureController",["$scope","$routeParams","$location","Client",function(e,t,n,o){o.getUserInfo().admin||n.path("/"),e.app=null,e.password="",e.location="",e.accessRestriction="",e.disabled=!1,e.error={},e.domain="",e.portBindings={},e.configureApp=function(){e.error.name=null,e.error.password=null;var n={};for(var r in e.portBindings)n[r]=e.portBindings[r].hostPort;o.configureApp(t.appId,e.password,{location:e.location,portBindings:n,accessRestriction:e.accessRestriction},function(n){return n?(403===n.statusCode?(e.error.password="Wrong password provided.",e.password=""):e.error.name="App with the name "+e.app.name+" cannot be configured.",void(e.disabled=!1)):void window.location.replace("#/app/"+t.appId+"/details")})},e.cancel=function(){window.history.back()},o.onReady(function(){e.domain=o.getConfig().fqdn,o.getApp(t.appId,function(t,n){if(e.error=t||{},!t){e.app=n,e.location=n.location,e.portBindings=n.manifest.tcpPorts,e.accessRestriction=n.accessRestriction;for(var o in e.portBindings)e.portBindings[o].hostPort=n.portBindings[o]}})}),document.getElementById("inputLocation").focus()}]),angular.module("Application").controller("AppDetailsController",["$scope","$http","$routeParams","$location","Client",function(e,t,n,o,r){function i(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:n||[],name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n).toFixed(2)+"%<br>";return r}})}o.render()}function a(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"MemoryChart"),renderer:"area",width:580,height:250,min:0,max:2147483648,series:[{color:"steelblue",data:n||[],name:"memory"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"MemoryYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1048576).toFixed(2)+"MB<br>";return r}})}o.render()}function s(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:n||[],name:"apps"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1048576).toFixed(2)+"MB<br>";return r}}),new Rickshaw.Graph.Legend({graph:o,element:document.getElementById(e+"DiskLegend")})}o.render()}r.getUserInfo().admin||o.path("/"),e.app={},e.initialized=!1,e.updateAvailable=!1,e.activeTab="day",e.updateVersion=null,e.password="",e.passwordWrong=!1,e.startApp=function(){r.startApp(n.appId,function(e){e&&console.error(e)})},e.stopApp=function(){r.stopApp(n.appId,function(e){e&&console.error(e)})},e.updateApp=function(){e.passwordWrong=!1,r.updateApp(n.appId,e.updateVersion,e.password,function(t){t&&403===t.statusCode?(e.password="",e.passwordWrong=!0,$("#inputPasswordUpdate").focus()):t?console.error(t):($("#updateAppModal").modal("hide"),e.updateAvailable=!1,e.updateVersion=null,e.password="")})},e.uninstallApp=function(){e.passwordWrong=!1,r.uninstallApp(n.appId,e.password,function(t){t&&403===t.statusCode?(e.password="",e.passwordWrong=!0,$("#inputPasswordUninstall").focus()):t?console.error(t):($("#uninstallAppModal").modal("hide"),e.password="",window.location.href="#/")})},e.updateGraphs=function(){var t="nonNegativeDerivative(sumSeries(collectd.localhost.table-"+e.app.id+"-cpu.gauge-user,collectd.localhost.table-"+e.app.id+"-cpu.gauge-system))",n="collectd.localhost.table-"+e.app.id+"-memory.gauge-max_usage_in_bytes",o="collectd.localhost.filecount-"+e.app.id+"-appdata.bytes",l=e.activeTab,c="-24hours";switch(l){case"day":c="-24hours";break;case"month":c="-1month";break;case"year":c="-1year";break;default:console.log("internal errror")}r.graphs([t,n,o],c,function(e,t){return e?console.log(e):(i(l,t[0]),a(l,t[1]),void s(l,t[2]))})},r.onReady(function(){r.getApp(n.appId,function(t,n){if(t)return console.error(t),void(window.location.href="#/");if(e.app=n,e.appLogUrl=r.getAppLogUrl(n.id),r.getConfig().update&&r.getConfig().update.apps)for(var o=r.getConfig().update.apps,i=0;i<o.length;i++)o[i].appId===e.app.appStoreId&&o[i].version!==e.app.version&&(e.updateAvailable=!0,e.updateVersion=o[i].version);e.updateGraphs(),e.initialized=!0})})}]),angular.module("Application").controller("AppInstallController",["$scope","$routeParams","$location","Client","AppStore","$timeout",function(e,t,n,o,r,i){o.getUserInfo().admin||n.path("/"),e.app=null,e.password="",e.location="",e.accessRestriction="",e.disabled=!1,e.error={},e.domain="",e.version=null,e.portBindings={},e.hostPortMin=1025,e.hostPortMax=9999,o.onReady(function(){e.domain=o.getConfig().fqdn,r.getAppById(t.appStoreId,function(t,n){e.error=t||{},t||(e.app=n)}),r.getManifest(t.appStoreId,function(t,n){if(e.error=t||{},!t){e.version=n.version,e.portBindings=n.tcpPorts,e.accessRestriction=n.accessRestriction||"";for(var o in e.portBindings)e.portBindings[o].hostPort=parseInt(o)}})}),e.installApp=function(){e.error.name=null,e.error.password=null;var n={};for(var r in e.portBindings)n[r]=e.portBindings[r].hostPort;o.installApp(t.appStoreId,e.version,e.password,e.app.title,{location:e.location,portBindings:n,accessRestriction:e.accessRestriction},function(t,n){return t?(409===t.statusCode?e.error.name="Application already exists.":403===t.statusCode?(e.error.password="Wrong password provided.",e.password=""):e.error.name="App with the name "+e.app.name+" cannot be installed.",void(e.disabled=!1)):void window.location.replace("#/app/"+n+"/details")})},e.cancel=function(){window.history.back()},e.$on("$viewContentLoaded",function(){i(function(){$("input[autofocus]:visible:first").focus()},1e3)})}]),angular.module("Application").controller("AppListController",["$scope","$location","Client",function(e,t,n){e.installedApps=n.getInstalledApps(),e.showDetails=function(e){t.path("/app/"+e.id+"/details")}}]),angular.module("Application").controller("AppStoreController",["$scope","$location","$timeout","Client","AppStore",function(e,t,n,o,r){function i(){e.ready=!1,r.getApps(function(t,o){return t?(console.error(t),n(i,1e3)):(e.apps=o,void(e.ready=!0))})}o.getUserInfo().admin||t.path("/"),e.ready=!1,e.apps=[],e.installApp=function(e){t.path("/app/"+e.id+"/install")},e.openApp=function(e){for(var t=0;t<o._installedApps.length;t++)if(o._installedApps[t].appStoreId===e.id){window.open("https://"+o._installedApps[t].fqdn);break}},i()}]),angular.module("Application").controller("DashboardController",function(){}),angular.module("Application").controller("DnsController",["$scope","$location","Client",function(e,t,n){n.getUserInfo().admin||t.path("/"),e.ready=!1,e.user=n.getUserInfo(),e.config=n.getConfig(),e.nakedDomainApp=null,e.certificateFile=null,e.certificateFileName="",e.keyFile=null,e.keyFileName="",e.setNakedDomain=function(){var t=e.nakedDomainApp?e.nakedDomainApp.id:"admin";n.setNakedDomain(t,function(e){return e?console.error("Error setting naked domain",e):void 0})},e.backup=function(){$("#backupProgressModal").modal("show"),e.$parent.initialized=!1,n.backup(function(t){function o(){n.version(function(t){return t?window.setTimeout(o,1e3):($("#backupProgressModal").modal("hide"),void(e.$parent.initialized=!0))})}t&&console.error(t),window.setTimeout(o,5e3)})},e.update=function(){$("#updateModal").modal("hide"),e.$parent.initialized=!1,n.update(function(e){e&&console.error(e),window.location.href="/update.html"})},document.getElementById("idCertificate").onchange=function(t){e.$apply(function(){e.certificateFile=t.target.files[0],e.certificateFileName=t.target.files[0].name})},document.getElementById("idKey").onchange=function(t){e.$apply(function(){e.keyFile=t.target.files[0],e.keyFileName=t.target.files[0].name})},e.setCertificate=function(){return console.log("Will set the certificate"),e.certificateFile?e.keyFile?void n.setCertificate(e.certificateFile,e.keyFile,function(e){return e?console.log(e):void window.setTimeout(window.location.reload.bind(window.location,!0),3e3)}):console.log("Key not set"):console.log("Certificate not set")},n.onConfig(function(){e.tokenInUse=n._token,n.getApps(function(t,o){t&&console.error("Error loading app list"),e.apps=o,n.getNakedDomain(function(t,n){if(t)return console.error(t);e.nakedDomainApp=null;for(var o=0;o<e.apps.length;o++)if(e.apps[o].id===n){e.nakedDomainApp=e.apps[o];break}e.ready=!0})})})}]),angular.module("Application").controller("GraphsController",["$scope","$location","Client",function(e,t,n){function o(e,t){var n=[];t&&t.datapoints&&(n=t.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var o=new Rickshaw.Graph({element:document.querySelector("#"+e+"CpuChart"),renderer:"area",width:580,height:250,min:0,max:100,series:[{color:"steelblue",data:n,name:"cpu"}]});new Rickshaw.Graph.Axis.Time({graph:o}),new Rickshaw.Graph.Axis.Y({graph:o,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"CpuYAxis")}),new Rickshaw.Graph.HoverDetail({graph:o,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n).toFixed(2)+"%<br>";return r}})}o.render()}function r(e,t,n){var o=[],r=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var i=new Rickshaw.Graph({element:document.querySelector("#"+e+"NetworkChart"),renderer:"area",width:580,height:250,series:[{color:"steelblue",data:o,name:"tx"},{color:"green",data:r,name:"rx"}]});new Rickshaw.Graph.Axis.Time({graph:i}),new Rickshaw.Graph.Axis.Y({graph:i,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"NetworkYAxis")}),new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1024).toFixed(2)+"KB<br>";return r}})}i.render()}function i(e,t,n){var o=[],r=[];t&&t.datapoints&&(o=t.datapoints.map(function(e){return{y:e[0],x:e[1]}})),n&&n.datapoints&&(r=n.datapoints.map(function(e){return{y:e[0],x:e[1]}}));{var i=new Rickshaw.Graph({element:document.querySelector("#"+e+"DiskChart"),renderer:"area",width:580,height:250,min:0,max:32212254720,series:[{color:"steelblue",data:o,name:"apps"},{color:"green",data:r,name:"data"}]});new Rickshaw.Graph.Axis.Time({graph:i}),new Rickshaw.Graph.Axis.Y({graph:i,orientation:"left",tickFormat:Rickshaw.Fixtures.Number.formatKMBT,element:document.getElementById(e+"DiskYAxis")}),new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(e,t,n){var o='<span class="detail_swatch" style="background-color: '+e.color+'"></span>',r=o+e.name+": "+new Number(n/1073741824).toFixed(2)+"GB<br>";return r}}),new Rickshaw.Graph.Legend({graph:i,element:document.getElementById(e+"DiskLegend")})}i.render()}n.getUserInfo().admin||t.path("/"),e.activeTab="day";var a="transformNull(scale(divideSeries(sumSeries(collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user),sumSeries(collectd.localhost.cpu-0.cpu-idle,collectd.localhost.cpu-0.cpu-system,collectd.localhost.cpu-0.cpu-nice,collectd.localhost.cpu-0.cpu-user,collectd.localhost.cpu-0.cpu-wait)), 100), 0)",s="transformNull(collectd.localhost.interface-eth0.if_octets.tx, 0)",l="transformNull(collectd.localhost.interface-eth0.if_octets.rx, 0)",c="transformNull(collectd.localhost.df-loop0.df_complex-used, 0)",p="transformNull(collectd.localhost.df-loop1.df_complex-used, 0)";e.updateGraphs=function(){var t=e.activeTab,u="-24hours";switch(t){case"day":u="-24hours";break;case"month":u="-1month";break;case"year":u="-1year";break;default:console.log("internal errror")}n.graphs([a,s,l,c,p],u,function(e,n){return e?console.log(e):(o(t,n[0]),r(t,n[1],n[2]),void i(t,n[3],n[4]))})},n.onReady(e.updateGraphs)}]),angular.module("Application").controller("SecurityController",["$scope","Client",function(e,t){e.activeClients=[],e.tokenInUse=null,e.ready=!1,e.removeAccessTokens=function(e,n){e._busy=!0,t.delTokensByClientId(e.id,function(t){return t?console.error(t):($(n.target).addClass("disabled"),void(e._busy=!1))})},t.onReady(function(){e.tokenInUse=t._token,t.getOAuthClients(function(t,n){return t?console.error(t):(e.activeClients=n,void(e.ready=!0))})})}]),angular.module("Application").controller("UserCreateController",["$scope","$routeParams","$location","Client",function(e,t,n,o){o.getUserInfo().admin||n.path("/"),e.disabled=!1,e.username="",e.email="",e.alreadyTaken="",e.submit=function(){e.alreadyTaken="",e.disabled=!0,o.createUser(e.username,e.email,function(t){return t&&409===t.statusCode?(e.alreadyTaken=e.username,console.error("Username already taken")):(t&&console.error("Unable to create user.",t),void(window.location.href="#/userlist"))})},e.cancel=function(){window.history.back()}}]),angular.module("Application").controller("UserListController",["$scope","$location","Client",function(e,t,n){function o(){n.listUsers(function(t,n){return t?console.error("Unable to get user listing.",t):(e.users=n.users,void(e.ready=!0))})}n.getUserInfo().admin||t.path("/"),e.ready=!1,e.users=[],e.userInfo=n.getUserInfo(),e.userDeleteForm={username:"",password:""},e.isMe=function(e){return e.username===n.getUserInfo().username},e.isAdmin=function(e){return!!e.admin},e.toggleAdmin=function(e){n.setAdmin(e.username,!e.admin,function(t){return t?console.error(t):void(e.admin=!e.admin)})},e.deleteUser=function(t){return e.userDeleteForm.username!==t.username?console.error("Username does not match"):void n.removeUser(t.username,e.userDeleteForm.password,function(e){return e&&401===e.statusCode?console.error("Wrong password"):e?console.error("Unable to delete user.",e):($("#userDeleteModal-"+t.username).modal("hide"),void o())})},e.addUser=function(){window.location.href="#/usercreate"},o()}]),angular.module("Application").controller("UserPasswordController",["$scope","$routeParams","$location","Client",function(e,t,n,o){o.getUserInfo().admin||n.path("/"),e.active=!1,e.currentPassword="",e.newPassword="",e.repeatPassword="",e.validationClass={},e.submit=function(){return e.validationClass.currentPassword="",e.validationClass.newPassword="",e.validationClass.repeatPassword="",e.newPassword!==e.repeatPassword?(document.getElementById("inputRepeatPassword").focus(),e.validationClass.repeatPassword="has-error",void(e.repeatPassword="")):(e.active=!0,void o.changePassword(e.currentPassword,e.newPassword,function(t){t&&403===t.statusCode?(document.getElementById("inputCurrentPassword").focus(),e.validationClass.currentPassword="has-error",e.currentPassword="",e.newPassword="",e.repeatPassword=""):t?console.error("Unable to change password.",t):window.history.back(),e.active=!1}))},e.cancel=function(){window.history.back()},document.getElementById("inputCurrentPassword").focus()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiY2xpZW50LmpzIiwiYXBwc3RvcmUuanMiLCJtYWluLmpzIiwiYWNjb3VudC5qcyIsImFwcGNvbmZpZ3VyZS5qcyIsImFwcGRldGFpbHMuanMiLCJhcHBpbnN0YWxsLmpzIiwiYXBwbGlzdC5qcyIsImRhc2hib2FyZC5qcyIsImRucy5qcyIsImdyYXBocy5qcyIsInNlY3VyaXR5LmpzIiwidXNlcmNyZWF0ZS5qcyIsInVzZXJsaXN0LmpzIiwidXNlcnBhc3N3b3JkLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJyZWRpcmVjdFRvIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwiZmlsdGVyIiwiaW5wdXQiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcXVpcmUiLCJsaW5rIiwic2NvcGUiLCJlbGVtIiwiYXR0cnMiLCJjdHJscyIsIiRzZXQiLCJsYXRlck5hbWUiLCJtb2RlbEN0cmwiLCJmb3JtQ3RybCIsIiRuYW1lIiwibmFtZSIsIiRhZGRDb250cm9sIiwiJG9uIiwiJHJlbW92ZUNvbnRyb2wiLCJzZXJ2aWNlIiwiJGh0dHAiLCJtZDUiLCJDbGllbnRFcnJvciIsInN0YXR1c0NvZGUiLCJtZXNzYWdlIiwiRXJyb3IiLCJjYWxsIiwidGhpcyIsImNvbnN0cnVjdG9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlZmF1bHRFcnJvckhhbmRsZXIiLCJjYWxsYmFjayIsImRhdGEiLCJzdGF0dXMiLCJjbGllbnQiLCJsb2dvdXQiLCJDbGllbnQiLCJfcmVhZHkiLCJfY29uZmlnTGlzdGVuZXIiLCJfcmVhZHlMaXN0ZW5lciIsIl91c2VySW5mbyIsInVzZXJuYW1lIiwiZW1haWwiLCJhZG1pbiIsIl90b2tlbiIsIl9jbGllbnRJZCIsIl9jbGllbnRTZWNyZXQiLCJfY29uZmlnIiwiYXBpU2VydmVyT3JpZ2luIiwid2ViU2VydmVyT3JpZ2luIiwiZnFkbiIsImlwIiwicmV2aXNpb24iLCJ1cGRhdGUiLCJpc0RldiIsInByb2dyZXNzIiwiX2luc3RhbGxlZEFwcHMiLCJzZXRUb2tlbiIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwicHJvdG90eXBlIiwic2V0UmVhZHkiLCJmb3JFYWNoIiwib25SZWFkeSIsInB1c2giLCJvbkNvbmZpZyIsInNldFVzZXJJbmZvIiwidXNlckluZm8iLCJncmF2YXRhciIsImNyZWF0ZUhhc2giLCJ0b0xvd2VyQ2FzZSIsImdyYXZhdGFySHVnZSIsInNldENvbmZpZyIsInZlcnNpb24iLCJ0aGF0IiwiZ2V0SW5zdGFsbGVkQXBwcyIsImdldFVzZXJJbmZvIiwiZ2V0Q29uZmlnIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiQXV0aG9yaXphdGlvbiIsInJlbW92ZUl0ZW0iLCJnZXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJpbnN0YWxsQXBwIiwiaWQiLCJwYXNzd29yZCIsInRpdGxlIiwiYXBwU3RvcmVJZCIsImxvY2F0aW9uIiwicG9ydEJpbmRpbmdzIiwiYWNjZXNzUmVzdHJpY3Rpb24iLCJwb3N0IiwibWFuaWZlc3QiLCJ1bmluc3RhbGxBcHAiLCJhcHBJZCIsImNvbmZpZ3VyZUFwcCIsInVwZGF0ZUFwcCIsInN0YXJ0QXBwIiwic3RvcEFwcCIsImlzU2VydmVyRmlyc3RUaW1lIiwiYWN0aXZhdGVkIiwiZ2V0TmFrZWREb21haW4iLCJhcHBpZCIsInNldE5ha2VkRG9tYWluIiwiZ2V0QXBwcyIsImFwcHMiLCJnZXRBcHAiLCJhcHBGb3VuZCIsInNvbWUiLCJnZXRBcHBMb2dTdHJlYW0iLCJzb3VyY2UiLCJFdmVudFNvdXJjZSIsImdldEFwcExvZ1VybCIsInNldEFkbWluIiwicGF5bG9hZCIsImNyZWF0ZUFkbWluIiwic2V0dXBUb2tlbiIsImxpc3RVc2VycyIsImdldE9BdXRoQ2xpZW50cyIsImNsaWVudHMiLCJkZWxUb2tlbnNCeUNsaWVudElkIiwicmVib290IiwiYmFja3VwIiwic2V0Q2VydGlmaWNhdGUiLCJjZXJ0aWZpY2F0ZUZpbGUiLCJrZXlGaWxlIiwiY29uc29sZSIsImxvZyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJDb250ZW50LVR5cGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJncmFwaHMiLCJ0YXJnZXRzIiwiZnJvbSIsInBhcmFtcyIsInRhcmdldCIsImZvcm1hdCIsImNyZWF0ZVVzZXIiLCJyZW1vdmVVc2VyIiwibWV0aG9kIiwidXJsIiwiY2hhbmdlUGFzc3dvcmQiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsInJlZnJlc2hDb25maWciLCJyZXN1bHQiLCJyZWZyZXNoSW5zdGFsbGVkQXBwcyIsImZvdW5kIiwiaSIsImxlbmd0aCIsImNvcHkiLCJzcGxpY2UiLCJ3aW5kb3ciLCJocmVmIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW4iLCJhdXRoQ29kZSIsImdyYW50X3R5cGUiLCJjb2RlIiwicmVkaXJlY3RfdXJpIiwib3JpZ2luIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImFjY2Vzc190b2tlbiIsIkFwcFN0b3JlRXJyb3IiLCJBcHBTdG9yZSIsIl9hcHBzQ2FjaGUiLCJib3hWZXJzaW9uIiwiZ2V0QXBwQnlJZCIsImdldE1hbmlmZXN0IiwibWFuaWZlc3RVcmwiLCIkc2NvcGUiLCIkcm91dGUiLCIkaW50ZXJ2YWwiLCJpbml0aWFsaXplZCIsImlzQWN0aXZlIiwiY3VycmVudCIsIiQkcm91dGUiLCJvcmlnaW5hbFBhdGgiLCJpbmRleE9mIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJsb2dpbiIsImNhbGxiYWNrVVJMIiwic2V0dXAiLCIkIiwibW9kYWwiLCJjaGVja0lmRG9uZSIsInNldFRpbWVvdXQiLCJpc0ZpcnN0VGltZSIsInJlZnJlc2hBcHBzVGltZXIiLCJiaW5kIiwicmVmcmVzaENvbmZpZ1RpbWVyIiwiY2FuY2VsIiwiJGxvY2F0aW9uIiwidXNlciIsInBhdGgiLCIkcm91dGVQYXJhbXMiLCJkaXNhYmxlZCIsImRvbWFpbiIsImNvbnRhaW5lclBvcnQiLCJob3N0UG9ydCIsInJlcGxhY2UiLCJoaXN0b3J5IiwiYmFjayIsInRjcFBvcnRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZvY3VzIiwicmVuZGVyQ3B1IiwiYWN0aXZlVGFiIiwiY3B1RGF0YSIsInRyYW5zZm9ybWVkQ3B1IiwiZGF0YXBvaW50cyIsIm1hcCIsInBvaW50IiwieSIsIngiLCJjcHVHcmFwaCIsIlJpY2tzaGF3IiwiR3JhcGgiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbmRlcmVyIiwid2lkdGgiLCJoZWlnaHQiLCJtaW4iLCJtYXgiLCJzZXJpZXMiLCJjb2xvciIsIkF4aXMiLCJUaW1lIiwiZ3JhcGgiLCJZIiwib3JpZW50YXRpb24iLCJ0aWNrRm9ybWF0IiwiRml4dHVyZXMiLCJOdW1iZXIiLCJmb3JtYXRLTUJUIiwiSG92ZXJEZXRhaWwiLCJmb3JtYXR0ZXIiLCJzd2F0Y2giLCJjb250ZW50IiwidG9GaXhlZCIsInJlbmRlciIsInJlbmRlck1lbW9yeSIsIm1lbW9yeURhdGEiLCJ0cmFuc2Zvcm1lZE1lbW9yeSIsIm1lbW9yeUdyYXBoIiwicmVuZGVyRGlzayIsImRpc2tEYXRhIiwidHJhbnNmb3JtZWREaXNrIiwiZGlza0dyYXBoIiwiTGVnZW5kIiwidXBkYXRlQXZhaWxhYmxlIiwidXBkYXRlVmVyc2lvbiIsInBhc3N3b3JkV3JvbmciLCJ1cGRhdGVHcmFwaHMiLCJjcHVVc2FnZVRhcmdldCIsIm1lbW9yeVVzYWdlVGFyZ2V0IiwiZGlza1VzYWdlVGFyZ2V0IiwiYXBwTG9nVXJsIiwiYXBwVXBkYXRlcyIsIiR0aW1lb3V0IiwiaG9zdFBvcnRNaW4iLCJob3N0UG9ydE1heCIsInBvcnQiLCJwYXJzZUludCIsImluc3RhbGxlZEFwcHMiLCJzaG93RGV0YWlscyIsInJlZnJlc2giLCJyZWFkeSIsIm9wZW5BcHAiLCJvcGVuIiwibmFrZWREb21haW5BcHAiLCJjZXJ0aWZpY2F0ZUZpbGVOYW1lIiwia2V5RmlsZU5hbWUiLCIkcGFyZW50Iiwib25jaGFuZ2UiLCIkYXBwbHkiLCJmaWxlcyIsInJlbG9hZCIsInRva2VuSW5Vc2UiLCJyZW5kZXJOZXR3b3JrIiwidHhEYXRhIiwicnhEYXRhIiwidHJhbnNmb3JtZWRUeCIsInRyYW5zZm9ybWVkUngiLCJuZXR3b3JrR3JhcGgiLCJhcHBzVXNlZERhdGEiLCJkYXRhVXNlZERhdGEiLCJ0cmFuc2Zvcm1lZEFwcHNVc2VkIiwidHJhbnNmb3JtZWREYXRhVXNlZCIsIm5ldHdvcmtVc2FnZVR4VGFyZ2V0IiwibmV0d29ya1VzYWdlUnhUYXJnZXQiLCJkaXNrVXNhZ2VBcHBzVXNlZFRhcmdldCIsImRpc2tVc2FnZURhdGFVc2VkVGFyZ2V0IiwiYWN0aXZlQ2xpZW50cyIsInJlbW92ZUFjY2Vzc1Rva2VucyIsIl9idXN5IiwiYWRkQ2xhc3MiLCJhbHJlYWR5VGFrZW4iLCJzdWJtaXQiLCJ1c2VycyIsInVzZXJEZWxldGVGb3JtIiwiaXNNZSIsImlzQWRtaW4iLCJ0b2dnbGVBZG1pbiIsImRlbGV0ZVVzZXIiLCJhZGRVc2VyIiwiYWN0aXZlIiwicmVwZWF0UGFzc3dvcmQiLCJ2YWxpZGF0aW9uQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBLFlBS0EsSUFBQUEsS0FBQUMsUUFBQUMsT0FBQSxlQUFBLFVBQUEsWUFBQSxlQUdBRixLQUFBRyxRQUFBLGlCQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLEtBQUEsS0FDQUMsV0FBQSxVQUNBRCxLQUFBLGNBQ0FFLFdBQUEsc0JBQ0FDLFlBQUEseUJBQ0FILEtBQUEsZUFDQUUsV0FBQSx1QkFDQUMsWUFBQSwwQkFDQUgsS0FBQSxpQkFDQUUsV0FBQSx5QkFDQUMsWUFBQSw0QkFDQUgsS0FBQSxhQUNBRSxXQUFBLHFCQUNBQyxZQUFBLHdCQUNBSCxLQUFBLGFBQ0FFLFdBQUEscUJBQ0FDLFlBQUEsd0JBQ0FILEtBQUEsU0FDQUUsV0FBQSxvQkFDQUMsWUFBQSx1QkFDQUgsS0FBQSw0QkFDQUUsV0FBQSx1QkFDQUMsWUFBQSwwQkFDQUgs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LEdBQUFnSCxlQUFBNkIsRUFBQTVCLGdCQUFBNEIsRUFBQTNCLFlBQUEsU0FBQWpFLEdBQ0FBLEdBQUEsTUFBQUEsRUFBQS9ELFlBQ0E4TCxTQUFBQyxlQUFBLHdCQUFBQyxRQUNBckMsRUFBQTZJLGdCQUFBekssZ0JBQUEsWUFDQTRCLEVBQUE1QixnQkFBQSxHQUNBNEIsRUFBQTNCLFlBQUEsR0FDQTJCLEVBQUE0SSxlQUFBLElBQ0F4TyxFQUNBNEMsUUFBQTVDLE1BQUEsNkJBQUFBLEdBRUEwRSxPQUFBa0QsUUFBQUMsT0FHQWpDLEVBQUEySSxRQUFBLE1BSUEzSSxFQUFBc0IsT0FBQSxXQUNBeEMsT0FBQWtELFFBQUFDLFFBR0FFLFNBQUFDLGVBQUEsd0JBQUFDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgYW5ndWxhcjpmYWxzZSAqL1xuXG4vLyBjcmVhdGUgbWFpbiBhcHBsaWNhdGlvbiBtb2R1bGVcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbJ25nUm91dGUnLCAnbmdBbmltYXRlJywgJ2FuZ3VsYXItbWQ1J10pO1xuXG4vLyBzZXR1cCBhbGwgbWFqb3IgYXBwbGljYXRpb24gcm91dGVzXG5hcHAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJywge1xuICAgICAgICByZWRpcmVjdFRvOiAnL2FwcHMnXG4gICAgfSkud2hlbignL2Rhc2hib2FyZCcsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Rhc2hib2FyZC5odG1sJ1xuICAgIH0pLndoZW4oJy91c2VyY3JlYXRlJywge1xuICAgICAgICBjb250cm9sbGVyOiAnVXNlckNyZWF0ZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJjcmVhdGUuaHRtbCdcbiAgICB9KS53aGVuKCcvdXNlcnBhc3N3b3JkJywge1xuICAgICAgICBjb250cm9sbGVyOiAnVXNlclBhc3N3b3JkQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlcnBhc3N3b3JkLmh0bWwnXG4gICAgfSkud2hlbignL3VzZXJsaXN0Jywge1xuICAgICAgICBjb250cm9sbGVyOiAnVXNlckxpc3RDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VybGlzdC5odG1sJ1xuICAgIH0pLndoZW4oJy9hcHBzdG9yZScsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcFN0b3JlQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYXBwc3RvcmUuaHRtbCdcbiAgICB9KS53aGVuKCcvYXBwcycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcExpc3RDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBsaXN0Lmh0bWwnXG4gICAgfSkud2hlbignL2FwcC86YXBwU3RvcmVJZC9pbnN0YWxsJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwSW5zdGFsbENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FwcGluc3RhbGwuaHRtbCdcbiAgICB9KS53aGVuKCcvYXBwLzphcHBJZC9jb25maWd1cmUnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcHBDb25maWd1cmVDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hcHBjb25maWd1cmUuaHRtbCdcbiAgICB9KS53aGVuKCcvYXBwLzphcHBJZC9kZXRhaWxzJywge1xuICAgICAgICBjb250cm9sbGVyOiAnQXBwRGV0YWlsc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FwcGRldGFpbHMuaHRtbCdcbiAgICB9KS53aGVuKCcvZG5zJywge1xuICAgICAgICBjb250cm9sbGVyOiAnRG5zQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZG5zLmh0bWwnXG4gICAgfSkud2hlbignL2FjY291bnQnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdBY2NvdW50Q29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYWNjb3VudC5odG1sJ1xuICAgIH0pLndoZW4oJy9ncmFwaHMnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdHcmFwaHNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ncmFwaHMuaHRtbCdcbiAgICB9KS53aGVuKCcvc2VjdXJpdHknLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdTZWN1cml0eUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NlY3VyaXR5Lmh0bWwnXG4gICAgfSkub3RoZXJ3aXNlKHsgcmVkaXJlY3RUbzogJy8nfSk7XG59XSk7XG5cbmFwcC5maWx0ZXIoJ2luc3RhbGxhdGlvbkFjdGl2ZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdlcnJvcicpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnaW5zdGFsbGVkJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufSk7XG5cbmFwcC5maWx0ZXIoJ2luc3RhbGxhdGlvblN0YXRlTGFiZWwnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZXJyb3InKSByZXR1cm4gJ0Vycm9yJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnc3ViZG9tYWluX2Vycm9yJykgcmV0dXJuICdFcnJvcic7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2luc3RhbGxlZCcpIHJldHVybiAnSW5zdGFsbGVkJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZG93bmxvYWRpbmdfaW1hZ2UnKSByZXR1cm4gJ0Rvd25sb2FkaW5nJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncGVuZGluZ19pbnN0YWxsJykgcmV0dXJuICdJbnN0YWxsaW5nJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAncGVuZGluZ191bmluc3RhbGwnKSByZXR1cm4gJ1VuaW5zdGFsbGluZyc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2NyZWF0aW5nX2NvbnRhaW5lcicpIHJldHVybiAnQ29udGFpbmVyJztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnZG93bmxvYWRpbmdfbWFuaWZlc3QnKSByZXR1cm4gJ01hbmlmZXN0JztcbiAgICAgICAgaWYgKGlucHV0ID09PSAnY3JlYXRpbmdfdm9sdW1lJykgcmV0dXJuICdWb2x1bWUnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyZWdpc3RlcmluZ19zdWJkb21haW4nKSByZXR1cm4gJ1N1YmRvbWFpbic7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ2FsbG9jYXRlZF9vYXV0aF9jcmVkZW50aWFscycpIHJldHVybiAnT0F1dGgnO1xuXG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9O1xufSk7XG5cbmFwcC5maWx0ZXIoJ2FjY2Vzc1Jlc3RyaWN0aW9uTGFiZWwnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ID09PSAnJykgcmV0dXJuICdwdWJsaWMnO1xuICAgICAgICBpZiAoaW5wdXQgPT09ICdyb2xlVXNlcicpIHJldHVybiAncHJpdmF0ZSc7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gJ3JvbGVBZG1pbicpIHJldHVybiAncHJpdmF0ZSAoQWRtaW5zIG9ubHkpJztcblxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcbn0pO1xuXG4vLyBjdXN0b20gZGlyZWN0aXZlIGZvciBkeW5hbWljIG5hbWVzIGluIGZvcm1zXG4vLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMzYxNjU3OC9pc3N1ZS1yZWdpc3RlcmluZy1mb3JtLWNvbnRyb2wtd2l0aC1pbnRlcnBvbGF0ZWQtbmFtZSNhbnN3ZXItMjM2MTc0MDFcbmFwcC5kaXJlY3RpdmUoJ2xhdGVyTmFtZScsIGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgLy8gKDIpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogWyc/bmdNb2RlbCcsICdeP2Zvcm0nXSwgICAgICAgICAgICAgICAgICAgLy8gKDMpXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybHMpIHtcbiAgICAgICAgICAgIGF0dHJzLiRzZXQoJ25hbWUnLCBhdHRycy5sYXRlck5hbWUpO1xuXG4gICAgICAgICAgICB2YXIgbW9kZWxDdHJsID0gY3RybHNbMF07ICAgICAgICAgICAgICAgICAgICAgIC8vICgzKVxuICAgICAgICAgICAgdmFyIGZvcm1DdHJsICA9IGN0cmxzWzFdOyAgICAgICAgICAgICAgICAgICAgICAvLyAoMylcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwgJiYgZm9ybUN0cmwpIHtcbiAgICAgICAgICAgICAgICBtb2RlbEN0cmwuJG5hbWUgPSBhdHRycy5uYW1lOyAgICAgICAgICAgICAgLy8gKDQpXG4gICAgICAgICAgICAgICAgZm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTsgICAgICAgICAgIC8vICgyKVxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7ICAgIC8vICg1KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cbi8qIGdsb2JhbCBFdmVudFNvdXJjZSAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5zZXJ2aWNlKCdDbGllbnQnLCBbJyRodHRwJywgJ21kNScsIGZ1bmN0aW9uICgkaHR0cCwgbWQ1KSB7XG4gICAgdmFyIGNsaWVudCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBDbGllbnRFcnJvcihzdGF0dXNDb2RlLCBtZXNzYWdlKSB7XG4gICAgICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHJldHVybiBjbGllbnQubG9nb3V0KCk7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ2xpZW50KCkge1xuICAgICAgICB0aGlzLl9yZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jb25maWdMaXN0ZW5lciA9IFtdO1xuICAgICAgICB0aGlzLl9yZWFkeUxpc3RlbmVyID0gW107XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IG51bGwsXG4gICAgICAgICAgICBlbWFpbDogbnVsbCxcbiAgICAgICAgICAgIGFkbWluOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl90b2tlbiA9IG51bGw7XG4gICAgICAgIHRoaXMuX2NsaWVudElkID0gJ2NpZC13ZWJhZG1pbic7XG4gICAgICAgIHRoaXMuX2NsaWVudFNlY3JldCA9ICd1bnVzZWQnO1xuICAgICAgICB0aGlzLl9jb25maWcgPSB7XG4gICAgICAgICAgICBhcGlTZXJ2ZXJPcmlnaW46IG51bGwsXG4gICAgICAgICAgICB3ZWJTZXJ2ZXJPcmlnaW46IG51bGwsXG4gICAgICAgICAgICBmcWRuOiBudWxsLFxuICAgICAgICAgICAgaXA6IG51bGwsXG4gICAgICAgICAgICByZXZpc2lvbjogbnVsbCxcbiAgICAgICAgICAgIHVwZGF0ZTogbnVsbCxcbiAgICAgICAgICAgIGlzRGV2OiBmYWxzZSxcbiAgICAgICAgICAgIHByb2dyZXNzOiB7fVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzID0gW107XG5cbiAgICAgICAgdGhpcy5zZXRUb2tlbihsb2NhbFN0b3JhZ2UudG9rZW4pO1xuICAgIH1cblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0UmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWFkeSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX3JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVhZHlMaXN0ZW5lci5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUub25SZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5fcmVhZHkpIGNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX3JlYWR5TGlzdGVuZXIucHVzaChjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUub25Db25maWcgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIucHVzaChjYWxsYmFjayk7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMuX2NvbmZpZyk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0VXNlckluZm8gPSBmdW5jdGlvbiAodXNlckluZm8pIHtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8ga2VlcCB0aGUgYW5ndWxhciBiaW5kaW5ncyBhbGl2ZSwgc2V0IGVhY2ggcHJvcGVydHkgaW5kaXZpZHVhbGx5XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLnVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmVtYWlsID0gdXNlckluZm8uZW1haWw7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLmFkbWluID0gISF1c2VySW5mby5hZG1pbjtcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZ3JhdmF0YXIgPSAnaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8nICsgbWQ1LmNyZWF0ZUhhc2godXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSkgKyAnLmpwZz9zPTI0JmQ9bW0nO1xuICAgICAgICB0aGlzLl91c2VySW5mby5ncmF2YXRhckh1Z2UgPSAnaHR0cHM6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci8nICsgbWQ1LmNyZWF0ZUhhc2godXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSkgKyAnLmpwZz9zPTEyOCZkPW1tJztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5zZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGtlZXAgdGhlIGFuZ3VsYXIgYmluZGluZ3MgYWxpdmUsIHNldCBlYWNoIHByb3BlcnR5IGluZGl2aWR1YWxseSAoVE9ETzoganVzdCB1c2UgYW5ndWxhci5jb3B5ID8pXG4gICAgICAgIHRoaXMuX2NvbmZpZy5hcGlTZXJ2ZXJPcmlnaW4gPSBjb25maWcuYXBpU2VydmVyT3JpZ2luO1xuICAgICAgICB0aGlzLl9jb25maWcud2ViU2VydmVyT3JpZ2luID0gY29uZmlnLndlYlNlcnZlck9yaWdpbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLnZlcnNpb24gPSBjb25maWcudmVyc2lvbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmZxZG4gPSBjb25maWcuZnFkbjtcbiAgICAgICAgdGhpcy5fY29uZmlnLmlwID0gY29uZmlnLmlwO1xuICAgICAgICB0aGlzLl9jb25maWcucmV2aXNpb24gPSBjb25maWcucmV2aXNpb247XG4gICAgICAgIHRoaXMuX2NvbmZpZy51cGRhdGUgPSBjb25maWcudXBkYXRlO1xuICAgICAgICB0aGlzLl9jb25maWcuaXNEZXYgPSBjb25maWcuaXNEZXY7XG4gICAgICAgIHRoaXMuX2NvbmZpZy5wcm9ncmVzcyA9IGNvbmZpZy5wcm9ncmVzcztcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fY29uZmlnTGlzdGVuZXIuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoYXQuX2NvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEluc3RhbGxlZEFwcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YWxsZWRBcHBzO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldFVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldFRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyB0b2tlbjtcbiAgICAgICAgaWYgKCF0b2tlbikgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIGVsc2UgbG9jYWxTdG9yYWdlLnRva2VuID0gdG9rZW47XG4gICAgICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XG4gICAgfTtcblxuICAgIC8qXG4gICAgICogUmVzdCBBUEkgd3JhcHBlcnNcbiAgICAgKi9cbiAgICBDbGllbnQucHJvdG90eXBlLmNvbmZpZyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vY29uZmlnJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnVzZXJJbmZvID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9wcm9maWxlJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoaWQsIHZlcnNpb24sIHBhc3N3b3JkLCB0aXRsZSwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhID0geyBhcHBTdG9yZUlkOiBpZCwgdmVyc2lvbjogdmVyc2lvbiwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBsb2NhdGlvbjogY29uZmlnLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IGNvbmZpZy5wb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiBjb25maWcuYWNjZXNzUmVzdHJpY3Rpb24gfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzL2luc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG5cbiAgICAgICAgICAgIC8vIHB1dCBuZXcgYXBwIHdpdGggYW1lbmRlZCB0aXRsZSBpbiBjYWNoZVxuICAgICAgICAgICAgZGF0YS5tYW5pZmVzdCA9IHsgdGl0bGU6IHRpdGxlIH07XG4gICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnB1c2goZGF0YSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKGFwcElkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IHBhc3N3b3JkOiBwYXNzd29yZCB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGFwcElkICsgJy91bmluc3RhbGwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKGlkLCBwYXNzd29yZCwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgYXBwSWQ6IGlkLCBwYXNzd29yZDogcGFzc3dvcmQsIGxvY2F0aW9uOiBjb25maWcubG9jYXRpb24sIHBvcnRCaW5kaW5nczogY29uZmlnLnBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246IGNvbmZpZy5hY2Nlc3NSZXN0cmljdGlvbiB9O1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL2FwcHMvJyArIGlkICsgJy9jb25maWd1cmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKGlkLCB2ZXJzaW9uLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvdXBkYXRlJywgeyB2ZXJzaW9uOiB2ZXJzaW9uLCBwYXNzd29yZDogcGFzc3dvcmQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKGlkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHsgfTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9hcHBzLycgKyBpZCArICcvc3RhcnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc3RvcEFwcCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7IH07XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvYXBwcy8nICsgaWQgKyAnL3N0b3AnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMikgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUudmVyc2lvbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vc3RhdHVzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmlzU2VydmVyRmlyc3RUaW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9jbG91ZHJvbi9zdGF0dXMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICFkYXRhLmFjdGl2YXRlZCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXROYWtlZERvbWFpbiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYXBwaWQpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoYXBwaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvc2V0dGluZ3MvbmFrZWRfZG9tYWluJywgeyBhcHBpZDogYXBwaWQgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDQpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdldEFwcHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2FwcHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmFwcHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwID0gZnVuY3Rpb24gKGFwcElkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXBwRm91bmQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbnN0YWxsZWRBcHBzLnNvbWUoZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAgICAgaWYgKGFwcC5pZCA9PT0gYXBwSWQpIHtcbiAgICAgICAgICAgICAgICBhcHBGb3VuZCA9IGFwcDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYXBwRm91bmQpIHJldHVybiBjYWxsYmFjayhudWxsLCBhcHBGb3VuZCk7XG4gICAgICAgIGVsc2UgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignQXBwIG5vdCBmb3VuZCcpKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5nZXRBcHBMb2dTdHJlYW0gPSBmdW5jdGlvbiAoYXBwSWQpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9nc3RyZWFtJyk7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0QXBwTG9nVXJsID0gZnVuY3Rpb24gKGFwcElkKSB7XG4gICAgICAgIHJldHVybiAnL2FwaS92MS9hcHBzLycgKyBhcHBJZCArICcvbG9ncz9hY2Nlc3NfdG9rZW49JyArIHRoaXMuX3Rva2VuO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldEFkbWluID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBhZG1pbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBhZG1pbjogYWRtaW5cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzLycgKyB1c2VybmFtZSArICcvYWRtaW4nLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwNCkgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuY3JlYXRlQWRtaW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgc2V0dXBUb2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9hY3RpdmF0ZT9zZXR1cFRva2VuPScgKyBzZXR1cFRva2VuLCBwYXlsb2FkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgdGhhdC5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgICAgICAgIHRoYXQuc2V0VXNlckluZm8oeyB1c2VybmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCwgYWRtaW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEuYWN0aXZhdGVkKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmxpc3RVc2VycyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvdXNlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZ2V0T0F1dGhDbGllbnRzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS92MS9vYXV0aC9jbGllbnRzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhLmNsaWVudHMpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUuZGVsVG9rZW5zQnlDbGllbnRJZCA9IGZ1bmN0aW9uIChpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCcvYXBpL3YxL29hdXRoL2NsaWVudHMvJyArIGlkICsgJy90b2tlbnMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL3VwZGF0ZScpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5yZWJvb3QgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3YxL2Nsb3Vkcm9uL3JlYm9vdCcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5iYWNrdXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgJGh0dHAucG9zdCgnL2FwaS92MS9jbG91ZHJvbi9iYWNrdXBzJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMiB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNldENlcnRpZmljYXRlID0gZnVuY3Rpb24gKGNlcnRpZmljYXRlRmlsZSwga2V5RmlsZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3dpbGwgc2V0IGNlcnRpZmljYXRlJyk7XG5cbiAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZkLmFwcGVuZCgnY2VydGlmaWNhdGUnLCBjZXJ0aWZpY2F0ZUZpbGUpO1xuICAgICAgICBmZC5hcHBlbmQoJ2tleScsIGtleUZpbGUpO1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvY2xvdWRyb24vY2VydGlmaWNhdGUnLCBmZCwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5XG4gICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAyMDIpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmdyYXBocyA9IGZ1bmN0aW9uICh0YXJnZXRzLCBmcm9tLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXRzLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGZyb206IGZyb21cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdjEvY2xvdWRyb24vZ3JhcGhzJywgY29uZmlnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHJldHVybiBjYWxsYmFjayhuZXcgQ2xpZW50RXJyb3Ioc3RhdHVzLCBkYXRhKSk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZGVmYXVsdEVycm9ySGFuZGxlcihjYWxsYmFjaykpO1xuICAgIH07XG5cbiAgICBDbGllbnQucHJvdG90eXBlLmNyZWF0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIGVtYWlsLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvdXNlcnMnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAxIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUucmVtb3ZlVXNlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgIH07XG5cbiAgICAgICAgJGh0dHAoeyBtZXRob2Q6ICdERUxFVEUnLCB1cmw6ICcvYXBpL3YxL3VzZXJzLycgKyB1c2VybmFtZSwgZGF0YTogZGF0YSwgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH19KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0KSByZXR1cm4gY2FsbGJhY2sobmV3IENsaWVudEVycm9yKHN0YXR1cywgZGF0YSkpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0pLmVycm9yKGRlZmF1bHRFcnJvckhhbmRsZXIoY2FsbGJhY2spKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uIChjdXJyZW50UGFzc3dvcmQsIG5ld1Bhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHBhc3N3b3JkOiBjdXJyZW50UGFzc3dvcmQsXG4gICAgICAgICAgICBuZXdQYXNzd29yZDogbmV3UGFzc3dvcmRcbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3YxL3VzZXJzLycgKyB0aGlzLl91c2VySW5mby51c2VybmFtZSArICcvcGFzc3dvcmQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjA0IHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUucmVmcmVzaENvbmZpZyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgY2FsbGJhY2sgPSB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicgPyBjYWxsYmFjayA6IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgIHRoaXMuY29uZmlnKGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG5cbiAgICAgICAgICAgIHRoYXQuc2V0Q29uZmlnKHJlc3VsdCk7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5wcm90b3R5cGUucmVmcmVzaEluc3RhbGxlZEFwcHMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgIGNhbGxiYWNrID0gdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICB0aGlzLmdldEFwcHMoZnVuY3Rpb24gKGVycm9yLCBhcHBzKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG5cbiAgICAgICAgICAgIC8vIGluc2VydCBvciB1cGRhdGUgbmV3IGFwcHNcbiAgICAgICAgICAgIGFwcHMuZm9yRWFjaChmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoYXQuX2luc3RhbGxlZEFwcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuX2luc3RhbGxlZEFwcHNbaV0uaWQgPT09IGFwcC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuY29weShhcHAsIHRoYXQuX2luc3RhbGxlZEFwcHNbZm91bmRdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9pbnN0YWxsZWRBcHBzLnB1c2goYXBwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gZmlsdGVyIG91dCBvbGQgZW50cmllcywgZ29pbmcgYmFja3dhcmRzIHRvIGFsbG93IHNwbGljaW5nXG4gICAgICAgICAgICBmb3IodmFyIGkgPSB0aGF0Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhcHBzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHsgcmV0dXJuIChlbGVtLmlkID09PSB0aGF0Ll9pbnN0YWxsZWRBcHBzW2ldLmlkKTsgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5faW5zdGFsbGVkQXBwcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0VG9rZW4obnVsbCk7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvID0ge307XG5cbiAgICAgICAgLy8gbG9nb3V0IGZyb20gT0F1dGggc2Vzc2lvblxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYXBpL3YxL3Nlc3Npb24vbG9nb3V0JztcbiAgICB9O1xuXG4gICAgQ2xpZW50LnByb3RvdHlwZS5leGNoYW5nZUNvZGVGb3JUb2tlbiA9IGZ1bmN0aW9uIChhdXRoQ29kZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJyxcbiAgICAgICAgICAgIGNvZGU6IGF1dGhDb2RlLFxuICAgICAgICAgICAgcmVkaXJlY3RfdXJpOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgY2xpZW50X2lkOiB0aGlzLl9jbGllbnRJZCxcbiAgICAgICAgICAgIGNsaWVudF9zZWNyZXQ6IHRoaXMuX2NsaWVudFNlY3JldFxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvdjEvb2F1dGgvdG9rZW4/cmVzcG9uc2VfdHlwZT10b2tlbiZjbGllbnRfaWQ9JyArIHRoaXMuX2NsaWVudElkLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGNhbGxiYWNrKG5ldyBDbGllbnRFcnJvcihzdGF0dXMsIGRhdGEpKTtcblxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YS5hY2Nlc3NfdG9rZW4pO1xuICAgICAgICB9KS5lcnJvcihkZWZhdWx0RXJyb3JIYW5kbGVyKGNhbGxiYWNrKSk7XG4gICAgfTtcblxuICAgIGNsaWVudCA9IG5ldyBDbGllbnQoKTtcbiAgICByZXR1cm4gY2xpZW50O1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdBcHBTdG9yZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJHRpbWVvdXQnLCAnQ2xpZW50JywgJ0FwcFN0b3JlJywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCAkdGltZW91dCwgQ2xpZW50LCBBcHBTdG9yZSkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUucmVhZHkgPSBmYWxzZTtcbiAgICAkc2NvcGUuYXBwcyA9IFtdO1xuXG4gICAgJHNjb3BlLmluc3RhbGxBcHAgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYXBwLycgKyBhcHAuaWQgKyAnL2luc3RhbGwnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLm9wZW5BcHAgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2xpZW50Ll9pbnN0YWxsZWRBcHBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoQ2xpZW50Ll9pbnN0YWxsZWRBcHBzW2ldLmFwcFN0b3JlSWQgPT09IGFwcC5pZCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovLycgKyBDbGllbnQuX2luc3RhbGxlZEFwcHNbaV0uZnFkbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG5cbiAgICAgICAgQXBwU3RvcmUuZ2V0QXBwcyhmdW5jdGlvbiAoZXJyb3IsIGFwcHMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkdGltZW91dChyZWZyZXNoLCAxMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFwcHMgPSBhcHBzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaCgpO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZScsICckaW50ZXJ2YWwnLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlLCAkaW50ZXJ2YWwsIENsaWVudCkge1xuICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS5jb25maWcgPSB7fTtcblxuICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgaWYgKCEkcm91dGUuY3VycmVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS5vcmlnaW5hbFBhdGguaW5kZXhPZih1cmwpID09PSAwO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgQ2xpZW50LmxvZ291dCgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWxsYmFja1VSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2xvZ2luX2NhbGxiYWNrLmh0bWwnO1xuICAgICAgICB2YXIgc2NvcGUgPSAncm9vdCxwcm9maWxlLGFwcHMscm9sZUFkbWluJztcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS92MS9vYXV0aC9kaWFsb2cvYXV0aG9yaXplP3Jlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9JyArIENsaWVudC5fY2xpZW50SWQgKyAnJnJlZGlyZWN0X3VyaT0nICsgY2FsbGJhY2tVUkwgKyAnJnNjb3BlPScgKyBzY29wZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldHVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZXJyb3IuaHRtbD9lcnJvckNvZGU9MSc7XG4gICAgfTtcblxuICAgICRzY29wZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Vycm9yLmh0bWwnO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjdXBkYXRlTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC51cGRhdGUoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXBkYXRlLmh0bWwnO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuXG4gICAgICAgICRzY29wZS5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC5iYWNrdXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBUT0RPIHRoaXMgZG9lcyBsb29rIGxpa2Ugd2Ugc2hvdWxkIHVzZSBwcm9ncmVzcy5qc29uP1xuICAgICAgICAgICAgLy8gbm93IHN0YXJ0IHF1ZXJ5XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0lmRG9uZSgpIHtcbiAgICAgICAgICAgICAgICBDbGllbnQudmVyc2lvbihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNiYWNrdXBQcm9ncmVzc01vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2hlY2tJZkRvbmUsIDUwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xpZW50LmlzU2VydmVyRmlyc3RUaW1lKGZ1bmN0aW9uIChlcnJvciwgaXNGaXJzdFRpbWUpIHtcbiAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKGlzRmlyc3RUaW1lKSByZXR1cm4gJHNjb3BlLnNldHVwKCk7XG5cbiAgICAgICAgLy8gd2UgdXNlIHRoZSBjb25maWcgcmVxdWVzdCBhcyBhbiBpbmRpY2F0b3IgaWYgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkXG4gICAgICAgIC8vIFRPRE8gd2Ugc2hvdWxkIHByb2JhYmx5IGF0dGFjaCBzdWNoIGEgaGFuZGxlciBmb3IgZWFjaCByZXF1ZXN0LCBhcyB0aGUgdG9rZW4gY2FuIGdldCBpbnZhbGlkXG4gICAgICAgIC8vIGF0IGFueSB0aW1lIVxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnRva2VuKSB7XG4gICAgICAgICAgICBDbGllbnQucmVmcmVzaENvbmZpZyhmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAxKSByZXR1cm4gJHNjb3BlLmxvZ2luKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gJHNjb3BlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZSBhY3R1YWxseSB1cGRhdGVpbmdcbiAgICAgICAgICAgICAgICBpZiAoQ2xpZW50LmdldENvbmZpZygpLnByb2dyZXNzLnVwZGF0ZSkgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcblxuICAgICAgICAgICAgICAgIENsaWVudC51c2VySW5mbyhmdW5jdGlvbiAoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiAkc2NvcGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgICAgIENsaWVudC5zZXRVc2VySW5mbyhyZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIENsaWVudC5yZWZyZXNoSW5zdGFsbGVkQXBwcyhmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuICRzY29wZS5lcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtpY2sgb2ZmIGluc3RhbGxlZCBhcHBzIGFuZCBjb25maWcgcG9sbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZnJlc2hBcHBzVGltZXIgPSAkaW50ZXJ2YWwoQ2xpZW50LnJlZnJlc2hJbnN0YWxsZWRBcHBzLmJpbmQoQ2xpZW50KSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcmVzaENvbmZpZ1RpbWVyID0gJGludGVydmFsKENsaWVudC5yZWZyZXNoQ29uZmlnLmJpbmQoQ2xpZW50KSwgNTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocmVmcmVzaEFwcHNUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChyZWZyZXNoQ29uZmlnVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdyBtYXJrIHRoZSBDbGllbnQgdG8gYmUgcmVhZHlcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudC5zZXRSZWFkeSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHdhaXQgdGlsbCB0aGUgdmlldyBoYXMgbG9hZGVkIHVudGlsIHNob3dpbmcgYSBtb2RhbCBkaWFsb2dcbiAgICBDbGllbnQub25Db25maWcoZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBpZiAoY29uZmlnLnByb2dyZXNzLnVwZGF0ZSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcbiAgICAgICAgfVxuICAgIH0pO1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5jb250cm9sbGVyKCdBY2NvdW50Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgICRzY29wZS51c2VyID0gQ2xpZW50LmdldFVzZXJJbmZvKCk7XG4gICAgJHNjb3BlLmNvbmZpZyA9IENsaWVudC5nZXRDb25maWcoKTtcblxuICAgICRzY29wZS5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy91c2VycGFzc3dvcmQnKTtcbiAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy91c2VycGFzc3dvcmQnO1xuICAgIH07XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcENvbmZpZ3VyZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFwcCA9IG51bGw7XG4gICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLmxvY2F0aW9uID0gJyc7XG4gICAgJHNjb3BlLmFjY2Vzc1Jlc3RyaWN0aW9uID0gJyc7XG4gICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgJHNjb3BlLmVycm9yID0ge307XG4gICAgJHNjb3BlLmRvbWFpbiA9ICcnO1xuICAgICRzY29wZS5wb3J0QmluZGluZ3MgPSB7IH07XG5cbiAgICAkc2NvcGUuY29uZmlndXJlQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAgICAgZm9yICh2YXIgY29udGFpbmVyUG9ydCBpbiAkc2NvcGUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0gPSAkc2NvcGUucG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdLmhvc3RQb3J0O1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LmNvbmZpZ3VyZUFwcCgkcm91dGVQYXJhbXMuYXBwSWQsICRzY29wZS5wYXNzd29yZCwgeyBsb2NhdGlvbjogJHNjb3BlLmxvY2F0aW9uLCBwb3J0QmluZGluZ3M6IHBvcnRCaW5kaW5ncywgYWNjZXNzUmVzdHJpY3Rpb246ICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yLnBhc3N3b3JkID0gJ1dyb25nIHBhc3N3b3JkIHByb3ZpZGVkLic7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5uYW1lID0gJ0FwcCB3aXRoIHRoZSBuYW1lICcgKyAkc2NvcGUuYXBwLm5hbWUgKyAnIGNhbm5vdCBiZSBjb25maWd1cmVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnIy9hcHAvJyArICRyb3V0ZVBhcmFtcy5hcHBJZCArICcvZGV0YWlscycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH07XG5cbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5kb21haW4gPSBDbGllbnQuZ2V0Q29uZmlnKCkuZnFkbjtcblxuICAgICAgICBDbGllbnQuZ2V0QXBwKCRyb3V0ZVBhcmFtcy5hcHBJZCwgZnVuY3Rpb24gKGVycm9yLCBhcHApIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yIHx8IHsgfTtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuO1xuXG4gICAgICAgICAgICAkc2NvcGUuYXBwID0gYXBwO1xuICAgICAgICAgICAgJHNjb3BlLmxvY2F0aW9uID0gYXBwLmxvY2F0aW9uO1xuICAgICAgICAgICAgJHNjb3BlLnBvcnRCaW5kaW5ncyA9IGFwcC5tYW5pZmVzdC50Y3BQb3J0cztcbiAgICAgICAgICAgICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiA9IGFwcC5hY2Nlc3NSZXN0cmljdGlvbjtcbiAgICAgICAgICAgIGZvciAodmFyIGNvbnRhaW5lclBvcnQgaW4gJHNjb3BlLnBvcnRCaW5kaW5ncykge1xuICAgICAgICAgICAgICAgICRzY29wZS5wb3J0QmluZGluZ3NbY29udGFpbmVyUG9ydF0uaG9zdFBvcnQgPSBhcHAucG9ydEJpbmRpbmdzW2NvbnRhaW5lclBvcnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dExvY2F0aW9uJykuZm9jdXMoKTtcbn1dKTtcbiIsIi8qIGdsb2JhbCAkOnRydWUgKi9cbi8qIGdsb2JhbCBSaWNrc2hhdzp0cnVlICovXG5cbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignQXBwRGV0YWlsc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5hcHAgPSB7fTtcbiAgICAkc2NvcGUuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAkc2NvcGUudXBkYXRlQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgJHNjb3BlLmFjdGl2ZVRhYiA9ICdkYXknO1xuICAgICRzY29wZS51cGRhdGVWZXJzaW9uID0gbnVsbDtcbiAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IGZhbHNlO1xuXG4gICAgJHNjb3BlLnN0YXJ0QXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBDbGllbnQuc3RhcnRBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc3RvcEFwcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQ2xpZW50LnN0b3BBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC51cGRhdGVBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCAkc2NvcGUudXBkYXRlVmVyc2lvbiwgJHNjb3BlLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5zdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgJCgnI2lucHV0UGFzc3dvcmRVcGRhdGUnKS5mb2N1cygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjdXBkYXRlQXBwTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVBdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlVmVyc2lvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudW5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucGFzc3dvcmRXcm9uZyA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC51bmluc3RhbGxBcHAoJHJvdXRlUGFyYW1zLmFwcElkLCAkc2NvcGUucGFzc3dvcmQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZFdyb25nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKCcjaW5wdXRQYXNzd29yZFVuaW5zdGFsbCcpLmZvY3VzKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyN1bmluc3RhbGxBcHBNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy8nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVuZGVyQ3B1KGFjdGl2ZVRhYiwgY3B1RGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRDcHUgPSBbIF07XG5cbiAgICAgICAgaWYgKGNwdURhdGEgJiYgY3B1RGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZENwdSA9IGNwdURhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuXG4gICAgICAgIHZhciBjcHVHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdDcHVDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnc3RlZWxibHVlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZENwdSB8fCBbIF0sXG4gICAgICAgICAgICAgICAgbmFtZTogJ2NwdSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogY3B1R3JhcGggfSk7XG4gICAgICAgIHZhciBjcHVZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IGNwdUdyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0NwdVlBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkpLnRvRml4ZWQoMikgKyAnJTxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjcHVHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJNZW1vcnkoYWN0aXZlVGFiLCBtZW1vcnlEYXRhKSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZE1lbW9yeSA9IFsgXTtcblxuICAgICAgICBpZiAobWVtb3J5RGF0YSAmJiBtZW1vcnlEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkTWVtb3J5ID0gbWVtb3J5RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIG1lbW9yeUdyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ01lbW9yeUNoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAyICogMTAyNCAqIDEwMjQgKiAxMDI0LCAvLyAyZ2JcbiAgICAgICAgICAgIHNlcmllczogWyB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkTWVtb3J5IHx8IFsgXSxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbWVtb3J5J1xuICAgICAgICAgICAgfSBdXG4gICAgICAgIH0gKTtcblxuICAgICAgICB2YXIgbWVtb3J5WEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IG1lbW9yeUdyYXBoIH0pO1xuICAgICAgICB2YXIgbWVtb3J5WUF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5ZKHtcbiAgICAgICAgICAgIGdyYXBoOiBtZW1vcnlHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdNZW1vcnlZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWVtb3J5SG92ZXJEZXRhaWwgPSBuZXcgUmlja3NoYXcuR3JhcGguSG92ZXJEZXRhaWwoe1xuICAgICAgICAgICAgZ3JhcGg6IG1lbW9yeUdyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5LygxMDI0KjEwMjQpKS50b0ZpeGVkKDIpICsgJ01CPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lbW9yeUdyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckRpc2soYWN0aXZlVGFiLCBkaXNrRGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWREaXNrID0gWyBdO1xuXG4gICAgICAgIGlmIChkaXNrRGF0YSAmJiBkaXNrRGF0YS5kYXRhcG9pbnRzKSB0cmFuc2Zvcm1lZERpc2sgPSBkaXNrRGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG5cbiAgICAgICAgdmFyIGRpc2tHcmFwaCA9IG5ldyBSaWNrc2hhdy5HcmFwaCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGFjdGl2ZVRhYiArICdEaXNrQ2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDMwICogMTAyNCAqIDEwMjQgKiAxMDI0LCAvLyAzMGdiXG4gICAgICAgICAgICBzZXJpZXM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdzdGVlbGJsdWUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZm9ybWVkRGlzayB8fCBbIF0sXG4gICAgICAgICAgICAgICAgbmFtZTogJ2FwcHMnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgdmFyIGRpc2tYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogZGlza0dyYXBoIH0pO1xuICAgICAgICB2YXIgZGlza1lBeGlzID0gbmV3IFJpY2tzaGF3LkdyYXBoLkF4aXMuWSh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tZQXhpcycpLFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0hvdmVyRGV0YWlsID0gbmV3IFJpY2tzaGF3LkdyYXBoLkhvdmVyRGV0YWlsKHtcbiAgICAgICAgICAgIGdyYXBoOiBkaXNrR3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkvKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICdNQjxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGlza0xlZ2VuZCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5MZWdlbmQoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdEaXNrTGVnZW5kJylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlza0dyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVHcmFwaHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjcHVVc2FnZVRhcmdldCA9XG4gICAgICAgICAgICAnbm9uTmVnYXRpdmVEZXJpdmF0aXZlKCcgK1xuICAgICAgICAgICAgICAgICdzdW1TZXJpZXMoY29sbGVjdGQubG9jYWxob3N0LnRhYmxlLScgKyAkc2NvcGUuYXBwLmlkICsgJy1jcHUuZ2F1Z2UtdXNlciwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbGxlY3RkLmxvY2FsaG9zdC50YWJsZS0nICsgJHNjb3BlLmFwcC5pZCArICctY3B1LmdhdWdlLXN5c3RlbSkpJzsgLy8gYXNzdW1lcyAxMDAgamlmZmllcyBwZXIgc2VjIChVU0VSX0haKVxuXG4gICAgICAgIHZhciBtZW1vcnlVc2FnZVRhcmdldCA9ICdjb2xsZWN0ZC5sb2NhbGhvc3QudGFibGUtJyArICRzY29wZS5hcHAuaWQgKyAnLW1lbW9yeS5nYXVnZS1tYXhfdXNhZ2VfaW5fYnl0ZXMnO1xuXG4gICAgICAgIHZhciBkaXNrVXNhZ2VUYXJnZXQgPSAnY29sbGVjdGQubG9jYWxob3N0LmZpbGVjb3VudC0nICsgJHNjb3BlLmFwcC5pZCArICctYXBwZGF0YS5ieXRlcyc7XG5cbiAgICAgICAgdmFyIGFjdGl2ZVRhYiA9ICRzY29wZS5hY3RpdmVUYWI7XG4gICAgICAgIHZhciBmcm9tID0gJy0yNGhvdXJzJztcbiAgICAgICAgc3dpdGNoIChhY3RpdmVUYWIpIHtcbiAgICAgICAgY2FzZSAnZGF5JzogZnJvbSA9ICctMjRob3Vycyc7IGJyZWFrO1xuICAgICAgICBjYXNlICdtb250aCc6IGZyb20gPSAnLTFtb250aCc7IGJyZWFrO1xuICAgICAgICBjYXNlICd5ZWFyJzogZnJvbSA9ICctMXllYXInOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogY29uc29sZS5sb2coJ2ludGVybmFsIGVycnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50LmdyYXBocyhbIGNwdVVzYWdlVGFyZ2V0LCBtZW1vcnlVc2FnZVRhcmdldCwgZGlza1VzYWdlVGFyZ2V0IF0sIGZyb20sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICByZW5kZXJDcHUoYWN0aXZlVGFiLCBkYXRhWzBdKTtcblxuICAgICAgICAgICAgcmVuZGVyTWVtb3J5KGFjdGl2ZVRhYiwgZGF0YVsxXSk7XG5cbiAgICAgICAgICAgIHJlbmRlckRpc2soYWN0aXZlVGFiLCBkYXRhWzJdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBDbGllbnQuZ2V0QXBwKCRyb3V0ZVBhcmFtcy5hcHBJZCwgZnVuY3Rpb24gKGVycm9yLCBhcHApIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hcHAgPSBhcHA7XG4gICAgICAgICAgICAkc2NvcGUuYXBwTG9nVXJsID0gQ2xpZW50LmdldEFwcExvZ1VybChhcHAuaWQpO1xuXG4gICAgICAgICAgICBpZiAoQ2xpZW50LmdldENvbmZpZygpLnVwZGF0ZSAmJiBDbGllbnQuZ2V0Q29uZmlnKCkudXBkYXRlLmFwcHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXBwVXBkYXRlcyA9IENsaWVudC5nZXRDb25maWcoKS51cGRhdGUuYXBwcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFwcFVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwcFVwZGF0ZXNbaV0uYXBwSWQgPT09ICRzY29wZS5hcHAuYXBwU3RvcmVJZCAmJiBhcHBVcGRhdGVzW2ldLnZlcnNpb24gIT09ICAkc2NvcGUuYXBwLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVZlcnNpb24gPSBhcHBVcGRhdGVzW2ldLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS51cGRhdGVHcmFwaHMoKTtcblxuICAgICAgICAgICAgJHNjb3BlLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcEluc3RhbGxDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCAnQXBwU3RvcmUnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgQ2xpZW50LCBBcHBTdG9yZSwgJHRpbWVvdXQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLmFwcCA9IG51bGw7XG4gICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XG4gICAgJHNjb3BlLmxvY2F0aW9uID0gJyc7XG4gICAgJHNjb3BlLmFjY2Vzc1Jlc3RyaWN0aW9uID0gJyc7XG4gICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgJHNjb3BlLmVycm9yID0geyB9O1xuICAgICRzY29wZS5kb21haW4gPSAnJztcbiAgICAkc2NvcGUudmVyc2lvbiA9IG51bGw7XG4gICAgJHNjb3BlLnBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAkc2NvcGUuaG9zdFBvcnRNaW4gPSAxMDI1O1xuICAgICRzY29wZS5ob3N0UG9ydE1heCA9IDk5OTk7XG5cbiAgICBDbGllbnQub25SZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5kb21haW4gPSBDbGllbnQuZ2V0Q29uZmlnKCkuZnFkbjtcblxuICAgICAgICBBcHBTdG9yZS5nZXRBcHBCeUlkKCRyb3V0ZVBhcmFtcy5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIGFwcCkge1xuICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZXJyb3IgfHwgeyB9O1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm47XG4gICAgICAgICAgICAkc2NvcGUuYXBwID0gYXBwO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUT0RPOiB0aGlzIHNob3VsZCBiZSBiYXNlZCBvbiBib3hWZXJzaW9uXG4gICAgICAgIEFwcFN0b3JlLmdldE1hbmlmZXN0KCRyb3V0ZVBhcmFtcy5hcHBTdG9yZUlkLCBmdW5jdGlvbiAoZXJyb3IsIG1hbmlmZXN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvciB8fCB7IH07XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybjtcbiAgICAgICAgICAgICRzY29wZS52ZXJzaW9uID0gbWFuaWZlc3QudmVyc2lvbjtcbiAgICAgICAgICAgICRzY29wZS5wb3J0QmluZGluZ3MgPSBtYW5pZmVzdC50Y3BQb3J0cztcbiAgICAgICAgICAgICRzY29wZS5hY2Nlc3NSZXN0cmljdGlvbiA9IG1hbmlmZXN0LmFjY2Vzc1Jlc3RyaWN0aW9uIHx8ICcnO1xuICAgICAgICAgICAgLy8gZGVmYXVsdCBzZXR0aW5nIGlzIHRvIG1hcCBwb3J0cyBhcyB0aGV5IGFyZSBpbiBtYW5pZmVzdFxuICAgICAgICAgICAgZm9yICh2YXIgcG9ydCBpbiAkc2NvcGUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvcnRCaW5kaW5nc1twb3J0XS5ob3N0UG9ydCA9IHBhcnNlSW50KHBvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICRzY29wZS5pbnN0YWxsQXBwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9IG51bGw7XG5cbiAgICAgICAgdmFyIHBvcnRCaW5kaW5ncyA9IHsgfTtcbiAgICAgICAgZm9yICh2YXIgcG9ydCBpbiAkc2NvcGUucG9ydEJpbmRpbmdzKSB7XG4gICAgICAgICAgICBwb3J0QmluZGluZ3NbcG9ydF0gPSAkc2NvcGUucG9ydEJpbmRpbmdzW3BvcnRdLmhvc3RQb3J0O1xuICAgICAgICB9XG5cbiAgICAgICAgQ2xpZW50Lmluc3RhbGxBcHAoJHJvdXRlUGFyYW1zLmFwcFN0b3JlSWQsICRzY29wZS52ZXJzaW9uLCAkc2NvcGUucGFzc3dvcmQsICRzY29wZS5hcHAudGl0bGUsIHsgbG9jYXRpb246ICRzY29wZS5sb2NhdGlvbiwgcG9ydEJpbmRpbmdzOiBwb3J0QmluZGluZ3MsIGFjY2Vzc1Jlc3RyaWN0aW9uOiAkc2NvcGUuYWNjZXNzUmVzdHJpY3Rpb24gfSwgZnVuY3Rpb24gKGVycm9yLCBhcHBJZCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1c0NvZGUgPT09IDQwOSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9ICdBcHBsaWNhdGlvbiBhbHJlYWR5IGV4aXN0cy4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9ICdXcm9uZyBwYXNzd29yZCBwcm92aWRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IubmFtZSA9ICdBcHAgd2l0aCB0aGUgbmFtZSAnICsgJHNjb3BlLmFwcC5uYW1lICsgJyBjYW5ub3QgYmUgaW5zdGFsbGVkLic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnIy9hcHAvJyArIGFwcElkICsgJy9kZXRhaWxzJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgfTtcblxuICAgIC8vIGhhY2sgZm9yIGF1dG9mb2N1cyB3aXRoIGFuZ3VsYXJcbiAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsgJCgnaW5wdXRbYXV0b2ZvY3VzXTp2aXNpYmxlOmZpcnN0JykuZm9jdXMoKTsgfSwgMTAwMCk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0FwcExpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgJHNjb3BlLmluc3RhbGxlZEFwcHMgPSBDbGllbnQuZ2V0SW5zdGFsbGVkQXBwcygpO1xuXG4gICAgJHNjb3BlLnNob3dEZXRhaWxzID0gZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2FwcC8nICsgYXBwLmlkICsgJy9kZXRhaWxzJyk7XG4gICAgfTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIGZ1bmN0aW9uICgpIHtcblxufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ0Ruc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBDbGllbnQpIHtcbiAgICBpZiAoIUNsaWVudC5nZXRVc2VySW5mbygpLmFkbWluKSAkbG9jYXRpb24ucGF0aCgnLycpO1xuXG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG4gICAgJHNjb3BlLnVzZXIgPSBDbGllbnQuZ2V0VXNlckluZm8oKTtcbiAgICAkc2NvcGUuY29uZmlnID0gQ2xpZW50LmdldENvbmZpZygpO1xuICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9IG51bGw7XG4gICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZSA9IG51bGw7XG4gICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZU5hbWUgPSAnJztcbiAgICAkc2NvcGUua2V5RmlsZSA9IG51bGw7XG4gICAgJHNjb3BlLmtleUZpbGVOYW1lID0gJyc7XG5cbiAgICAkc2NvcGUuc2V0TmFrZWREb21haW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcHBpZCA9ICRzY29wZS5uYWtlZERvbWFpbkFwcCA/ICRzY29wZS5uYWtlZERvbWFpbkFwcC5pZCA6ICdhZG1pbic7XG5cbiAgICAgICAgQ2xpZW50LnNldE5ha2VkRG9tYWluKGFwcGlkLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgbmFrZWQgZG9tYWluJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIENsaWVudC5iYWNrdXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICAvLyBub3cgc3RhcnQgcXVlcnlcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSWZEb25lKCkge1xuICAgICAgICAgICAgICAgIENsaWVudC52ZXJzaW9uKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjaGVja0lmRG9uZSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI2JhY2t1cFByb2dyZXNzTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrSWZEb25lLCA1MDAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyN1cGRhdGVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgJHNjb3BlLiRwYXJlbnQuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgICAgICBDbGllbnQudXBkYXRlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3VwZGF0ZS5odG1sJztcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZENlcnRpZmljYXRlJykub25jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2VydGlmaWNhdGVGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgJHNjb3BlLmNlcnRpZmljYXRlRmlsZU5hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZEtleScpLm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmtleUZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAkc2NvcGUua2V5RmlsZU5hbWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRDZXJ0aWZpY2F0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1dpbGwgc2V0IHRoZSBjZXJ0aWZpY2F0ZScpO1xuXG4gICAgICAgIGlmICghJHNjb3BlLmNlcnRpZmljYXRlRmlsZSkgcmV0dXJuIGNvbnNvbGUubG9nKCdDZXJ0aWZpY2F0ZSBub3Qgc2V0Jyk7XG4gICAgICAgIGlmICghJHNjb3BlLmtleUZpbGUpIHJldHVybiBjb25zb2xlLmxvZygnS2V5IG5vdCBzZXQnKTtcblxuICAgICAgICBDbGllbnQuc2V0Q2VydGlmaWNhdGUoJHNjb3BlLmNlcnRpZmljYXRlRmlsZSwgJHNjb3BlLmtleUZpbGUsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh3aW5kb3cubG9jYXRpb24ucmVsb2FkLmJpbmQod2luZG93LmxvY2F0aW9uLCB0cnVlKSwgMzAwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQub25Db25maWcoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUudG9rZW5JblVzZSA9IENsaWVudC5fdG9rZW47XG5cbiAgICAgICAgQ2xpZW50LmdldEFwcHMoZnVuY3Rpb24gKGVycm9yLCBhcHBzKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgYXBwIGxpc3QnKTtcbiAgICAgICAgICAgICRzY29wZS5hcHBzID0gYXBwcztcblxuICAgICAgICAgICAgQ2xpZW50LmdldE5ha2VkRG9tYWluKGZ1bmN0aW9uIChlcnJvciwgYXBwaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICRzY29wZS5uYWtlZERvbWFpbkFwcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuYXBwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFwcHNbaV0uaWQgPT09IGFwcGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFrZWREb21haW5BcHAgPSAkc2NvcGUuYXBwc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTtcbiIsIi8qIGdsb2JhbDpSaWNrc2hhdzp0cnVlICovXG5cbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignR3JhcGhzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUuYWN0aXZlVGFiID0gJ2RheSc7XG5cbiAgICB2YXIgY3B1VXNhZ2VUYXJnZXQgPSAndHJhbnNmb3JtTnVsbCgnICtcbiAgICAnc2NhbGUoZGl2aWRlU2VyaWVzKCcgK1xuICAgICAgICAnc3VtU2VyaWVzKGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtc3lzdGVtLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtbmljZSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXVzZXIpLCcgK1xuICAgICAgICAnc3VtU2VyaWVzKGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtaWRsZSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LXN5c3RlbSxjb2xsZWN0ZC5sb2NhbGhvc3QuY3B1LTAuY3B1LW5pY2UsY29sbGVjdGQubG9jYWxob3N0LmNwdS0wLmNwdS11c2VyLGNvbGxlY3RkLmxvY2FsaG9zdC5jcHUtMC5jcHUtd2FpdCkpLCAxMDApLCAwKSc7XG5cbiAgICB2YXIgbmV0d29ya1VzYWdlVHhUYXJnZXQgPSAndHJhbnNmb3JtTnVsbChjb2xsZWN0ZC5sb2NhbGhvc3QuaW50ZXJmYWNlLWV0aDAuaWZfb2N0ZXRzLnR4LCAwKSc7XG4gICAgdmFyIG5ldHdvcmtVc2FnZVJ4VGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmludGVyZmFjZS1ldGgwLmlmX29jdGV0cy5yeCwgMCknO1xuXG4gICAgdmFyIGRpc2tVc2FnZUFwcHNVc2VkVGFyZ2V0ID0gJ3RyYW5zZm9ybU51bGwoY29sbGVjdGQubG9jYWxob3N0LmRmLWxvb3AwLmRmX2NvbXBsZXgtdXNlZCwgMCknO1xuICAgIHZhciBkaXNrVXNhZ2VEYXRhVXNlZFRhcmdldCA9ICd0cmFuc2Zvcm1OdWxsKGNvbGxlY3RkLmxvY2FsaG9zdC5kZi1sb29wMS5kZl9jb21wbGV4LXVzZWQsIDApJztcblxuICAgIGZ1bmN0aW9uIHJlbmRlckNwdShhY3RpdmVUYWIsIGNwdURhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkQ3B1ID0gWyBdO1xuXG4gICAgICAgIGlmIChjcHVEYXRhICYmIGNwdURhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRDcHUgPSBjcHVEYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfSB9KTtcblxuICAgICAgICB2YXIgY3B1R3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnQ3B1Q2hhcnQnKSxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAnYXJlYScsXG4gICAgICAgICAgICB3aWR0aDogNTgwLFxuICAgICAgICAgICAgaGVpZ2h0OiAyNTAsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICAgIHNlcmllczogW3tcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRDcHUsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2NwdSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVYQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlRpbWUoeyBncmFwaDogY3B1R3JhcGggfSk7XG4gICAgICAgIHZhciBjcHVZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IGNwdUdyYXBoLFxuICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0JyxcbiAgICAgICAgICAgIHRpY2tGb3JtYXQ6IFJpY2tzaGF3LkZpeHR1cmVzLk51bWJlci5mb3JtYXRLTUJULFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0NwdVlBeGlzJyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjcHVIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogY3B1R3JhcGgsXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uKHNlcmllcywgeCwgeSkge1xuICAgICAgICAgICAgICAgIHZhciBzd2F0Y2ggPSAnPHNwYW4gY2xhc3M9XCJkZXRhaWxfc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICsgc2VyaWVzLmNvbG9yICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gc3dhdGNoICsgc2VyaWVzLm5hbWUgKyBcIjogXCIgKyBuZXcgTnVtYmVyKHkpLnRvRml4ZWQoMikgKyAnJTxicj4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjcHVHcmFwaC5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJOZXR3b3JrKGFjdGl2ZVRhYiwgdHhEYXRhLCByeERhdGEpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkVHggPSBbIF0sIHRyYW5zZm9ybWVkUnggPSBbIF07XG5cbiAgICAgICAgaWYgKHR4RGF0YSAmJiB0eERhdGEuZGF0YXBvaW50cykgdHJhbnNmb3JtZWRUeCA9IHR4RGF0YS5kYXRhcG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHsgeTogcG9pbnRbMF0sIHg6IHBvaW50WzFdIH0gfSk7XG4gICAgICAgIGlmIChyeERhdGEgJiYgcnhEYXRhLmRhdGFwb2ludHMpIHRyYW5zZm9ybWVkUnggPSByeERhdGEuZGF0YXBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7IHJldHVybiB7IHk6IHBvaW50WzBdLCB4OiBwb2ludFsxXSB9IH0pO1xuXG4gICAgICAgIHZhciBuZXR3b3JrR3JhcGggPSBuZXcgUmlja3NoYXcuR3JhcGgoe1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhY3RpdmVUYWIgKyAnTmV0d29ya0NoYXJ0JyksXG4gICAgICAgICAgICByZW5kZXJlcjogJ2FyZWEnLFxuICAgICAgICAgICAgd2lkdGg6IDU4MCxcbiAgICAgICAgICAgIGhlaWdodDogMjUwLFxuICAgICAgICAgICAgc2VyaWVzOiBbIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRUeCxcbiAgICAgICAgICAgICAgICBuYW1lOiAndHgnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRSeCxcbiAgICAgICAgICAgICAgICBuYW1lOiAncngnXG4gICAgICAgICAgICB9IF1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIHZhciBuZXR3b3JrWEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IG5ldHdvcmtHcmFwaCB9KTtcbiAgICAgICAgdmFyIG5ldHdvcmtZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IG5ldHdvcmtHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdOZXR3b3JrWUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIG5ldHdvcmtIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogbmV0d29ya0dyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5LzEwMjQpLnRvRml4ZWQoMikgKyAnS0I8YnI+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV0d29ya0dyYXBoLnJlbmRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckRpc2soYWN0aXZlVGFiLCBhcHBzVXNlZERhdGEsIGRhdGFVc2VkRGF0YSkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWRBcHBzVXNlZCA9IFsgXSwgdHJhbnNmb3JtZWREYXRhVXNlZCA9IFsgXTtcblxuICAgICAgICBpZiAoYXBwc1VzZWREYXRhICYmIGFwcHNVc2VkRGF0YS5kYXRhcG9pbnRzKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZEFwcHNVc2VkID0gYXBwc1VzZWREYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YVVzZWREYXRhICYmIGRhdGFVc2VkRGF0YS5kYXRhcG9pbnRzKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZERhdGFVc2VkID0gZGF0YVVzZWREYXRhLmRhdGFwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4geyB5OiBwb2ludFswXSwgeDogcG9pbnRbMV0gfTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGlza0dyYXBoID0gbmV3IFJpY2tzaGF3LkdyYXBoKHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYWN0aXZlVGFiICsgJ0Rpc2tDaGFydCcpLFxuICAgICAgICAgICAgcmVuZGVyZXI6ICdhcmVhJyxcbiAgICAgICAgICAgIHdpZHRoOiA1ODAsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1MCxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMzAgKiAxMDI0ICogMTAyNCAqIDEwMjQsIC8vIDMwZ2JcbiAgICAgICAgICAgIHNlcmllczogW3tcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgZGF0YTogdHJhbnNmb3JtZWRBcHBzVXNlZCxcbiAgICAgICAgICAgICAgICBuYW1lOiAnYXBwcydcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ2dyZWVuJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB0cmFuc2Zvcm1lZERhdGFVc2VkLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdkYXRhJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIHZhciBkaXNrWEF4aXMgPSBuZXcgUmlja3NoYXcuR3JhcGguQXhpcy5UaW1lKHsgZ3JhcGg6IGRpc2tHcmFwaCB9KTtcbiAgICAgICAgdmFyIGRpc2tZQXhpcyA9IG5ldyBSaWNrc2hhdy5HcmFwaC5BeGlzLlkoe1xuICAgICAgICAgICAgZ3JhcGg6IGRpc2tHcmFwaCxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGVmdCcsXG4gICAgICAgICAgICB0aWNrRm9ybWF0OiBSaWNrc2hhdy5GaXh0dXJlcy5OdW1iZXIuZm9ybWF0S01CVCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYiArICdEaXNrWUF4aXMnKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRpc2tIb3ZlckRldGFpbCA9IG5ldyBSaWNrc2hhdy5HcmFwaC5Ib3ZlckRldGFpbCh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihzZXJpZXMsIHgsIHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoID0gJzxzcGFuIGNsYXNzPVwiZGV0YWlsX3N3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogJyArIHNlcmllcy5jb2xvciArICdcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHN3YXRjaCArIHNlcmllcy5uYW1lICsgXCI6IFwiICsgbmV3IE51bWJlcih5LygxMDI0ICogMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpICsgJ0dCPGJyPic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBkaXNrTGVnZW5kID0gbmV3IFJpY2tzaGF3LkdyYXBoLkxlZ2VuZCh7XG4gICAgICAgICAgICBncmFwaDogZGlza0dyYXBoLFxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiICsgJ0Rpc2tMZWdlbmQnKVxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNrR3JhcGgucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnVwZGF0ZUdyYXBocyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFjdGl2ZVRhYiA9ICRzY29wZS5hY3RpdmVUYWI7XG4gICAgICAgdmFyIGZyb20gPSAnLTI0aG91cnMnO1xuICAgICAgICBzd2l0Y2ggKGFjdGl2ZVRhYikge1xuICAgICAgICBjYXNlICdkYXknOiBmcm9tID0gJy0yNGhvdXJzJzsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vbnRoJzogZnJvbSA9ICctMW1vbnRoJzsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3llYXInOiBmcm9tID0gJy0xeWVhcic7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiBjb25zb2xlLmxvZygnaW50ZXJuYWwgZXJycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBDbGllbnQuZ3JhcGhzKFsgY3B1VXNhZ2VUYXJnZXQsIG5ldHdvcmtVc2FnZVR4VGFyZ2V0LCBuZXR3b3JrVXNhZ2VSeFRhcmdldCwgZGlza1VzYWdlQXBwc1VzZWRUYXJnZXQsIGRpc2tVc2FnZURhdGFVc2VkVGFyZ2V0IF0sIGZyb20sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICByZW5kZXJDcHUoYWN0aXZlVGFiLCBkYXRhWzBdKTtcblxuICAgICAgICAgICAgcmVuZGVyTmV0d29yayhhY3RpdmVUYWIsIGRhdGFbMV0sIGRhdGFbMl0pO1xuXG4gICAgICAgICAgICByZW5kZXJEaXNrKGFjdGl2ZVRhYiwgZGF0YVszXSwgZGF0YVs0XSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDbGllbnQub25SZWFkeSgkc2NvcGUudXBkYXRlR3JhcGhzKTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignU2VjdXJpdHlDb250cm9sbGVyJywgWyckc2NvcGUnLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgQ2xpZW50KSB7XG4gICAgJHNjb3BlLmFjdGl2ZUNsaWVudHMgPSBbXTtcbiAgICAkc2NvcGUudG9rZW5JblVzZSA9IG51bGw7XG4gICAgJHNjb3BlLnJlYWR5ID0gZmFsc2U7XG5cbiAgICAkc2NvcGUucmVtb3ZlQWNjZXNzVG9rZW5zID0gZnVuY3Rpb24gKGNsaWVudCwgZXZlbnQpIHtcbiAgICAgICAgY2xpZW50Ll9idXN5ID0gdHJ1ZTtcblxuICAgICAgICBDbGllbnQuZGVsVG9rZW5zQnlDbGllbnRJZChjbGllbnQuaWQsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAkKGV2ZW50LnRhcmdldCkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICBjbGllbnQuX2J1c3kgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIENsaWVudC5vblJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnRva2VuSW5Vc2UgPSBDbGllbnQuX3Rva2VuO1xuXG4gICAgICAgIENsaWVudC5nZXRPQXV0aENsaWVudHMoZnVuY3Rpb24gKGVycm9yLCBhY3RpdmVDbGllbnRzKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLmFjdGl2ZUNsaWVudHMgPSBhY3RpdmVDbGllbnRzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpLmNvbnRyb2xsZXIoJ1VzZXJDcmVhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdDbGllbnQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgJHNjb3BlLnVzZXJuYW1lID0gJyc7XG4gICAgJHNjb3BlLmVtYWlsID0gJyc7XG4gICAgJHNjb3BlLmFscmVhZHlUYWtlbiA9ICcnO1xuXG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmFscmVhZHlUYWtlbiA9ICcnO1xuXG4gICAgICAgICRzY29wZS5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgQ2xpZW50LmNyZWF0ZVVzZXIoJHNjb3BlLnVzZXJuYW1lLCAkc2NvcGUuZW1haWwsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnN0YXR1c0NvZGUgPT09IDQwOSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5hbHJlYWR5VGFrZW4gPSAkc2NvcGUudXNlcm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VzZXJuYW1lIGFscmVhZHkgdGFrZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSB1c2VyLicsIGVycm9yKTtcblxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnIy91c2VybGlzdCc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgfTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignVXNlckxpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0NsaWVudCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgQ2xpZW50KSB7XG4gICAgaWYgKCFDbGllbnQuZ2V0VXNlckluZm8oKS5hZG1pbikgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblxuICAgICRzY29wZS5yZWFkeSA9IGZhbHNlO1xuICAgICRzY29wZS51c2VycyA9IFtdO1xuICAgICRzY29wZS51c2VySW5mbyA9IENsaWVudC5nZXRVc2VySW5mbygpO1xuICAgICRzY29wZS51c2VyRGVsZXRlRm9ybSA9IHtcbiAgICAgICAgdXNlcm5hbWU6ICcnLFxuICAgICAgICBwYXNzd29yZDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzTWUgPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gdXNlci51c2VybmFtZSA9PT0gQ2xpZW50LmdldFVzZXJJbmZvKCkudXNlcm5hbWU7XG4gICAgfTtcblxuICAgICRzY29wZS5pc0FkbWluID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuICEhdXNlci5hZG1pbjtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnRvZ2dsZUFkbWluID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgQ2xpZW50LnNldEFkbWluKHVzZXIudXNlcm5hbWUsICF1c2VyLmFkbWluLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICB1c2VyLmFkbWluID0gIXVzZXIuYWRtaW47XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZGVsZXRlVXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIC8vIFRPRE8gYWRkIGJ1c3kgaW5kaWNhdG9yIGFuZCBibG9jayBmb3JtXG4gICAgICAgIGlmICgkc2NvcGUudXNlckRlbGV0ZUZvcm0udXNlcm5hbWUgIT09IHVzZXIudXNlcm5hbWUpIHJldHVybiBjb25zb2xlLmVycm9yKCdVc2VybmFtZSBkb2VzIG5vdCBtYXRjaCcpO1xuXG4gICAgICAgIENsaWVudC5yZW1vdmVVc2VyKHVzZXIudXNlcm5hbWUsICRzY29wZS51c2VyRGVsZXRlRm9ybS5wYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAxKSByZXR1cm4gY29uc29sZS5lcnJvcignV3JvbmcgcGFzc3dvcmQnKTtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBkZWxldGUgdXNlci4nLCBlcnJvcik7XG5cbiAgICAgICAgICAgICQoJyN1c2VyRGVsZXRlTW9kYWwtJyArIHVzZXIudXNlcm5hbWUpLm1vZGFsKCdoaWRlJyk7XG5cbiAgICAgICAgICAgIHJlZnJlc2goKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICAgIENsaWVudC5saXN0VXNlcnMoZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBnZXQgdXNlciBsaXN0aW5nLicsIGVycm9yKTtcblxuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzdWx0LnVzZXJzO1xuICAgICAgICAgICAgJHNjb3BlLnJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmFkZFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvdXNlcmNyZWF0ZSc7XG4gICAgfTtcblxuICAgIHJlZnJlc2goKTtcbn1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuY29udHJvbGxlcignVXNlclBhc3N3b3JkQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICckbG9jYXRpb24nLCAnQ2xpZW50JywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkbG9jYXRpb24sIENsaWVudCkge1xuICAgIGlmICghQ2xpZW50LmdldFVzZXJJbmZvKCkuYWRtaW4pICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cbiAgICAkc2NvcGUuYWN0aXZlID0gZmFsc2U7XG4gICAgJHNjb3BlLmN1cnJlbnRQYXNzd29yZCA9ICcnO1xuICAgICRzY29wZS5uZXdQYXNzd29yZCA9ICcnO1xuICAgICRzY29wZS5yZXBlYXRQYXNzd29yZCA9ICcnO1xuICAgICRzY29wZS52YWxpZGF0aW9uQ2xhc3MgPSB7fTtcblxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS52YWxpZGF0aW9uQ2xhc3MuY3VycmVudFBhc3N3b3JkID0gJyc7XG4gICAgICAgICRzY29wZS52YWxpZGF0aW9uQ2xhc3MubmV3UGFzc3dvcmQgPSAnJztcbiAgICAgICAgJHNjb3BlLnZhbGlkYXRpb25DbGFzcy5yZXBlYXRQYXNzd29yZCA9ICcnO1xuXG4gICAgICAgIGlmICgkc2NvcGUubmV3UGFzc3dvcmQgIT09ICRzY29wZS5yZXBlYXRQYXNzd29yZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0UmVwZWF0UGFzc3dvcmQnKS5mb2N1cygpO1xuICAgICAgICAgICAgJHNjb3BlLnZhbGlkYXRpb25DbGFzcy5yZXBlYXRQYXNzd29yZCA9ICdoYXMtZXJyb3InO1xuICAgICAgICAgICAgJHNjb3BlLnJlcGVhdFBhc3N3b3JkID0gJyc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgQ2xpZW50LmNoYW5nZVBhc3N3b3JkKCRzY29wZS5jdXJyZW50UGFzc3dvcmQsICRzY29wZS5uZXdQYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0Q3VycmVudFBhc3N3b3JkJykuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmFsaWRhdGlvbkNsYXNzLmN1cnJlbnRQYXNzd29yZCA9ICdoYXMtZXJyb3InO1xuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50UGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3UGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVwZWF0UGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY2hhbmdlIHBhc3N3b3JkLicsIGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dEN1cnJlbnRQYXNzd29yZCcpLmZvY3VzKCk7XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=